<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.27.0"/><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="canonical" href="https://tecoble.techcourse.co.kr/post/2022-11-01-mysql-dead-lock/" data-baseprotocol="https:" data-basehost="tecoble.techcourse.co.kr"/><title data-react-helmet="true">데드락 해결 모험기</title><link data-react-helmet="true" rel="icon" href="data:image/vnd.microsoft.icon;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAjhJREFUeNrEV4uRgkAMzdmAlGAJdqDXgSVYgiXQgSVYgiWgFYAVYAdqBXv7kDAhhGVFPDOT8QObvPyzRDU55xLPqefSfY7KWkdCkmrlufs/yhnET/0l87ykCLper1QUBV0uF7rf79Xv5fJ5dLVa0Xq9pkgqPP9S7ZInrDx3m83GwSlJkrg0bR65LMucF149CzHObbdbV5ZRkUyJY3673arDWuBut6ve5N8QfjgcOgoAcL/fO++N5l1pQF9OUAPFv9xnFZRBQaRV1bsMBJ8wro8aAOx6iyFwDMFbQyCiPdBnKRi500cIF2Qgf4IAoMTKAXhGK7W8FUo+9oSVE9QqTm/JYrFoJRy7Dp8saKgKYLUmyMUzHQqKjWcoRyzWIOA5ywtkvaRjGsqPkCd0OOAFcC8AdrE82NcfYhjyLEOkgS0AyFSUjJXFY9nyMBoW00w259PpRN5FrYZ9Pp/pHYJMJp4Tj8ej+W+mD/BgkcNnapIyZ/Rl6gDAqJWkQzIFSZktAIiRdjlm/Dsk9wPOh/l8bgNA/OEBCcI3IPJlOEq5L0MzoVtLiyyT4/HYKZMpGxHKPNiI+rrVFK2YB54G1QHA1uqePXYYQQ53UjncgsOItxlrzr8yjq0uqtuzCQCKIRAcWjaGFhIL6GAOaPQAMXYlw0KrAehZE9wHUBUyfq8spagk9qQEAJkaQFAqlMr7QOxaDsUcTpwBa+W8lqexVn3iYvLy1QzXMbRUXM14drx1Nfv25ZS+fT3/E2AAsWMCdac8y9AAAAAASUVORK5CYII=" type="image/x-icon"/><meta data-react-helmet="true" name="description" content="용어 설명     Cycle이란, 사용자가 특정 챌린지에 도전할 때 생성되는 객체이다. 비즈니스 규칙 상 하루에 한번씩 총…"/><meta data-react-helmet="true" property="og:site_name" content="Tecoble"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="데드락 해결 모험기"/><meta data-react-helmet="true" property="og:description" content="용어 설명     Cycle이란, 사용자가 특정 챌린지에 도전할 때 생성되는 객체이다. 비즈니스 규칙 상 하루에 한번씩 총…"/><meta data-react-helmet="true" property="og:url" content="https://post/2022-11-01-mysql-dead-lock/"/><meta data-react-helmet="true" property="og:image" content="https://static/9a8e208eb938af089c498336dd233cf0/00405/deadlock_teaser.png"/><meta data-react-helmet="true" property="article:published_time" content="2022-11-21T15:00:00.000Z"/><meta data-react-helmet="true" property="article:tag" content="Mysql"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="데드락 해결 모험기"/><meta data-react-helmet="true" name="twitter:description" content="용어 설명     Cycle이란, 사용자가 특정 챌린지에 도전할 때 생성되는 객체이다. 비즈니스 규칙 상 하루에 한번씩 총…"/><meta data-react-helmet="true" name="twitter:url" content="https://post/2022-11-01-mysql-dead-lock/"/><meta data-react-helmet="true" name="twitter:image" content="https://tecoble.techcourse.co.kr//static/9a8e208eb938af089c498336dd233cf0/00405/deadlock_teaser.png"/><meta data-react-helmet="true" name="twitter:label1" content="Written by"/><meta data-react-helmet="true" name="twitter:data1" content="4기_알파"/><meta data-react-helmet="true" name="twitter:label2" content="Filed under"/><meta data-react-helmet="true" name="twitter:data2" content="Mysql"/><meta data-react-helmet="true" property="og:image:width" content="1600"/><meta data-react-helmet="true" property="og:image:height" content="1200.8602150537633"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-674180cef417bd6b6e8f.js"/><link as="script" rel="preload" href="/framework-2de79c8137b068b61a3a.js"/><link as="script" rel="preload" href="/app-7871a49fb71b5d2fd8af.js"/><link as="script" rel="preload" href="/commons-4c188b18bcaae3f07bde.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-a08628f9047d81b892e4.js"/><link as="fetch" rel="preload" href="/page-data/post/2022-11-01-mysql-dead-lock/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2130001345.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/4041952199.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="post-template"><style data-emotion="css-global 8s70am">html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline;}body{line-height:1;}ol,ul{list-style:none;}blockquote,q{quotes:none;}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;}table{border-spacing:0;border-collapse:collapse;}img{max-width:100%;}html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;}*,*:before,*:after{box-sizing:inherit;}a{background-color:transparent;}a:active,a:hover{outline:0;}b,strong{font-weight:bold;}i,em,dfn{font-style:italic;}h1{margin:0.67em 0;font-size:2em;}small{font-size:80%;}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline;}sup{top:-0.5em;}sub{bottom:-0.25em;}img{border:0;}svg:not(:root){overflow:hidden;}mark{background-color:#fdffb6;}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em;}button,input,optgroup,select,textarea{margin:0;color:inherit;font:inherit;}button{overflow:visible;border:none;}button,select{text-transform:none;}button,html input[type='button'],input[type='reset'],input[type='submit']{cursor:pointer;-webkit-appearance:button;}button[disabled],html input[disabled]{cursor:default;}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0;}input{line-height:normal;}input:focus{outline:none;}input[type='checkbox'],input[type='radio']{box-sizing:border-box;padding:0;}input[type='number']::-webkit-inner-spin-button,input[type='number']::-webkit-outer-spin-button{height:auto;}input[type='search']{box-sizing:content-box;-webkit-appearance:textfield;}input[type='search']::-webkit-search-cancel-button,input[type='search']::-webkit-search-decoration{-webkit-appearance:none;}legend{padding:0;border:0;}textarea{overflow:auto;}table{border-spacing:0;border-collapse:collapse;}td,th{padding:0;}html{overflow-x:hidden;overflow-y:scroll;font-size:62.5%;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);}body{overflow-x:hidden;color:#303a3e;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:1.6rem;line-height:1.6em;font-weight:400;font-style:normal;letter-spacing:0;text-rendering:optimizeLegibility;background:#fff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-moz-font-feature-settings:'liga' on;}hr{position:relative;display:block;width:100%;margin:2.5em 0 3.5em;padding:0;height:1px;border:0;border-top:1px solid #e4eaed;}audio,canvas,iframe,img,svg,video{vertical-align:middle;}fieldset{margin:0;padding:0;border:0;}textarea{resize:vertical;}p,ul,ol,dl,blockquote{margin:0 0 1.5em 0;}ol,ul{padding-left:1.3em;padding-right:1.5em;}ol ol,ul ul,ul ol,ol ul{margin:0.5em 0 1em;}ul{list-style:disc;}ol{list-style:decimal;}ul,ol{max-width:100%;}li{margin:0.5em 0;padding-left:0.3em;line-height:1.6em;}dt{float:left;margin:0 20px 0 0;width:120px;color:#15171A;font-weight:500;text-align:right;}dd{margin:0 0 5px 0;text-align:left;}blockquote{margin:1.5em 0;padding:0 1.6em 0 1.6em;border-left:#e5eff5 0.5em solid;}blockquote p{margin:0.8em 0;font-size:1.2em;font-weight:300;}blockquote small{display:inline-block;margin:0.8em 0 0.8em 1.5em;font-size:0.9em;opacity:0.8;}blockquote cite{font-weight:bold;}blockquote cite a{font-weight:normal;}a{color:#26a6ed;-webkit-text-decoration:none;text-decoration:none;}a:hover{-webkit-text-decoration:underline;text-decoration:underline;}h1,h2,h3,h4,h5,h6{margin-top:0;line-height:1.15;font-weight:600;text-rendering:optimizeLegibility;}h1{margin:0 0 0.5em 0;font-size:5.5rem;font-weight:600;}@media (max-width: 500px){h1{font-size:2.2rem;}}h2{margin:1.5em 0 0.5em 0;font-size:2.2rem;}@media (max-width: 500px){h2{font-size:1.8rem;}}h3{margin:1.5em 0 0.5em 0;font-size:1.8rem;font-weight:500;}@media (max-width: 500px){h3{font-size:1.7rem;}}h4{margin:1.5em 0 0.5em 0;font-size:1.6rem;font-weight:500;}h5{margin:1.5em 0 0.5em 0;font-size:1.4rem;font-weight:500;}h6{margin:1.5em 0 0.5em 0;font-size:1.4rem;font-weight:500;}body{background:#fff;}@media (prefers-color-scheme: dark){body{color:rgba(255, 255, 255, 0.75);background:#191b1f;}img{opacity:0.9;}}</style><style data-emotion="css 12e1ozp">.css-12e1ozp .site-main{margin-top:64px;background:#fff;padding-bottom:4vw;}@media (prefers-color-scheme: dark){.css-12e1ozp .site-main{background:#191b1f;}}</style><style data-emotion="css 159sn72">.css-159sn72{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}.css-159sn72 .site-main{margin-top:64px;background:#fff;padding-bottom:4vw;}@media (prefers-color-scheme: dark){.css-159sn72 .site-main{background:#191b1f;}}</style><div class="css-159sn72"><header class="site-header"><style data-emotion="css sdrsc">.css-sdrsc{position:relative;padding:0 5vw;position:fixed;top:0;right:0;left:0;z-index:1000;background:#0a0b0c;}@media (max-width: 700px){.css-sdrsc{padding-right:0;padding-left:0;}}</style><div class="css-sdrsc"><style data-emotion="css 1q5n7pp">.css-1q5n7pp{margin:0 auto;max-width:1040px;width:100%;}</style><div class="css-1q5n7pp"><style data-emotion="css 1phqi3w">.css-1phqi3w{position:relative;z-index:100;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;overflow-y:hidden;height:64px;font-size:1.3rem;}</style><nav class="css-1phqi3w"><style data-emotion="css vp1an1">.css-vp1an1{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;margin-right:10px;padding:10px 0 80px;font-weight:500;letter-spacing:0.2px;text-transform:uppercase;white-space:nowrap;-ms-overflow-scrolling:touch;}@media (max-width: 700px){.css-vp1an1{margin-right:0;padding-left:5vw;}}</style><div class="site-nav-left css-vp1an1"><style data-emotion="css 1l8e9ha">.css-1l8e9ha{position:relative;z-index:100;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:inline-block;margin-right:32px;padding:12px 0;color:#fff;font-size:1.7rem;line-height:1.8rem;font-weight:bold;letter-spacing:-0.5px;text-transform:none;}.css-1l8e9ha:hover{-webkit-text-decoration:none;text-decoration:none;}.css-1l8e9ha img{display:block;width:auto;height:21px;}</style><a class="site-nav-logo css-1l8e9ha" href="/"><img src="/static/0b18bd94a62a12fdc81ea720c28722f6/3891b/tecoble.png" alt="Tecoble"/></a><style data-emotion="css 1muigz5">.css-1muigz5{position:relative;-webkit-align-self:flex-start;-ms-flex-item-align:flex-start;align-self:flex-start;}</style><div class="css-1muigz5"><style data-emotion="css 1gas2t1">.css-1gas2t1{position:absolute;z-index:1000;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0 0 0 -12px;padding:0;list-style:none;-webkit-transition:all 1s cubic-bezier(0.19, 1, 0.22, 1);transition:all 1s cubic-bezier(0.19, 1, 0.22, 1);}.css-1gas2t1 li{display:block;margin:0;padding:0;}.css-1gas2t1 li a{position:relative;display:block;padding:12px 12px;color:#fff;opacity:0.8;-webkit-transition:opacity 0.35s ease-in-out;transition:opacity 0.35s ease-in-out;}.css-1gas2t1 li a:hover{-webkit-text-decoration:none;text-decoration:none;opacity:1;}.css-1gas2t1 li a:before{content:'';position:absolute;right:100%;bottom:8px;left:12px;height:1px;background:#fff;opacity:0.25;-webkit-transition:all 0.35s ease-in-out;transition:all 0.35s ease-in-out;}.css-1gas2t1 li a:hover:before{right:12px;opacity:0.5;}</style><ul role="menu" class="css-1gas2t1"><li role="menuitem"><a href="/">Home</a></li><li role="menuitem"><a href="https://woowacourse.github.io/">woowacourse</a></li></ul><style data-emotion="css ybggi6">.css-ybggi6{visibility:hidden;position:absolute;top:9px;color:#fff;font-size:1.7rem;font-weight:400;text-transform:none;opacity:0;-webkit-transition:all 1s cubic-bezier(0.19, 1, 0.22, 1);transition:all 1s cubic-bezier(0.19, 1, 0.22, 1);-webkit-transform:translateY(175%);-moz-transform:translateY(175%);-ms-transform:translateY(175%);transform:translateY(175%);}.css-ybggi6 .dash{left:-25px;}.css-ybggi6 .dash:before{content:'– ';opacity:0.5;}</style><span class="nav-post-title css-ybggi6">데드락 해결 모험기</span></div></div><style data-emotion="css 19iu1ve">.css-19iu1ve{-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;padding:10px 0;height:64px;}@media (max-width: 700px){.css-19iu1ve{display:none;}}</style><div class="css-19iu1ve"><style data-emotion="css ienhkd">.css-ienhkd{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-ienhkd"></div></div></nav></div></div></header><style data-emotion="css zqbwy4">.css-zqbwy4{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;position:relative;padding:0 5vw;}@media (prefers-color-scheme: dark){.css-zqbwy4{background:#191b1f;}}</style><main id="site-main" class="site-main css-zqbwy4"><div class="css-1q5n7pp"><style data-emotion="css l1e7lw">.css-l1e7lw{position:relative;z-index:50;}</style><article class="css-l1e7lw"><style data-emotion="css rxh1cu">.css-rxh1cu{position:relative;margin:0 auto;padding:70px 170px 50px;border-top-left-radius:3px;border-top-right-radius:3px;}@media (max-width: 1170px){.css-rxh1cu{padding:60px 11vw 50px;}}@media (max-width: 800px){.css-rxh1cu{padding-right:5vw;padding-left:5vw;}}@media (max-width: 500px){.css-rxh1cu{padding:20px 0 35px;}}</style><header class="post-full-header css-rxh1cu"><style data-emotion="css 1ehbhhx">.css-1ehbhhx{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#738a94;font-size:2.5rem;line-height:1.4em;font-weight:600;text-transform:uppercase;}</style><section class="post-full-tags css-1ehbhhx"><a href="/tags/mysql/">#Mysql</a><a href="/tags/dead-lock/">, <!-- -->#DeadLock</a></section><style data-emotion="css qs7bhz">.css-qs7bhz{margin:0 0 0.2em;color:#0b0c0e;}@media (max-width: 500px){.css-qs7bhz{margin-top:0.2em;font-size:3.3rem;}}@media (prefers-color-scheme: dark){.css-qs7bhz{color:rgba(255, 255, 255, 0.9);}}</style><h1 class="post-full-title css-qs7bhz">데드락 해결 모험기</h1><style data-emotion="css 1v4p0ul">.css-1v4p0ul{margin:20px 0 0;color:var(--midgrey);font-family:Georgia,serif;font-size:2.3rem;line-height:1.4em;font-weight:300;}@media (max-width: 500px){.css-1v4p0ul{font-size:1.9rem;line-height:1.5em;}}@media (prefers-color-scheme: dark){.css-1v4p0ul{color:#90a2aa;}}</style><p class="post-full-custom-excerpt css-1v4p0ul"></p><style data-emotion="css cp69tq">.css-cp69tq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:35px 0 0;padding-top:15px;border-top:1px solid #e4eaed;}.css-cp69tq .post-full-byline-content{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}.css-cp69tq .post-full-byline-content .author-list{-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;padding:0 12px 0 0;}.css-cp69tq .post-full-byline-meta{margin:2px 0 0;color:#90a2aa;font-size:1.2rem;line-height:1.2em;letter-spacing:0.2px;text-transform:uppercase;}.css-cp69tq .post-full-byline-meta h4{margin:0 0 3px;font-size:1.3rem;line-height:1.4em;font-weight:500;}.css-cp69tq .post-full-byline-meta h4 a{color:#2c3036;}.css-cp69tq .post-full-byline-meta h4 a:hover{color:#15171A;}.css-cp69tq .post-full-byline-meta .bull{display:inline-block;margin:0 4px;opacity:0.6;}@media (prefers-color-scheme: dark){.css-cp69tq{border-top-color:#3b4049;}.css-cp69tq .post-full-byline-meta h4 a{color:rgba(255, 255, 255, 0.75);}.css-cp69tq .post-full-byline-meta h4 a:hover{color:#fff;}}</style><div class="post-full-byline css-cp69tq"><section class="post-full-byline-content"><style data-emotion="css teqkql">.css-teqkql{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 0 0 4px;padding:0;list-style:none;}</style><ul class="author-list css-teqkql"><style data-emotion="css 1q168dw">.css-1q168dw{position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin:0;padding:0;}.css-1q168dw:hover .author-name-tooltip{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);transform:translateY(0px);}</style><li class="author-list-item css-1q168dw"><style data-emotion="css 1xzzdyg">.css-1xzzdyg{position:absolute;bottom:130%;left:50%;z-index:600;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-left:-200px;width:400px;font-size:1.4rem;line-height:1.5em;background:white;border-radius:3px;box-shadow:rgba(39, 44, 49, 0.08) 0 12px 26px,rgba(39, 44, 49, 0.06) 1px 3px 8px;opacity:0;-webkit-transition:all 0.35s cubic-bezier(0.4, 0.01, 0.165, 0.99);transition:all 0.35s cubic-bezier(0.4, 0.01, 0.165, 0.99);-webkit-transform:scale(0.98) translateY(15px);-moz-transform:scale(0.98) translateY(15px);-ms-transform:scale(0.98) translateY(15px);transform:scale(0.98) translateY(15px);pointer-events:none;padding:20px 20px 22px;}.css-1xzzdyg:before{content:'';position:absolute;top:100%;left:50%;display:block;margin-left:-8px;width:0;height:0;border-top:8px solid #fff;border-right:8px solid transparent;border-left:8px solid transparent;}.css-1xzzdyg .author-info{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;padding:0 0 0 20px;}.css-1xzzdyg .author-info h2{margin:8px 0 0;font-size:1.6rem;}.css-1xzzdyg .author-info p{margin:4px 0 0;color:color(var(--midgrey) l(-10%));}.css-1xzzdyg .author-info .bio h2{margin-top:0;}.css-1xzzdyg .author-info .bio p{margin-top:0.8em;}.css-1xzzdyg .author-profile-image{-webkit-flex:0 0 60px;-ms-flex:0 0 60px;flex:0 0 60px;margin:0;width:60px;height:60px;border:none;}@media (max-width: 1170px){.css-1xzzdyg{margin-left:-50px;width:430px;}.css-1xzzdyg:before{left:50px;}}@media (max-width: 650px){.css-1xzzdyg{display:none;}}@media (prefers-color-scheme: dark){.css-1xzzdyg{background:#22252a;box-shadow:0 12px 26px rgba(0, 0, 0, 0.4);}.css-1xzzdyg:before{border-top-color:#22252a;}}</style><div class="author-card css-1xzzdyg"><style data-emotion="css 121fnpm">.css-121fnpm{display:block;width:100%;height:100%;background:#e4eaed;border-radius:100%;object-fit:cover;}@media (prefers-color-scheme: dark){.css-121fnpm{background:#191b1f;}}</style><div class="author-profile-image css-121fnpm gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:82.5%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAAEO0lEQVQ4yx2U6VNTdxSG8zf6B3SmH/qhnzo6sgRwaV0RLc7U0daFqShaa62ogCDERCIEst1sJLlJSEI2kpDlroEg06cnfLhz59479/m957zvOY4r+i1G9WnGtEmcxgyjtpvz1jpDhofz+xEu7e1yJaVwI65wNRHlYv4L55sfGTnyMmKvMm7+wbh+E6d2h1vaDRzD+l3G9ElGrKcMHaxyKbfE3cgCzxUP7niShJqiXq3Qqddp1KrsqCofoxtcXXnGteRHxsrvGdLu4exNMSIsx5goHCi7mlnmQ8hLOqOiNVpYHY39ShnbsjBME90w5K5j25YcsE99r0o+lyOY2mEuuMRldVo4kwK0ZhmqruANB/nPPsLu9TjsH5EvFHB7PBwfHwvEpifvbbvH8bdv+La2SKZTnJyc0Bt80yzi0Sg3U/dxOA0XQ10Xs8oaWqtDq92mWq0SDmzz5MlDtrd95HezpNNJ1EyKbFYlEPCz5lqmVqug6TqGZdIo17gTXRSg7sJprzNS8OMNKZRLe6yurdBtVcmkoqQSCsVcmnw2SUGutBjj93lpNUsEglt0tS7JaIzZjQVGO54B0M2olRczMhRLFUKhEGuflsgJLJuKYGsH2GYHQz+g39NoVAuoO2H5FiUWDVISAdthBWfOI8asC1DLMWzpPAgG6IkRkVhMlMWpFjLS/CKx4CaT333HxJkz3JuepF4rUs5nKOVVCrsqqrQiXchzsTzgpHCMG3WG2g3eREL0xVE1k5HSUvTNLkeibFDmo+9/YPnHn3g4MobWaWB3Ra2liREK1UqFUrnIBenvqF3HMWH6OVfPsxxNcCJOVqo1McSH1W2iNWuYRpvg27ds/3KNiPTWNFqY7Tr1coGQmNM/OkSV+FzORwT4ddDDNZEa4JHfK+FtcNTvE49HKRWyksUmpoBrezkCq8vSvyJmp356RSRmFVF3cvwNtyRibN8lXrgHsfHK6H3msWuer243jWYTz7oHVY2flqwd1DCkzEO7iyHKLCn3oF5kY3Md07Qo7OVZ+vCO64kFhm2vAHuLTMiUqKJqN5PE4/3Cp+ezRD1rNPZLWK0mdquBJWCrXaN7sMeOEuL9q3fUG3VevXqJsrnB64Cbs+2/cYwa00w03/HMt0pg6yuhRIyVP5+T+/A78fRL1vzzrMfW8SgB3rv9/LsYQp3J8nnORVgWRkJS4XZ95np2Fqd5ezDLUxLsu5zdf80/W1841E3pTQ1lY57s3gxv9ce8MHy86HaYUyxWPkmZj/Osvlkhs5uhWWlybfO+GDIlS+aOKNR/ZVyTBWFNc6E2z5yEejAtmmESiW6zoLzhRdLDk3icpysJlhcVdvwxDNsg7A/zwDfDmChzGrdPOY7f9J/FlMHDFMO9aW7G/mK/VDvdKr3eEVpbp1KqyiFVUV6SUWtjH9oc9/p4ZY2dK15hXP67KPt0RrvE/zcbfpD8bYMhAAAAAElFTkSuQmCC" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1"/><noscript><picture><source srcset="/static/de921188844e6d769c2bc82372a8276d/22f7f/alpha.png 40w,
/static/de921188844e6d769c2bc82372a8276d/587c9/alpha.png 80w,
/static/de921188844e6d769c2bc82372a8276d/d966b/alpha.png 120w,
/static/de921188844e6d769c2bc82372a8276d/fffbc/alpha.png 348w" sizes="(max-width: 348px) 100vw, 348px" /><img loading="lazy" sizes="(max-width: 348px) 100vw, 348px" srcset="/static/de921188844e6d769c2bc82372a8276d/22f7f/alpha.png 40w,
/static/de921188844e6d769c2bc82372a8276d/587c9/alpha.png 80w,
/static/de921188844e6d769c2bc82372a8276d/d966b/alpha.png 120w,
/static/de921188844e6d769c2bc82372a8276d/fffbc/alpha.png 348w" src="/static/de921188844e6d769c2bc82372a8276d/fffbc/alpha.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="author-info"><div class="bio"><h2>4기_알파</h2><p>우아한테크코스 4기 알파(배철환)입니다 :)</p><p><a href="/author/4-기-알파/">More posts</a> by<!-- --> <!-- -->4기_알파<!-- -->.</p></div></div></div><style data-emotion="css cdhz0m">.css-cdhz0m{display:block;overflow:hidden;margin:0 -4px;width:40px;height:40px;border:#fff 2px solid;border-radius:100%;-webkit-transition:all 0.5s cubic-bezier(0.4, 0.01, 0.165, 0.99) 700ms;transition:all 0.5s cubic-bezier(0.4, 0.01, 0.165, 0.99) 700ms;}@media (max-width: 500px){.css-cdhz0m{width:36px;height:36px;}}@media (prefers-color-scheme: dark){.css-cdhz0m{border-color:#1a1c20;}}</style><a class="author-avatar css-cdhz0m" href="/author/4-기-알파/"><div class="author-profile-image css-121fnpm gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:82.5%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAAEO0lEQVQ4yx2U6VNTdxSG8zf6B3SmH/qhnzo6sgRwaV0RLc7U0daFqShaa62ogCDERCIEst1sJLlJSEI2kpDlroEg06cnfLhz59479/m957zvOY4r+i1G9WnGtEmcxgyjtpvz1jpDhofz+xEu7e1yJaVwI65wNRHlYv4L55sfGTnyMmKvMm7+wbh+E6d2h1vaDRzD+l3G9ElGrKcMHaxyKbfE3cgCzxUP7niShJqiXq3Qqddp1KrsqCofoxtcXXnGteRHxsrvGdLu4exNMSIsx5goHCi7mlnmQ8hLOqOiNVpYHY39ShnbsjBME90w5K5j25YcsE99r0o+lyOY2mEuuMRldVo4kwK0ZhmqruANB/nPPsLu9TjsH5EvFHB7PBwfHwvEpifvbbvH8bdv+La2SKZTnJyc0Bt80yzi0Sg3U/dxOA0XQ10Xs8oaWqtDq92mWq0SDmzz5MlDtrd95HezpNNJ1EyKbFYlEPCz5lqmVqug6TqGZdIo17gTXRSg7sJprzNS8OMNKZRLe6yurdBtVcmkoqQSCsVcmnw2SUGutBjj93lpNUsEglt0tS7JaIzZjQVGO54B0M2olRczMhRLFUKhEGuflsgJLJuKYGsH2GYHQz+g39NoVAuoO2H5FiUWDVISAdthBWfOI8asC1DLMWzpPAgG6IkRkVhMlMWpFjLS/CKx4CaT333HxJkz3JuepF4rUs5nKOVVCrsqqrQiXchzsTzgpHCMG3WG2g3eREL0xVE1k5HSUvTNLkeibFDmo+9/YPnHn3g4MobWaWB3Ra2liREK1UqFUrnIBenvqF3HMWH6OVfPsxxNcCJOVqo1McSH1W2iNWuYRpvg27ds/3KNiPTWNFqY7Tr1coGQmNM/OkSV+FzORwT4ddDDNZEa4JHfK+FtcNTvE49HKRWyksUmpoBrezkCq8vSvyJmp356RSRmFVF3cvwNtyRibN8lXrgHsfHK6H3msWuer243jWYTz7oHVY2flqwd1DCkzEO7iyHKLCn3oF5kY3Md07Qo7OVZ+vCO64kFhm2vAHuLTMiUqKJqN5PE4/3Cp+ezRD1rNPZLWK0mdquBJWCrXaN7sMeOEuL9q3fUG3VevXqJsrnB64Cbs+2/cYwa00w03/HMt0pg6yuhRIyVP5+T+/A78fRL1vzzrMfW8SgB3rv9/LsYQp3J8nnORVgWRkJS4XZ95np2Fqd5ezDLUxLsu5zdf80/W1841E3pTQ1lY57s3gxv9ce8MHy86HaYUyxWPkmZj/Osvlkhs5uhWWlybfO+GDIlS+aOKNR/ZVyTBWFNc6E2z5yEejAtmmESiW6zoLzhRdLDk3icpysJlhcVdvwxDNsg7A/zwDfDmChzGrdPOY7f9J/FlMHDFMO9aW7G/mK/VDvdKr3eEVpbp1KqyiFVUV6SUWtjH9oc9/p4ZY2dK15hXP67KPt0RrvE/zcbfpD8bYMhAAAAAElFTkSuQmCC" alt="4기_알파" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1"/><noscript><picture><source srcset="/static/de921188844e6d769c2bc82372a8276d/22f7f/alpha.png 40w,
/static/de921188844e6d769c2bc82372a8276d/587c9/alpha.png 80w,
/static/de921188844e6d769c2bc82372a8276d/d966b/alpha.png 120w,
/static/de921188844e6d769c2bc82372a8276d/fffbc/alpha.png 348w" sizes="(max-width: 348px) 100vw, 348px" /><img loading="lazy" sizes="(max-width: 348px) 100vw, 348px" srcset="/static/de921188844e6d769c2bc82372a8276d/22f7f/alpha.png 40w,
/static/de921188844e6d769c2bc82372a8276d/587c9/alpha.png 80w,
/static/de921188844e6d769c2bc82372a8276d/d966b/alpha.png 120w,
/static/de921188844e6d769c2bc82372a8276d/fffbc/alpha.png 348w" src="/static/de921188844e6d769c2bc82372a8276d/fffbc/alpha.png" alt="4기_알파" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></a></li></ul><section class="post-full-byline-meta"><h4 class="author-name"><a href="/author/4-기-알파/">4기_알파</a></h4><div class="byline-meta-content"><time class="byline-meta-date" dateTime="2022-11-21">21 Nov 2022</time><span class="byline-reading-time"><span class="bull">•</span> <!-- -->8<!-- --> min read</span></div></section></section></div></header><style data-emotion="css 4wxe1t">.css-4wxe1t{margin:25px 0 50px;height:560px;background:#c5d2d9 center center;-webkit-background-size:cover;background-size:cover;border-radius:5px;}@media (max-width: 1170px){.css-4wxe1t{margin:25px -6vw 50px;border-radius:0;}.css-4wxe1t img{max-width:1170px;}}@media (max-width: 800px){.css-4wxe1t{height:400px;}}@media (max-width: 500px){.css-4wxe1t{margin-bottom:4vw;height:350px;}}</style><figure class="css-4wxe1t"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div aria-hidden="true" style="width:100%;padding-bottom:75.05376344086021%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAPoAAAD6AG1e1JrAAADU0lEQVQozw3SaVPaCADG8XzXnd1Ou8fs0Wm7OlWoUxWpFBCNgkCEyFVBQYoYTiEYDCScOclJAiGhY+3sS98sH+B58X/mB2RTZ5fxUDp55g0H3CG/L3icuYpPONKcTzSVVmRmrk8W2ogf1nSmQZQiSOTjzvpLl2dv0MeAbBI6h0Akn+p0m2cp2BP2J3OXjWb9rn4jCn0cf2ijFZMqEuXIoAh67a92HfZKHVnoE21GA5ex4FUi3MUqy4WoylRvQAqCUKjVgnC0WS0QBDkimuNSGDrddri3YjFIlsZLUxgqWEX8CtSQLM8Q+pSbaaxlKt8fl8ZcvCnEC3lY4oemZf33/fFgf9Puc1Is8WhJqkahcgmRs1UlD1gzfmkIHD/UpoxpCNqUFhjcGBXpsr/2xUPTFDOZBKqVE7SJkdhUY4wZL2oDVCpjchXIDbuMwsp8TxbGltimm3GlHR/cBpybv3l8rh9PT5n89U9OxwYcdcXOoQeUpAlL4xbziaHzwGkbSzbrSPsO6yAmdVtJeSK+9w77PxB0wrOD5+dnSWTDkcCvto3XoeBBpQymv6TwFk51v+ZSwJtw8DUc9TXu0uTDTdK99fbF6v3+qGOZoqyOl8tv85liLiYDAt3xuX+2b2wlzt3VymEi4YxHgV3P/lvn7r9QaO+2uAbD3mKBVdmnuUApOMahNM3cD9Ge2DINWVWoUSNZzPnfBEBvIgo27wAQDh+ETmyfHC8+2G2pZIToQtVSfdwVNJZTuyhb60sdRaVMtsxhmXm/UI58tNv+Xj/eX4UB3rD/Mp/mGAJtIvZ9xy+fXWsx+Kx9n+3iHDec64wltESyouAZ5NwR3Plrc+2P5EXsvlFyHx8APfJ+MeONOf/NkBRxdB4/C8Qj4G3RfpUGUxCFl7VerpX2ZI/WN9+9CkaCY6r7aMnmXDB0DlC0MS7fNSWEUrsznV0uBHqM7/sPo5ewjKfIQhBNOLfXXx6CXqLfXkFYmZemw47cwKQaUJMLJfm6rOTqcpGfDjVN0Pi21rkQ0AsyD7o//G6zvdt2u26QnCIOLEPUdKYll2/lq9pKWF0prPY9FVWn9KPUEvEr8SHfuQkkj97vbf7p8n46gqGjaOjz6TEIBcqla1Ue6zpDKug1n/kfNk+XFlMqN+AAAAAASUVORK5CYII=" alt="데드락 해결 모험기" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/9a8e208eb938af089c498336dd233cf0/3a443/deadlock_teaser.png 930w,
/static/9a8e208eb938af089c498336dd233cf0/00405/deadlock_teaser.png 1600w" sizes="(max-width: 1600px) 100vw, 1600px" /><img loading="lazy" sizes="(max-width: 1600px) 100vw, 1600px" srcset="/static/9a8e208eb938af089c498336dd233cf0/3a443/deadlock_teaser.png 930w,
/static/9a8e208eb938af089c498336dd233cf0/00405/deadlock_teaser.png 1600w" src="/static/9a8e208eb938af089c498336dd233cf0/00405/deadlock_teaser.png" alt="데드락 해결 모험기" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></figure><style data-emotion="css 1hzbvd8">.css-1hzbvd8{position:relative;margin:0 auto;padding:0 170px 6vw;min-height:230px;font-family:Georgia,serif;font-size:2rem;line-height:1.6em;background:#fff;}@media (max-width: 1170px){.css-1hzbvd8{padding:0 11vw;}}@media (max-width: 800px){.css-1hzbvd8{padding:0 5vw;font-size:1.8rem;}}@media (max-width: 500px){.css-1hzbvd8{padding:0;}}@media (max-width: 500px){.css-1hzbvd8 .post-full-custom-excerpt{font-size:1.9rem;line-height:1.5em;}}.css-1hzbvd8 .no-image{padding-top:0;}.css-1hzbvd8 h1,.css-1hzbvd8 h2,.css-1hzbvd8 h3,.css-1hzbvd8 h4,.css-1hzbvd8 h5,.css-1hzbvd8 h6,.css-1hzbvd8 p,.css-1hzbvd8 ul,.css-1hzbvd8 ol,.css-1hzbvd8 dl,.css-1hzbvd8 pre,.css-1hzbvd8 blockquote,.css-1hzbvd8 .post-full-comments,.css-1hzbvd8 .footnotes{margin:0 0 1.5em 0;min-width:100%;}@media (max-width: 500px){.css-1hzbvd8 p,.css-1hzbvd8 ul,.css-1hzbvd8 ol,.css-1hzbvd8 dl,.css-1hzbvd8 pre,.css-1hzbvd8 .post-full-comments,.css-1hzbvd8 .footnotes{margin-bottom:1.28em;}}.css-1hzbvd8 li{word-break:break-word;}.css-1hzbvd8 li p{margin:0;}.css-1hzbvd8 a{color:#15171A;word-break:break-word;box-shadow:#15171A 0 -1px 0 inset;-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out;}.css-1hzbvd8 a:hover{color:#3eb0ef;-webkit-text-decoration:none;text-decoration:none;box-shadow:#3eb0ef 0 -1px 0 inset;}.css-1hzbvd8 strong,.css-1hzbvd8 em{color:#0a0b0c;}.css-1hzbvd8 small{display:inline-block;line-height:1.6em;}.css-1hzbvd8 img,.css-1hzbvd8 video{display:block;margin:1.5em auto;width:100%;max-width:1040px;height:auto;}@media (max-width: 1040px){.css-1hzbvd8 img,.css-1hzbvd8 video{width:100%;}}.css-1hzbvd8 img[src$='#full']{max-width:none;width:100vw;}.css-1hzbvd8 img+br+small{display:block;margin-top:-3em;margin-bottom:1.5em;text-align:center;}.css-1hzbvd8 iframe{margin:0 auto!important;}.css-1hzbvd8 blockquote{margin:0 0 1.5em;padding:0 1.5em;border-left:#3eb0ef 3px solid;}@media (max-width: 500px){.css-1hzbvd8 blockquote{padding:0 1.3em;}}.css-1hzbvd8 blockquote p{margin:0 0 1em 0;color:inherit;font-size:inherit;line-height:inherit;font-style:italic;}.css-1hzbvd8 blockquote p:last-child{margin-bottom:0;}.css-1hzbvd8 code{padding:0 5px 2px;font-size:0.8em;line-height:1em;font-weight:400!important;background:#e5eff5;border-radius:3px;}.css-1hzbvd8 p code{word-break:break-all;}.css-1hzbvd8 pre{overflow-x:auto;padding:20px;max-width:100%;color:#e5eff5;font-size:1.4rem;line-height:1.5em;border-radius:5px;}.css-1hzbvd8 pre code{padding:0;font-size:inherit;line-height:inherit;background:transparent;}.css-1hzbvd8 pre code :not(span){color:inherit;}.css-1hzbvd8 .fluid-width-video-wrapper{margin:1.5em 0 3em;}.css-1hzbvd8 hr{margin:2em 0;}.css-1hzbvd8 hr:after{content:'';position:absolute;top:-15px;left:50%;display:block;margin-left:-10px;width:1px;height:30px;background:#e4eaed;box-shadow:#fff 0 0 0 5px;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);}.css-1hzbvd8 hr+p{margin-top:1.2em;}.css-1hzbvd8 h1,.css-1hzbvd8 h2,.css-1hzbvd8 h3,.css-1hzbvd8 h4,.css-1hzbvd8 h5,.css-1hzbvd8 h6{color:#0a0b0c;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;}.css-1hzbvd8 h1{margin:0.5em 0 0.4em;font-size:4.2rem;line-height:1.25em;font-weight:600;}.css-1hzbvd8 p+h1{margin-top:0.8em;}@media (max-width: 800px){.css-1hzbvd8 h1{font-size:3.2rem;line-height:1.25em;}}.css-1hzbvd8 h2{margin:0.5em 0 0.4em;font-size:3.2rem;line-height:1.25em;font-weight:600;}.css-1hzbvd8 p+h2{margin-top:0.8em;}@media (max-width: 800px){.css-1hzbvd8 h2{margin-bottom:0.3em;font-size:2.8rem;line-height:1.25em;}}.css-1hzbvd8 h3{margin:0.5em 0 0.2em;font-size:2.5rem;line-height:1.3em;font-weight:600;}.css-1hzbvd8 h2+h3{margin-top:0.7em;}@media (max-width: 800px){.css-1hzbvd8 h3{margin-bottom:0.3em;font-size:2.4rem;line-height:1.3em;}}.css-1hzbvd8 h4{margin:0.5em 0 0.2em;font-size:2.5rem;font-weight:600;}.css-1hzbvd8 h2+h4{margin-top:0.7em;}.css-1hzbvd8 h3+h4{margin-top:0;}@media (max-width: 800px){.css-1hzbvd8 h4{margin-bottom:0.3em;font-size:2.4rem;line-height:1.3em;}}.css-1hzbvd8 h5{display:block;margin:0.5em 0;padding:0.4em 1em 0.9em;border:0;color:#3eb0ef;font-family:Georgia,serif;font-size:3.2rem;line-height:1.35em;text-align:center;}@media (min-width: 1180px){.css-1hzbvd8 h5{max-width:1060px;}}@media (max-width: 800px){.css-1hzbvd8 h5{margin-bottom:1em;margin-left:1.3em;padding:0 0 0.5em;font-size:2.4rem;text-align:initial;}}.css-1hzbvd8 h6{margin:0.5em 0 0.2em 0;font-size:2rem;font-weight:700;}@media (max-width: 800px){.css-1hzbvd8 h6{font-size:1.8rem;line-height:1.4em;}}.css-1hzbvd8 table{display:inline-block;overflow-x:auto;margin:0.5em 0 2.5em;max-width:100%;width:auto;border-spacing:0;border-collapse:collapse;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:1.6rem;white-space:nowrap;vertical-align:top;}.css-1hzbvd8 table{-webkit-overflow-scrolling:touch;background:radial-gradient(ellipse at left, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0) 75%) 0 center,radial-gradient(ellipse at right, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0) 75%) 100% center;background-attachment:scroll,scroll;-webkit-background-size:10px 100%,10px 100%;background-size:10px 100%,10px 100%;background-repeat:no-repeat;}.css-1hzbvd8 table td:first-of-type{background-image:linear-gradient(
      to right,
      rgba(255, 255, 255, 1) 50%,
      rgba(255, 255, 255, 0) 100%
    );-webkit-background-size:20px 100%;background-size:20px 100%;background-repeat:no-repeat;}.css-1hzbvd8 table td:last-child{background-image:linear-gradient(
      to left,
      rgba(255, 255, 255, 1) 50%,
      rgba(255, 255, 255, 0) 100%
    );-webkit-background-position:100% 0;background-position:100% 0;-webkit-background-size:20px 100%;background-size:20px 100%;background-repeat:no-repeat;}.css-1hzbvd8 table th{color:#15171A;font-size:1.2rem;font-weight:700;letter-spacing:0.2px;text-align:left;text-transform:uppercase;background-color:#f4f8fb;}.css-1hzbvd8 table th,.css-1hzbvd8 table td{padding:6px 12px;border:#e1edf4 1px solid;}@media (prefers-color-scheme: dark){.css-1hzbvd8{background:#191b1f;}.css-1hzbvd8 h1,.css-1hzbvd8 h2,.css-1hzbvd8 h3,.css-1hzbvd8 h4,.css-1hzbvd8 h6{color:rgba(255, 255, 255, 0.9);}.css-1hzbvd8 a{color:#fff;box-shadow:inset 0 -1px 0 #fff;}.css-1hzbvd8 strong{color:#fff;}.css-1hzbvd8 em{color:#fff;}.css-1hzbvd8 code{color:#fff;background:#000;}.css-1hzbvd8 hr{border-top-color:#2b2f36;}.css-1hzbvd8 figcaption{color:rgba(255, 255, 255, 0.6);}.css-1hzbvd8 table td:first-of-type{background-image:linear-gradient(to right, #191b1f 50%, #191b1f 100%);}.css-1hzbvd8 table td:last-child{background-image:linear-gradient(270deg, #191b1f 50%, rgba(25, 27, 31, 0));}.css-1hzbvd8 table th{color:rgba(255, 255, 255, 0.85);background-color:#2b2f36;}.css-1hzbvd8 table th,.css-1hzbvd8 table td{border:#2b2f36 1px solid;}.css-1hzbvd8 .kg-bookmark-container,.css-1hzbvd8 .kg-bookmark-container:hover{color:rgba(255, 255, 255, 0.75);box-shadow:0 0 1px rgba(255, 255, 255, 0.9);}}.css-1hzbvd8 code[class*='language-'],.css-1hzbvd8 pre[class*='language-']{color:white;background:none;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;font-feature-settings:normal;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;margin-bottom:0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-1hzbvd8 pre[class*='language-']{overflow:auto;}.css-1hzbvd8 *:not(pre)>code[class*='language-']{border-radius:0.3em;background:rgb(1, 22, 39);color:white;padding:0.15em 0.5em;white-space:normal;}.css-1hzbvd8 .token.attr-name{color:rgb(173, 219, 103);font-style:italic;}.css-1hzbvd8 .token.comment{color:rgb(128, 147, 147);}.css-1hzbvd8 .token.string,.css-1hzbvd8 .token.url{color:rgb(173, 219, 103);}.css-1hzbvd8 .token.variable{color:rgb(214, 222, 235);}.css-1hzbvd8 .token.number{color:rgb(247, 140, 108);}.css-1hzbvd8 .token.builtin,.css-1hzbvd8 .token.char,.css-1hzbvd8 .token.constant,.css-1hzbvd8 .token.function{color:rgb(130, 170, 255);}.css-1hzbvd8 .token.punctuation{color:rgb(199, 146, 234);}.css-1hzbvd8 .token.selector,.css-1hzbvd8 .token.doctype{color:rgb(199, 146, 234);font-style:'italic';}.css-1hzbvd8 .token.class-name{color:rgb(255, 203, 139);}.css-1hzbvd8 .token.tag,.css-1hzbvd8 .token.operator,.css-1hzbvd8 .token.keyword{color:#ffa7c4;}.css-1hzbvd8 .token.boolean{color:rgb(255, 88, 116);}.css-1hzbvd8 .token.property{color:rgb(128, 203, 196);}.css-1hzbvd8 .token.namespace{color:rgb(178, 204, 214);}.css-1hzbvd8 pre[data-line]{padding:1em 0 1em 3em;position:relative;}.css-1hzbvd8 .gatsby-highlight-code-line{background-color:hsla(207, 95%, 15%, 1);display:block;margin-right:-1.3125rem;margin-left:-1.3125rem;padding-right:1em;padding-left:1.25em;border-left:0.25em solid #ffa7c4;}.css-1hzbvd8 .gatsby-highlight{margin-bottom:1.75rem;margin-left:-1.3125rem;margin-right:-1.3125rem;border-radius:10px;background:#011627;-webkit-overflow-scrolling:touch;overflow:auto;}.css-1hzbvd8 .gatsby-highlight pre[class*='language-']{float:left;min-width:100%;}</style><section class="post-full-content css-1hzbvd8"><div><h2>용어 설명</h2>
<p>    Cycle이란, 사용자가 특정 챌린지에 도전할 때 생성되는 객체이다. 비즈니스 규칙 상 하루에 한번씩 총 3일을 인증해야 하며, 하루에 여러번 인증을 할 수는 없다. 아직 인증을 하지 않은 상황에서 활동을 인증하게 되면 인증 내역인 CycleDetail이라는 객체가 생성된다. 따라서, 3일 동안 정상적으로 하루헤 한번씩 3번 인증을 하게 되면 총 3개의 CycleDetail이 생성되고, 하나의 Cycle은 최대 3개의 CycleDetail을 가지게 된다</p>
<h2>문제 상황(1)</h2>
<p>    QA 시 일반적 시나리오에서는 Cycle의 인증이 예상한대로 동작했으나, “하나의 계정에 두 기기가 접속하여 동일한 Cycle을 인증하는 경우”가 궁금해져 QA를 진행하게 되었다. 이 때 “한번에 하나의 인증만 이루어져야 한다”라는 비즈니스 로직에 의해 인증하려는 Cycle에 대응되는 CycleDetail이 하나만 있는 것을 기대했으나, 실제로는 2개 이상의 CycleDetail이 남아있는 문제가 발생하게 되었다.</p>
<p align="center">
       <img src="https://user-images.githubusercontent.com/50986686/199098853-f7b8e40b-c5ca-4655-bfec-85b98bea4bac.png" align="center" width="1000" height="200"/>
      </p>
<p>    전형적인 동시성 문제로 판단 되었고, 이에 대한 해결책은 lock을 거는 것으로 알고 있었다. 하지만 이미 mysql 내부에서 우리도 모르는 lock을 비일비재하게 걸고 있기 때문에 추가적으로 lock을 걸었을 때 다른 쿼리들이 예상치 못하게 대기하는 상황이 발생할 수 있을 수 있다. 따라서, 최대한 lock을 지양한 채로 해당 문제를 풀고 싶었다.</p>
<p>    문제가 되는 부분은 CycleDetail이 두번 이상 삽입되는 것이 문제이기 때문에 이것을 방지한다면, 문제를 해결하는 것과 같다고 판단하여 CycleDetail의 외래키인 cycle_id와 현재 몇번째 인증인지를 나타내는 progress를 복합 unique 제약조건을 걸게 되면 삽입이 한번만 이루어질 것이라고 예상하였다</p>
<h2>문제 상황(2)</h2>
<p>    결과적으로는 하나의 기기는 성공하고 다른 기기는 실패하는 것을 확인하였으나, 문제는 에러 메세지였다. 실패한 쪽에서의 예상되는 에러 메세지는 미리 정의한 커스텀한 에러 메세지인 “인증 시간이 지났습니다” 였으나, 실제 에러 메세지는 “알 수 없는 에러가 발생하였습니다”가 나타났다. 로그를 분석해보니, 데드락이 발생하였다는 에러 로그를 마주하게 되었다.</p>
<p align="center">
       <img src="https://user-images.githubusercontent.com/50986686/199099254-7bc6cbf1-3a1a-4b3f-a3db-d8a956fe6093.png" align="center" width="1000" height="200"/>
      </p>
<h2>가설 수립 및 원인 규명</h2>
<p>    따라서, 실제 Mysql에서 어떤 쿼리가 데드락을 발생시켰는지 알고자 DB 서버에 접속하여 확인해보았다. 이 때 데드락을 발생시킨 직접적인 원인이 되는 쿼리는 Cycle의 progress를 바꾸는 Update문과 CycleDetail을 insert하는 쿼리였다</p>
<p align="center">
       <img src="https://user-images.githubusercontent.com/50986686/199100038-5aaf25ee-ce34-4a04-b0a2-60b70e016d7e.png" align="center" width="800" height="600"/>
      </p>
<p>   문제를 해결하기 위한 unique 제약조건이 추가된 설정을 기준으로 트랜잭션의 각 흐름에 따른 lock의 획득 과정을 그림으로 도식화하면 다음과 같다</p>
<p align="center">
       <img src="https://user-images.githubusercontent.com/50986686/199100493-4fec7d93-4714-4916-abd5-8511e801b729.png" align="center" width="800" height="600"/>
      </p>
<p>   먼저 트랜잭션 1이 insert문을 통해 이유는 알 수 없지만 Cycle에 대한 shared lock을 걸게 된다. 설명의 편의를 위해 트랜잭션 1이 Cycle에 대해 건 shared lock을 초록색 타원으로 표기하였다</p>
<p align="center">
       <img src="https://user-images.githubusercontent.com/50986686/199100699-f36fd92f-85eb-403b-b344-3db1c238be91.png" align="center" width="800" height="600"/>
      </p>
<p>    이후 트랜잭션 2가 역시 insert문을 통해 이번에도 이유는 알 수 없지만 Cycle에 대한 shared lock을 걸게 된다. 이 때 shared lock은 말 그대로 lock간의 공유가 가능하기 때문에 여기서 데드락이 발생하지는 않는다. 마찬가지로 설명의 편의를 위해 트랜잭션 2가 Cycle에 대해 건 shared lock을 파란색 타원으로 표기하였다</p>
<p align="center">
       <img src="https://user-images.githubusercontent.com/50986686/199100923-f1b97cff-a46e-4339-9fe5-d100ef2512d4.png" align="center" width="800" height="400"/>
      </p>
<p>    먼저 insert한 트랜잭션 1에 의해 unique 제약조건으로 생성된 인덱스에 CycleDetail이 삽입이 되고, 이에 대한 exclusive lock이 걸리게 된다. 따라서 트랜잭션 2에서의 insert 쿼리는 첫번째 트랜잭션이 획득한 exclusive lock에 의해 대기하게 된다</p>
<p align="center">
       <img src="https://user-images.githubusercontent.com/50986686/199101485-f429da01-62fe-415f-a0b9-7313353729c0.png" align="center" width="800" height="600"/>
      </p>
<p>    이후 트랜잭션 1이 Cycle의 상황을 바꾸려한다. 이 때 데드락이 발생하게 되는데, 그 이유는 트랜잭션 1의 입장에서는 update하기 위해서는 트랜잭션 2의 Cycle에 대한 shared lock을 풀어야 하고, 트랜잭션 2의 입장에서는 insert하기 위해서는 트랜잭션 1의 CycleDetail에 대한 exclusive lock을 풀어야 하기 때문이다. 따라서, unqiue 제약조건으로는 데드락 문제를 해결할 수 없었다</p>
<p>    그런데 사실 Cycle에 대한 shared lock이 애초에 없었다면 데드락이 발생하지는 않았을 것이다. 따라서 왜 설정하지도 않은 shared lock이 발생하는지에 대해 알아보기로 하였다. 여러 가설이 있었으나 가장 유력한 가설은 학부 시절 데이터베이스 개론에 배웠던 “참조 무결성 원칙”이 공유락을 발생시킨다는 가설이었다</p>
<p>    참조 무결성이란 외래키는 참조할 수 없는 값을 가질 수 없다는 규칙이다. CycleDetail을 삽입할 때 왜래키인 cycle<em>id를 참조하고 있다. 해당 쿼리를 보는 개발자의 입장에서는 모든 맥락을 이해하기 때문에 insert 쿼리에 참조하는 cycle</em>id는 존재한다는 사실을 알지만, DB입장에서는 전혀 그렇지 않기 때문에 현재 쿼리가 참조 무결성을 위반할 수 있다고 생각할 수 있다. 실제로 문제 해결을 위해 참고하던 Real MySQL에서도 외래키와 데드락의 연관성에 대해 지적하고 있었다.</p>
<blockquote>
<p>“외래키는 부모테이블이나 자식 테이블에 데이터가 있는지 체크하는 작업이 필요하므로 잠금이 여러 테이블로 전파되고,
그로인해 데드락이 발생할 수 있다. 그래서 실무에서는 잘 사용하지 않는다.”</p>
</blockquote>
<h2>해결책</h2>
<ul>
<li>
<p>Optimistic lock</p>
<p>  unique 제약 조건에 의해서도 문제 상황을 풀 수는 없었다. 또한 insert와 delete의 쿼리를 바꿔버리게 되면 Cycle에 대한 shared lock을 두 트랜잭션 모두 들고 있을 필요가 없기 때문에 데드락이 발생하지 않을 수 있다는 생각이 들었다. 하지만, JPA는 insert 쿼리에 대해서는 쓰기 지연을 하지 않고 즉시 DB로 보내기 때문에 굳이 update를 먼저 실행시키고 싶다면 강제적으로 flush를 해줘야 한다. 하지만 그렇게 되면 도메인 레벨에서 DB 관련된 로직이 불필요하게 들어가게 되기 때문에 도메인의 책임이라는 관점에서는 부자연스럽다고 판단하였다</p>
<p>  그런데, 데드락을 발생시키는 상황 자체가 상당히 낮은 확률로 이루어지기 때문에 Optimistic lock을 사용하는 것이 좀 더 자연스럽다고 판단하여 Optimistic lock을 해당 문제를 해결해보려고 시도했다. 또한, 기존의 unique 제약조건에 의해 insert시 오히려 추가적인 배타 락이 발생하며 데드락 문제를 해결하지 못하기 때문에 unique 제약 조건은 제거하기로 하였다. 그러나 결론적으로 Optimistic lock도 데드락을 해결해주지 못했다</p>
<p align="center">
   <img src="https://user-images.githubusercontent.com/50986686/199102173-456c03e8-2c48-497a-bb60-d6070d93ac4d.png" align="center" width="800" height="600"/>
  </p>
 
 초기 상황은 위 그림과 같다. 초기의 Cycle의 version은 0으로 초기화 된 상황이다. 단순히 조회만 하였기 때문에 version의 변화는 없다
 <p align="center">
   <img src="https://user-images.githubusercontent.com/50986686/199102457-4a3bf6ba-709c-41f2-879c-d7a48b994f10.png" align="center" width="800" height="600"/>
  </p>
 
  이후 트랜잭션 1이 CycleDetail을 삽입하게 된다. 이 때 참조 무결성 원칙에 의해 트랜잭션 1은 Cycle에 대한 shared lock을 점유하게 된다. 이 때 주의해야 할 점은 비록 CycleDetail이 삽입된다고 하더라도 Cycle의 version은 증가하지 않는다는 점이다. 설명의 편의를 위해 트랜잭션 1이 Cycle에 대해 건 shared lock을 주황색 타원으로 표기하였다
 <p align="center">
   <img src="https://user-images.githubusercontent.com/50986686/199102641-54f0b393-9c56-4e56-ba01-58a642d820a9.png" align="center" width="800" height="600"/>
  </p>
<p>  트랜잭션 2 역시 후속과정으로 CycleDetail을 삽입하게 된다. 같은 논리에 의해 트랜잭션 2 역시 Cycle에 대한 shared lock을 획득한다. 설명의 편의를 위해 트랜잭션 2가 Cycle에 대해 건 shared lock을 청록색 타원으로 표기하였다</p>
<p align="center">
   <img src="https://user-images.githubusercontent.com/50986686/199102954-be31623b-59c7-4a1d-961f-f9aa358c0ff1.png" align="center" width="800" height="600"/>
  </p>
<p>  위 그림 8에서는 트랜잭션 2가 트랜잭션 1이 점유한 shared lock에 의해 update 쿼리가 대기하는 모습이다. 결국 versioning도 쿼리가 실행되어야 하기 때문에 대기에 의해 versioning이 이루어지지 않는다</p>
<p align="center">
   <img src="https://user-images.githubusercontent.com/50986686/199103167-3f7c8029-778d-4314-bde1-73c4621efdb2.png" align="center" width="800" height="600"/>
  </p>
 
  현재 트랜잭션 1이 바꾸려는 Cycle의 version이 최신이므로, 트랜잭션 1의 update문이 실행되게 된다. 그러나, 트랜잭션 1도 update문이 위 그림 8에서의 논리에 의해 대기하게 된다. 따라서, 양 측이 commit이나 rollback이 되지 않는 이상 두 트랜잭션 모두 update 쿼리가 무한히 대기하게 된다. 따라서, Optimistic lock으로도 데드락을 해결할 수 없다. 결국 최종적으로 mysql에서 트랜잭션 1과 2 중 임의의 트랜잭션을 rollback하게 되고, 최종적으로는 Cycle의 versioning이 0에서 1로 이루어진
</li>
<li>
<p>Pessimistic lock</p>
<p>따라서, “데드락을 해결”하기 위해서는 남은 선택지가 Pessimistic lock밖에 없었고, 해당 방법으로 동시성 문제를 해결하게 되었다. Pessimistic lock이 데드락을 해결하는 방법은 아래 그림과 같다</p>
<p align="center">
<img src="https://user-images.githubusercontent.com/50986686/199103706-d666402e-577f-485d-b73e-27795a7a71f6.png" align="center" width="800" height="600"/>
</p>
<p>위 그림은 트랜잭션 1이 Cycle에 대한 exclusive lock을 거는 모습을 도식화한 모습이다. 설명의 편의를 위해 트랜잭션 1이 Cycle에 대해 건 exclusive lock을 보라색 타원으로 표기하였다</p>
<p align="center">
<img src="https://user-images.githubusercontent.com/50986686/199103818-34934345-e924-4680-af72-d80a6488793a.png" align="center" width="800" height="600"/>
</p>
 
exclusive lock은 exclusive lock 사이의 공유를 허용하지 않으므로 트랜잭션 2의 Cycle에 대한 select문은 대기하게 된다
<p align="center">
<img src="https://user-images.githubusercontent.com/50986686/199104101-b5f9ad83-7916-4fef-a5b2-f8d0ae8c2974.png" align="center" width="800" height="600"/>
</p>
<p> 이후 트랜잭션 1은 insert와 update를 정상적으로 진행되게 된다. 이 때 데드락은 발생하지 않는데, 트랜잭션 2가 select 조차 하지 못하고 대기 중이기 때문이다. 따라서 트랜잭션 1은 무사히 커밋되게 된다</p>
<p align="center">
  <img src="https://user-images.githubusercontent.com/50986686/199104421-05bb29a3-a6a7-4e87-a19c-33559e45729a.png" align="center" width="800" height="600"/>
 </p>
<p> 트랜잭션 1이 커밋되었기 때문에 보라색 타원으로 나타내었던 트랜잭션 1의 Cycle에 대한 exclusive lock이 해제되었다. 따라서 트랜잭션 2는 비로소 select 쿼리를 실행할 수 있다. 그러나, 이미 상태가 바뀐 Cycle에 대해 트랜잭션 2가 update를 하려하는 순간, 서비스 레이어에서 작성된 방어 로직에 의해 DB에서 예외가 발생하지 않고 Application단에서 정의된 커스텀 예외가 발생하게 된다. 따라서 데드락은 발생하지 않는다. 아래는 Pessimistic lock을 설정한 코드이다</p>
<ul>
<li>
<p>Repository Layer</p>
<p align="center">
 <img src="https://user-images.githubusercontent.com/50986686/199104655-b68789ff-d4d5-428d-8e0f-1f182d8f0ced.png" align="center" width="800" height="300"/>
</p>
</li>
<li>
<p>Service Layer</p>
<p align="center">
<img src="https://user-images.githubusercontent.com/50986686/199104935-93bccacd-40f8-47df-ae00-af78b815ccf5.png" align="center" width="800" height="500"/>
</p>
</li>
<li>
<p>Test code</p>
<p align="center">
<img src="https://user-images.githubusercontent.com/50986686/199105211-33363d22-bf61-4f21-a353-71e4873a69c2.png" align="center" width="800" height="500"/>
</p>
<p align="center">
<img src="https://user-images.githubusercontent.com/50986686/199105328-521b681a-0cba-4d4f-a20a-b9b8eccc6e79.png" align="center" width="800" height="500"/>
</p>
</li>
</ul>
</li>
</ul>
<h2>의문점</h2>
<ul>
<li>
<p>첫번째 의문점 </p>
<p>  그런데 데드락을 해결한 이후, 한가지 의문점이 들었다. “과연 아무것도 하지 않았을 때, 즉 락이나 unqiue 제약조건, versioning 따위를 하지 않았을 때도 데드락이 발생하는가?”이다. 실제로 테스트를 해본 결과 동시성 문제와 데드락 문제가 동시에 발생하는 것을 알 수 있었다. 동시성과 데드락이 양립할 수 없다고 생각했으나, 아래와 같은 흐름이라면 충분히 양립할 수 있다는 것을 파악하였다</p>
<p align="center">
    <img src="https://user-images.githubusercontent.com/50986686/199105639-b1aebbc3-bb3a-465a-91a5-1a1c75de391d.png" align="center" width="800" height="400"/>
  </p>
  우선 트랜잭션 1과 트랜잭션 2의 관계부터 살펴보자. 트랜잭션 1은 트랜잭션 2보다 더 빨리 insert를 하였고 그에 따라 Cycle에 대한 shared lock을 획득한다. 트랜잭션 2는 트랜잭션 1이 update문을 실행하기 전에 동일한 Cycle에 대한 shared lock을 역시 획득한다. 따라서 트랜잭션 1이 update를 수행하게 되면 트랜잭션 2가 가진 shared lock에 의해 update가 대기하게 된다. 이후 트랜잭션 2가 update를 수행하려는 순간, 서로의 shared lock을 놓아야 update가 어느 한쪽에서라도 진행되기 때문에 데드락이 발생한다.
  데드락이 발생하였기 때문에 mysql에서는 트랜잭션 1과 트랜잭션 2 중 어느 하나를 롤백시켜야 한다. 이 때 설명의 편의를 위해 트랜잭션 2를 rollback한다고 하자. 따라서, 트랜잭션 1은 정상적으로 커밋이 된다
  다음으로 트랜잭션 1과 트랜잭션 3의 관계를 살펴보자. 트랜잭션 3은 트랜잭션 1이 commit되기 이전에 시작이 됨을 알 수 있다. 따라서, mysql의 기본 트랜잭션 격리 속성인 REPEATABLE READ에 의해 아직 상태가 바뀌지 않은 Cycle을 획득하게 된다. 이후 트랜잭션 1이 커밋이 되고, 그 이후에 트랜잭션 3이 insert를 수행하면서 Cycle에 대한 shared lock을 획득하게 된다. 이 시점에는 이미 트랜잭션 1이 commit 되었기 때문에 현재 Cycle에 대한 shared lock은 트랜잭션 3만 가지고 있다
  따라서, 트랜잭션 3은 무난하게 update 쿼리까지 수행하게 되고, commit까지 완료된다. 따라서, 같은 Cycle에 대해 트랜잭션 1과 트랜잭션 3에서 수행한 insert에 의해 동시성 문제가 발생하게 된다. 왜냐하면 “하루에 한번만 인증할 수 있다”라는 규칙에 의해 insert가 한번만 정상적으로 이루어져야 하기 때문이다. 따라서, 위 경우라면 충분히 데드락과 동시성 문제가 양립할 수 있다
 
</li>
<li>
<p>두번째 의문점 </p>
<p>  추가로, “이 문제를 DB에 의존하여 풀지 않고 application단에서 풀 수 없을까?”라는 의문점도 생각해보았다. 자바에서의 대표적 동시성 처리 방법인 synchronized와 동시성을 지원하는 자료구조인ConcurrentMap을 이용하여 문제를 해결할 수 있다고 생각했다. 코드는 아래와 같다</p>
<ul>
<li>
<p>Concurrency Layer</p>
<p align="center">
     <img src="https://user-images.githubusercontent.com/50986686/199106502-3a583879-3fea-44b4-91c9-fd0f591049b8.png" align="center" width="800" height="500"/>
    </p>
 
</li>
<li>
<p>Controller Layer</p>
<p align="center">
   <img src="https://user-images.githubusercontent.com/50986686/199106703-ae0b869a-43cb-4787-8ac7-5ebf1c32a8f1.png" align="center" width="800" height="500"/>
 </p>
 
</li>
<li>
<p>Service Layer</p>
<p align="center">
   <img src="https://user-images.githubusercontent.com/50986686/199106790-9b8a8b2c-cb59-4bc2-9ffb-41e19c27dd69.png" align="center" width="800" height="600"/>
 </p>
</li>
<li>
<p>Test code</p>
<p align="center">
 <img src="https://user-images.githubusercontent.com/50986686/199107007-9eac3e47-96ef-49ab-9bd1-be09287589c7.png" align="center" width="800" height="500"/>
</p>
<p align="center">
 <img src="https://user-images.githubusercontent.com/50986686/199107093-0b19d9bb-7df8-47ca-b6a3-3e31cef208a0.png" align="center" width="800" height="500"/>
</p>
<p> 위 코드가 정상적으로 동작하는 이유는 SyncManager 객체가 멀티스레드에 의해 각자 생성된다고 하더라도, 특정 id에 대한 lock 객체(여기서는 Object 객체)는 static 변수인 ConcurrentMap에 의해 공유되기 때문이다. 또한, 특정 id가 ConcurrentMap가 없다면 computeIfAbsent를 통해 락 객체를 삽입하게 되는데, ConcurrentMap의 특성 상, computeIfAbsent는 각 id별로 atomic하기 때문에 lock 객체의 동일성을 보장할 수 있다</p>
<p> 여기서 어차피 lock 객체가 같다면 SyncManager의 getLock을 접근 제어자를 private에서 public으로 바꾸고 Service Layer에서 별도의 synchronized block으로 처리하면 되지 않느냐고 생각할 수 있다. 하지만, 이미 비즈니스 로직을 담당하는 메소드에 @Transactional이 붙어있기 때문에 원하는 대로 동작하지 않는다. 이유를 간단히 말하면 @Transactional은 프록시로 동작하기 때문이다. 따라서, 프록시로 진행되는 부분은 동시성 제어를 받지 않는다</p>
<p align="center">
 <img src="https://user-images.githubusercontent.com/50986686/199107505-366309ca-fd6f-4736-afdd-b430fd5f35b5.png" align="center" width="800" height="500"/>
</p>
<p> 위 그림에서 스레드 1이 먼저 lock 객체를 획득하여 비즈니스 로직을 진행하게 된다. 따라서 스레드 2는 프록시 객체에서 target 객체의 메소드를 실행할 수 없기 때문에 대기하게 된다. 이 때 스레드 1에서 실행했던 비즈니스 로직이 끝나게 된다. 이후는 다시 프록시가 주체가 되어 진행이 된다. 그런데, 바로 비즈니스 로직이 끝나고 프록시의 로직이 실행되는 순간, lock 객체에 대한 획득을 잃어버리게 되므로 스레드 2의 target 객체가 비즈니스 로직을 실행할 수 있는 빌미를 제공한다. 왜냐면 스레드 1의 현재 실행 주체는 프록시이기 때문이다. 따라서, 경우에 따라 동시성 문제가 발생할 수도 있고 데드락 문제가 발생할 수도 있다. </p>
<p> 결국 원하는 결과를 만들어내기 위해서는 비즈니스 로직 외부에서 synchronized로 Service Layer의 비즈니스 로직을 감싸주어야 한다. 그렇기 때문에 Controller Layer에서 Concurrent Layer를 통해 Service Layer의 로직을 실행하는 흐름으로 진행된다</p>
</li>
</ul>
</li>
<li>
<p>세번째 의문점</p>
<p>    하나의 WAS와 하나의 DB라면 synchronized로 해결할 수 있고, 복수의 WAS와 하나의 DB라면 DB lock을 통해 해결할 수 있음을 파악하였다. <br/>그렇다면 최종적으로 “복수의 WAS와 복수의 DB라면 해당 문제를 어떻게 해결할 수 있을까?”라는 의문이 발생하였다. 코치님들에게 자문한 결과, <br/>“분산 락”을 통해 해결할 수 있다고 하셨다. 구현하는 방법은 Redis나 ZooKeeper, 혹은 mysql에서도 named lock을 통해 직접 구현할 수 있다고 한다</p>
</li>
</ul>
<h2>마무리</h2>
<p>    그럼에도 불구하고 현재 exclusive lock을 걸어서 해결한 것이 최선인지는 솔직히 의문이다. 결국 lock을 건다는 것은 성능상으로 매우 위험한 선택이기 때문이다. 이미 이에 대해 팀에서 많은 논의를 거쳤고 각종 테스트를 통해 lock에 의한 유의미한 성능 저하는 관찰되지 않았으나, 예상치 못한 부분에서 성능 저하가 발생할 수 있는 가능성이 있다는 점은 부인할 수 없다.</p>
<p>    결국 데드락의 직접적 원인인 “외래키 제약조건”을 아예 삭제하는 것이 가장 문제를 근본적으로 해결하는 방법이라고 생각한다. 즉, 테이블을 최초에 잘못 설계한 측면이 있다고 생각한다. 결국 처음 설계할 때부터 외래키 제약이 없도록 설계했으면 데드락이 발생하지 않고 단순히 동시성 문제에서 끝났을 것이기 때문이다.</p>
<p>    외래키를 없애면 데드락 문제를 해결할 수 있지만 그럼에도 불구하고 발생가능성이 있는 동시성 문제를 반드시 죄악시해야 하는 것인가에 대한 의문이 남는다. 사실 하나의 Cycle에 대해 동시에 여러번 인증이 이루어져도 금전적이거나 프로젝트 사이트에서 이용상 불편한 점, 혹은 다른 사용자에게 피해를 입히는 점이 없다면 사실 데이터 정합성이 맞지 않더라도 사용자에게는 하루에 하나만 인증되는 것처럼 보여주기만 해도 문제가 없다</p>
<p>    어쨌든 처음으로 동시성 문제를 마주하였는데 생각보다 알아야 할 내용이 많았다. 또한 전공 시간에 배운 “참조 무결성 원칙”이 직접적인 원인으로 나타난 문제 상황을 마주하여 흥미로웠다. 일상적으로 쓰이는 쿼리에 mysql이 어떻게 내부적으로 lock을 수행하는지도 조금이나마 알게 되어 흥미로웠으나, 이해하는 과정이 매우 어려웠다. 마지막으로 synchronized와 @Transactional을 같이 사용할 때의 문제까지 추가되어 해결하고 글을 작성하기까지 오랜 시간이 걸려서 해결하는 내내 힘들었다. 그러나, 하나의 문제의 원인을 파악하고, 그에 대한 여러 해결책을 적용해보고 각 결과의 원인을 파악하는 것은 재미있었고 결과적으로 lock에 대한 학습을 많이 하게 된 계기가 되어 뿌듯하고 쉽게 하기 힘든 경험을 해서 좋았다. 마지막으로 해당 문제 해결에 도움을 주신 구구 코치님, 토미 코치님, 제이슨 코치님, 관심가지고 논의해준 스모디 백엔드 크루들인 토닉,더즈,조조그린에게 감사한 마음을 전하고 싶다</p>
<h2>Reference</h2>
<ul>
<li>백은빈, 이성욱 지음 Real MySQL 8.0</li>
<li>김연희 지음, 데이테베이스 개론 2판</li>
<li><a href="https://kdhyo98.tistory.com/59">synchronized와 @Transactional 을 동시에 사용 시 문제점</a></li>
</ul></div></section></article></div><div></div></main><style data-emotion="css 3pb1mm">.css-3pb1mm{position:relative;padding:0 5vw;}</style><style data-emotion="css rtegya">.css-rtegya{border-bottom:1px solid rgba(255, 255, 255, 0.1);background:#0a0b0c;position:relative;padding:0 5vw;}.css-rtegya .post-card{padding-bottom:0;border-bottom:none;}.css-rtegya .post-card:after{display:none;}.css-rtegya .post-card-primary-tag{color:#fff;opacity:0.6;}.css-rtegya .post-card-title{color:#fff;opacity:0.8;-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out;}.css-rtegya .post-card:hover .post-card-image{opacity:1;}.css-rtegya .post-card-excerpt{color:rgba(255, 255, 255, 0.6);}.css-rtegya .static-avatar{border-color:#000;}.css-rtegya .post-card-byline-content{color:rgba(255, 255, 255, 0.6);}.css-rtegya .post-card-byline-content a{color:rgba(255, 255, 255, 0.8);}.css-rtegya .author-avatar{border-color:#0a0b0c;}.css-rtegya .author-profile-image{background:#0a0b0c;}@media (max-width: 650px){.css-rtegya .post-card{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;margin:25px;padding:25px 0 0;border-bottom:1px solid rgba(255, 255, 255, 0.1);}}</style><aside class="read-next css-rtegya"><div class="css-1q5n7pp"><style data-emotion="css si41tf">.css-si41tf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 -25px;padding:60px 0 0 0;}</style><div class="read-next-feed css-si41tf"><style data-emotion="css 1pe6fj0">.css-1pe6fj0{position:relative;-webkit-flex:1 1 301px;-ms-flex:1 1 301px;flex:1 1 301px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;margin:0 0 40px;padding:0 20px 40px;min-height:220px;border-bottom:1px solid #eaeff1;-webkit-background-size:cover;background-size:cover;}@media (prefers-color-scheme: dark){.css-1pe6fj0{border-bottom-color:#2b2f36;}}</style><article class="post-card   css-1pe6fj0"><style data-emotion="css 19py1iz">.css-19py1iz{position:relative;display:block;overflow:hidden;border-radius:5px 5px 0 0;}</style><a class="post-card-image-link css-19py1iz" href="/post/2022-11-07-transaction-aop-fact-and-misconception/"><style data-emotion="css zj03fh">.css-zj03fh{width:auto;height:200px;background:#c5d2d9 no-repeat center center;-webkit-background-size:cover;background-size:cover;}</style><div class="post-card-image css-zj03fh"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div aria-hidden="true" style="width:100%;padding-bottom:60.32258064516129%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABKUlEQVQoz62SzUrDQBSF+6Y+hM/gUhciVARxq1Js1eJO608UN26G0iqYJkGrKWLb1LRJ2s4c58fIjAzWgBcuc2cm+ebcwy3hn6OUF4yx79VWFwKaAGrAxF6lrTYftyoUQem8kCr9X0NhMhtj43YZK40l+IO2PO9PejLjbIiXUYenh1E6wDB5k2lVSJlS5PiHqLbK6EauhPTiJ+yRNTQ6FeySVRy1t1BrbeLkYQf1+21ceAeaNUxXqHx7jh5x5u7jOjiW0GQa48qv4ZwDyauD8COA+06kykpzHZdeVVn05ecPDxVUtHrXPeXtx4ZHM5qBhA5ugjq/m2CcRUj5+quHOVQH5XfTecptCLl/fanINm4GMD8QHwtPF82ibWSMlheNhG6+DfRnYNH4BAO+pQBPFj8UAAAAAElFTkSuQmCC" alt="AOP에 대한 사실과 오해 그런데 트랜잭션을 사알짝 곁들인.. cover image" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/4cbd5a9cfa0c8988af4ff5541eb921f3/3a443/spring_aop.png 930w,
/static/4cbd5a9cfa0c8988af4ff5541eb921f3/c9459/spring_aop.png 1064w" sizes="(max-width: 1064px) 100vw, 1064px" /><img loading="lazy" sizes="(max-width: 1064px) 100vw, 1064px" srcset="/static/4cbd5a9cfa0c8988af4ff5541eb921f3/3a443/spring_aop.png 930w,
/static/4cbd5a9cfa0c8988af4ff5541eb921f3/c9459/spring_aop.png 1064w" src="/static/4cbd5a9cfa0c8988af4ff5541eb921f3/c9459/spring_aop.png" alt="AOP에 대한 사실과 오해 그런데 트랜잭션을 사알짝 곁들인.. cover image" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></a><style data-emotion="css susx73">.css-susx73{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><div class="post-card-content css-susx73"><style data-emotion="css 11xyrw0">.css-11xyrw0{position:relative;display:block;color:#15171A;}.css-11xyrw0:hover{-webkit-text-decoration:none;text-decoration:none;}</style><a class="post-card-content-link css-11xyrw0" href="/post/2022-11-07-transaction-aop-fact-and-misconception/"><style data-emotion="css 1s5mbbt">.css-1s5mbbt{margin:15px 0 0;}</style><header class="post-card-header css-1s5mbbt"><style data-emotion="css 1ws4skr">.css-1ws4skr{height:25px;margin:0 0 0.2em;color:#3eb0ef;font-size:1.7rem;font-weight:500;letter-spacing:0.2px;text-transform:uppercase;}</style><div class="post-card-primary-tag css-1ws4skr">#aop</div><style data-emotion="css 1pqz7yn">.css-1pqz7yn{margin:0 0 0.4em;line-height:1.15em;-webkit-transition:color 0.2s ease-in-out;transition:color 0.2s ease-in-out;}@media (prefers-color-scheme: dark){.css-1pqz7yn{color:rgba(255, 255, 255, 0.85);}}</style><h2 class="post-card-title css-1pqz7yn">AOP에 대한 사실과 오해 그런데 트랜잭션을 사알짝 곁들인..</h2></header><style data-emotion="css eyqgbm">.css-eyqgbm{font-family:Georgia,serif;}@media (prefers-color-scheme: dark){.css-eyqgbm{color:#90a2aa!important;}}</style><section class="post-card-excerpt css-eyqgbm"><p>들어가며 트랜잭션을 공부하다보면서 자연스럽게 AOP에 대해 접하게 되었습니다.
AOP를 사용하게 되면서 직접 경험했던 사실과 오해에 대해서 공유하려고 합니다. 첫 번째 사실: public이외의 메서드는 AOP…</p></section></a><style data-emotion="css k6f2l9">.css-k6f2l9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;padding:0;}</style><footer class="post-card-meta css-k6f2l9"><ul class="author-list css-teqkql"><li class="author-list-item css-1q168dw"><style data-emotion="css 1o16atw">.css-1o16atw{position:absolute;bottom:105%;z-index:999;display:block;padding:2px 8px;color:white;font-size:1.2rem;letter-spacing:0.2px;white-space:nowrap;background:#15171A;border-radius:3px;box-shadow:rgba(39, 44, 49, 0.08) 0 12px 26px,rgba(39, 44, 49, 0.03) 1px 3px 8px;opacity:0;-webkit-transition:all 0.35s cubic-bezier(0.4, 0.01, 0.165, 0.99);transition:all 0.35s cubic-bezier(0.4, 0.01, 0.165, 0.99);-webkit-transform:translateY(6px);-moz-transform:translateY(6px);-ms-transform:translateY(6px);transform:translateY(6px);pointer-events:none;}@media (max-width: 700px){.css-1o16atw{display:none;}}</style><div class="author-name-tooltip css-1o16atw">4기_기론</div><a class="author-avatar css-cdhz0m" href="/author/4-기-기론/"><div class="author-profile-image css-121fnpm gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:100%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAIDAAAAAAAAAAAAAAAAAAYHBAUJ/8QAGAEAAgMAAAAAAAAAAAAAAAAABgcEBQj/2gAMAwEAAhADEAAAAd9CseobeNMFigYi5V2WaIUU8CNZn//EAB0QAAEEAgMAAAAAAAAAAAAAAAIDBAUGAQcAERT/2gAIAQEAAQUCLXaawStB8Aqa7wJnaa40Tt94l7dxtboBqyGKbOsxvUTmrSq4x/8A/8QAIhEAAgEDBAIDAAAAAAAAAAAAAQIDBBEhABIzQRMxMlKB/9oACAEDAQE/AY6yVa1VqVpTTTO6U4i55Cd5gVVink+S7CzSIlrkMF0BR2HB+st+vedQzSiqpAJZAFdioDsAD5GFxnGMY6xqBm8EWTxp2fqNf//EACQRAAICAQIFBQAAAAAAAAAAAAECAwQRAAUSEyEiMTRBUXSy/9oACAECAQE/AZNvrPtbNRm3Jb1eKCS49ntqwKvKFtmezVhzwMZQiwyyk4BUuM4Z914j3XT1PULJg9fIwuMfGrEEDUbxaGJi8aByY0JYcqNsMSO4cRJwfc586u+stfYl/ev/xAAqEAACAgEDBAEBCQAAAAAAAAABAgMEEgUREwAUISIGQjEyQUVTYXGRof/aAAgBAQAGPwKOejNcIkSONO5npNEK4PA8uLxGQvDGGaIkZSSouT7nLp5ZNXihhSDCeSesqqYZnxymaGU/XgPTjHoufgsSQ+o2iR+nFAi/0Q5/3rSvlXZ6VHrIi01K897UbPeQ1b5jqyLJSjuLVzrU7c2Y4SMkzY7+3WpfHfjVXKeOQGtqGm6tXhW5TruoJwkxfheSwhYJYzOA++AQaEGqa9STUIqFSO33NlOd7EcKpNJIQTuzyq7Fvq+38eq7TNM5dS7Hk87jDbzjvsP53/fqezTAWZIQgd/Y8fcVZ2jJ8Eq7QKGJOeBYKy7gieJIKCLFfs/l9OV3axhckeWWxDNK7cll0Ul/WJYowNk6/8QAGxABAQEBAAMBAAAAAAAAAAAAAREhADFBUYH/2gAIAQEAAT8hOPn+DE8A2pYOjfRglkxA+KDiZpSXGZn7xdJz2A4cTUdpFoiYwLqC1wKdmcFUdioD0H4Nq946KsaLESFKT44zgOQc9+Co+OOghC7fUzAPCOQL/9oADAMBAAIAAwAAABCn/wCA/8QAGhEBAQADAQEAAAAAAAAAAAAAAREAITFB4f/aAAgBAwEBPxCwvs2WFSQDSHt2CGFEh8VdIDd9xNWYZNEAklAYOCZ9jxT3P//EABoRAQEBAAMBAAAAAAAAAAAAAAERACFBofD/2gAIAQIBAT8QN2YIjMy2GkhY4bKQPKIgFwwBJOsTwqSzOUAVQYFLvsdSeb//xAAYEAEBAQEBAAAAAAAAAAAAAAABEQAhYf/aAAgBAQABPxDo/XpkQnykvtAlttOiHba6C3YDqQf0AovaOCVELdmmV+6MkGxFIH7xp/syTIddN1+4kLc6YoxlezqNalwJlS2/6OXNRTVNaVDa56T1hFoT/9k=" alt="4기_기론" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1"/><noscript><picture><source srcset="/static/264a2517af906c5a1c3c22b6f4c181cd/fd013/giron.jpg 200w,
/static/264a2517af906c5a1c3c22b6f4c181cd/25252/giron.jpg 400w,
/static/264a2517af906c5a1c3c22b6f4c181cd/2f1b1/giron.jpg 800w,
/static/264a2517af906c5a1c3c22b6f4c181cd/0ff54/giron.jpg 1200w,
/static/264a2517af906c5a1c3c22b6f4c181cd/c4b07/giron.jpg 1440w" sizes="(max-width: 800px) 100vw, 800px" /><img loading="lazy" sizes="(max-width: 800px) 100vw, 800px" srcset="/static/264a2517af906c5a1c3c22b6f4c181cd/fd013/giron.jpg 200w,
/static/264a2517af906c5a1c3c22b6f4c181cd/25252/giron.jpg 400w,
/static/264a2517af906c5a1c3c22b6f4c181cd/2f1b1/giron.jpg 800w,
/static/264a2517af906c5a1c3c22b6f4c181cd/0ff54/giron.jpg 1200w,
/static/264a2517af906c5a1c3c22b6f4c181cd/c4b07/giron.jpg 1440w" src="/static/264a2517af906c5a1c3c22b6f4c181cd/2f1b1/giron.jpg" alt="4기_기론" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></a></li></ul><style data-emotion="css 12ys16c">.css-12ys16c{-webkit-flex:1 1 50%;-ms-flex:1 1 50%;flex:1 1 50%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:4px 0 0 10px;color:#90a2aa;font-size:1.2rem;line-height:1.4em;font-weight:400;letter-spacing:0.2px;text-transform:uppercase;}.css-12ys16c span{margin:0;}.css-12ys16c a{color:#434952;font-weight:600;}@media (prefers-color-scheme: dark){.css-12ys16c a{color:rgba(255, 255, 255, 0.75);}}</style><div class="post-card-byline-content css-12ys16c"><span><a href="/author/4-기-기론/">4기_기론</a></span><span class="post-card-byline-date"><time dateTime="2022-11-15">15 Nov 2022</time> <span class="bull">•</span> <!-- -->4<!-- --> min read</span></div></footer></div></article><article class="post-card   css-1pe6fj0"><a class="post-card-image-link css-19py1iz" href="/post/2023-04-24-DAO-Repository/"><div class="post-card-image css-zj03fh"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div aria-hidden="true" style="width:100%;padding-bottom:75.59139784946237%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABYlAAAWJQFJUiTwAAACcUlEQVQ4y41T/UtTURi+/4H33nPv7j1b9GnmahBCms21TSdWm/kx0qJPZQVJVhRhFk2wQijKn+oviCAMKpzl3NKZ6LagxBCK+j36M57ec+YmZYv98HDue87zPvc9z/sexbm7Bf/EnhCcnlY4d/rh3OolNMG54+D6fpk8paygJ1QS402d4C3H4NzuI1FfQVTAXZEgEXcFZUU8EIV1awTmy+cwJydg3R0DD58qCIufCdH/CxKhNgheH4H59AmMb1mY7ydhZFMw8mkYswkYq4swXjyDHeoh0cAGUWWDbzVB2HRFNfkK6nIG+soHsJ9fwH6tQv+6BPVjGlW5GVhd59Y9rURQmyZBElMXk1AzCcIUqhbeQf2cgZolwc5KBck/3tgORp5pn+ZIcBpqLlXAUlJWqC+8hR0hL6v9lVQYgO3vhjbzGuxHHmxlHhoJaPNTYMtzYN9z0PIpWNH+Cioswt0sr82G7kBLTEAnL6Vw+g30e2OwREPc5eawOFN/g67uovGwGyJgV4fAbo/AosplVTWBP7meUKlSRbZekMRcFcniW8wiNci1+QBcmxrh4g1wbfEWzkRO9RqfVte2tVdEN1Ps1l44emKwjpyEg3wRsd12HLavCxYZ7zh9EVbHGZj9g7C6++DojclYjI3jxAVYR+ms75LM5XWHoIgEFh8FoxehP3osBcyB6zBjlyVRGx+Hef4K2HAcxuAN6KP3wW7G4Tg7AOPasIT+4CEMyuH1YSicPLL9UTkqNj01vi8sD8Q+39smK7W9HdIjvr9dNkvEvO6wfFHyW/ApFhyl4FUApbW2uQARkyelM9HVIoe8LXGKEDFxfgPS5Aq16G2PIwAAAABJRU5ErkJggg==" alt="DAO와 Repository cover image" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/0d9e1afd70ff45a6782acdc7bc7520df/3a443/dao-repository.png 930w,
/static/0d9e1afd70ff45a6782acdc7bc7520df/a2bb5/dao-repository.png 1246w" sizes="(max-width: 1246px) 100vw, 1246px" /><img loading="lazy" sizes="(max-width: 1246px) 100vw, 1246px" srcset="/static/0d9e1afd70ff45a6782acdc7bc7520df/3a443/dao-repository.png 930w,
/static/0d9e1afd70ff45a6782acdc7bc7520df/a2bb5/dao-repository.png 1246w" src="/static/0d9e1afd70ff45a6782acdc7bc7520df/a2bb5/dao-repository.png" alt="DAO와 Repository cover image" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></a><div class="post-card-content css-susx73"><a class="post-card-content-link css-11xyrw0" href="/post/2023-04-24-DAO-Repository/"><header class="post-card-header css-1s5mbbt"><div class="post-card-primary-tag css-1ws4skr">#DAO</div><h2 class="post-card-title css-1pqz7yn">DAO와 Repository</h2></header><section class="post-card-excerpt css-eyqgbm"><p>DAO를 사용해서 DB에 접근할 때, 대부분 DAO 클래스에 Spring의 @Repository를 달아 둡니다.
왜 DAO를 Repository라고 하지? DAO가 Repository의 일종인가? 싶었는데, DAO와 Repository…</p></section></a><footer class="post-card-meta css-k6f2l9"><ul class="author-list css-teqkql"><li class="author-list-item css-1q168dw"><div class="author-name-tooltip css-1o16atw">5기_리오</div><a class="author-avatar css-cdhz0m" href="/author/5-기-리오/"><div class="author-profile-image css-121fnpm gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:134%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAbABQDASIAAhEBAxEB/8QAGgAAAgIDAAAAAAAAAAAAAAAAAAkGBwECCv/EABcBAQEBAQAAAAAAAAAAAAAAAAMEAAH/2gAMAwEAAhADEAAAAXdRRZtN8R9BoY+aWYTSxaTecZJ0/8QAHBAAAgICAwAAAAAAAAAAAAAABQYEBwAIAxYk/9oACAEBAAEFAmkjPFhK8ZC7YqQSMApxbIPzQGZqPsV2NmRgweHgH2oe/OlILvdrvy8wooRcmlfpj5//xAAjEQACAQMDBAMAAAAAAAAAAAABAgMREiEEEzEAEDJBUXOD/9oACAEDAQE/AVfTvHthZRqUlYySEjYEFopjyvv44rW2jErb1HGypcWrfK+PrCZJ/Tinzn12/8QAIhEAAgEDAwUBAAAAAAAAAAAAAQIDERIhEyIxAAQQUXGC/9oACAECAQE/AXinjIlZoj27xjTjFdczXfKWWZPNKFtoViepCrUYA7YVVRXAvbOPxzX1jnx//8QAKBAAAgMAAgECBQUBAAAAAAAAAgMBBAUREwYAEhAUFSEjBxYiMVEz/9oACAEBAAY/ArtvKCmzTEPbQDQ75plZKf4DYirMWOueJieqYn+pmYGCn1nbe7hl4/p2Jsrs0O3vTM1rLK426bZ4YdK6IRYrdsQyFnxPviIYbH51yteSqzYqMbUcD1haqNlNlBGuSGGoaJLaHPIHEjP39UfHMrWmlkft5WreqLTVL5p5274c2WMUT+kF1lzCRatczEkUH6y/BdnyxgY/kKLq84XVkHrqrU1MvPjKvgKm002KyH0abLXzIJAyPPWskIn1WzMuoihn019VapVXCkJXzM8AA/6UyRFPJGZEZzJFM+tLy3zO59BykXfoiYTUW9VKvlXpFSNND+x98fbNj5musRmy4zPpiusVsueUYIzS8e8U0rGv3WDMrRZ9hd3LwswK8zHTFxYMtEMiMVlrsxPHZXT8EPzaNemeh4+7fuwoPw2NgCbxoMrlzXl5SsCdPV7XnEm4WGRTP6laL/yXrOphQ6yX/Q4JOtYmPt9oiXNNnAxEcl/nHw//xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhMUFR/9oACAEBAAE/IR9BI29RYg6ioxMO/tDQJEDwTnTorw9x6JIijijk0vlpTXKSuiL96nf1BBoL4nMYYLu8QO3OnWJXQOw+mM8WfrI/spIuCEwD4TszCI+YmoIzHvJkULUdDzqnAAT/2gAMAwEAAgADAAAAEKP/AAD/xAAaEQEBAQEAAwAAAAAAAAAAAAABESEAEDFB/9oACAEDAQE/EMm8jRM7AoQ4wG4y5Z8vvlR46BVuEIVciSIFPD//xAAZEQEBAQEBAQAAAAAAAAAAAAABESEAMWH/2gAIAQIBAT8QL7PVQ7MW0qLjyJYWWbPL8uznBNEE8gCqEjyQFp7/xAAZEAEBAQADAAAAAAAAAAAAAAABEQAQQXH/2gAIAQEAAT8QgYrbYJ/bp4UWtVnkTiGzqYrhde6JFAYeJNCI4Y0/kGZomE3SVCqUZTK1V6rEIQodxEhktB+a96mf+aC4Xn1cknyLajsIF8JpezTPmVvyQ5Jg1XTb1JEcQ4T/AP/Z" alt="5기_리오" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1"/><noscript><picture><source srcset="/static/1dd015a5d23e97fc7567ae5690b3ed45/fd013/reo.jpg 200w,
/static/1dd015a5d23e97fc7567ae5690b3ed45/25252/reo.jpg 400w,
/static/1dd015a5d23e97fc7567ae5690b3ed45/feec1/reo.jpg 766w" sizes="(max-width: 766px) 100vw, 766px" /><img loading="lazy" sizes="(max-width: 766px) 100vw, 766px" srcset="/static/1dd015a5d23e97fc7567ae5690b3ed45/fd013/reo.jpg 200w,
/static/1dd015a5d23e97fc7567ae5690b3ed45/25252/reo.jpg 400w,
/static/1dd015a5d23e97fc7567ae5690b3ed45/feec1/reo.jpg 766w" src="/static/1dd015a5d23e97fc7567ae5690b3ed45/feec1/reo.jpg" alt="5기_리오" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></a></li></ul><div class="post-card-byline-content css-12ys16c"><span><a href="/author/5-기-리오/">5기_리오</a></span><span class="post-card-byline-date"><time dateTime="2023-05-15">15 May 2023</time> <span class="bull">•</span> <!-- -->6<!-- --> min read</span></div></footer></div></article></div></div></aside><style data-emotion="css 1snipao">.css-1snipao{position:relative;padding:0 5vw;position:relative;padding-top:20px;padding-bottom:60px;color:#fff;background:#000;}</style><footer class="css-1snipao"><style data-emotion="css 1fhv7oo">.css-1fhv7oo{margin:0 auto;max-width:1040px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(255, 255, 255, 0.7);font-size:1.3rem;}.css-1fhv7oo a{color:rgba(255, 255, 255, 0.7);}.css-1fhv7oo a:hover{color:rgba(255, 255, 255, 1);-webkit-text-decoration:none;text-decoration:none;}@media (max-width: 650px){.css-1fhv7oo{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="css-1fhv7oo"><section class="copyright"><a href="/">Tecoble</a> © <!-- -->2023<!-- --> <a href="/">| <!-- -->Tecoble<!-- --> <!-- -->is based on woowacourse</a></section><style data-emotion="css 29c7f9">.css-29c7f9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.css-29c7f9 a{position:relative;margin-left:20px;}.css-29c7f9 a:before{content:'';position:absolute;top:11px;left:-11px;display:block;width:2px;height:2px;background:#fff;border-radius:100%;}.css-29c7f9 a:first-of-type:before{display:none;}@media (max-width: 650px){.css-29c7f9 a:first-of-type{margin-left:0;}}</style><nav class="css-29c7f9"><a href="/">Latest Posts</a><a href="https://github.com/scttcper/gatsby-casper" target="_blank" rel="noopener noreferrer">Casper</a><a href="/rss.xml">RSS</a></nav></div></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-7YLT36LV0M"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-7YLT36LV0M', {"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/post/2022-11-01-mysql-dead-lock/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-f33cc994945b2249d5ee.js"],"app":["/app-7871a49fb71b5d2fd8af.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-f7da68947e50ce346751.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-947f5f80f30345c8f7f8.js"],"component---src-templates-author-tsx":["/component---src-templates-author-tsx-e3b8ed1aaa2c94077bfa.js"],"component---src-templates-index-tsx":["/component---src-templates-index-tsx-ead65a5aeec7d773bee7.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-a08628f9047d81b892e4.js"],"component---src-templates-tags-tsx":["/component---src-templates-tags-tsx-a3927cd825a62272db18.js"]};/*]]>*/</script><script src="/polyfill-f33cc994945b2249d5ee.js" nomodule=""></script><script src="/component---src-templates-post-tsx-a08628f9047d81b892e4.js" async=""></script><script src="/commons-4c188b18bcaae3f07bde.js" async=""></script><script src="/app-7871a49fb71b5d2fd8af.js" async=""></script><script src="/framework-2de79c8137b068b61a3a.js" async=""></script><script src="/webpack-runtime-674180cef417bd6b6e8f.js" async=""></script></body></html>