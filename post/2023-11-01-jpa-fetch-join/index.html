<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 2.27.0"/><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="canonical" href="https://tecoble.techcourse.co.kr/post/2023-11-01-jpa-fetch-join/" data-baseprotocol="https:" data-basehost="tecoble.techcourse.co.kr"/><title data-react-helmet="true">JPA가 Fetch Join에 대한 On절을 지원하지 않는 이유</title><link data-react-helmet="true" rel="icon" href="data:image/vnd.microsoft.icon;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAjhJREFUeNrEV4uRgkAMzdmAlGAJdqDXgSVYgiXQgSVYgiWgFYAVYAdqBXv7kDAhhGVFPDOT8QObvPyzRDU55xLPqefSfY7KWkdCkmrlufs/yhnET/0l87ykCLper1QUBV0uF7rf79Xv5fJ5dLVa0Xq9pkgqPP9S7ZInrDx3m83GwSlJkrg0bR65LMucF149CzHObbdbV5ZRkUyJY3673arDWuBut6ve5N8QfjgcOgoAcL/fO++N5l1pQF9OUAPFv9xnFZRBQaRV1bsMBJ8wro8aAOx6iyFwDMFbQyCiPdBnKRi500cIF2Qgf4IAoMTKAXhGK7W8FUo+9oSVE9QqTm/JYrFoJRy7Dp8saKgKYLUmyMUzHQqKjWcoRyzWIOA5ywtkvaRjGsqPkCd0OOAFcC8AdrE82NcfYhjyLEOkgS0AyFSUjJXFY9nyMBoW00w259PpRN5FrYZ9Pp/pHYJMJp4Tj8ej+W+mD/BgkcNnapIyZ/Rl6gDAqJWkQzIFSZktAIiRdjlm/Dsk9wPOh/l8bgNA/OEBCcI3IPJlOEq5L0MzoVtLiyyT4/HYKZMpGxHKPNiI+rrVFK2YB54G1QHA1uqePXYYQQ53UjncgsOItxlrzr8yjq0uqtuzCQCKIRAcWjaGFhIL6GAOaPQAMXYlw0KrAehZE9wHUBUyfq8spagk9qQEAJkaQFAqlMr7QOxaDsUcTpwBa+W8lqexVn3iYvLy1QzXMbRUXM14drx1Nfv25ZS+fT3/E2AAsWMCdac8y9AAAAAASUVORK5CYII=" type="image/x-icon"/><meta data-react-helmet="true" name="description" content="JPA가 Fetch Join에 대한 On절을 지원하지 않는 이유 집사의고민 프로젝트에서 조회 쿼리가 발생할 때 데이터가 삭제되는 상황이 발생하였습니다.
그래서 이번 글에서는 간단한 JPA의 Fetch Join…"/><meta data-react-helmet="true" property="og:site_name" content="Tecoble"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="JPA가 Fetch Join에 대한 On절을 지원하지 않는 이유"/><meta data-react-helmet="true" property="og:description" content="JPA가 Fetch Join에 대한 On절을 지원하지 않는 이유 집사의고민 프로젝트에서 조회 쿼리가 발생할 때 데이터가 삭제되는 상황이 발생하였습니다.
그래서 이번 글에서는 간단한 JPA의 Fetch Join…"/><meta data-react-helmet="true" property="og:url" content="https://post/2023-11-01-jpa-fetch-join/"/><meta data-react-helmet="true" property="og:image" content="https://static/019d91f237fd3c915a0156fee0326565/8a9e0/zipgo.png"/><meta data-react-helmet="true" property="article:published_time" content="2023-11-23T12:00:00.000Z"/><meta data-react-helmet="true" property="article:tag" content="JPA"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="JPA가 Fetch Join에 대한 On절을 지원하지 않는 이유"/><meta data-react-helmet="true" name="twitter:description" content="JPA가 Fetch Join에 대한 On절을 지원하지 않는 이유 집사의고민 프로젝트에서 조회 쿼리가 발생할 때 데이터가 삭제되는 상황이 발생하였습니다.
그래서 이번 글에서는 간단한 JPA의 Fetch Join…"/><meta data-react-helmet="true" name="twitter:url" content="https://post/2023-11-01-jpa-fetch-join/"/><meta data-react-helmet="true" name="twitter:image" content="https://tecoble.techcourse.co.kr//static/019d91f237fd3c915a0156fee0326565/8a9e0/zipgo.png"/><meta data-react-helmet="true" name="twitter:label1" content="Written by"/><meta data-react-helmet="true" name="twitter:data1" content="5기_베베"/><meta data-react-helmet="true" name="twitter:label2" content="Filed under"/><meta data-react-helmet="true" name="twitter:data2" content="JPA"/><meta data-react-helmet="true" property="og:image:width" content="438"/><meta data-react-helmet="true" property="og:image:height" content="419"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link as="script" rel="preload" href="/webpack-runtime-674180cef417bd6b6e8f.js"/><link as="script" rel="preload" href="/framework-2de79c8137b068b61a3a.js"/><link as="script" rel="preload" href="/app-7871a49fb71b5d2fd8af.js"/><link as="script" rel="preload" href="/commons-4c188b18bcaae3f07bde.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-a08628f9047d81b892e4.js"/><link as="fetch" rel="preload" href="/page-data/post/2023-11-01-jpa-fetch-join/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2130001345.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/4041952199.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="post-template"><style data-emotion="css-global 8s70am">html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline;}body{line-height:1;}ol,ul{list-style:none;}blockquote,q{quotes:none;}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none;}table{border-spacing:0;border-collapse:collapse;}img{max-width:100%;}html{box-sizing:border-box;font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;}*,*:before,*:after{box-sizing:inherit;}a{background-color:transparent;}a:active,a:hover{outline:0;}b,strong{font-weight:bold;}i,em,dfn{font-style:italic;}h1{margin:0.67em 0;font-size:2em;}small{font-size:80%;}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline;}sup{top:-0.5em;}sub{bottom:-0.25em;}img{border:0;}svg:not(:root){overflow:hidden;}mark{background-color:#fdffb6;}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em;}button,input,optgroup,select,textarea{margin:0;color:inherit;font:inherit;}button{overflow:visible;border:none;}button,select{text-transform:none;}button,html input[type='button'],input[type='reset'],input[type='submit']{cursor:pointer;-webkit-appearance:button;}button[disabled],html input[disabled]{cursor:default;}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0;}input{line-height:normal;}input:focus{outline:none;}input[type='checkbox'],input[type='radio']{box-sizing:border-box;padding:0;}input[type='number']::-webkit-inner-spin-button,input[type='number']::-webkit-outer-spin-button{height:auto;}input[type='search']{box-sizing:content-box;-webkit-appearance:textfield;}input[type='search']::-webkit-search-cancel-button,input[type='search']::-webkit-search-decoration{-webkit-appearance:none;}legend{padding:0;border:0;}textarea{overflow:auto;}table{border-spacing:0;border-collapse:collapse;}td,th{padding:0;}html{overflow-x:hidden;overflow-y:scroll;font-size:62.5%;-webkit-tap-highlight-color:rgba(0, 0, 0, 0);}body{overflow-x:hidden;color:#303a3e;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:1.6rem;line-height:1.6em;font-weight:400;font-style:normal;letter-spacing:0;text-rendering:optimizeLegibility;background:#fff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-moz-font-feature-settings:'liga' on;}hr{position:relative;display:block;width:100%;margin:2.5em 0 3.5em;padding:0;height:1px;border:0;border-top:1px solid #e4eaed;}audio,canvas,iframe,img,svg,video{vertical-align:middle;}fieldset{margin:0;padding:0;border:0;}textarea{resize:vertical;}p,ul,ol,dl,blockquote{margin:0 0 1.5em 0;}ol,ul{padding-left:1.3em;padding-right:1.5em;}ol ol,ul ul,ul ol,ol ul{margin:0.5em 0 1em;}ul{list-style:disc;}ol{list-style:decimal;}ul,ol{max-width:100%;}li{margin:0.5em 0;padding-left:0.3em;line-height:1.6em;}dt{float:left;margin:0 20px 0 0;width:120px;color:#15171A;font-weight:500;text-align:right;}dd{margin:0 0 5px 0;text-align:left;}blockquote{margin:1.5em 0;padding:0 1.6em 0 1.6em;border-left:#e5eff5 0.5em solid;}blockquote p{margin:0.8em 0;font-size:1.2em;font-weight:300;}blockquote small{display:inline-block;margin:0.8em 0 0.8em 1.5em;font-size:0.9em;opacity:0.8;}blockquote cite{font-weight:bold;}blockquote cite a{font-weight:normal;}a{color:#26a6ed;-webkit-text-decoration:none;text-decoration:none;}a:hover{-webkit-text-decoration:underline;text-decoration:underline;}h1,h2,h3,h4,h5,h6{margin-top:0;line-height:1.15;font-weight:600;text-rendering:optimizeLegibility;}h1{margin:0 0 0.5em 0;font-size:5.5rem;font-weight:600;}@media (max-width: 500px){h1{font-size:2.2rem;}}h2{margin:1.5em 0 0.5em 0;font-size:2.2rem;}@media (max-width: 500px){h2{font-size:1.8rem;}}h3{margin:1.5em 0 0.5em 0;font-size:1.8rem;font-weight:500;}@media (max-width: 500px){h3{font-size:1.7rem;}}h4{margin:1.5em 0 0.5em 0;font-size:1.6rem;font-weight:500;}h5{margin:1.5em 0 0.5em 0;font-size:1.4rem;font-weight:500;}h6{margin:1.5em 0 0.5em 0;font-size:1.4rem;font-weight:500;}body{background:#fff;}@media (prefers-color-scheme: dark){body{color:rgba(255, 255, 255, 0.75);background:#191b1f;}img{opacity:0.9;}}</style><style data-emotion="css 12e1ozp">.css-12e1ozp .site-main{margin-top:64px;background:#fff;padding-bottom:4vw;}@media (prefers-color-scheme: dark){.css-12e1ozp .site-main{background:#191b1f;}}</style><style data-emotion="css 159sn72">.css-159sn72{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}.css-159sn72 .site-main{margin-top:64px;background:#fff;padding-bottom:4vw;}@media (prefers-color-scheme: dark){.css-159sn72 .site-main{background:#191b1f;}}</style><div class="css-159sn72"><header class="site-header"><style data-emotion="css sdrsc">.css-sdrsc{position:relative;padding:0 5vw;position:fixed;top:0;right:0;left:0;z-index:1000;background:#0a0b0c;}@media (max-width: 700px){.css-sdrsc{padding-right:0;padding-left:0;}}</style><div class="css-sdrsc"><style data-emotion="css 1q5n7pp">.css-1q5n7pp{margin:0 auto;max-width:1040px;width:100%;}</style><div class="css-1q5n7pp"><style data-emotion="css 1phqi3w">.css-1phqi3w{position:relative;z-index:100;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;overflow-y:hidden;height:64px;font-size:1.3rem;}</style><nav class="css-1phqi3w"><style data-emotion="css vp1an1">.css-vp1an1{-webkit-flex:1 0 auto;-ms-flex:1 0 auto;flex:1 0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow-x:auto;overflow-y:hidden;-webkit-overflow-scrolling:touch;margin-right:10px;padding:10px 0 80px;font-weight:500;letter-spacing:0.2px;text-transform:uppercase;white-space:nowrap;-ms-overflow-scrolling:touch;}@media (max-width: 700px){.css-vp1an1{margin-right:0;padding-left:5vw;}}</style><div class="site-nav-left css-vp1an1"><style data-emotion="css 1l8e9ha">.css-1l8e9ha{position:relative;z-index:100;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:inline-block;margin-right:32px;padding:12px 0;color:#fff;font-size:1.7rem;line-height:1.8rem;font-weight:bold;letter-spacing:-0.5px;text-transform:none;}.css-1l8e9ha:hover{-webkit-text-decoration:none;text-decoration:none;}.css-1l8e9ha img{display:block;width:auto;height:21px;}</style><a class="site-nav-logo css-1l8e9ha" href="/"><img src="/static/0b18bd94a62a12fdc81ea720c28722f6/3891b/tecoble.png" alt="Tecoble"/></a><style data-emotion="css 1muigz5">.css-1muigz5{position:relative;-webkit-align-self:flex-start;-ms-flex-item-align:flex-start;align-self:flex-start;}</style><div class="css-1muigz5"><style data-emotion="css 1gas2t1">.css-1gas2t1{position:absolute;z-index:1000;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:0 0 0 -12px;padding:0;list-style:none;-webkit-transition:all 1s cubic-bezier(0.19, 1, 0.22, 1);transition:all 1s cubic-bezier(0.19, 1, 0.22, 1);}.css-1gas2t1 li{display:block;margin:0;padding:0;}.css-1gas2t1 li a{position:relative;display:block;padding:12px 12px;color:#fff;opacity:0.8;-webkit-transition:opacity 0.35s ease-in-out;transition:opacity 0.35s ease-in-out;}.css-1gas2t1 li a:hover{-webkit-text-decoration:none;text-decoration:none;opacity:1;}.css-1gas2t1 li a:before{content:'';position:absolute;right:100%;bottom:8px;left:12px;height:1px;background:#fff;opacity:0.25;-webkit-transition:all 0.35s ease-in-out;transition:all 0.35s ease-in-out;}.css-1gas2t1 li a:hover:before{right:12px;opacity:0.5;}</style><ul role="menu" class="css-1gas2t1"><li role="menuitem"><a href="/">Home</a></li><li role="menuitem"><a href="https://woowacourse.github.io/">woowacourse</a></li></ul><style data-emotion="css ybggi6">.css-ybggi6{visibility:hidden;position:absolute;top:9px;color:#fff;font-size:1.7rem;font-weight:400;text-transform:none;opacity:0;-webkit-transition:all 1s cubic-bezier(0.19, 1, 0.22, 1);transition:all 1s cubic-bezier(0.19, 1, 0.22, 1);-webkit-transform:translateY(175%);-moz-transform:translateY(175%);-ms-transform:translateY(175%);transform:translateY(175%);}.css-ybggi6 .dash{left:-25px;}.css-ybggi6 .dash:before{content:'– ';opacity:0.5;}</style><span class="nav-post-title css-ybggi6">JPA가 Fetch Join에 대한 On절을 지원하지 않는 이유</span></div></div><style data-emotion="css 19iu1ve">.css-19iu1ve{-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;padding:10px 0;height:64px;}@media (max-width: 700px){.css-19iu1ve{display:none;}}</style><div class="css-19iu1ve"><style data-emotion="css ienhkd">.css-ienhkd{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-ienhkd"></div></div></nav></div></div></header><style data-emotion="css zqbwy4">.css-zqbwy4{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;position:relative;padding:0 5vw;}@media (prefers-color-scheme: dark){.css-zqbwy4{background:#191b1f;}}</style><main id="site-main" class="site-main css-zqbwy4"><div class="css-1q5n7pp"><style data-emotion="css l1e7lw">.css-l1e7lw{position:relative;z-index:50;}</style><article class="css-l1e7lw"><style data-emotion="css rxh1cu">.css-rxh1cu{position:relative;margin:0 auto;padding:70px 170px 50px;border-top-left-radius:3px;border-top-right-radius:3px;}@media (max-width: 1170px){.css-rxh1cu{padding:60px 11vw 50px;}}@media (max-width: 800px){.css-rxh1cu{padding-right:5vw;padding-left:5vw;}}@media (max-width: 500px){.css-rxh1cu{padding:20px 0 35px;}}</style><header class="post-full-header css-rxh1cu"><style data-emotion="css 1ehbhhx">.css-1ehbhhx{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#738a94;font-size:2.5rem;line-height:1.4em;font-weight:600;text-transform:uppercase;}</style><section class="post-full-tags css-1ehbhhx"><a href="/tags/jpa/">#JPA</a></section><style data-emotion="css qs7bhz">.css-qs7bhz{margin:0 0 0.2em;color:#0b0c0e;}@media (max-width: 500px){.css-qs7bhz{margin-top:0.2em;font-size:3.3rem;}}@media (prefers-color-scheme: dark){.css-qs7bhz{color:rgba(255, 255, 255, 0.9);}}</style><h1 class="post-full-title css-qs7bhz">JPA가 Fetch Join에 대한 On절을 지원하지 않는 이유</h1><style data-emotion="css 1v4p0ul">.css-1v4p0ul{margin:20px 0 0;color:var(--midgrey);font-family:Georgia,serif;font-size:2.3rem;line-height:1.4em;font-weight:300;}@media (max-width: 500px){.css-1v4p0ul{font-size:1.9rem;line-height:1.5em;}}@media (prefers-color-scheme: dark){.css-1v4p0ul{color:#90a2aa;}}</style><p class="post-full-custom-excerpt css-1v4p0ul"></p><style data-emotion="css cp69tq">.css-cp69tq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:35px 0 0;padding-top:15px;border-top:1px solid #e4eaed;}.css-cp69tq .post-full-byline-content{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}.css-cp69tq .post-full-byline-content .author-list{-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;padding:0 12px 0 0;}.css-cp69tq .post-full-byline-meta{margin:2px 0 0;color:#90a2aa;font-size:1.2rem;line-height:1.2em;letter-spacing:0.2px;text-transform:uppercase;}.css-cp69tq .post-full-byline-meta h4{margin:0 0 3px;font-size:1.3rem;line-height:1.4em;font-weight:500;}.css-cp69tq .post-full-byline-meta h4 a{color:#2c3036;}.css-cp69tq .post-full-byline-meta h4 a:hover{color:#15171A;}.css-cp69tq .post-full-byline-meta .bull{display:inline-block;margin:0 4px;opacity:0.6;}@media (prefers-color-scheme: dark){.css-cp69tq{border-top-color:#3b4049;}.css-cp69tq .post-full-byline-meta h4 a{color:rgba(255, 255, 255, 0.75);}.css-cp69tq .post-full-byline-meta h4 a:hover{color:#fff;}}</style><div class="post-full-byline css-cp69tq"><section class="post-full-byline-content"><style data-emotion="css teqkql">.css-teqkql{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 0 0 4px;padding:0;list-style:none;}</style><ul class="author-list css-teqkql"><style data-emotion="css 1q168dw">.css-1q168dw{position:relative;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;margin:0;padding:0;}.css-1q168dw:hover .author-name-tooltip{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);transform:translateY(0px);}</style><li class="author-list-item css-1q168dw"><style data-emotion="css 1xzzdyg">.css-1xzzdyg{position:absolute;bottom:130%;left:50%;z-index:600;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-left:-200px;width:400px;font-size:1.4rem;line-height:1.5em;background:white;border-radius:3px;box-shadow:rgba(39, 44, 49, 0.08) 0 12px 26px,rgba(39, 44, 49, 0.06) 1px 3px 8px;opacity:0;-webkit-transition:all 0.35s cubic-bezier(0.4, 0.01, 0.165, 0.99);transition:all 0.35s cubic-bezier(0.4, 0.01, 0.165, 0.99);-webkit-transform:scale(0.98) translateY(15px);-moz-transform:scale(0.98) translateY(15px);-ms-transform:scale(0.98) translateY(15px);transform:scale(0.98) translateY(15px);pointer-events:none;padding:20px 20px 22px;}.css-1xzzdyg:before{content:'';position:absolute;top:100%;left:50%;display:block;margin-left:-8px;width:0;height:0;border-top:8px solid #fff;border-right:8px solid transparent;border-left:8px solid transparent;}.css-1xzzdyg .author-info{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;padding:0 0 0 20px;}.css-1xzzdyg .author-info h2{margin:8px 0 0;font-size:1.6rem;}.css-1xzzdyg .author-info p{margin:4px 0 0;color:color(var(--midgrey) l(-10%));}.css-1xzzdyg .author-info .bio h2{margin-top:0;}.css-1xzzdyg .author-info .bio p{margin-top:0.8em;}.css-1xzzdyg .author-profile-image{-webkit-flex:0 0 60px;-ms-flex:0 0 60px;flex:0 0 60px;margin:0;width:60px;height:60px;border:none;}@media (max-width: 1170px){.css-1xzzdyg{margin-left:-50px;width:430px;}.css-1xzzdyg:before{left:50px;}}@media (max-width: 650px){.css-1xzzdyg{display:none;}}@media (prefers-color-scheme: dark){.css-1xzzdyg{background:#22252a;box-shadow:0 12px 26px rgba(0, 0, 0, 0.4);}.css-1xzzdyg:before{border-top-color:#22252a;}}</style><div class="author-card css-1xzzdyg"><style data-emotion="css 121fnpm">.css-121fnpm{display:block;width:100%;height:100%;background:#e4eaed;border-radius:100%;object-fit:cover;}@media (prefers-color-scheme: dark){.css-121fnpm{background:#191b1f;}}</style><div class="author-profile-image css-121fnpm gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:100%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEtklEQVQ4yyXQa1TSdxzH8f+jndYqQ7n8QUXkriAXERDttMrmZeus5rSt2jQrl3WszMsq53S1bvOUG3nOWnVSKy9rmVreQgNUVASBP5cAzRSwvABKQlvnrD1wP/Oc39PX9/05P8gzrXe7dIszRqdNVZCVkSYRpCSIPo7ji3ns7UJe/rfp07ahl/YRh0U1aekfNyvtBvmz0R6LVmbWPIG8LxG3y+B3WyvLCrbGxqQmisVsFpvBZNLoEh6XTSKcLTnsdSJT5oEX5v5xo9Kmf7oqTSPdkNuFLM1bTOrOXVs2JceLtwoEgqgoLp3JotA4dHo0hSyIomrlLTPj2ufGfjuitOp6V7FxpAuad476vVZFx90dCfHJkvhkEX9nomAzhyViMrk0amR4OBGDqZFe8DhNY4jC9n6zWSMzqrsQdSc059QFvGNPW2s/EfLTEuILM1JzkhN3iPhJfA6TFAHjYGxQ0G8XSj0uk92gtOsVltEeE8iqOw3D7WC20ecZMwy0f75JXJ6d0VZx/Hx2+unMlLy0zamiWD6TRsbjuh/Wzk4a7EifDWCtzKTpRoY7dIOPIM+sbX7OvujQ39ifLr962nz9XGvp4b9O5dYX51YeyLx8KPPHE4enn486bepx04DVAHAP+CqQXcGLninv3MSCZ9Jy/bytutR571fVzwWKivze8mP1BVnNZ3Ll92/OOY0O6/Bz8wo2a3uN6hWsHWiFlnwun3dqYcExP4mMNVwxXitTXCyUnc1vLs5uKMyuL84xD7bPuEygPGFRWZFV3AWyGuVDKOB/5X/90ud1+PyzDnWn7krRUFVJ98kDd/el1xzbrbxxYcH9wjEx6hrTvHg2ZEOUZm2PYbgDZEfkD6A3b9yBgNvne7XgnV6YGVNXn9FWFQycO9KYv7fmxNdFh/ZZn2n+fj01O2UAsy26p6YRmX7oMcgO996H3r59vbTk9vs9794F7HZje+X3XeeOtpV/V1e479bxPczISIFQXHX1okreNmUbnjCrdIPtQIKs6kkj9M/bxeXlfwMBr1RatWVbyk8Hv1JUnrxTlH0zf8+1I5nUSHIwmoAKxlKojIwvv2i6d92k6USGHg3Kmvq76qHl5f/0Bs3evd+QKUx+XMLOpG2tZbmNJTl/Fmcf3bU9KAQmEMIJoUQcHIYKhsOI5KSkpKZaqVbxQP64DqqulgrjJFRatCBOwhfEi8QJNRUF90vzWi4Vf5a0FYXG43BhWFwYnkAMC48kRlDWbcB8mpYyqmyWtdyGRMIEHl/EYMbweEIuTxgbK2q987u+p7mv9W6iRIKFVxgaQyCERrz3JBgfTiRRGm5XyR/VQuL4TRyugM5gs2NiuXwhgxFTI73kMPR1Nd5gMKLBzhA0AQeHgwcwOIGDQ9euQ5WfOdbXUQfFcPgsNp9GZ0VFc0GZTGWWFZ2wILpb0l8iSBSwMwQNw3hiCBqPJ0SACRgMfu1HqB9K8hRtNyE6gwWyYDaFGhXDEYBvO34kz2IxV5SeWk1hsKFoDD44BIfFhW5EYcCtD9asP5i1u6f5DyiCRIskM5hRHICjWTwiiXZwf47FpD+0PwsHE7ErEg7auGJQwbg1H24I2ohevyGEy+W01FX9DznkVlD33QqAAAAAAElFTkSuQmCC" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1"/><noscript><picture><source srcset="/static/931d13de42ed971b7c7da19f887ab7d4/22f7f/bebe.png 40w,
/static/931d13de42ed971b7c7da19f887ab7d4/587c9/bebe.png 80w,
/static/931d13de42ed971b7c7da19f887ab7d4/d966b/bebe.png 120w,
/static/931d13de42ed971b7c7da19f887ab7d4/84afe/bebe.png 460w" sizes="(max-width: 460px) 100vw, 460px" /><img loading="lazy" sizes="(max-width: 460px) 100vw, 460px" srcset="/static/931d13de42ed971b7c7da19f887ab7d4/22f7f/bebe.png 40w,
/static/931d13de42ed971b7c7da19f887ab7d4/587c9/bebe.png 80w,
/static/931d13de42ed971b7c7da19f887ab7d4/d966b/bebe.png 120w,
/static/931d13de42ed971b7c7da19f887ab7d4/84afe/bebe.png 460w" src="/static/931d13de42ed971b7c7da19f887ab7d4/84afe/bebe.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="author-info"><div class="bio"><h2>5기_베베</h2><p>우아한테크코스 5기 베베(최원용)입니다 :)</p><p><a href="/author/5-기-베베/">More posts</a> by<!-- --> <!-- -->5기_베베<!-- -->.</p></div></div></div><style data-emotion="css cdhz0m">.css-cdhz0m{display:block;overflow:hidden;margin:0 -4px;width:40px;height:40px;border:#fff 2px solid;border-radius:100%;-webkit-transition:all 0.5s cubic-bezier(0.4, 0.01, 0.165, 0.99) 700ms;transition:all 0.5s cubic-bezier(0.4, 0.01, 0.165, 0.99) 700ms;}@media (max-width: 500px){.css-cdhz0m{width:36px;height:36px;}}@media (prefers-color-scheme: dark){.css-cdhz0m{border-color:#1a1c20;}}</style><a class="author-avatar css-cdhz0m" href="/author/5-기-베베/"><div class="author-profile-image css-121fnpm gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:100%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEtklEQVQ4yyXQa1TSdxzH8f+jndYqQ7n8QUXkriAXERDttMrmZeus5rSt2jQrl3WszMsq53S1bvOUG3nOWnVSKy9rmVreQgNUVASBP5cAzRSwvABKQlvnrD1wP/Oc39PX9/05P8gzrXe7dIszRqdNVZCVkSYRpCSIPo7ji3ns7UJe/rfp07ahl/YRh0U1aekfNyvtBvmz0R6LVmbWPIG8LxG3y+B3WyvLCrbGxqQmisVsFpvBZNLoEh6XTSKcLTnsdSJT5oEX5v5xo9Kmf7oqTSPdkNuFLM1bTOrOXVs2JceLtwoEgqgoLp3JotA4dHo0hSyIomrlLTPj2ufGfjuitOp6V7FxpAuad476vVZFx90dCfHJkvhkEX9nomAzhyViMrk0amR4OBGDqZFe8DhNY4jC9n6zWSMzqrsQdSc059QFvGNPW2s/EfLTEuILM1JzkhN3iPhJfA6TFAHjYGxQ0G8XSj0uk92gtOsVltEeE8iqOw3D7WC20ecZMwy0f75JXJ6d0VZx/Hx2+unMlLy0zamiWD6TRsbjuh/Wzk4a7EifDWCtzKTpRoY7dIOPIM+sbX7OvujQ39ifLr962nz9XGvp4b9O5dYX51YeyLx8KPPHE4enn486bepx04DVAHAP+CqQXcGLninv3MSCZ9Jy/bytutR571fVzwWKivze8mP1BVnNZ3Ll92/OOY0O6/Bz8wo2a3uN6hWsHWiFlnwun3dqYcExP4mMNVwxXitTXCyUnc1vLs5uKMyuL84xD7bPuEygPGFRWZFV3AWyGuVDKOB/5X/90ud1+PyzDnWn7krRUFVJ98kDd/el1xzbrbxxYcH9wjEx6hrTvHg2ZEOUZm2PYbgDZEfkD6A3b9yBgNvne7XgnV6YGVNXn9FWFQycO9KYv7fmxNdFh/ZZn2n+fj01O2UAsy26p6YRmX7oMcgO996H3r59vbTk9vs9794F7HZje+X3XeeOtpV/V1e479bxPczISIFQXHX1okreNmUbnjCrdIPtQIKs6kkj9M/bxeXlfwMBr1RatWVbyk8Hv1JUnrxTlH0zf8+1I5nUSHIwmoAKxlKojIwvv2i6d92k6USGHg3Kmvq76qHl5f/0Bs3evd+QKUx+XMLOpG2tZbmNJTl/Fmcf3bU9KAQmEMIJoUQcHIYKhsOI5KSkpKZaqVbxQP64DqqulgrjJFRatCBOwhfEi8QJNRUF90vzWi4Vf5a0FYXG43BhWFwYnkAMC48kRlDWbcB8mpYyqmyWtdyGRMIEHl/EYMbweEIuTxgbK2q987u+p7mv9W6iRIKFVxgaQyCERrz3JBgfTiRRGm5XyR/VQuL4TRyugM5gs2NiuXwhgxFTI73kMPR1Nd5gMKLBzhA0AQeHgwcwOIGDQ9euQ5WfOdbXUQfFcPgsNp9GZ0VFc0GZTGWWFZ2wILpb0l8iSBSwMwQNw3hiCBqPJ0SACRgMfu1HqB9K8hRtNyE6gwWyYDaFGhXDEYBvO34kz2IxV5SeWk1hsKFoDD44BIfFhW5EYcCtD9asP5i1u6f5DyiCRIskM5hRHICjWTwiiXZwf47FpD+0PwsHE7ErEg7auGJQwbg1H24I2ohevyGEy+W01FX9DznkVlD33QqAAAAAAElFTkSuQmCC" alt="5기_베베" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1"/><noscript><picture><source srcset="/static/931d13de42ed971b7c7da19f887ab7d4/22f7f/bebe.png 40w,
/static/931d13de42ed971b7c7da19f887ab7d4/587c9/bebe.png 80w,
/static/931d13de42ed971b7c7da19f887ab7d4/d966b/bebe.png 120w,
/static/931d13de42ed971b7c7da19f887ab7d4/84afe/bebe.png 460w" sizes="(max-width: 460px) 100vw, 460px" /><img loading="lazy" sizes="(max-width: 460px) 100vw, 460px" srcset="/static/931d13de42ed971b7c7da19f887ab7d4/22f7f/bebe.png 40w,
/static/931d13de42ed971b7c7da19f887ab7d4/587c9/bebe.png 80w,
/static/931d13de42ed971b7c7da19f887ab7d4/d966b/bebe.png 120w,
/static/931d13de42ed971b7c7da19f887ab7d4/84afe/bebe.png 460w" src="/static/931d13de42ed971b7c7da19f887ab7d4/84afe/bebe.png" alt="5기_베베" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></a></li></ul><section class="post-full-byline-meta"><h4 class="author-name"><a href="/author/5-기-베베/">5기_베베</a></h4><div class="byline-meta-content"><time class="byline-meta-date" dateTime="2023-11-23">23 Nov 2023</time><span class="byline-reading-time"><span class="bull">•</span> <!-- -->8<!-- --> min read</span></div></section></section></div></header><style data-emotion="css 4wxe1t">.css-4wxe1t{margin:25px 0 50px;height:560px;background:#c5d2d9 center center;-webkit-background-size:cover;background-size:cover;border-radius:5px;}@media (max-width: 1170px){.css-4wxe1t{margin:25px -6vw 50px;border-radius:0;}.css-4wxe1t img{max-width:1170px;}}@media (max-width: 800px){.css-4wxe1t{height:400px;}}@media (max-width: 500px){.css-4wxe1t{margin-bottom:4vw;height:350px;}}</style><figure class="css-4wxe1t"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div aria-hidden="true" style="width:100%;padding-bottom:95.662100456621%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAADxElEQVQ4y32Ta0wcVRTHz8zOgkZEjf3QSk0aNyatxgQfkS+Nj2BTNVEDaYqAMY1tYmql3VIkUBaTxVJYl2WXQrvt7NBlWSnQgrK4uy1NoBSr0tpEbawmKgFTHomJLfjoA9g9/ufOSLFSb/LPOffcc35z5swdokCQFkmiQAuRGjQF39gbccNPQV4u/I3QKuz7sO+CXSvObwGaRaLYAkmGEM9ar8dyUPgzLCO2Drbe8CG15ZTIM7oSsFTIJgCqgC2CB1fCj0GtJuAXxIohgIIsbCDYI95KFKgtdyNpyDyww/fgcD9shgnuxP4qVGd0E7whQGpwArVuxKpQ95TRoTGvh40nieRpHHxsdtIObUCs0dyPL+QZub9BHdDWhbmTFiJqbtW7KMDTXAtFqphTHP4czp+kQ4dPm119A7WK7nSoFtLhJYKjhWT9dWXzI9iQNGYOfAoaEQAtdC4Dz7U+uyET+8uAX6Hm8AAdbP6BGv1nqc4XpqFzRDvLaU+bRzLa1OekiStRAn8Y9gvYSfJrM9aX3njiHvDSyLqC3J4uydvEcqOfaR/krJ6hsgqWdztqaEclMTPdvHPi6wr/UagNClDrkcw0ouV3PJiViWxKKS136gAqdVy27HawVO44I1dVXyBv06t72310utt1778vsRpUzGtC1HaU6OUGsq1+7KHlGWuezk29axk9l/dMutM5Fokf+LHasVlvZ4Qkqfdx2wNvzX/pV2cGGqZIrMV/x6F2KV3zK/R2QDlbqR++cj/R85lEK1dd6K61fdfjGr8+2MCHywrncciKRdbBvKtwHV/7bD/TwgqERGfcS0J/HLWkcZSapjusfSMqDU2G74v+OegZnYjW8kTcPdfXaNeLE5AOntPVt8+eoFvXP0DA7kxGpEv8KabXL/HcwCaeGTzIV8+o8+dDFcmxSA37ivOSqVYlaYKT/QeKeWlgRCI+IVEyIg/rQH/Rir8udgeuXYp68Lbrk8frCxKjkQ9nx2Ou2bhvO9duy+XjDTsSP3Xvmb0d0MJRQHulMPZ8rCyVzzc9wlPhdB5Vib/vKOOJWB2f8u/imLfoxtcfVf46pL7HFzudS3eYhBI9sBFahtfeysNk55O0nU9QCcco27E5Jzta/+7eT9zvlBS+mLUGZSk123Ly0W3VbWdoAiF0+hVi/dBJCHFXUR5d6ffSt0fepy2vrRV1WsWbNBl303+BkZsCUAJcAVQII1Cud5HsLc6Xpwd8ls+1UsX+era8M/8FavtgiwUfSqGllt4FtwPYAXXB7zT0O24WM/3v+hsTiFWuX50OQAAAAABJRU5ErkJggg==" alt="JPA가 Fetch Join에 대한 On절을 지원하지 않는 이유" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/019d91f237fd3c915a0156fee0326565/8a9e0/zipgo.png 438w" sizes="(max-width: 438px) 100vw, 438px" /><img loading="lazy" sizes="(max-width: 438px) 100vw, 438px" srcset="/static/019d91f237fd3c915a0156fee0326565/8a9e0/zipgo.png 438w" src="/static/019d91f237fd3c915a0156fee0326565/8a9e0/zipgo.png" alt="JPA가 Fetch Join에 대한 On절을 지원하지 않는 이유" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></figure><style data-emotion="css 1hzbvd8">.css-1hzbvd8{position:relative;margin:0 auto;padding:0 170px 6vw;min-height:230px;font-family:Georgia,serif;font-size:2rem;line-height:1.6em;background:#fff;}@media (max-width: 1170px){.css-1hzbvd8{padding:0 11vw;}}@media (max-width: 800px){.css-1hzbvd8{padding:0 5vw;font-size:1.8rem;}}@media (max-width: 500px){.css-1hzbvd8{padding:0;}}@media (max-width: 500px){.css-1hzbvd8 .post-full-custom-excerpt{font-size:1.9rem;line-height:1.5em;}}.css-1hzbvd8 .no-image{padding-top:0;}.css-1hzbvd8 h1,.css-1hzbvd8 h2,.css-1hzbvd8 h3,.css-1hzbvd8 h4,.css-1hzbvd8 h5,.css-1hzbvd8 h6,.css-1hzbvd8 p,.css-1hzbvd8 ul,.css-1hzbvd8 ol,.css-1hzbvd8 dl,.css-1hzbvd8 pre,.css-1hzbvd8 blockquote,.css-1hzbvd8 .post-full-comments,.css-1hzbvd8 .footnotes{margin:0 0 1.5em 0;min-width:100%;}@media (max-width: 500px){.css-1hzbvd8 p,.css-1hzbvd8 ul,.css-1hzbvd8 ol,.css-1hzbvd8 dl,.css-1hzbvd8 pre,.css-1hzbvd8 .post-full-comments,.css-1hzbvd8 .footnotes{margin-bottom:1.28em;}}.css-1hzbvd8 li{word-break:break-word;}.css-1hzbvd8 li p{margin:0;}.css-1hzbvd8 a{color:#15171A;word-break:break-word;box-shadow:#15171A 0 -1px 0 inset;-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out;}.css-1hzbvd8 a:hover{color:#3eb0ef;-webkit-text-decoration:none;text-decoration:none;box-shadow:#3eb0ef 0 -1px 0 inset;}.css-1hzbvd8 strong,.css-1hzbvd8 em{color:#0a0b0c;}.css-1hzbvd8 small{display:inline-block;line-height:1.6em;}.css-1hzbvd8 img,.css-1hzbvd8 video{display:block;margin:1.5em auto;width:100%;max-width:1040px;height:auto;}@media (max-width: 1040px){.css-1hzbvd8 img,.css-1hzbvd8 video{width:100%;}}.css-1hzbvd8 img[src$='#full']{max-width:none;width:100vw;}.css-1hzbvd8 img+br+small{display:block;margin-top:-3em;margin-bottom:1.5em;text-align:center;}.css-1hzbvd8 iframe{margin:0 auto!important;}.css-1hzbvd8 blockquote{margin:0 0 1.5em;padding:0 1.5em;border-left:#3eb0ef 3px solid;}@media (max-width: 500px){.css-1hzbvd8 blockquote{padding:0 1.3em;}}.css-1hzbvd8 blockquote p{margin:0 0 1em 0;color:inherit;font-size:inherit;line-height:inherit;font-style:italic;}.css-1hzbvd8 blockquote p:last-child{margin-bottom:0;}.css-1hzbvd8 code{padding:0 5px 2px;font-size:0.8em;line-height:1em;font-weight:400!important;background:#e5eff5;border-radius:3px;}.css-1hzbvd8 p code{word-break:break-all;}.css-1hzbvd8 pre{overflow-x:auto;padding:20px;max-width:100%;color:#e5eff5;font-size:1.4rem;line-height:1.5em;border-radius:5px;}.css-1hzbvd8 pre code{padding:0;font-size:inherit;line-height:inherit;background:transparent;}.css-1hzbvd8 pre code :not(span){color:inherit;}.css-1hzbvd8 .fluid-width-video-wrapper{margin:1.5em 0 3em;}.css-1hzbvd8 hr{margin:2em 0;}.css-1hzbvd8 hr:after{content:'';position:absolute;top:-15px;left:50%;display:block;margin-left:-10px;width:1px;height:30px;background:#e4eaed;box-shadow:#fff 0 0 0 5px;-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);}.css-1hzbvd8 hr+p{margin-top:1.2em;}.css-1hzbvd8 h1,.css-1hzbvd8 h2,.css-1hzbvd8 h3,.css-1hzbvd8 h4,.css-1hzbvd8 h5,.css-1hzbvd8 h6{color:#0a0b0c;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;}.css-1hzbvd8 h1{margin:0.5em 0 0.4em;font-size:4.2rem;line-height:1.25em;font-weight:600;}.css-1hzbvd8 p+h1{margin-top:0.8em;}@media (max-width: 800px){.css-1hzbvd8 h1{font-size:3.2rem;line-height:1.25em;}}.css-1hzbvd8 h2{margin:0.5em 0 0.4em;font-size:3.2rem;line-height:1.25em;font-weight:600;}.css-1hzbvd8 p+h2{margin-top:0.8em;}@media (max-width: 800px){.css-1hzbvd8 h2{margin-bottom:0.3em;font-size:2.8rem;line-height:1.25em;}}.css-1hzbvd8 h3{margin:0.5em 0 0.2em;font-size:2.5rem;line-height:1.3em;font-weight:600;}.css-1hzbvd8 h2+h3{margin-top:0.7em;}@media (max-width: 800px){.css-1hzbvd8 h3{margin-bottom:0.3em;font-size:2.4rem;line-height:1.3em;}}.css-1hzbvd8 h4{margin:0.5em 0 0.2em;font-size:2.5rem;font-weight:600;}.css-1hzbvd8 h2+h4{margin-top:0.7em;}.css-1hzbvd8 h3+h4{margin-top:0;}@media (max-width: 800px){.css-1hzbvd8 h4{margin-bottom:0.3em;font-size:2.4rem;line-height:1.3em;}}.css-1hzbvd8 h5{display:block;margin:0.5em 0;padding:0.4em 1em 0.9em;border:0;color:#3eb0ef;font-family:Georgia,serif;font-size:3.2rem;line-height:1.35em;text-align:center;}@media (min-width: 1180px){.css-1hzbvd8 h5{max-width:1060px;}}@media (max-width: 800px){.css-1hzbvd8 h5{margin-bottom:1em;margin-left:1.3em;padding:0 0 0.5em;font-size:2.4rem;text-align:initial;}}.css-1hzbvd8 h6{margin:0.5em 0 0.2em 0;font-size:2rem;font-weight:700;}@media (max-width: 800px){.css-1hzbvd8 h6{font-size:1.8rem;line-height:1.4em;}}.css-1hzbvd8 table{display:inline-block;overflow-x:auto;margin:0.5em 0 2.5em;max-width:100%;width:auto;border-spacing:0;border-collapse:collapse;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;font-size:1.6rem;white-space:nowrap;vertical-align:top;}.css-1hzbvd8 table{-webkit-overflow-scrolling:touch;background:radial-gradient(ellipse at left, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0) 75%) 0 center,radial-gradient(ellipse at right, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0) 75%) 100% center;background-attachment:scroll,scroll;-webkit-background-size:10px 100%,10px 100%;background-size:10px 100%,10px 100%;background-repeat:no-repeat;}.css-1hzbvd8 table td:first-of-type{background-image:linear-gradient(
      to right,
      rgba(255, 255, 255, 1) 50%,
      rgba(255, 255, 255, 0) 100%
    );-webkit-background-size:20px 100%;background-size:20px 100%;background-repeat:no-repeat;}.css-1hzbvd8 table td:last-child{background-image:linear-gradient(
      to left,
      rgba(255, 255, 255, 1) 50%,
      rgba(255, 255, 255, 0) 100%
    );-webkit-background-position:100% 0;background-position:100% 0;-webkit-background-size:20px 100%;background-size:20px 100%;background-repeat:no-repeat;}.css-1hzbvd8 table th{color:#15171A;font-size:1.2rem;font-weight:700;letter-spacing:0.2px;text-align:left;text-transform:uppercase;background-color:#f4f8fb;}.css-1hzbvd8 table th,.css-1hzbvd8 table td{padding:6px 12px;border:#e1edf4 1px solid;}@media (prefers-color-scheme: dark){.css-1hzbvd8{background:#191b1f;}.css-1hzbvd8 h1,.css-1hzbvd8 h2,.css-1hzbvd8 h3,.css-1hzbvd8 h4,.css-1hzbvd8 h6{color:rgba(255, 255, 255, 0.9);}.css-1hzbvd8 a{color:#fff;box-shadow:inset 0 -1px 0 #fff;}.css-1hzbvd8 strong{color:#fff;}.css-1hzbvd8 em{color:#fff;}.css-1hzbvd8 code{color:#fff;background:#000;}.css-1hzbvd8 hr{border-top-color:#2b2f36;}.css-1hzbvd8 figcaption{color:rgba(255, 255, 255, 0.6);}.css-1hzbvd8 table td:first-of-type{background-image:linear-gradient(to right, #191b1f 50%, #191b1f 100%);}.css-1hzbvd8 table td:last-child{background-image:linear-gradient(270deg, #191b1f 50%, rgba(25, 27, 31, 0));}.css-1hzbvd8 table th{color:rgba(255, 255, 255, 0.85);background-color:#2b2f36;}.css-1hzbvd8 table th,.css-1hzbvd8 table td{border:#2b2f36 1px solid;}.css-1hzbvd8 .kg-bookmark-container,.css-1hzbvd8 .kg-bookmark-container:hover{color:rgba(255, 255, 255, 0.75);box-shadow:0 0 1px rgba(255, 255, 255, 0.9);}}.css-1hzbvd8 code[class*='language-'],.css-1hzbvd8 pre[class*='language-']{color:white;background:none;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;font-feature-settings:normal;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;margin-bottom:0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-1hzbvd8 pre[class*='language-']{overflow:auto;}.css-1hzbvd8 *:not(pre)>code[class*='language-']{border-radius:0.3em;background:rgb(1, 22, 39);color:white;padding:0.15em 0.5em;white-space:normal;}.css-1hzbvd8 .token.attr-name{color:rgb(173, 219, 103);font-style:italic;}.css-1hzbvd8 .token.comment{color:rgb(128, 147, 147);}.css-1hzbvd8 .token.string,.css-1hzbvd8 .token.url{color:rgb(173, 219, 103);}.css-1hzbvd8 .token.variable{color:rgb(214, 222, 235);}.css-1hzbvd8 .token.number{color:rgb(247, 140, 108);}.css-1hzbvd8 .token.builtin,.css-1hzbvd8 .token.char,.css-1hzbvd8 .token.constant,.css-1hzbvd8 .token.function{color:rgb(130, 170, 255);}.css-1hzbvd8 .token.punctuation{color:rgb(199, 146, 234);}.css-1hzbvd8 .token.selector,.css-1hzbvd8 .token.doctype{color:rgb(199, 146, 234);font-style:'italic';}.css-1hzbvd8 .token.class-name{color:rgb(255, 203, 139);}.css-1hzbvd8 .token.tag,.css-1hzbvd8 .token.operator,.css-1hzbvd8 .token.keyword{color:#ffa7c4;}.css-1hzbvd8 .token.boolean{color:rgb(255, 88, 116);}.css-1hzbvd8 .token.property{color:rgb(128, 203, 196);}.css-1hzbvd8 .token.namespace{color:rgb(178, 204, 214);}.css-1hzbvd8 pre[data-line]{padding:1em 0 1em 3em;position:relative;}.css-1hzbvd8 .gatsby-highlight-code-line{background-color:hsla(207, 95%, 15%, 1);display:block;margin-right:-1.3125rem;margin-left:-1.3125rem;padding-right:1em;padding-left:1.25em;border-left:0.25em solid #ffa7c4;}.css-1hzbvd8 .gatsby-highlight{margin-bottom:1.75rem;margin-left:-1.3125rem;margin-right:-1.3125rem;border-radius:10px;background:#011627;-webkit-overflow-scrolling:touch;overflow:auto;}.css-1hzbvd8 .gatsby-highlight pre[class*='language-']{float:left;min-width:100%;}</style><section class="post-full-content css-1hzbvd8"><div><h1>JPA가 Fetch Join에 대한 On절을 지원하지 않는 이유</h1>
<hr/>
<p>집사의고민 프로젝트에서 조회 쿼리가 발생할 때 데이터가 삭제되는 상황이 발생하였습니다.
그래서 이번 글에서는 간단한 JPA의 Fetch Join 동작 원리와 유의해야 하는 부분들에 관해서 기술해보려고 합니다.</p>
<h3>참고 ERD</h3>
<p>아래와 같은 테이블 구조에서 발생하는 문제입니다. 참고로 테이블의 모든 컬럼을 명시하지는 않았습니다.</p>
<p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:882px">
      <a class="gatsby-resp-image-link" href="/static/7307f8fd2e96a1e548017953a4825e33/5f5e5/ERD.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:65.60000000000001%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB7ElEQVQ4y41S2ZLaMBD0l3DuE2EJYC6DbVmSLxkDu1uV//+UzvSwUElewkOXyppRT3d7ojS1SNMCRVEizx3ieIf1+o443su5lbpDVV1hbau9xnjsdsmzh2828QHOdYjSNEdhDEII8N5jMpk8MR6PMRwOsd0e0TQfyLJSCDN0XYfZbKZ19o1GI0ynbzowSjMLU3hpttjK1Pn7EvP5EovFWicvVxskxwJ1fRMXLbJc+o3D+2KFH/OfWC5jxJu99lkbEPnyjKa9SWMlhJk8tjgkBU6pR3f+VOR5jdB+COlVe3NTY38oFNYFXG+/4Hx3J2SRH77slHC3zxWHxMjDCqnY5LBWCPnAulZIr0JmsNmmOJ4cCtuIAHfPkL7L6oyqvijBg5AP+NgUtVoN4RN0Q0VeBBjTqHLWeMfT+zOiQgipkFNZINGfhJyu9eamD8ryIujlr180AoIbQPA+IgnJzv0X2nDPh9ZJ6PzdIq3QMk8jLh44nexfUIVsUjBUShfFlK9WNLOg9RC+xKJkmqbo+16U1bIqU12ZwWCg66NrQ5n/AydTIW1a18iPcljLIi9XOyRJLne1bIf5XhtpfgUP4rLq1QUjIbgBXCUjUVn+5VfUPQipgNEwa+4qs+a+Mmuul3uF8Kns+yQpFWq+/4D13y/AxeWA6+i9AAAAAElFTkSuQmCC&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="ERD.png" title="ERD.png" src="/static/7307f8fd2e96a1e548017953a4825e33/5f5e5/ERD.png" srcSet="/static/7307f8fd2e96a1e548017953a4825e33/0eb09/ERD.png 500w, /static/7307f8fd2e96a1e548017953a4825e33/5f5e5/ERD.png 882w" sizes="(max-width: 882px) 100vw, 882px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span></p>
<p>우선 쿼리가 정상적으로 동작하는지와 어떤 쿼리가 발생하는지를 알아보기 위해 간단한 테스트 코드를 작성하는 것으로 시작해 보겠습니다.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@DataJpaTest</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">QueryDslTestConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Sql</span><span class="token punctuation">(</span>scripts <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;classpath:truncate.sql&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;classpath:data.sql&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureTestDatabase</span><span class="token punctuation">(</span>replace <span class="token operator">=</span> <span class="token class-name">AutoConfigureTestDatabase<span class="token punctuation">.</span>Replace</span><span class="token punctuation">.</span>NONE<span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">PetFoodRepositoryImplTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">PetFoodQueryRepository</span> petFoodQueryRepository<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> 키워드와_브랜드_이름으로_동적_조회한다<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// given</span>
        <span class="token keyword">final</span> <span class="token class-name">String</span> keyword <span class="token operator">=</span> <span class="token string">&quot;diet&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">String</span> brand <span class="token operator">=</span> <span class="token string">&quot;베베&quot;</span><span class="token punctuation">;</span>

        <span class="token comment">// when</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PetFood</span><span class="token punctuation">&gt;</span></span> petFoods <span class="token operator">=</span> petFoodQueryRepository<span class="token punctuation">.</span><span class="token function">searchPetFoodByDynamicValues</span><span class="token punctuation">(</span>keyword<span class="token punctuation">,</span> brand<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// then</span>
        <span class="token function">assertAll</span><span class="token punctuation">(</span>
                <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token function">assertThat</span><span class="token punctuation">(</span>petFoods<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">extracting</span><span class="token punctuation">(</span>petFood <span class="token operator">-&gt;</span> petFood<span class="token punctuation">.</span><span class="token function">getKeyword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;diet&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token function">assertThat</span><span class="token punctuation">(</span>petFoods<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">extracting</span><span class="token punctuation">(</span>petFood <span class="token operator">-&gt;</span> petFood<span class="token punctuation">.</span><span class="token function">getBrand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;퓨리나&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token function">assertThat</span><span class="token punctuation">(</span>petFoods<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasSize</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre></div>
<h3>쿼리 확인</h3>
<div class="gatsby-highlight" data-language="sql"><pre class="language-sql"><code class="language-sql">Hibernate: 
<span class="token comment">// 1번</span>
    <span class="token keyword">select</span>
        p1_0<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
        p1_0<span class="token punctuation">.</span>brand_id<span class="token punctuation">,</span>
        p1_0<span class="token punctuation">.</span>image_url<span class="token punctuation">,</span>
        p1_0<span class="token punctuation">.</span>keyword_id<span class="token punctuation">,</span>
        p1_0<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
        p1_0<span class="token punctuation">.</span>purchase_link 
    <span class="token keyword">from</span>
        pet_food p1_0 
    <span class="token keyword">join</span>
        brand b1_0 
            <span class="token keyword">on</span> b1_0<span class="token punctuation">.</span>id<span class="token operator">=</span>p1_0<span class="token punctuation">.</span>brand_id 
    <span class="token keyword">join</span>
        keyword k1_0 
            <span class="token keyword">on</span> k1_0<span class="token punctuation">.</span>id<span class="token operator">=</span>p1_0<span class="token punctuation">.</span>keyword_id 
    <span class="token keyword">where</span>
        k1_0<span class="token punctuation">.</span>name<span class="token operator">=</span>? 
        <span class="token operator">and</span> b1_0<span class="token punctuation">.</span>name<span class="token operator">=</span>?
Hibernate: 
<span class="token comment">// 2번</span>
    <span class="token keyword">select</span>
        k1_0<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
        k1_0<span class="token punctuation">.</span>name 
    <span class="token keyword">from</span>
        keyword k1_0 
    <span class="token keyword">where</span>
        k1_0<span class="token punctuation">.</span>id<span class="token operator">=</span>?
petFood<span class="token punctuation">.</span>getKeyword<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getName<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> 다이어트
Hibernate: 
<span class="token comment">// 3번</span>
    <span class="token keyword">select</span>
        b1_0<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
        b1_0<span class="token punctuation">.</span>founded_year<span class="token punctuation">,</span>
        b1_0<span class="token punctuation">.</span>has_research_center<span class="token punctuation">,</span>
        b1_0<span class="token punctuation">.</span>has_resident_vet<span class="token punctuation">,</span>
        b1_0<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
        b1_0<span class="token punctuation">.</span>nation 
    <span class="token keyword">from</span>
        brand b1_0 
    <span class="token keyword">where</span>
        b1_0<span class="token punctuation">.</span>id<span class="token operator">=</span>?
petFood<span class="token punctuation">.</span>getBrand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getName<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> 베베
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span></code></pre></div>
<p>총 1 + N(2)가 발생하여 3번의 쿼리가 발생했습니다.
이렇게 조회한 엔티티가 한 번, 그와 연관된 엔티티가 N번 조회되는 문제를 N+1 문제라고 합니다.
Fetch Join 문법을 사용하여 이 문제를 해결할 수 있습니다.
이제 해당 쿼리를 개선해 보겠습니다.</p>
<h2>Fetch Join으로 개선하기</h2>
<hr/>
<p>위 문제를 해결하기 위해 PetFoodQueryRepository의 searchPetFoodByDynamicValues 메서드를 수정해 보겠습니다.</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Repository</span>
<span class="token annotation punctuation">@RequiredArgsConstructor</span>
<span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>readOnly <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PetFoodQueryRepository</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">JPAQueryFactory</span> queryFactory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PetFood</span><span class="token punctuation">&gt;</span></span> <span class="token function">searchPetFoodByDynamicValues</span><span class="token punctuation">(</span><span class="token class-name">String</span> keywordName<span class="token punctuation">,</span> <span class="token class-name">String</span> brandName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> queryFactory
                <span class="token punctuation">.</span><span class="token function">selectFrom</span><span class="token punctuation">(</span>petFood<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>petFood<span class="token punctuation">.</span>keyword<span class="token punctuation">,</span> keyword<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token function">equalsKeyword</span><span class="token punctuation">(</span>keywordName<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>petFood<span class="token punctuation">.</span>brand<span class="token punctuation">,</span> brand<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token function">equalsBrand</span><span class="token punctuation">(</span>brandName<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">fetchJoin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">BooleanExpression</span> <span class="token function">equalsKeyword</span><span class="token punctuation">(</span><span class="token class-name">String</span> keywordName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hasText</span><span class="token punctuation">(</span>keywordName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> keyword<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>keywordName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">BooleanExpression</span> <span class="token function">equalsBrand</span><span class="token punctuation">(</span><span class="token class-name">String</span> brandName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">hasText</span><span class="token punctuation">(</span>brandName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> brand<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span>brandName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span></code></pre></div>
<p>위와 같이 on절로 필터링을 진행하고 Fetch Join을 사용했습니다. 조인 조건은 다음과 같습니다.</p>
<ul>
<li>키워드가 일치한 데이터만 Join</li>
<li>브랜드가 일치한 데이터만 Join</li>
</ul>
<p>하지만 테스트 코드를 실행시키면 아래와 같은 에러가 발생합니다.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">java.lang.IllegalArgumentException: org.hibernate.query.SemanticException: with-clause not allowed on fetched associations; use filters</code></pre></div>
<p>에러를 자세히 읽어보면 <code class="language-text">not allowed on fetched associations</code>이 발생하는 것을 확인할 수 있는데,
이는 fetch 구문에서 on절을 지원하지 않는다는 뜻입니다.</p>
<p>실제로 하이버네이트 공식 문서에는 이런 말이 있습니다.</p>
<blockquote>
<p>“HQL(Hibernate Query Language)에서 Fetch Join에 별칭(Alias)이 필요한 유일한 이유는 추가 컬렉션(N방향)을 재귀적으로 조인하여 가져오는 경우밖에 없다.”</p>
</blockquote>
<p>이 말은 Fetch Join에 on절이 필요한 경우는 거의 없다시피 하지만,
역설적으로 하이버네이트 상에서는 Fetch Join을 지원하긴 한다는 뜻입니다.</p>
<p>하지만 JPQL로 Fetch Join + on절을 사용하면 런타임 에러가 발생합니다.</p>
<p>JPQL에서는 Fetch Join에 on절을 지원하지 않을까요?
이 이유는 생각보다 간단하지만, 많은 분들이 간과하고 있을 것 같습니다.</p>
<h2>Fetch Join의 한계</h2>
<hr/>
<p>Fetch Join 문법은 N+1 문제를 방지하기 위해 연관관계가 맺어진 테이블의 모든 값들을 한 번에 가져옵니다.
Fetch Join은 너무나 필수적인 기능이기도 하지만 다음과 같이 명확한 한계가 존재합니다.</p>
<ul>
<li>
<p><strong>Fetch Join의 대상은 별칭을 줄 수 없다.</strong></p>
<ul>
<li>select절, where절, 서브쿼리 등에서 Fetch Join 대상을 사용할 수 없다.</li>
<li>하이버네이트 자체에서는 별칭을 지원하지만, 연관된 데이터 수에 대한 무결성이 깨질 수도 있다.(아래에서 자세하게 설명)
JPQL과 querydsl에서 Fetch Join + on 문법을 지원하지 않는 이유도 위와 같다.</li>
</ul>
</li>
<li>
<p>(참고) 2개 이상의 xToMany 관계에서는 모든 연관 엔티티에 Fetch Join을 적용할 수 없다.</p>
<ul>
<li>대신 default<em>batch</em>fetch_size라는 차선책이 존재한다.</li>
</ul>
</li>
<li>
<p>(참고) 페이지네이션 사용이 불가능하다.</p>
<ul>
<li>컬렉션(xToMany) 관계에서 Fetch Join을 사용하면 페이징 처리가 불가능하다.</li>
</ul>
</li>
</ul>
<h2>On절 대신 Where절로 사용하기</h2>
<hr/>
<p>Fetch Join에서 on절을 지원하진 않지만, where절은 사용할 수 있습니다.
다만, 잘못 사용하면 꽤나 골치 아픈 일이 일어날 수도 있기 때문에 확실히 짚고 넘어가야 합니다.</p>
<h3>Fetch Join의 On절을 지원하지 않는 이유는 무엇일까?</h3>
<p>위에서 하이버네이트 자체에서는 별칭을 지원하지만, 연관된 데이터 수에 대한 무결성이 깨질 수도 있다고 했습니다.
이는 JPA에서 엔티티 객체 그래프와 DB의 데이터 일관성을 맞추어 주어야 하기 때문입니다.
예를 들어 아래와 같은 데이터가 있다고 가정해 보겠습니다.</p>
<ul>
<li>brand1 - petFood1</li>
<li>brand1 - petFood2</li>
<li>brand1 - petFood3</li>
</ul>
<p>만약 조인 대상(petFood)을 필터링의 주체로 사용하여 petFood3을 제외하고 조인한다면,
JPA는 다음과 같은 결과를 반환해 줄 것입니다.</p>
<ul>
<li>brand1 - [petFood1, petFood2]</li>
</ul>
<p>얼핏 보면 잘못된 게 없습니다. 저희가 바라던 대로 데이터가 반환되었으니까요.
하지만 위와 같은 결과가 나오면 Fetch Join을 한 JPA의 입장에서 상당히 난처해집니다.</p>
<p>Fetch Join은 단 한 번의 쿼리로 join 대상 테이블 데이터까지 한 번에 가져오고 영속성 컨텍스트에 반영합니다.
그래서 임의로 데이터를 빼고 조회하면 db에는 해당하는 데이터가 없다고 판단합니다.</p>
<p>엔티티 값을 변경하면 db에 쉽게 반영되는 걸 알 수 있듯이, 이렇게 되면 최악의 경우에는 petFood3이 db에서 삭제될 수도 있습니다.
위 상황들을 고려해서 JPA는 이 상황을 방지하기 위해 별칭에 대한 조건절을 제공해주지 않습니다.</p>
<p>이해를 돕기 위해 쿼리문을 직접 작성해 보겠습니다.
예를 들어 brand(1)과 연관관계가 맺어진 petFood(N)을 Fetch Join으로 조회한다고 가정해 보겠습니다.</p>
<div class="gatsby-highlight" data-language="sql"><pre class="language-sql"><code class="language-sql"><span class="token comment">// 1번 쿼리</span>
<span class="token keyword">SELECT</span> b <span class="token keyword">FROM</span> Brand b <span class="token keyword">JOIN</span> <span class="token keyword">fetch</span> b<span class="token punctuation">.</span>petFoods pf <span class="token keyword">ON</span> pf<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#x27;베베&#x27;</span></code></pre></div>
<p>1번 쿼리는 Fetch Join에 별칭을 사용했기 때문에 런타임에서 에러가 발생합니다. 따라서 N+1을 해결할 수 없습니다.</p>
<div class="gatsby-highlight" data-language="sql"><pre class="language-sql"><code class="language-sql"><span class="token comment">// 2번 쿼리</span>
<span class="token keyword">SELECT</span> b <span class="token keyword">FROM</span> Brand b <span class="token keyword">JOIN</span> <span class="token keyword">fetch</span> b<span class="token punctuation">.</span>petFoods pf <span class="token keyword">WHERE</span> pf<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#x27;베베&#x27;</span></code></pre></div>
<p>사실 1번 쿼리와 2번 쿼리는 동일하게 동작하는 쿼리입니다.
그리고 조인과 무관하게 Brand 자체 데이터를 필터링하는 것이기 때문에,
on절보다 where절을 사용하는 게 더 적절합니다.</p>
<h2>Fetch Join과 Where절의 함정 그리고 Outer Join</h2>
<p>“Fetch Join은 on을 지원하지 않지만, where로 해결할 수 있다.”라고 느껴질 수도 있는데, 반은 맞고 반은 틀린 말입니다. where절도 잘못 사용하게 된다면 on절과 똑같은 문제가 발생합니다.</p>
<p>우선 Brand와 PetFood 테이블에 대한 영속성 컨텍스트의 상황을 먼저 살펴보겠습니다.
우리가 Fetch Join을 사용할 때, 영속성 컨텍스트는 Fetch Join의 대상은 모두 존재한다고 가정합니다.
영속성 컨텍스트는 Fetch Join 실행 시 아래와 같이 베베 브랜드는 일료, 사료라는 데이터를 가지고 있죠.</p>
<p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:2000px">
      <a class="gatsby-resp-image-link" href="/static/642e41392158d7fc61bd470b6f5ab3ed/de634/img_2.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:49.6%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABiElEQVQoz22S667cIAyEuRpIIJDL7mkrdd//LadjdpWq6vnxyYDCMB7HGGuwtIp122CshTHmZl0X1Fr/OVPchyyCx3mgpPQ+o5ZxFJN9TCzXJgRYY2Gtg0iaeO/hnLsFWwzYokdPgquus24803PjxwbLC4GvxNFhMqu3yDmiEK2jV5SSbsEzRURnEdiR516rskuEkb5N62o7t4a4VTyPiK0FCsmkrY6thSlmebFL+C8GpQZPh2zT86NEwfH1RHuceP1qU7BvFCStenw94n1xCvKOxuAVdqj7KWgZvNWXycKWU+98gIGnwDYjliJce8TosHJAr9cLnfmJGhgD+75P1NAUdAxVxSRGCC+05wPBaUv6cpzoWoekTnLOFAwIHN6yLJNSCjz3t6DTcHWSJSMwgpODEnF0FycpOSTxd8tD4rcZzim7pbwdMgtZ6XZJ+P2zchjpnSFrqwE/Phnqt+rwO8F1DuU6EI6BeO4Ij4suE67hsI+AvStx1uf1V+TKgoO/jrJ/qnLxf/wDwIrXI4wuQaIAAAAASUVORK5CYII=&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="img_2.png" title="img_2.png" src="/static/642e41392158d7fc61bd470b6f5ab3ed/f97d7/img_2.png" srcSet="/static/642e41392158d7fc61bd470b6f5ab3ed/0eb09/img_2.png 500w, /static/642e41392158d7fc61bd470b6f5ab3ed/1263b/img_2.png 1000w, /static/642e41392158d7fc61bd470b6f5ab3ed/f97d7/img_2.png 2000w, /static/642e41392158d7fc61bd470b6f5ab3ed/de634/img_2.png 2982w" sizes="(max-width: 2000px) 100vw, 2000px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span></p>
<p>그럼 여기에서 아래와 같은 Left Join Fetch 쿼리를 사용하게 되면 어떤 결과가 나올까요?</p>
<div class="gatsby-highlight" data-language="sql"><pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> b <span class="token keyword">FROM</span> Brand b <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> <span class="token keyword">FETCH</span> b<span class="token punctuation">.</span>petFood pf <span class="token keyword">WHERE</span> pf<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">&#x27;사료&#x27;</span></code></pre></div>
<p>Fetch Join의 대상에 대한 조건을 걸었을 때 영속성 컨텍스트가 기대하는 객체 그래프의 상태와는 달라진 것을 볼 수 있습니다.</p>
<p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:2000px">
      <a class="gatsby-resp-image-link" href="/static/bd2d97c051c563574c95ba858717a7f6/425d1/img_3.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:47.599999999999994%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABqElEQVQoz0WS67arIAyEEUFAkYuobd275/3fcvbEas8P1qygfMkkUWGOKK1B9T1U10EpdZ5hGFBKgTHme3cfw/80dR5HPNaGwH97xr281/MEnSLsuqCjdvLAWmitYakCnqYJ3ZVMYM/gUJxH5reZCYtzSIPDi/fK8gfHh2EaoeIEQ9DIzCGEUwUWY0QvDq4qljDg973g/ctD/fdueB4Ji7dQnllOAK1LhWLlrkzuxbLApGIBioNXHrAsI0pOWFtBZWv2fcQazvao80GqFaZk3LEcgd6wswWMA+3t0eA4Ih6PjNer4kn9OQTICvUFsJ49+Tk+PTQfoHMfYH8Bt33H+zgQdUe4QnUKu1dIVG0kvoADLTra8xzM6NlLxSlqgVoOQ3qnz7t7yo9ZLFu04vCo/tRtHT4VdleFmlDFAexrwoP9qNlga579sViqhXf6OxTp4bZG5JzRWuV6Zdqe/gNlsoEVKp5GQClcJdry3jGZpnWNkvrv2ix8mHJPoPxrT50ZL2K5LwmmcoGZSfmANHVolbuVDBaBizKO012hwsbezjJIbsCtkbr5AX8ibNsq9u9SPQAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="img_3.png" title="img_3.png" src="/static/bd2d97c051c563574c95ba858717a7f6/f97d7/img_3.png" srcSet="/static/bd2d97c051c563574c95ba858717a7f6/0eb09/img_3.png 500w, /static/bd2d97c051c563574c95ba858717a7f6/1263b/img_3.png 1000w, /static/bd2d97c051c563574c95ba858717a7f6/f97d7/img_3.png 2000w, /static/bd2d97c051c563574c95ba858717a7f6/425d1/img_3.png 2942w" sizes="(max-width: 2000px) 100vw, 2000px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span></p>
<p>이로 인해 영속성 컨텍스트는 “원래는 베베 브랜드에는 일료, 사료라는 객체가 존재했는데, 일료 객체가 제거되었다.”라는 판단을 내리게 됩니다.
우리는 실제로 일료 객체를 삭제한 적이 없는데 말이죠.</p>
<p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:2000px">
      <a class="gatsby-resp-image-link" href="/static/5bd262d3b7daf1aaea700eefd49d9f11/cae0a/img_4.png" style="display:block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-background-image" style="padding-bottom:45.4%;position:relative;bottom:0;left:0;background-image:url(&#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABkElEQVQoz21SyXLdMAwTRW3Wblt5W98kmcmt00z+/+tQys6pzYG2SFMwAVBVa5AtozmL7h2K5M0ZRMNQSoGWAN0qrAT3BorLWScN1gxrLZgNNJ/9ahWgLCDFaCQmAWRs3mKVmA26FfDWoQTIXQZ0r+dFbaCIQRPUeTh//kjRfPwTszYnPwBzQogRi3PItUKXguwVbt1hrRaje+zN4bF6BC93mP4HnLUpgZZzGhvYexihFGuBShlbITyaxWu2eK8OvyLj2hiP+wrlZZKwLNi3Ddu64uvzio+3Da/XG8b9ifp8gkRPTQQnfSolRKswBLDLhF0m7MXgRfKDrTMGPgT01tFE+D+/B96fDWvMWK5vUOMGLfpOQJ+iUE7fWvERemqp9JnP+k+UJ9VpzkE/C4i4z1rDiTEkgPP7EgyWRQxNUzs+8u/7P5tS3NlAYgqxPkD8pCwGlUjCyKKIhk00zMlgbcLUEdQu69FEx7k+/QiDEZysjjunld0zLzuMvMP9AtUatkoYuztAxx5QRcPLsDIl4S/eNcPGkzEMdQAAAABJRU5ErkJggg==&#x27;);background-size:cover;display:block"></span>
  <img class="gatsby-resp-image-image" alt="img_4.png" title="img_4.png" src="/static/5bd262d3b7daf1aaea700eefd49d9f11/f97d7/img_4.png" srcSet="/static/5bd262d3b7daf1aaea700eefd49d9f11/0eb09/img_4.png 500w, /static/5bd262d3b7daf1aaea700eefd49d9f11/1263b/img_4.png 1000w, /static/5bd262d3b7daf1aaea700eefd49d9f11/f97d7/img_4.png 2000w, /static/5bd262d3b7daf1aaea700eefd49d9f11/49142/img_4.png 3000w, /static/5bd262d3b7daf1aaea700eefd49d9f11/cae0a/img_4.png 3024w" sizes="(max-width: 2000px) 100vw, 2000px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy"/>
  </a>
    </span></p>
<p>위 그림처럼 베베 브랜드의 일료 데이터가 사라진 상태이기 때문에 저 상태에서 db에 flush가 된다면 실제 데이터베이스의 데이터가 삭제됩니다.
이렇게 잘못된 where절로 해결하려고 하다가 런타임 예외로 막아둔 것 마저 무시해 버리고 db 데이터를 삭제하게 될 수도 있으니 꼭 주의해서 사용해야 합니다.</p>
<h3>검증 - Outer Fetch Join과 Where절 필터링</h3>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BrandRepository</span> <span class="token keyword">extends</span> <span class="token class-name">JpaRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
  
    <span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">&quot;select b from Brand b left join fetch b.petFoods pf where pf.name = :petFoodName&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">Brand</span> <span class="token function">findBrandsByPetFoodName</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;petFoodName&quot;</span><span class="token punctuation">)</span> <span class="token keyword">final</span> <span class="token class-name">String</span> petFoodName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span> 
<span class="token keyword">void</span> <span class="token function">outer_fetch_join_test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Brand</span> brand <span class="token operator">=</span> brandRepository<span class="token punctuation">.</span><span class="token function">findBrandsByPetFoodName</span><span class="token punctuation">(</span><span class="token string">&quot;사료&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PetFood</span> petFood <span class="token operator">:</span> brand<span class="token punctuation">.</span><span class="token function">getPetFoods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;petFood.getName() = &quot;</span> <span class="token operator">+</span> petFood<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java">petFood<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> 사료</code></pre></div>
<p>위에서 봤던 그림처럼 brand는 데이터베이스 상에선 실제로 일료와 사료를 가지고 있지만, 조회해 보면 사료라는 데이터 단 하나만 가지고 있습니다. 그럼 여기서 좀 더 나가서 해당 영속성 컨텍스트를 데이터베이스에
flush 하게 되면 어떨까요?</p>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Service</span>
<span class="token annotation punctuation">@Transactional</span>
<span class="token annotation punctuation">@RequiredArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BrandService</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">BrandRepository</span> brandRepository<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getBrandByPetFoodName</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">String</span> petFoodName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Brand</span> brand <span class="token operator">=</span> brandRepository<span class="token punctuation">.</span><span class="token function">findBrandsByPetFoodName</span><span class="token punctuation">(</span>petFoodName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        brandRepository<span class="token punctuation">.</span><span class="token function">saveAndFlush</span><span class="token punctuation">(</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="java"><pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token annotation punctuation">@Transactional</span>
<span class="token keyword">void</span> <span class="token function">outer_join_test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    brandRepository<span class="token punctuation">.</span><span class="token function">findBrandsByPetFoodName</span><span class="token punctuation">(</span><span class="token string">&quot;사료&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Brand</span><span class="token punctuation">&gt;</span></span> brands <span class="token operator">=</span> brandRepository<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Brand</span> brand <span class="token operator">:</span> brands<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PetFood</span> petFood <span class="token operator">:</span> brand<span class="token punctuation">.</span><span class="token function">getPetFoods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;petFood.getName() = &quot;</span> <span class="token operator">+</span> petFood<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>결과</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">=======================
petFood.getName() = 사료
=======================
petFood.getName() = 이료
=======================
petFood.getName() = 삼료
=======================</code></pre></div>
<p>저희는 분명 값을 직접적으로 update 하거나 delete 하지 않았음에도 불구하고 데이터베이스에서 다시 조회했을 때 일료 데이터가 사라졌습니다.
실제 서비스에서 쿼리가 이렇게 나간다면, 유저들이 조회 쿼리 날릴 때마다 데이터가 사라집니다.</p>
<p>이런 문제를 방지하기 위한 몇 가지 방안이 있습니다.</p>
<ol>
<li>outer Fetch Join에서 where절을 사용하지 않는다.</li>
<li>Fetch Join 대상에 where절을 사용하지 않는다.</li>
<li>하나의 트랜잭션이 무조건 조회만 수행하도록 한다.(DB에 Flush 될 일이 절대로 없도록)</li>
</ol>
<p>만약 JPA를 사용하는 중 이런 쿼리가 발생한다면 위 3가지 중 하나를 잘 고민해 보고 적용해야 할 것 같습니다.</p>
<h2>요약</h2>
<ul>
<li>
<p>JPA에서는 객체의 상태와 DB의 일관성 문제 때문에 다음과 같은 기능들을 제공하지 않는다.</p>
<ul>
<li>Fetch Join의 on절을 지원하지 않는다.</li>
<li>Fetch Join 대상에 대해서는 별칭을 지원하지 않는다.</li>
</ul>
</li>
<li>
<p>해당 문제를 해결하기 위해 where절을 사용하여 비즈니스를 풀어낼 수 있다.</p>
<ul>
<li>단, Fetch Join의 컬렉션 결과 다(N) 쪽을 필터링 기준으로 작성하면 안 된다.</li>
<li>특히 Outer Join에 대해서는 더욱 조심해야 한다.</li>
</ul>
</li>
</ul>
<p>Fetch Join 문법은 JPA를 사용하는 개발자들에게 필수 문법인 만큼, Fetch Join의 side-effect도 간단하게 짚고 넘어가는게 좋아보입니다.</p>
<p>읽어주셔서 감사합니다.</p></div></section></article></div><div></div></main><style data-emotion="css 3pb1mm">.css-3pb1mm{position:relative;padding:0 5vw;}</style><style data-emotion="css rtegya">.css-rtegya{border-bottom:1px solid rgba(255, 255, 255, 0.1);background:#0a0b0c;position:relative;padding:0 5vw;}.css-rtegya .post-card{padding-bottom:0;border-bottom:none;}.css-rtegya .post-card:after{display:none;}.css-rtegya .post-card-primary-tag{color:#fff;opacity:0.6;}.css-rtegya .post-card-title{color:#fff;opacity:0.8;-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out;}.css-rtegya .post-card:hover .post-card-image{opacity:1;}.css-rtegya .post-card-excerpt{color:rgba(255, 255, 255, 0.6);}.css-rtegya .static-avatar{border-color:#000;}.css-rtegya .post-card-byline-content{color:rgba(255, 255, 255, 0.6);}.css-rtegya .post-card-byline-content a{color:rgba(255, 255, 255, 0.8);}.css-rtegya .author-avatar{border-color:#0a0b0c;}.css-rtegya .author-profile-image{background:#0a0b0c;}@media (max-width: 650px){.css-rtegya .post-card{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;margin:25px;padding:25px 0 0;border-bottom:1px solid rgba(255, 255, 255, 0.1);}}</style><aside class="read-next css-rtegya"><div class="css-1q5n7pp"><style data-emotion="css si41tf">.css-si41tf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin:0 -25px;padding:60px 0 0 0;}</style><div class="read-next-feed css-si41tf"><style data-emotion="css 9rmdm3">.css-9rmdm3{position:relative;-webkit-flex:0 1 326px;-ms-flex:0 1 326px;flex:0 1 326px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;margin:0 25px 50px;padding:25px;background:linear-gradient(
    #1a1c20,
    #0a0b0c
  );border-radius:3px;}.css-9rmdm3 a{-webkit-transition:all 0.2s ease-in-out;transition:all 0.2s ease-in-out;}.css-9rmdm3 a:hover{-webkit-text-decoration:none;text-decoration:none;}@media (max-width: 1170px){.css-9rmdm3{-webkit-flex:1 1 261px;-ms-flex:1 1 261px;flex:1 1 261px;margin-bottom:5vw;}}@media (max-width: 650px){.css-9rmdm3{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;margin:0 25px;padding:0;background:none;}}</style><article class="read-next-card css-9rmdm3"><header class="read-next-card-header"><style data-emotion="css e6nomv">.css-e6nomv{margin:0;color:rgba(255, 255, 255, 0.6);font-size:1.2rem;line-height:1em;font-weight:300;letter-spacing:0.4px;text-transform:uppercase;}.css-e6nomv a{color:#fff;font-weight:500;-webkit-text-decoration:none;text-decoration:none;opacity:0.8;}.css-e6nomv a:hover{opacity:1;}</style><h3 class="css-e6nomv"><span>More in</span> <a href="/tags/jpa/">JPA</a></h3></header><style data-emotion="css 1omyahg">.css-1omyahg{font-size:1.7rem;}.css-1omyahg ul{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0;padding:0;list-style:none;}.css-1omyahg li{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;margin:0;padding:20px 0;border-bottom:rgba(255, 255, 255, 0.1);}.css-1omyahg li:last-of-type{padding-bottom:5px;border:none;}.css-1omyahg h4{margin:0;font-size:1.6rem;line-height:1.35em;font-weight:600;}.css-1omyahg li a{display:block;color:#fff;opacity:0.8;}.css-1omyahg li a:hover{opacity:1;}</style><div class="read-next-card-content css-1omyahg"><ul><li><h4><a href="/post/2023-10-04-spatial-data/">공간 데이터 개념부터 적용까지</a></h4><style data-emotion="css k775aa">.css-k775aa{margin-top:2px;font-size:1.2rem;line-height:1.4em;font-weight:400;}.css-k775aa p{margin:0;color:rgba(255, 255, 255, 0.6);}</style><div class="read-next-card-meta css-k775aa"><p><time dateTime="2023-10-24">24 Oct 2023</time> - <!-- -->20<!-- --> min read</p></div></li><li><h4><a href="/post/2023-08-14-JPA-Cascade/">JPA Cascade는 무엇이고 언제 사용해야 할까?</a></h4><div class="read-next-card-meta css-k775aa"><p><time dateTime="2023-10-16">16 Oct 2023</time> - <!-- -->7<!-- --> min read</p></div></li><li><h4><a href="/post/2022-10-11-jpa-dynamic-query/">JPA의 동적 쿼리</a></h4><div class="read-next-card-meta css-k775aa"><p><time dateTime="2022-10-24">24 Oct 2022</time> - <!-- -->9<!-- --> min read</p></div></li></ul></div><style data-emotion="css z3frum">.css-z3frum{position:relative;margin:40px 0 5px;}.css-z3frum a{padding:7px 12px 8px 14px;border:1px solid rgba(255, 255, 255, 0.6);color:rgba(255, 255, 255, 0.6);font-size:1.3rem;border-radius:999px;-webkit-transition:all 0.35s ease-in-out;transition:all 0.35s ease-in-out;}.css-z3frum a:hover{border-color:#fecd35;color:#fecd35;-webkit-text-decoration:none;text-decoration:none;}</style><footer class="read-next-card-footer css-z3frum"><a href="/tags/jpa/">See all 5 posts<!-- --> →</a></footer></article><style data-emotion="css 1pe6fj0">.css-1pe6fj0{position:relative;-webkit-flex:1 1 301px;-ms-flex:1 1 301px;flex:1 1 301px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;margin:0 0 40px;padding:0 20px 40px;min-height:220px;border-bottom:1px solid #eaeff1;-webkit-background-size:cover;background-size:cover;}@media (prefers-color-scheme: dark){.css-1pe6fj0{border-bottom-color:#2b2f36;}}</style><article class="post-card   css-1pe6fj0"><style data-emotion="css 19py1iz">.css-19py1iz{position:relative;display:block;overflow:hidden;border-radius:5px 5px 0 0;}</style><a class="post-card-image-link css-19py1iz" href="/post/2023-11-06-zero-downtime-deployment-1/"><style data-emotion="css zj03fh">.css-zj03fh{width:auto;height:200px;background:#c5d2d9 no-repeat center center;-webkit-background-size:cover;background-size:cover;}</style><div class="post-card-image css-zj03fh"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div aria-hidden="true" style="width:100%;padding-bottom:51.182795698924735%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACJ0lEQVQoz02RW2sTURSF86+s+OwFhLz4S8QnnwTBt1ZBI7UolUYRago+KCI2RTAtkbQmc01mJklL01yajslcziWTiy53TqL04WOvs87e65yZk4pZjDiOEMXhgihQNYyGpIk4UIRLrfoV0WIuChEQjDNCIPV/kypT4YtQRs2MfK68QPmchi7DOIcQAiM5UpqLS4HDcAA/8DGgGtBt/GEf/cE52v4ZBuQH5A+WPb1BT9WADvHDX+jQOqIcLiRSnDFqHsLqOqj2XVi9GsxuVVXvogG9a8HoWKiTtsi3ew6OOjpqF3XY5y4cv4ky7Z/TAVImdMP5p/EY7XYLpmlA0yqoVi1UKj9V1bQyPLcGx7GhGxU4ngPTNuHVPXieRzMmWp0zcCkWN/wX2CFT0zUUiweo1WyUKdA0dZRKP2BZBmzbwP5+Aa7rQqc+3dBV6OHRIc22IaRcBIYUGESL1+OSgwmGmA5gS2IW4rR1AoduyUSs9sVI0KvTDJ9rSZ6gf8hpTYGzRGA6YhhT80TGSk8lw4TWYx4qJAswiodISCfkz+Y9xCzh+J1I/JmOgTmzCVJvizr2LA8Fp0E08cWo4W5uF/dyeeyS/qpXUaofo+A2UWqcoHx8iu2SiUefD/DyewWZb2U8+Ei6YOBxvoLUjcwmbj7fwu31bUX6xTvcyrwmtpBe38H1pznc/5DHw097uPNqB+mN97iy+gYrq1msrGVx7UkWV9c2SW8Qz/AXbQ7JfZhs6fkAAAAASUVORK5CYII=" alt="데이터베이스 복제하기(리플리케이션) 1 - 테코와 알아보는 대규모 데이터 관리 cover image" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/b3a3bf9a4640006ab31162b37f82728c/3a443/replication-thumbnail1.png 930w,
/static/b3a3bf9a4640006ab31162b37f82728c/f26ba/replication-thumbnail1.png 1372w" sizes="(max-width: 1372px) 100vw, 1372px" /><img loading="lazy" sizes="(max-width: 1372px) 100vw, 1372px" srcset="/static/b3a3bf9a4640006ab31162b37f82728c/3a443/replication-thumbnail1.png 930w,
/static/b3a3bf9a4640006ab31162b37f82728c/f26ba/replication-thumbnail1.png 1372w" src="/static/b3a3bf9a4640006ab31162b37f82728c/f26ba/replication-thumbnail1.png" alt="데이터베이스 복제하기(리플리케이션) 1 - 테코와 알아보는 대규모 데이터 관리 cover image" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></a><style data-emotion="css susx73">.css-susx73{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><div class="post-card-content css-susx73"><style data-emotion="css 11xyrw0">.css-11xyrw0{position:relative;display:block;color:#15171A;}.css-11xyrw0:hover{-webkit-text-decoration:none;text-decoration:none;}</style><a class="post-card-content-link css-11xyrw0" href="/post/2023-11-06-zero-downtime-deployment-1/"><style data-emotion="css 1s5mbbt">.css-1s5mbbt{margin:15px 0 0;}</style><header class="post-card-header css-1s5mbbt"><style data-emotion="css 1ws4skr">.css-1ws4skr{height:25px;margin:0 0 0.2em;color:#3eb0ef;font-size:1.7rem;font-weight:500;letter-spacing:0.2px;text-transform:uppercase;}</style><div class="post-card-primary-tag css-1ws4skr">#Database</div><style data-emotion="css 1pqz7yn">.css-1pqz7yn{margin:0 0 0.4em;line-height:1.15em;-webkit-transition:color 0.2s ease-in-out;transition:color 0.2s ease-in-out;}@media (prefers-color-scheme: dark){.css-1pqz7yn{color:rgba(255, 255, 255, 0.85);}}</style><h2 class="post-card-title css-1pqz7yn">데이터베이스 복제하기(리플리케이션) 1 - 테코와 알아보는 대규모 데이터 관리</h2></header><style data-emotion="css eyqgbm">.css-eyqgbm{font-family:Georgia,serif;}@media (prefers-color-scheme: dark){.css-eyqgbm{color:#90a2aa!important;}}</style><section class="post-card-excerpt css-eyqgbm"><p>일상을 공유하는 작은 카페 사이트를 직접 개발해 운영하고 있는 테코(…</p></section></a><style data-emotion="css k6f2l9">.css-k6f2l9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;padding:0;}</style><footer class="post-card-meta css-k6f2l9"><ul class="author-list css-teqkql"><li class="author-list-item css-1q168dw"><style data-emotion="css 1o16atw">.css-1o16atw{position:absolute;bottom:105%;z-index:999;display:block;padding:2px 8px;color:white;font-size:1.2rem;letter-spacing:0.2px;white-space:nowrap;background:#15171A;border-radius:3px;box-shadow:rgba(39, 44, 49, 0.08) 0 12px 26px,rgba(39, 44, 49, 0.03) 1px 3px 8px;opacity:0;-webkit-transition:all 0.35s cubic-bezier(0.4, 0.01, 0.165, 0.99);transition:all 0.35s cubic-bezier(0.4, 0.01, 0.165, 0.99);-webkit-transform:translateY(6px);-moz-transform:translateY(6px);-ms-transform:translateY(6px);transform:translateY(6px);pointer-events:none;}@media (max-width: 700px){.css-1o16atw{display:none;}}</style><div class="author-name-tooltip css-1o16atw">5기_여우</div><a class="author-avatar css-cdhz0m" href="/author/5-기-여우/"><div class="author-profile-image css-121fnpm gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:97.00000000000001%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACq0lEQVQ4y31US08UQRDeX4YXIweNXjXxokejCScS9WRIvHoiEkF8cCGaiBEBkcSDkccSwIOSxcDOY2F33rOzO5nZmQH97K7peS3Gw5fu6ar6uuqr6qlFjorIZXAUDGwFMdsPbDnfk53ZUqhVkG9xHlgSajFzJLjpmrB1wAyRLbG9ikScJZk98yfIeRxHaDVLhJSBXJC71YsyAn5RZuf+eYzwrUW2OOSZMefcSQRkhETUbeG016E9j0vPZZKIJCHCcsnu0L5ElnhthMomvB+LSPpGWq5zPqY2TET65RKkZfKz2JFgLz9Ee3IE/u4ckp6Wlx9lPkTo/EMrt9qk0JJhHazDXByHMX8Lxtx1BL9WEfc1uigW5RaEmX52STvuyLpMdruZZqTvw/w2A337LXobU4h7OkLzSMSkCaRNsQvxs7EgnagRx0h8E1G3jf72LMyFMRiNTbg/V0V2Ko1X0eVz4qpE4rEM7De34SzcRXflPq3G1AUYq4+hH9ThSTtIuiqqY1fSMB8XNhq9r0/gvL8Hc/oSjGcXoc1ehT49Cv3pCMxPE7AOdxFqDfGS5Mr81orX0WSaaAgay7BYZpGygc7zKziaH4Ov7MCX6vBXxnH86ga0vSWc+WmXeXd5yTSP5acXWUxc34K3Pgn7xWVIHx5hbfoBOo0tnLFuspZi8+NLTNy5hoP6ZyBgutoKDXVeIduXnh67ib2C4PALzJlRnLy+iWZ9Ca70nTVHAfpt7K2v4d38HEx5H797J9SQfBKE/jU6LCHxOhgoWwikDYT6IcucjYzbItsfRopAwylrWt7dDOKbEbbYqAiIwMTTiJh/52di5WXm3646ZKenx9lblZsKGdQKGe3FxYRKMmra5dxYAQ8cDq5KU0b6s+XPTz6vYVz5K6fDOiDIhPC/kPAXI1J1I2tzSR0AAAAASUVORK5CYII=" alt="5기_여우" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1"/><noscript><picture><source srcset="/static/1bd577fab62487b8309c9e635d0ce7b2/8ac63/fox.png 200w,
/static/1bd577fab62487b8309c9e635d0ce7b2/3891b/fox.png 400w,
/static/1bd577fab62487b8309c9e635d0ce7b2/bc8e0/fox.png 800w,
/static/1bd577fab62487b8309c9e635d0ce7b2/74c84/fox.png 889w" sizes="(max-width: 800px) 100vw, 800px" /><img loading="lazy" sizes="(max-width: 800px) 100vw, 800px" srcset="/static/1bd577fab62487b8309c9e635d0ce7b2/8ac63/fox.png 200w,
/static/1bd577fab62487b8309c9e635d0ce7b2/3891b/fox.png 400w,
/static/1bd577fab62487b8309c9e635d0ce7b2/bc8e0/fox.png 800w,
/static/1bd577fab62487b8309c9e635d0ce7b2/74c84/fox.png 889w" src="/static/1bd577fab62487b8309c9e635d0ce7b2/bc8e0/fox.png" alt="5기_여우" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></a></li></ul><style data-emotion="css 12ys16c">.css-12ys16c{-webkit-flex:1 1 50%;-ms-flex:1 1 50%;flex:1 1 50%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:4px 0 0 10px;color:#90a2aa;font-size:1.2rem;line-height:1.4em;font-weight:400;letter-spacing:0.2px;text-transform:uppercase;}.css-12ys16c span{margin:0;}.css-12ys16c a{color:#434952;font-weight:600;}@media (prefers-color-scheme: dark){.css-12ys16c a{color:rgba(255, 255, 255, 0.75);}}</style><div class="post-card-byline-content css-12ys16c"><span><a href="/author/5-기-여우/">5기_여우</a></span><span class="post-card-byline-date"><time dateTime="2023-11-23">23 Nov 2023</time> <span class="bull">•</span> <!-- -->6<!-- --> min read</span></div></footer></div></article><article class="post-card   css-1pe6fj0"><a class="post-card-image-link css-19py1iz" href="/post/2023-11-06-zero-downtime-deployment-2/"><div class="post-card-image css-zj03fh"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;height:100%"><div aria-hidden="true" style="width:100%;padding-bottom:51.182795698924735%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACI0lEQVQoz02R22sTQRTG819Z8dkLCHnxLxFffBME31p9aKQWpdIoQk3BB0XEpgimJZLUZO/Z3aQV29zjZi8zs7nq59nZKH348X1z5pxvZncyEYsQRSHCKEgJfalBOCZPRL4kWHnZLwnTuTCATzDOCIHM/01SJsPTUEbNjOpc1nxZ5zR0GcY5hBCYxBPpubgUOA48jPwRPFKfbjMaDzDw+miPLuBR3ae6t+rpeT2pPh0yCn6hQ+uQcriIkeGMUfMYRteGNXBg9BrQu5ZUd9iC2jWgdQw0yRtUN3s2TjoqGsMmzL4De3SKGu336YA4ntINk0/jEdrtc+i6BkWpw7IM1OvfpSpKDY5jwbZNqFodtmtDN3W4TReu69KMjvPOBXgs0hv+C+xQUVEVlMvHaDRM1ChQ11VUKt9gUkBC6agEx3WgUp+qqTK0elKl2TZEHKeBAQX6Yfp6POZggiGiA9iK5GWbTQcN25Kvz2lfTAS9Os3wxMc0I+gfclpT4HIqsJgwzESEeRxJv4gZ5rSe8YA0QOQPwekfTUUoWSY9xHLK8Xsa489iBiQs58i8Lqs4NFyU7BZxik9aA3cLB7hXKOKA/GfVQrX1A0fOGSqktbOf2KvoePTxGM+/1pH7UsOD9+RLGh4X68jcyO3g5tNd3N7ak2SfvcGt3EtiF9mtfVzfLOD+uyIefjjEnRf7yG6/xZX1V1hbz2NtI49rT/K4urFDfpvYxF9AJclSZjSiLQAAAABJRU5ErkJggg==" alt="데이터베이스 복제하기(리플리케이션) 2 - 테코와 알아보는 대규모 데이터 관리 cover image" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/00bbc2420e9b2bcd8663a901ea1f44ed/3a443/replication-thumbnail2.png 930w,
/static/00bbc2420e9b2bcd8663a901ea1f44ed/f26ba/replication-thumbnail2.png 1372w" sizes="(max-width: 1372px) 100vw, 1372px" /><img loading="lazy" sizes="(max-width: 1372px) 100vw, 1372px" srcset="/static/00bbc2420e9b2bcd8663a901ea1f44ed/3a443/replication-thumbnail2.png 930w,
/static/00bbc2420e9b2bcd8663a901ea1f44ed/f26ba/replication-thumbnail2.png 1372w" src="/static/00bbc2420e9b2bcd8663a901ea1f44ed/f26ba/replication-thumbnail2.png" alt="데이터베이스 복제하기(리플리케이션) 2 - 테코와 알아보는 대규모 데이터 관리 cover image" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></div></a><div class="post-card-content css-susx73"><a class="post-card-content-link css-11xyrw0" href="/post/2023-11-06-zero-downtime-deployment-2/"><header class="post-card-header css-1s5mbbt"><div class="post-card-primary-tag css-1ws4skr">#Database</div><h2 class="post-card-title css-1pqz7yn">데이터베이스 복제하기(리플리케이션) 2 - 테코와 알아보는 대규모 데이터 관리</h2></header><section class="post-card-excerpt css-eyqgbm"><p>테코의 고민 2 - 이벤트에  어떤 내용을 기록해야 해? GTID…</p></section></a><footer class="post-card-meta css-k6f2l9"><ul class="author-list css-teqkql"><li class="author-list-item css-1q168dw"><div class="author-name-tooltip css-1o16atw">5기_여우</div><a class="author-avatar css-cdhz0m" href="/author/5-기-여우/"><div class="author-profile-image css-121fnpm gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:97.00000000000001%"></div><img aria-hidden="true" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACq0lEQVQ4y31US08UQRDeX4YXIweNXjXxokejCScS9WRIvHoiEkF8cCGaiBEBkcSDkccSwIOSxcDOY2F33rOzO5nZmQH97K7peS3Gw5fu6ar6uuqr6qlFjorIZXAUDGwFMdsPbDnfk53ZUqhVkG9xHlgSajFzJLjpmrB1wAyRLbG9ikScJZk98yfIeRxHaDVLhJSBXJC71YsyAn5RZuf+eYzwrUW2OOSZMefcSQRkhETUbeG016E9j0vPZZKIJCHCcsnu0L5ElnhthMomvB+LSPpGWq5zPqY2TET65RKkZfKz2JFgLz9Ee3IE/u4ckp6Wlx9lPkTo/EMrt9qk0JJhHazDXByHMX8Lxtx1BL9WEfc1uigW5RaEmX52STvuyLpMdruZZqTvw/w2A337LXobU4h7OkLzSMSkCaRNsQvxs7EgnagRx0h8E1G3jf72LMyFMRiNTbg/V0V2Ko1X0eVz4qpE4rEM7De34SzcRXflPq3G1AUYq4+hH9ThSTtIuiqqY1fSMB8XNhq9r0/gvL8Hc/oSjGcXoc1ehT49Cv3pCMxPE7AOdxFqDfGS5Mr81orX0WSaaAgay7BYZpGygc7zKziaH4Ov7MCX6vBXxnH86ga0vSWc+WmXeXd5yTSP5acXWUxc34K3Pgn7xWVIHx5hbfoBOo0tnLFuspZi8+NLTNy5hoP6ZyBgutoKDXVeIduXnh67ib2C4PALzJlRnLy+iWZ9Ca70nTVHAfpt7K2v4d38HEx5H797J9SQfBKE/jU6LCHxOhgoWwikDYT6IcucjYzbItsfRopAwylrWt7dDOKbEbbYqAiIwMTTiJh/52di5WXm3646ZKenx9lblZsKGdQKGe3FxYRKMmra5dxYAQ8cDq5KU0b6s+XPTz6vYVz5K6fDOiDIhPC/kPAXI1J1I2tzSR0AAAAASUVORK5CYII=" alt="5기_여우" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1"/><noscript><picture><source srcset="/static/1bd577fab62487b8309c9e635d0ce7b2/8ac63/fox.png 200w,
/static/1bd577fab62487b8309c9e635d0ce7b2/3891b/fox.png 400w,
/static/1bd577fab62487b8309c9e635d0ce7b2/bc8e0/fox.png 800w,
/static/1bd577fab62487b8309c9e635d0ce7b2/74c84/fox.png 889w" sizes="(max-width: 800px) 100vw, 800px" /><img loading="lazy" sizes="(max-width: 800px) 100vw, 800px" srcset="/static/1bd577fab62487b8309c9e635d0ce7b2/8ac63/fox.png 200w,
/static/1bd577fab62487b8309c9e635d0ce7b2/3891b/fox.png 400w,
/static/1bd577fab62487b8309c9e635d0ce7b2/bc8e0/fox.png 800w,
/static/1bd577fab62487b8309c9e635d0ce7b2/74c84/fox.png 889w" src="/static/1bd577fab62487b8309c9e635d0ce7b2/bc8e0/fox.png" alt="5기_여우" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div></a></li></ul><div class="post-card-byline-content css-12ys16c"><span><a href="/author/5-기-여우/">5기_여우</a></span><span class="post-card-byline-date"><time dateTime="2023-11-23">23 Nov 2023</time> <span class="bull">•</span> <!-- -->10<!-- --> min read</span></div></footer></div></article></div></div></aside><style data-emotion="css 1snipao">.css-1snipao{position:relative;padding:0 5vw;position:relative;padding-top:20px;padding-bottom:60px;color:#fff;background:#000;}</style><footer class="css-1snipao"><style data-emotion="css 1fhv7oo">.css-1fhv7oo{margin:0 auto;max-width:1040px;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:rgba(255, 255, 255, 0.7);font-size:1.3rem;}.css-1fhv7oo a{color:rgba(255, 255, 255, 0.7);}.css-1fhv7oo a:hover{color:rgba(255, 255, 255, 1);-webkit-text-decoration:none;text-decoration:none;}@media (max-width: 650px){.css-1fhv7oo{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="css-1fhv7oo"><section class="copyright"><a href="/">Tecoble</a> © <!-- -->2023<!-- --> <a href="/">| <!-- -->Tecoble<!-- --> <!-- -->is based on woowacourse</a></section><style data-emotion="css 29c7f9">.css-29c7f9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.css-29c7f9 a{position:relative;margin-left:20px;}.css-29c7f9 a:before{content:'';position:absolute;top:11px;left:-11px;display:block;width:2px;height:2px;background:#fff;border-radius:100%;}.css-29c7f9 a:first-of-type:before{display:none;}@media (max-width: 650px){.css-29c7f9 a:first-of-type{margin-left:0;}}</style><nav class="css-29c7f9"><a href="/">Latest Posts</a><a href="https://github.com/scttcper/gatsby-casper" target="_blank" rel="noopener noreferrer">Casper</a><a href="/rss.xml">RSS</a></nav></div></footer></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-7YLT36LV0M"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-7YLT36LV0M', {"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/post/2023-11-01-jpa-fetch-join/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-f33cc994945b2249d5ee.js"],"app":["/app-7871a49fb71b5d2fd8af.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-f7da68947e50ce346751.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-947f5f80f30345c8f7f8.js"],"component---src-templates-author-tsx":["/component---src-templates-author-tsx-e3b8ed1aaa2c94077bfa.js"],"component---src-templates-index-tsx":["/component---src-templates-index-tsx-ead65a5aeec7d773bee7.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-a08628f9047d81b892e4.js"],"component---src-templates-tags-tsx":["/component---src-templates-tags-tsx-a3927cd825a62272db18.js"]};/*]]>*/</script><script src="/polyfill-f33cc994945b2249d5ee.js" nomodule=""></script><script src="/component---src-templates-post-tsx-a08628f9047d81b892e4.js" async=""></script><script src="/commons-4c188b18bcaae3f07bde.js" async=""></script><script src="/app-7871a49fb71b5d2fd8af.js" async=""></script><script src="/framework-2de79c8137b068b61a3a.js" async=""></script><script src="/webpack-runtime-674180cef417bd6b6e8f.js" async=""></script></body></html>