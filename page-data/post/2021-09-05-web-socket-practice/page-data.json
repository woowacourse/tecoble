{"componentChunkName":"component---src-templates-post-tsx","path":"/post/2021-09-05-web-socket-practice/","result":{"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAwUlEQVQY003Qvw7BUBTH8YYgLCKExWw1IczEwAtIJCa1GJuyCalI/EmERUgHi5cxeI8uTTt1aHp9r9wmhk/OOfee/HJzNd/3Dc/zutS24zgZIUQpiqIt9YY+vUb9+eur6Kh5GN9LGkEn2DBd1y1zmGfxjjf9AFm1XEQCBe6aVBMVLJHiLBcHTiHwQS0MQ/mSOlYsjPDCAjOMccUFR3Z0NdvYISkDW9jAQi8IAhnYgAyZ4wELEzUfcFZfYmCPJ9ZIfwG9owW1fLgCkwAAAABJRU5ErkJggg==","width":400,"height":88,"src":"/static/0b18bd94a62a12fdc81ea720c28722f6/3891b/tecoble.png","srcSet":"/static/0b18bd94a62a12fdc81ea720c28722f6/3891b/tecoble.png 1x"}}},"markdownRemark":{"html":"<p style=\"font-family: sans-serif; text-align: center; color: #aaa; margin-bottom: 3em; font-size: 85%\">image origin: <a href=\"https://unsplash.com/photos/vT9zeLCOpps\">unsplash.com</a></p>\n<h2>웹 소켓에 대해 알아보자! - 실전 편</h2>\n<p>이번 글에서는 저번에 작성했던 <a href=\"https://tecoble.techcourse.co.kr/post/2021-08-14-web-socket/\">웹 소켓 이론 편</a>에 이어서, 스프링 환경에서 웹 소켓을 사용하는 법에 대해 다루려고 한다.</p>\n<h3>STOMP</h3>\n<p>구현하기에 앞서, 우리는 새로운 프로토콜을 도입할 것이다. 바로 STOMP이다.</p>\n<p>STOMP는 Simple Text Oriented Messaging Protocol의 약자이다. WebSocket 프로토콜은 Text 또는 Binary 두 가지 유형의 메시지 타입은 정의하지만 메시지의 내용에 대해서는 정의하지 않는다.\n즉, WebSocket만 사용해서 구현하게 되면 해당 메시지가 어떤 요청인지, 어떤 포맷으로 오는지, 메시지 통신 과정을 어떻게 처리해야 하는지 정해져 있지 않아 일일이 구현해야 한다.\n따라서 STOMP라는 프로토콜을 서브 프로토콜로 사용한다. STOMP는 클라이언트와 서버가 서로 통신하는 데 있어 메시지의 형식, 유형, 내용 등을 정의해주는 프로토콜이라고 할 수 있다.\nSTOMP를 사용하게 되면 단순한 Binary, Text가 아닌 규격을 갖춘 메시지를 보낼 수 있다.\n스프링은 spring-websocket 모듈을 통해서 STOMP를 제공하고 있다.</p>\n<p>STOMP의 형식은 HTTP와 닮았다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">COMMAND\nheader1<span class=\"token operator\">:</span>value1\nheader2<span class=\"token operator\">:</span>value2\n\n<span class=\"token class-name\">Body</span><span class=\"token operator\">^</span>@</code></pre></div>\n<p>클라이언트는 메시지를 전송하기 위해 COMMAND로 SEND 또는 SUBSCRIBE 명령을 사용하며, header와 value로 메시지의 수신 대상과 메시지에 대한 정보를 설명할 수 있다. 기존의 WebSocket만으로는 표현할 수 없는 형식이다.\n이를 통해 STOMP 프로토콜은 Publisher(송신자)-Subscriber(수신자)를 지정하고, 메시지 브로커를 통해 특정 사용자에게만 메시지를 전송하는 기능 등을 가능하게 한다.\n메시지 브로커는 Publisher로부터 전달받은 메시지를 Subscriber로 전달해주는 중간 역할을 수행한다고 생각하면 된다.\n메시지 브로커의 동작 방식은 다음과 같다.</p>\n<ol>\n<li>각각 A, B, C 라는 유저가 차례로 5번방에 입장한다.</li>\n<li>A가 5번방에서 채팅을 전송한다.</li>\n<li>5번방 메시지 브로커(중재자)가 메세지를 받는다.</li>\n<li>5번방 메시지 브로커가 5번방 구독자들(A, B, C)에게 메세지를 전송한다.</li>\n</ol>\n<p>지금부터 5번방에 유저들이 참가하여 메시지를 주고받는 상황을 단계별로 살펴보자.</p>\n<p>유저들은 채팅방에 입장함과 동시에 다음과 같이 5번 채팅방에 대해 구독(SUBSCRIBE)을 하게 되고, 메시지 브로커는 클라이언트의 SUBSCRIBE 정보를 자체적으로 메모리에 유지한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">SUBSCRIBE\ndestination<span class=\"token operator\">:</span><span class=\"token operator\">/</span>subscribe<span class=\"token operator\">/</span>chat<span class=\"token operator\">/</span>room<span class=\"token operator\">/</span><span class=\"token number\">5</span></code></pre></div>\n<p>다음과 같이 어떤 유저가 메시지를 보내면, 메시지 브로커는 SUBSCRIBE 중인 다른 유저들에게 메시지를 전달한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">SEND\ncontent<span class=\"token operator\">-</span>type<span class=\"token operator\">:</span>application<span class=\"token operator\">/</span>json\ndestination<span class=\"token operator\">:</span><span class=\"token operator\">/</span>publish<span class=\"token operator\">/</span>chat\n\n<span class=\"token punctuation\">{</span><span class=\"token string\">\"chatRoomId\"</span><span class=\"token operator\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"type\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"MESSAGE\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"writer\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"clientB\"</span><span class=\"token punctuation\">}</span></code></pre></div>\n<h3>STOMP 기반 구현</h3>\n<p>위에서 말한 시나리오대로 구현해보자. 먼저, WebSocket 관련 설정 클래스를 추가해야 한다.\n간단하게 요약하면 WebSocket 연결을 요청할 주소와 SUBSCRIBE, PUBLISH를 요청할 주소를 설정해주는 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token annotation punctuation\">@EnableWebSocketMessageBroker</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">WebSocketConfig</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">WebSocketMessageBrokerConfigurer</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">configureMessageBroker</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MessageBrokerRegistry</span> registry<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      registry<span class=\"token punctuation\">.</span><span class=\"token function\">enableSimpleBroker</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/subscribe\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      registry<span class=\"token punctuation\">.</span><span class=\"token function\">setApplicationDestinationPrefixes</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/publish\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">registerStompEndpoints</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">StompEndpointRegistry</span> registry<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      registry<span class=\"token punctuation\">.</span><span class=\"token function\">addEndpoint</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/ws-connection\"</span><span class=\"token punctuation\">)</span>\n              <span class=\"token punctuation\">.</span><span class=\"token function\">setAllowedOrigins</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"chrome-extension://ggnhohnkfcpcanfekomdkjffnfcjnjam\"</span><span class=\"token punctuation\">)</span>\n              <span class=\"token punctuation\">.</span><span class=\"token function\">withSockJS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">@EnableWebSocketMessageBroker</code></li>\n</ul>\n<p>메시지 브로커가 지원하는 ‘WebSocket 메시지 처리’를 활성화한다. </p>\n<ul>\n<li><code class=\"language-text\">configureMessageBroker()</code></li>\n</ul>\n<p>메모리 기반의 Simple Message Broker를 활성화한다. 메시지 브로커는 <code class=\"language-text\">\"/subscribe\"</code>으로 시작하는 주소의 Subscriber들에게 메시지를 전달하는 역할을 한다. 이때, 클라이언트가 서버로 메시지 보낼 때 붙여야 하는 prefix를 지정한다. 예제에서는 <code class=\"language-text\">\"/publish\"</code>로 지정하였다.</p>\n<ul>\n<li><code class=\"language-text\">registerStompEndpoints()</code></li>\n</ul>\n<p>기존의 WebSocket 설정과 마찬가지로 HandShake와 통신을 담당할 EndPoint를 지정한다. 클라이언트에서 서버로 WebSocket 연결을 하고 싶을 때, <code class=\"language-text\">\"/ws-connection\"</code>으로 요청을 보내도록 하였다.</p>\n<p>송신자와 수신자, 채팅방 번호 그리고 메시지 내용을 담고 있는 ChatRequest DTO는 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Getter</span>\n<span class=\"token annotation punctuation\">@NoArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ChatRequest</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * 송신자 id\n     */</span>\n    <span class=\"token annotation punctuation\">@NotNull</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> senderId<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/**\n     * 수신자 id\n     */</span>\n    <span class=\"token annotation punctuation\">@NotNull</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> receiverId<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/**\n     * 채팅방 id\n     */</span>\n    <span class=\"token annotation punctuation\">@NotNull</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> roomId<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/**\n     * 메시지 내용\n     */</span>\n    <span class=\"token annotation punctuation\">@NotBlank</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> message<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ChatRequest</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span> senderId<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span> receiverId<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span> roomId<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> message<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>senderId <span class=\"token operator\">=</span> senderId<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>receiverId <span class=\"token operator\">=</span> receiverId<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>roomId <span class=\"token operator\">=</span> roomId<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>message <span class=\"token operator\">=</span> message<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Controller는 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ChattingController</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">ChattingService</span> chattingService<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">SimpMessagingTemplate</span> simpMessagingTemplate<span class=\"token punctuation\">;</span>\n  \n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ChattingController</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ChattingService</span> chattingService<span class=\"token punctuation\">,</span> <span class=\"token class-name\">SimpMessagingTemplate</span> simpMessagingTemplate<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>chattingService <span class=\"token operator\">=</span> chattingService<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>simpMessagingTemplate <span class=\"token operator\">=</span> simpMessagingTemplate<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token annotation punctuation\">@MessageMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/messages\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">chat</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Valid</span> <span class=\"token class-name\">ChatRequest</span> chatRequest<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      chattingService<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>chatRequest<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      simpMessagingTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">convertAndSend</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/subscribe/rooms/\"</span> <span class=\"token operator\">+</span> chatRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getRoomId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> chatRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>SimpleMessagingTemplate</li>\n</ul>\n<p><code class=\"language-text\">@EnableWebSocketMessageBroker</code>를 통해서 등록되는 <code class=\"language-text\">Bean</code>이다. Broker로 메시지를 전달한다.</p>\n<ul>\n<li>@MessageMapping</li>\n</ul>\n<p>Client가 SEND를 할 수 있는 경로이다. <code class=\"language-text\">WebSocketConfig</code>에서 등록한 <code class=\"language-text\">applicationDestinationPrfixes</code>와 <code class=\"language-text\">@MessageMapping</code>의 경로가 합쳐진다.(<code class=\"language-text\">/publish/messages</code>)</p>\n<ul>\n<li>chat()</li>\n</ul>\n<p>클라이언트에서 <code class=\"language-text\">/publish/messages</code> url로 메시지를 보내면, ChatRequest의 채팅방 id를 이용하여 해당 방을 구독 중인 사용자들에게 메시지를 전달하도록 하는 메서드이다.</p>\n<p>클라이언트에서는 다음과 같이 연결하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> socket <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WebSocket</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/ws-connection'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    stompClient <span class=\"token operator\">=</span> Stomp<span class=\"token punctuation\">.</span><span class=\"token function\">over</span><span class=\"token punctuation\">(</span>socket<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    stompClient<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setConnected</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        stompClient<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/subscribe/rooms/5'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">greeting</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>greeting<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>메시지 전송 예시는 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    stompClient<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/publish/messages\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'message'</span><span class=\"token operator\">:</span> <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">val</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'senderId'</span><span class=\"token operator\">:</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'receiverId'</span><span class=\"token operator\">:</span> <span class=\"token number\">14</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'roomId'</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>결론</h3>\n<p>WebSocket에 STOMP를 활용한 스프링 환경의 채팅 기능 구현에 대해 알아보았다.</p>\n<p>메모리 기반의 STOMP 메시지 브로커 대신 Kafka, RabbitMQ, ActiveMQ 등의 메시징 시스템을 이용할 수도 있으니 추가로 학습하고 적용하는 것도 좋을 것이다.</p>\n<h3>Reference</h3>\n<p><a href=\"https://github.com/spring-guides/gs-messaging-stomp-websocket\">https://github.com/spring-guides/gs-messaging-stomp-websocket</a></p>\n<p><a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#websocket\">https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#websocket</a></p>\n<p><a href=\"https://supawer0728.github.io/2018/03/30/spring-websocket/\">https://supawer0728.github.io/2018/03/30/spring-websocket/</a></p>\n<p><a href=\"https://sup2is.github.io/2019/06/05/websocket-1.html\">https://sup2is.github.io/2019/06/05/websocket-1.html</a></p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{"style":"font-family: sans-serif; text-align: center; color: #aaa; margin-bottom: 3em; font-size: 85%"},"children":[{"type":"text","value":"image origin: "},{"type":"element","tagName":"a","properties":{"href":"https://unsplash.com/photos/vT9zeLCOpps"},"children":[{"type":"text","value":"unsplash.com"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"웹 소켓에 대해 알아보자! - 실전 편"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이번 글에서는 저번에 작성했던 "},{"type":"element","tagName":"a","properties":{"href":"https://tecoble.techcourse.co.kr/post/2021-08-14-web-socket/"},"children":[{"type":"text","value":"웹 소켓 이론 편"}]},{"type":"text","value":"에 이어서, 스프링 환경에서 웹 소켓을 사용하는 법에 대해 다루려고 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"STOMP"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"구현하기에 앞서, 우리는 새로운 프로토콜을 도입할 것이다. 바로 STOMP이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"STOMP는 Simple Text Oriented Messaging Protocol의 약자이다. WebSocket 프로토콜은 Text 또는 Binary 두 가지 유형의 메시지 타입은 정의하지만 메시지의 내용에 대해서는 정의하지 않는다.\n즉, WebSocket만 사용해서 구현하게 되면 해당 메시지가 어떤 요청인지, 어떤 포맷으로 오는지, 메시지 통신 과정을 어떻게 처리해야 하는지 정해져 있지 않아 일일이 구현해야 한다.\n따라서 STOMP라는 프로토콜을 서브 프로토콜로 사용한다. STOMP는 클라이언트와 서버가 서로 통신하는 데 있어 메시지의 형식, 유형, 내용 등을 정의해주는 프로토콜이라고 할 수 있다.\nSTOMP를 사용하게 되면 단순한 Binary, Text가 아닌 규격을 갖춘 메시지를 보낼 수 있다.\n스프링은 spring-websocket 모듈을 통해서 STOMP를 제공하고 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"STOMP의 형식은 HTTP와 닮았다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"text","value":"COMMAND\nheader1"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"value1\nheader2"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"value2\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Body"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"^"}]},{"type":"text","value":"@"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"클라이언트는 메시지를 전송하기 위해 COMMAND로 SEND 또는 SUBSCRIBE 명령을 사용하며, header와 value로 메시지의 수신 대상과 메시지에 대한 정보를 설명할 수 있다. 기존의 WebSocket만으로는 표현할 수 없는 형식이다.\n이를 통해 STOMP 프로토콜은 Publisher(송신자)-Subscriber(수신자)를 지정하고, 메시지 브로커를 통해 특정 사용자에게만 메시지를 전송하는 기능 등을 가능하게 한다.\n메시지 브로커는 Publisher로부터 전달받은 메시지를 Subscriber로 전달해주는 중간 역할을 수행한다고 생각하면 된다.\n메시지 브로커의 동작 방식은 다음과 같다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"각각 A, B, C 라는 유저가 차례로 5번방에 입장한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"A가 5번방에서 채팅을 전송한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"5번방 메시지 브로커(중재자)가 메세지를 받는다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"5번방 메시지 브로커가 5번방 구독자들(A, B, C)에게 메세지를 전송한다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"지금부터 5번방에 유저들이 참가하여 메시지를 주고받는 상황을 단계별로 살펴보자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"유저들은 채팅방에 입장함과 동시에 다음과 같이 5번 채팅방에 대해 구독(SUBSCRIBE)을 하게 되고, 메시지 브로커는 클라이언트의 SUBSCRIBE 정보를 자체적으로 메모리에 유지한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"text","value":"SUBSCRIBE\ndestination"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"/"}]},{"type":"text","value":"subscribe"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"/"}]},{"type":"text","value":"chat"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"/"}]},{"type":"text","value":"room"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"/"}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"5"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"다음과 같이 어떤 유저가 메시지를 보내면, 메시지 브로커는 SUBSCRIBE 중인 다른 유저들에게 메시지를 전달한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"text","value":"SEND\ncontent"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"type"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"application"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"/"}]},{"type":"text","value":"json\ndestination"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"/"}]},{"type":"text","value":"publish"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"/"}]},{"type":"text","value":"chat\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"chatRoomId\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"5"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"type\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"MESSAGE\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"writer\""}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"clientB\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"STOMP 기반 구현"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위에서 말한 시나리오대로 구현해보자. 먼저, WebSocket 관련 설정 클래스를 추가해야 한다.\n간단하게 요약하면 WebSocket 연결을 요청할 주소와 SUBSCRIBE, PUBLISH를 요청할 주소를 설정해주는 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Configuration"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@EnableWebSocketMessageBroker"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"WebSocketConfig"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"implements"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"WebSocketMessageBrokerConfigurer"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Override"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"configureMessageBroker"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MessageBrokerRegistry"}]},{"type":"text","value":" registry"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      registry"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"enableSimpleBroker"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/subscribe\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n      registry"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setApplicationDestinationPrefixes"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/publish\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n    \n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Override"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"registerStompEndpoints"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"StompEndpointRegistry"}]},{"type":"text","value":" registry"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      registry"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"addEndpoint"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/ws-connection\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n              "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setAllowedOrigins"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"chrome-extension://ggnhohnkfcpcanfekomdkjffnfcjnjam\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n              "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"withSockJS"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"@EnableWebSocketMessageBroker"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"메시지 브로커가 지원하는 ‘WebSocket 메시지 처리’를 활성화한다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"configureMessageBroker()"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"메모리 기반의 Simple Message Broker를 활성화한다. 메시지 브로커는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"\"/subscribe\""}]},{"type":"text","value":"으로 시작하는 주소의 Subscriber들에게 메시지를 전달하는 역할을 한다. 이때, 클라이언트가 서버로 메시지 보낼 때 붙여야 하는 prefix를 지정한다. 예제에서는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"\"/publish\""}]},{"type":"text","value":"로 지정하였다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"registerStompEndpoints()"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"기존의 WebSocket 설정과 마찬가지로 HandShake와 통신을 담당할 EndPoint를 지정한다. 클라이언트에서 서버로 WebSocket 연결을 하고 싶을 때, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"\"/ws-connection\""}]},{"type":"text","value":"으로 요청을 보내도록 하였다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"송신자와 수신자, 채팅방 번호 그리고 메시지 내용을 담고 있는 ChatRequest DTO는 다음과 같다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Getter"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@NoArgsConstructor"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ChatRequest"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"/**\n     * 송신자 id\n     */"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@NotNull"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Long"}]},{"type":"text","value":" senderId"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"/**\n     * 수신자 id\n     */"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@NotNull"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Long"}]},{"type":"text","value":" receiverId"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"/**\n     * 채팅방 id\n     */"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@NotNull"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Long"}]},{"type":"text","value":" roomId"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"/**\n     * 메시지 내용\n     */"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@NotBlank"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" message"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ChatRequest"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Long"}]},{"type":"text","value":" senderId"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Long"}]},{"type":"text","value":" receiverId"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Long"}]},{"type":"text","value":" roomId"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" message"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"senderId "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" senderId"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"receiverId "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" receiverId"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"roomId "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" roomId"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"message "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" message"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Controller는 다음과 같다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@RestController"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ChattingController"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ChattingService"}]},{"type":"text","value":" chattingService"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"SimpMessagingTemplate"}]},{"type":"text","value":" simpMessagingTemplate"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ChattingController"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ChattingService"}]},{"type":"text","value":" chattingService"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"SimpMessagingTemplate"}]},{"type":"text","value":" simpMessagingTemplate"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"chattingService "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" chattingService"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"simpMessagingTemplate "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" simpMessagingTemplate"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n    \n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@MessageMapping"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/messages\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"chat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Valid"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ChatRequest"}]},{"type":"text","value":" chatRequest"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      chattingService"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"save"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"chatRequest"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n      simpMessagingTemplate"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"convertAndSend"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/subscribe/rooms/\""}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"text","value":" chatRequest"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getRoomId"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" chatRequest"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getMessage"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"SimpleMessagingTemplate"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"@EnableWebSocketMessageBroker"}]},{"type":"text","value":"를 통해서 등록되는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Bean"}]},{"type":"text","value":"이다. Broker로 메시지를 전달한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"@MessageMapping"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Client가 SEND를 할 수 있는 경로이다. "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"WebSocketConfig"}]},{"type":"text","value":"에서 등록한 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"applicationDestinationPrfixes"}]},{"type":"text","value":"와 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"@MessageMapping"}]},{"type":"text","value":"의 경로가 합쳐진다.("},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/publish/messages"}]},{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"chat()"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"클라이언트에서 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/publish/messages"}]},{"type":"text","value":" url로 메시지를 보내면, ChatRequest의 채팅방 id를 이용하여 해당 방을 구독 중인 사용자들에게 메시지를 전달하도록 하는 메서드이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"클라이언트에서는 다음과 같이 연결하면 된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"javascript"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-javascript"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-javascript"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"function"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"connect"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"var"}]},{"type":"text","value":" socket "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"WebSocket"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'/ws-connection'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    stompClient "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" Stomp"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"over"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"socket"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    stompClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"connect"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"function"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setConnected"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"true"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        stompClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"subscribe"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'/subscribe/rooms/5'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"function"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","parameter"]},"children":[{"type":"text","value":"greeting"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n            console"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"log"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"greeting"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"body"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"메시지 전송 예시는 다음과 같다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"javascript"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-javascript"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-javascript"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"function"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sendMessage"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    stompClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"send"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/publish/messages\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","constant"]},"children":[{"type":"text","value":"JSON"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"stringify"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'message'"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"$"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"#name\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"val"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'senderId'"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"7"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'receiverId'"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"14"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'roomId'"}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"5"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"결론"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"WebSocket에 STOMP를 활용한 스프링 환경의 채팅 기능 구현에 대해 알아보았다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"메모리 기반의 STOMP 메시지 브로커 대신 Kafka, RabbitMQ, ActiveMQ 등의 메시징 시스템을 이용할 수도 있으니 추가로 학습하고 적용하는 것도 좋을 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Reference"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/spring-guides/gs-messaging-stomp-websocket"},"children":[{"type":"text","value":"https://github.com/spring-guides/gs-messaging-stomp-websocket"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#websocket"},"children":[{"type":"text","value":"https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#websocket"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://supawer0728.github.io/2018/03/30/spring-websocket/"},"children":[{"type":"text","value":"https://supawer0728.github.io/2018/03/30/spring-websocket/"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://sup2is.github.io/2019/06/05/websocket-1.html"},"children":[{"type":"text","value":"https://sup2is.github.io/2019/06/05/websocket-1.html"}]}]}],"data":{"quirksMode":false}},"excerpt":"웹 소켓에 대해 알아보자! - 실전 편 이번 글에서는 저번에 작성했던 웹 소켓 이론 편에 이어서, 스프링 환경에서 웹 소켓을 사용하는 법에 대해 다루려고 한다. STOMP 구현하기에 앞서, 우리는 새로운 프로토콜을 도입할 것이다. 바로 STOMP…","timeToRead":4,"frontmatter":{"title":"웹 소켓에 대해 알아보자! - 실전 편","userDate":"5 September 2021","date":"2021-09-05T12:00:00.000Z","tags":["websocket"],"excerpt":null,"image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF+ElEQVRIx22VZ1dUZxSF77/I5+SHGE2MiUEERDoMA9P7ML0zvVdmmMLQQRQQXcZY4jJRV8rH/KWd/b7DEFzLD2fdKfc+7z7n7HOucuP2Tdwdu4dp1SJUBj1WrBYYXC5Y/QEZ9mAYrtg6vPEEQrk8woUCIsUSoqUSYpUK4tUakrUGkvUNGcq3d25J4IxqCSqjEas2K4zuAdAWCMIRisAVJTCRRLRcHkRpcB0CE7U6YQOocuvH73F3fBRzahWWTUZo7DaYPG4JswVCcIYj8BEm1AmAiCH4OjAlgQ0o3/10GyMTY5hfUWPFbILWbofJ65EwEW6mG0hnJHC9UpUhwV9USODtn+9gdHIcC5oVrFrM0DkcMBNoD4bgYP086wkEUmmE8wX5sIghVFwFbAhMiZTv3PsJ96ceYEG7SqAFOuc1YCgsm+EnMFIoStgQJKNa/UxhqkHg3bERjE8/xOIlUL/mHAAv6ycU+pMp+WCh3UOxsyUBAjhU/BlwZOI+JmansaTTQmO10jJrMPu8Mt21SFR2OJwroNLfR/v4HKev/0B+s/tFWHqjCWV0cgKTczNQ6XXQ2mwSaPX74aRdBHAtGkO8VEN16wAbeyc4e/ORwM5V7a4DMwI4NjWJhwtzUBsN0LHDQw86w0JdDO71ONaLVeQabdS2D3H29iOK7S0J+Uxdo0mFLSgTM1OYXlrAiskEPRsy9KBQJ+rnTSaRqNSxd/4LeicXOH3zAZXuzuV0DCJ9mW6mQeDk/Cxml1XSgwan86rDQp2HHfalUkhWG+iePEX76FSmXNjsSVUDZQN1GaoToUwtzmNuVQ0NO2xk/Sw+n7SLAMoaxmIIZfOo9g8IPMP5209MuU81TRmDVIfATShiKcxraBmzGSYuBbPXy/BxQuLINdto7R/j6OIVzl9/wOGz1zj/7ROqvV3kW11kCcjIaP0PnFEv0zI6qVDDTeOKxFijbfSOnuDi1Xv8+vs/ePfXv3hB0MHTl7h49yeBeyhubskDBTRLmISLGi4SpjIY5Njl+WP/0SnKNHAgmYafHY5wjj3BIOJMu//kuVRYoydzzc6lwpYEDYNALf1nR2v3CNVuX3bY4vOzfjGOXBYz3ELffP0VfLEEts9e4tn7v1Fhyul681qwQbVBKAtUuLl/gmy9BbXZQg8GpQfFlhGjd/OHG3gwM0m1CbjYrA47Xer02XmamnE1MeI77aXkNjqo9XawqNdzMbApHp/c0sKDC1oNTT+LYCYr/egMhRBK56QquXHEChNR4horcwsxlMNnr+i1DHzJQXjiSbjpPzEtwqOOcFhu6Fi5wvXUpLIN+bAElKpXsBinKZQvQcnTpD7WKlERs9jhRtlGobNNVXmu/TTirEukWOH6KiGSLzJKMgRgvVSTEcmXuYRz8CRSUIT3wtkCayBM2manOlwGdcQKFdR3H2Hz+CmaNHR15wjF7i5HrUXFVJMrIcBDfdyVIiMHB8HCGiuLy2qYnWsIJjJI11rItXpMawCvcMNUevuobh+hRWjn8XP0Tl+gxTVW7h8iyXtEmi4qs7Dueg6FojWaYLTaYFtzY41LNZzOs/2bKBFU33kkVTa4tioElDq7XLA7/O+Aivn7/hPU9x+jwHuTzCyQr0AR6qwuNxyiuwyT3SGvaaZWI0yEUFgndOOAluGURAs1vgn54sqWuSA6KDKT6i4P5SGKzeWRALvHC6fXD5vbDQsP8YaiLEN6AN45JvQYmWZPAvJUmW31ES3WaS/WMJZkU8RbkQvWKlL1BWVY2SC7mwe4vfBH4/CGY3CxDB5eY0wn397hZuFYpgt0QYHwLgrdfXkNZIqcrjhTdjghVDo8fhg5gmbHmlQsYO5ghKo5ik43DFa+r/mfl2oSrPF6tUXPZuAkJFKoUjU3UGcPipE1EzAH09Xo9FjVG6jUA5c/dFlTJ3QWK3QcSw0buKhSYWFpCRaXl5NBk9MZTmZjZZeDtJIyOzsFL08RaS6p1bxZBZONqvldgJa1Wqg0Wl51UPPz7PwcxsfvY3R0BA/4PtJTeZLQdGsL3lQe/wF/ftt0l2A4/QAAAABJRU5ErkJggg==","aspectRatio":0.6666666666666666,"src":"/static/f19f4309bf766757e676f64eb0f57575/cc63a/socket.png","srcSet":"/static/f19f4309bf766757e676f64eb0f57575/cc63a/socket.png 668w","sizes":"(max-width: 668px) 100vw, 668px"}}},"author":[{"id":"3기_파피","bio":"우아한테크코스 3기 파피(김태완)입니다 :)","avatar":{"children":[{"__typename":"ImageSharp","fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAUICQYH/8QAFgEBAQEAAAAAAAAAAAAAAAAABgIE/9oADAMBAAIQAxAAAAHPOOsB2xNtnWv8QnLqe7BZVDCdv//EABwQAAIDAQADAAAAAAAAAAAAAAUGAQMEBwATFf/aAAgBAQABBQKsxI/Z9wXVXon3XC1nRmuJpaaIHRw0ka85orCCS8wqi6WaifDUidX/xAAjEQACAgECBgMAAAAAAAAAAAABAgMEEQASBRMhIiNBBjEy/9oACAEDAQE/AX4PeFyI8lFknc1thiNl6xePBk8TsFkWLmOA+I0Tys6go4eq6u69p2uwy7GNjg4yyFuwn2vr61xeaZPlF0pLIhWvdKlXZSpThLMhUg9NjAFcfkgEddV7twwQk27JJjQkmeUknA6k7tf/xAAhEQACAQQCAwEBAAAAAAAAAAABAgMEERIhAAUTMVFBcf/aAAgBAgEBPwFe46+WOWEO7COJag2kNN540luqMJEVvE0oRTjd3a8fj0ytHWIUQjNRgulGSjQ0GwOQ+G+/f7zrY426eLJEa9RCDkoNw1eoYbHphpvo98kp4BI4EMQAZrARp9/nP//EACUQAAICAQMEAgMBAAAAAAAAAAIDAQQFERITAAYUISIjFTFRQf/aAAgBAQAGPwJdoSOOQHo5Ia1bE+TARyrar7BYrTcExBf78Z6vvibtm3YQypR1kVTUNrOY7ZhG4XRBy6IDdEmTYIwn5j0xpaLlhbpARKRiZ/ekzMzpr/ZnT9dVLtKQmabJpzkPFkBY16Zk43XG2qyb5V+VdP0gYCCOYMiI11Mp5WXX3BbNuTx1S1iKbVnAWuKRu3k5VBwsiA2reFOAYUl4gsUM7ZyuO7q7MuV78zblh5sKbAdY+5yGVbdYLCDQZysgZGvrWJ0mOs9mbwW2vpzxLQvIXaVUxUryfvig+q98MOdGAywS9sRtAS1KeycZYxNMKt3G5fK3fHXxWLZY2vUCrSsXPdtmPDnKZTzckzA/ftjb0RK/LVwMYPhXcQxYa6+gK1TsO2/yCaWnX//EABkQAQEBAQEBAAAAAAAAAAAAAAERACExkf/aAAgBAQABPyFarFjMXXPXENTMhxd5dF0KOmPkr1NCGzo9CWuQL9O3oRudGg9l/wAXhJRkqaWg1BHLj6W1h7m0ECHwYt4xJMQjXYM7ukFgIxUVQCQLqQ3w53//2gAMAwEAAgADAAAAEFfQw//EABkRAQEBAQEBAAAAAAAAAAAAAAERACExQf/aAAgBAwEBPxDyi246oHNmTVhuWRRSwRiqgu/BQXXvhga0NDEQOfv0eDKGqvVVV7v/xAAaEQEBAQEAAwAAAAAAAAAAAAABIQARMUFR/9oACAECAQE/EGqpplpNrozbsGxijSzjXx1cnXpgcwYOkQgxDJBJikxAgBcACAfDf//EABcQAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQEAAT8QV4l3IbYV1dkIYSg85V5U0PkGGNHXom4GFlCy5+c3CjAK1Ar1NSjq7jpGndxmJqXRC/65svDe8npmdMtiZ/rv49RSN86rgVGiNmYPxwDl/9k=","aspectRatio":1,"src":"/static/277b83483df394ce4c24651b32af4094/94285/fafi.jpg","srcSet":"/static/277b83483df394ce4c24651b32af4094/b3d27/fafi.jpg 40w,\n/static/277b83483df394ce4c24651b32af4094/5a735/fafi.jpg 80w,\n/static/277b83483df394ce4c24651b32af4094/6e81a/fafi.jpg 120w,\n/static/277b83483df394ce4c24651b32af4094/94285/fafi.jpg 720w","sizes":"(max-width: 720px) 100vw, 720px"}}]}}],"source":null}},"relatedPosts":{"totalCount":4,"edges":[{"node":{"id":"c209a85e-6260-50e5-b817-48f63e9796b4","timeToRead":5,"excerpt":"이 글은 웹 소켓으로 만든 채팅방을 어떻게 테스트할지 고민하는 독자를 위해 작성되었다.  웹 소켓은 어떻게 테스트하면 좋을까? Babble…","frontmatter":{"title":"웹 소켓에 대해 알아보자! - 테스트 편","date":"2021-11-10T12:00:00.000Z"},"fields":{"slug":"/post/2021-11-10-web-socket-test/"}}},{"node":{"id":"4490d8af-e69a-55b6-88a0-90c9ac84b69c","timeToRead":4,"excerpt":"웹 소켓에 대해 알아보자! - 실전 편 이번 글에서는 저번에 작성했던 웹 소켓 이론 편에 이어서, 스프링 환경에서 웹 소켓을 사용하는 법에 대해 다루려고 한다. STOMP 구현하기에 앞서, 우리는 새로운 프로토콜을 도입할 것이다. 바로 STOMP…","frontmatter":{"title":"웹 소켓에 대해 알아보자! - 실전 편","date":"2021-09-05T12:00:00.000Z"},"fields":{"slug":"/post/2021-09-05-web-socket-practice/"}}},{"node":{"id":"e1adecd0-7865-51be-a02d-73e725e338d6","timeToRead":4,"excerpt":"…","frontmatter":{"title":"웹 소켓에 대해 알아보자! - 이론 편","date":"2021-08-14T12:00:00.000Z"},"fields":{"slug":"/post/2021-08-14-web-socket/"}}},{"node":{"id":"41576460-2e24-5a14-86c5-2c92e002b8aa","timeToRead":3,"excerpt":"웹 개발을 처음 배우기 시작했다면 서버와 클라이언트의 통신은 모두 HTTP 프로토콜만 이용해서 이루어진다고 생각할 수 있습니다.\n하지만 웹 개발을 하면서 채팅, 게임, 주식 차트 등의 실시간 통신이 필요한 서비스를 구현하려 하면 HTTP…","frontmatter":{"title":"웹소켓에 대해 알아보자","date":"2020-09-20T12:00:00.000Z"},"fields":{"slug":"/post/2020-09-20-websocket/"}}}]}},"pageContext":{"slug":"/post/2021-09-05-web-socket-practice/","prev":{"excerpt":"1. 계층형 댓글 구현 image 우아한테크코스 레벨 3 팀 프로젝트에서 SNS 성격의 웹 어플리케이션을 개발하게 되었습니다. SNS 기능 요구사항 중 특정 댓글에 대한 대댓글 작성이라는 다소 까다로운 요구사항이 존재했는데요. 관계형 DB…","timeToRead":8,"frontmatter":{"title":"관계형 DB에서 계층적인 데이터 관리하기","tags":["database"],"date":"2021-09-04T12:00:00.000Z","draft":false,"excerpt":null,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.9225663716814159,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+ElEQVQoz41SSQ6DMAzM/7/CR7hw5YQQEgf2fV9djVWjFNKqlkaMk4njMVHneRKAEK6vNU1DnueR7/vMv+mEK3qHbOj5cRzM53m+9mXtrpVQ+i3LslBd11QUBQ3DwDkwjiMXBZD3fU9ZlrF2XdfPDvWCKBQEAYVheNkzBXSu6zLKsjRblkBn+74/LN1HMk0Tbdv20CnMBG3DDgSwAbGs6cWxD8tYa9uWRwEuZ3mGsIa2q6p6ANYwKxzO85yiKKI0TZnHcUxJklw5OLQKnZggP0RuB++6jr/I5QfpgDNFfwTGIoVwmenpPJ7NLyAcxyHLssi2bePjFrwA6B4NfiJ7TfIAAAAASUVORK5CYII=","sizes":"(max-width: 869px) 100vw, 869px","src":"/static/c6e8cd551f495b1a37890070cffabf39/063ad/rdb-hierarchy.png","srcSet":"/static/c6e8cd551f495b1a37890070cffabf39/063ad/rdb-hierarchy.png 869w"}}},"author":[{"id":"3기_케빈","bio":"우아한테크코스 3기 케빈(박진홍)입니다 :)","avatar":{"children":[{"fluid":{"aspectRatio":1,"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAkFBwj/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAwEC/9oADAMBAAIQAxAAAAHldPpjVfl3ospiTfp8OhiNv//EAB4QAAEEAQUAAAAAAAAAAAAAAAYCAwQFJQABBxI1/9oACAEBAAEFApEfKCg3YU1c5HT2fcy5NAQSwlboiaf9XnczvwOnHLideDf/xAAdEQEBAAEEAwAAAAAAAAAAAAABAgASITFBEXHw/9oACAEDAQE/AYjXcypA0FXySKeaQ3QN0N3rNDhy/dY8vvP/xAAhEQEAAAUDBQAAAAAAAAAAAAABAAIRIfADUXESMUGRsf/aAAgBAgEBPwGfU6JWajNQqB3XwX3bVYNTPWZZDOSNuD5H/8QAKhAAAgIABAUBCQAAAAAAAAAAAgMBBAAFERIGEyExMrQUI0VRYWV1oaT/2gAIAQEABj8CtD9xYP8AVI98DGc3LhWUzcAq7c1G9QWibBMS2TNAe/EPI4dKw1n5zt8P1GLPT4ofrNcWuG2TC15qLPaDON8QqvZrtgdkSMFzWRAHBajs1jYW7oFUNwhWUmuuB7ctKgWGm7cXiMR1mZ+uLP5Vnq8ZHn/DdldW+7iFuXv51dVpD6bKtywSGKeJdOdWUwSCQYJROh6TOOHc6vmJXs1yTLb9sljy1lYs1xY2QXE6AMlPQY7Y/8QAHBABAQADAQEBAQAAAAAAAAAAAREAITFBYXGh/9oACAEBAAE/IdVgzVm0i6TbtIhskyBNHJoIgZOOasUPjDaX1OP6XVP7lrkfpwnSoSPBkAzcEICGIdrDa7hOXQ94Ke/Pck5i7eGQy3ihZUCtoWQQFCDRn//aAAwDAQACAAMAAAAQkOD8/8QAHREBAQEAAgIDAAAAAAAAAAAAAREhADFRcYGhsf/aAAgBAwEBPxC5psHTEUSAwgWCmpTGap0mwz49+daSZDJkqvXnn3H68//EAB4RAQACAQQDAAAAAAAAAAAAAAERIQAxQVGBYZHw/9oACAECAQE/ELWipAIIWAMUgCZUDBQeQffTzx1hkCCVSCVBTVbYafCmf//EABsQAQEBAQADAQAAAAAAAAAAAAERIQAxQVFh/9oACAEBAAE/ECApXAhCVAKIJIBBuHTeCCIVPfUaVCHGNXw0p8QibW1/bkxTOSYGxJ4SPAI80KriOqUpwE9Z4+VRh5WkQcmzVRCPoQmg9HEGLqtMfOMwBuam7P1G7Goh3//Z","sizes":"(max-width: 535px) 100vw, 535px","src":"/static/ca96a9821f9436be6d625379dfb61c32/f66a1/kevin.jpg","srcSet":"/static/ca96a9821f9436be6d625379dfb61c32/fd013/kevin.jpg 200w,\n/static/ca96a9821f9436be6d625379dfb61c32/25252/kevin.jpg 400w,\n/static/ca96a9821f9436be6d625379dfb61c32/f66a1/kevin.jpg 535w"}}]}}]},"fields":{"layout":"post","slug":"/post/2021-09-03-hierarchy-data-with-rdb/"}},"next":{"excerpt":"이번 글에서는 프로젝트를 구성하는 데 있어 멀티 모듈 활용했을 때의 장점과 간단한 설정 방법을 알아본다. 멀티 모듈의 개념을 처음 접하는 사람들이 읽어보기를 추천한다.","timeToRead":3,"frontmatter":{"title":"멀티 모듈 적용하기 with Gradle","tags":["gradle","build"],"date":"2021-09-06T12:00:00.000Z","draft":false,"excerpt":null,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.7782026768642447,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAAB3UlEQVQoz2NgmJjKOadAcVev8cVFppcXG51fAETGFxYan18ERRcWmlxYZHRxoeHFhSBxJMTANCWDcWIaw4QU3kWl6gcnm15abHIJaMRC40sLjC7PN7640OjigpBlu9InHbY5PQ9NPwPj5HSgfiBimJDKOClNeEW19vGZJhcXGx9ZaXZgrenpJaaXZ6tc3NS4vLRjXYrqtdVm5+ejaIYguBEs01Ml5m9W771j2XLbo+Oq49rd7qcmHZtp1LMuVuXaWuyawQioP5VhcivzhK1C/Zc1Oy9rdz7pbp7wpUn2fYu075FevUtLTSAhgqE5g3FyCuPkEoZplxmnHmObtJm1/27ehEn3uvX+10jPXhatcXmZCZK1aJozGScnME6ZyDD1JtPUGwzTH6R1zvpdafilRvd4s6nRvl7jK8tMgeGHw2ag5jjGKXMZp95mmLI3vnPh7Abf6U1e/6sMm9s8GablSK2u0z052+zKEqA2iBFozk5inNTKMHEWW19yUUOkcE8SQ396drO/T2cow+RMpv5k1unZ0pvbDM/OM728BKgfLcDSwd5OBjIYpmQwT05nmZTGMCUTbC4oOoBxCUwR0ESFEdoQ+4Gq01mAqsEirJPTmCenIUUHMFGlAo3gX1IOAKl8I5VefSXJAAAAAElFTkSuQmCC","sizes":"(max-width: 1920px) 100vw, 1920px","src":"/static/7f3cd5dc39844e363ff7c530e53a80af/0e6e2/gradle.png","srcSet":"/static/7f3cd5dc39844e363ff7c530e53a80af/3a443/gradle.png 930w,\n/static/7f3cd5dc39844e363ff7c530e53a80af/4d929/gradle.png 1860w,\n/static/7f3cd5dc39844e363ff7c530e53a80af/0e6e2/gradle.png 1920w"}}},"author":[{"id":"3기_완태","bio":"우아한테크코스 3기 완태(김태완)입니다 :)","avatar":{"children":[{"fluid":{"aspectRatio":1.3333333333333333,"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAcIBgn/xAAVAQEBAAAAAAAAAAAAAAAAAAAFBv/aAAwDAQACEAMQAAABZ7XgHpfDs5UiEAS//8QAGBAAAwEBAAAAAAAAAAAAAAAAAwQFAQb/2gAIAQEAAQUCYjYq6lWmb0NMvOpsjuMLbLDNLxL9tp4//8QAIBEAAgIBBAMBAAAAAAAAAAAAAQIDBBEFEhMhAAYxQf/aAAgBAwEBPwGbQ9MV5EktW5G5kAHCitGGSGRpJEaQkkB2UJlPgYPjKlfVKe0bZdQdcDDLTrlWHXak3lyD+dDz/8QAIBEAAgMAAQQDAAAAAAAAAAAAAQIDBBEhAAUGEhQiYf/aAAgBAgEBPwGn5DfsJsVOkPSrLJvyJisrRyzQIkTrAFwtErF/vg1CmlZAfNbZOtX7fGd5R7F33Q8cNlAjR+Hr/8QAJBAAAgICAQQBBQAAAAAAAAAAAgMBBAUREgATFCEVBhYxNFL/2gAIAQEABj8CHE1nza+7a1auV3UF7x9g4yWQfw1Cm18G7UxBQh71KIAgzcA3/pIcRYqhjqA3E5KfFLGWVramu9OlH5FOwmw0QBdhY+TAG1BcB98LZJBrVw/9ay3kJkUQfJKWD7kZ9b36/GtdYD5LKTSsD8gxRpi1a2fjgoa5wK16W8TPjIsjjAz3OEyMSlvryLmKnMvyddHZtOvTWmxNiTme8RQAgqBcZjwXAly3vqH4/PZka8rDXLxwki1si4zXOY3v+uv/xAAXEAEBAQEAAAAAAAAAAAAAAAABEQBB/9oACAEBAAE/IbomCdLFsoKUTH5YC3YTEz+HDw0UozO9sZDDb2CiR/kWBhzwhbhlVnAu4DaBhX6VKbhGCoE5X//aAAwDAQACAAMAAAAQ0N//xAAYEQEBAQEBAAAAAAAAAAAAAAABEQAhMf/aAAgBAwEBPxD0BTTLfqfFhmz1QJPZLUKqbF5N/8QAGBEBAQADAAAAAAAAAAAAAAAAAREAITH/2gAIAQIBAT8QXzwuGBqeMsHgECek5RRGJ0Q1p7n/xAAXEAEBAQEAAAAAAAAAAAAAAAABABEh/9oACAEBAAE/ED7F6VN7rN1G2QiPo7YNtlSACyYdSEmA1Gk9Mkw6DPPUOF4lyd9huXyOxXqFnqoQfTw/YI//2Q==","sizes":"(max-width: 800px) 100vw, 800px","src":"/static/abf7878b2934f38b07c4119883f238d3/2f1b1/wannte.jpg","srcSet":"/static/abf7878b2934f38b07c4119883f238d3/fd013/wannte.jpg 200w,\n/static/abf7878b2934f38b07c4119883f238d3/25252/wannte.jpg 400w,\n/static/abf7878b2934f38b07c4119883f238d3/2f1b1/wannte.jpg 800w,\n/static/abf7878b2934f38b07c4119883f238d3/b1cc5/wannte.jpg 960w"}}]}}]},"fields":{"layout":"post","slug":"/post/2021-09-06-multi-module/"}},"primaryTag":"websocket"}},"staticQueryHashes":["2130001345","4041952199"]}