{"componentChunkName":"component---src-templates-post-tsx","path":"/post/2022-10-10-Service/","result":{"data":{"logo":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#080808","images":{"fallback":{"src":"/static/0b18bd94a62a12fdc81ea720c28722f6/a9770/tecoble.png","srcSet":"/static/0b18bd94a62a12fdc81ea720c28722f6/a9770/tecoble.png 400w","sizes":"400px"},"sources":[{"srcSet":"/static/0b18bd94a62a12fdc81ea720c28722f6/65935/tecoble.webp 400w","type":"image/webp","sizes":"400px"}]},"width":500,"height":110}}},"markdownRemark":{"html":"<h1>😘 서론</h1>\n<p>우아한테크코스에서 사용하는 협업 도구 중 하나인 <code class=\"language-text\">Slack</code>은 무료 프리티어 사용 시 3개월이 지난 메시지들을 보여주지 않습니다.\n레벨 3 팀 프로젝트인 <a href=\"https://github.com/woowacourse-teams/2022-pickpick\">줍줍</a>에서는 이 사라지는 메시지들을 백업해주는 서비스를 제공합니다.\n<code class=\"language-text\">Slack</code>의 메시지에 대한 정보를 주로 다루다 보니 <code class=\"language-text\">Slack 라이브러리</code>에 의존적인 로직이 많습니다.\n이 포스팅에서는 외부 라이브러리(<code class=\"language-text\">Slack 라이브러리</code>)를 사용하는 <strong>로직을 어떻게, 왜 추상화했는지</strong>에 관해 이야기하려고 합니다.</p>\n<p><br/><br/></p>\n<h1>🤔 왜 서비스를 추상화해야 하는가?</h1>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 2000px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/b2dcb1b209c58854930913b00f9529f5/c7a69/2022-10-10-slack.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 25.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAPoAAAD6AG1e1JrAAABBElEQVR42mNgAAKzox86jPYdmKm/rXYVA3awC4i5ccixAPEhOM/s2MfpZkc/bjDau75fb3vtPt1tNZO0VzWwAaU0gXgeECcA8XkgVgXiuUDcD8SeQJwExIuB2BiIrwOxOxDHMXQVLp1Z2rZjSk9PW8DSzV5T+reGrGxoaGACSqYB8SYg9oIaOAOIU4G4DYgnA/F+INYHYj0gfgfEV4CYn+GBfFTfA7moNU+8/Ka/2ay38c0mvUX/V2mDXOgGxI1AfBhqYDEQb4V6rwmIzwLxVCCOAuJbULlQsLfvy0VNeBbtCTJwAVLY8AKxIxCLQl3BDMTmQKwFxJJALAzEttAw1IeqNwQAM61MWZdp0PcAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"2022 10 10 slack\" title=\"\" src=\"/static/b2dcb1b209c58854930913b00f9529f5/f97d7/2022-10-10-slack.png\" srcset=\"/static/b2dcb1b209c58854930913b00f9529f5/0eb09/2022-10-10-slack.png 500w,\n/static/b2dcb1b209c58854930913b00f9529f5/1263b/2022-10-10-slack.png 1000w,\n/static/b2dcb1b209c58854930913b00f9529f5/f97d7/2022-10-10-slack.png 2000w,\n/static/b2dcb1b209c58854930913b00f9529f5/c7a69/2022-10-10-slack.png 2560w\" sizes=\"(max-width: 2000px) 100vw, 2000px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p>기존의 테스트에서는 <code class=\"language-text\">Slack 라이브러리</code>를 호출하는 부분은 모킹 처리해두었습니다.\n테스트 코드를 리팩토링하다 보니 모킹 작업이 계속 <strong>반복</strong>되는 <strong>지루</strong>한 작업으로 느껴졌습니다.\n반복되는 모킹 작업을 제거하기 위해 테스트 방식을 <code class=\"language-text\">목</code>에서 <code class=\"language-text\">스텁</code>으로 변경해야겠다는 결심을 하게 되었습니다.\n(테스트에 대한 이야기는 <code class=\"language-text\">2기_스티치</code>의 <a href=\"https://tecoble.techcourse.co.kr/post/2020-09-19-what-is-test-double/\">Test Double을 알아보자</a>를 참고\n바랍니다.)</p>\n<p><code class=\"language-text\">Slack 라이브러리</code>의 스텁용 객체를 만들기 위해서는 <code class=\"language-text\">MethodsClient</code>라는 인터페이스를 구현해야 합니다.\n해당 인터페이스는 약 250개의 메서드를 갖고 있으며 그중 저희 서비스에서 실제로 사용하는 메서드는 약 10개 정도에 불과합니다.\n이를 모두 구현하는 것은 불필요하고 번거로운 작업이기에 더 간편한 방법을 고민하게 되었습니다.\n이때 떠오른 방법이 <strong>서비스를 추상화해 필요한 부분만</strong> 사용하도록 만드는 것이었습니다.\n자세한 설명은 아래 예제 코드를 보며 살펴보겠습니다.</p>\n<p><br/><br/></p>\n<h1>😆 예제 코드</h1>\n<h2>0. 기존 코드</h2>\n<p>예제로 채널을 생성하는 <code class=\"language-text\">ChannelCreateService</code>의 기존 로직을 가져와 보았습니다.\n로직 대부분이 <code class=\"language-text\">Slack 라이브러리</code>에 의존하고 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">\n<span class=\"token annotation punctuation\">@Transactional</span>\n<span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ChannelCreatedService</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token class-name\">MethodsClient</span> slackClient<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> <span class=\"token class-name\">ChannelRepository</span> channels<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">ChannelCreatedService</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">MethodsClient</span> slackClient<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">ChannelRepository</span> channels<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>slackClient <span class=\"token operator\">=</span> slackClient<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>channels <span class=\"token operator\">=</span> channels<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">Channel</span> <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> channelSlackId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// slack api를 호출하는 부분</span>\n      <span class=\"token class-name\">Conversation</span> conversation <span class=\"token operator\">=</span> slackClient\n        <span class=\"token punctuation\">.</span><span class=\"token function\">conversationsInfo</span><span class=\"token punctuation\">(</span>request <span class=\"token operator\">-></span> request<span class=\"token punctuation\">.</span><span class=\"token function\">channel</span><span class=\"token punctuation\">(</span>channelSlackId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">getChannel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// slack의 response를 우리 도메인인 channel 형태로 변환</span>\n      <span class=\"token class-name\">Channel</span> channel <span class=\"token operator\">=</span> <span class=\"token function\">toChannel</span><span class=\"token punctuation\">(</span>conversation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// channel을 저장하고 return</span>\n      <span class=\"token keyword\">return</span> channels<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> <span class=\"token operator\">|</span> <span class=\"token class-name\">SlackApiException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// slack api 호출로 인해 발생할 수 있는 exception</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SlackApiCallException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 583px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2ddb1dfc74cc90c3fa55a323c5b7fb7c/6d62d/2022-10-10-service-ver1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86.60000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAABJ0AAASdAHeZh94AAADUUlEQVR42o2TW0wTaRTHv0o2aqKo0RhjNuFhs68+GBMvwURf1Jjowz7sk49mFxAqVSKK8QoREVwvWYRdEzeuFyjFe5UaLW3p0Ov0QkGYmdLOtKUzbbcz085QWi5rPVO8Jb44+eXM/zvnOzP/nPkGvX9f/HwV5v4PJeQonwNIVorxOTo1HUrKEEFP8TPzCx93ww0aESguOxuIykR8eoSRDP5kv4N97GKfudkBX0Jnjz91s8AznHvqYn2MRMRzsJkVC9CIInze8o7Xe1Mt+vBFffjSANNmiLQamAt6+qKebnlFN7+iWweYywaF5pfhZj393JMcGufpdB7hoWyfk1tzEkPVRtWRQQRUG5drzJs78E1X3Jva3JU3vOXHLajKqKoZVDbUGMtPWHvsnHMygwIR6dCdMXT4TVmtUlCoNpbVDa5twlaftK5qtK5rwn5QmyC5WC2D/t/e/NId8NMSGqGlg92BFSesx/qDR3XUYlT3Ub8/JKp7iKoeAkStloQMUKulGh4F15zCdt/wQSMaZaS9nf7NV9wLufnxiOSkRAcljjGSN5RxBUV8MgMiOCU7g6IvnCFjcnF2Yfsfnm1XPaMRCQUYaX/XyIYzth4H122OXX8bvWWKdZkVbhpBK8vblqkuUwyqf1umYEAV5+07r3mhEcHnOdAdWNYwBG7rdZSmH+yRoOv6SI2OOloCdMkzeUSrJMsbrbvANlOyvafTv6UdF/m8ixKDMdk6wePBTITLOSgBI3iwTUbloQmeisnYhCBnZiuve7d24F9s/3jO/gRP/oPFH9jZu8Psv8Os1snB8i4WBw3JezYlc9/G6n2pn5odlZ9tH/wrsLRhqE5L1vSSMGGwBz4XowK47VVi1UNl+GotubLRuvtmadrwgH1guwMvyHMCXxCFgo0QYeaAP5x1BzMYIQTo7DAhCEIhnc4X8ws7rnm2d8C0ZTQWlX+9PVpx1vZ2NA2H9KUvpXMneh0cmNS5EhCBx3gSMlB94U1axvmfLzj2/+lXbMPx7HclNp6xIbVJpTGjerOq3rxEY1Z9BSpllBJEtWn96WGtg3NNZlEiO2sZF+CF7a+ZtgGFy9/Q9ikC7QbmhScFLVymoPySQm4ulJyJ/Jf/TmBzenquWCx+AL0D35U3xeXaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2022 10 10 service ver1\"\n        title=\"\"\n        src=\"/static/2ddb1dfc74cc90c3fa55a323c5b7fb7c/6d62d/2022-10-10-service-ver1.png\"\n        srcset=\"/static/2ddb1dfc74cc90c3fa55a323c5b7fb7c/0eb09/2022-10-10-service-ver1.png 500w,\n/static/2ddb1dfc74cc90c3fa55a323c5b7fb7c/6d62d/2022-10-10-service-ver1.png 583w\"\n        sizes=\"(max-width: 583px) 100vw, 583px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<br/>\n<h2>1. 외부 라이브러리를 쓰는 로직 추상화</h2>\n<p>위 로직을 아래처럼 두 개의 클래스로 분리하여 역할을 나눠주었습니다.</p>\n<h4>ChannelCreateService</h4>\n<ul>\n<li>채널 저장 로직을 가진 클래스</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">\n<span class=\"token annotation punctuation\">@Transactional</span>\n<span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ChannelCreatedService</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token class-name\">CallSlackApi</span> slackClient<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> <span class=\"token class-name\">ChannelRepository</span> channels<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">ChannelCreatedService</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">CallSlackApi</span> slackClient<span class=\"token punctuation\">,</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">ChannelRepository</span> channels<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>slackClient <span class=\"token operator\">=</span> slackClient<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>channels <span class=\"token operator\">=</span> channels<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">Channel</span> <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> channelSlackId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Channel</span> channel <span class=\"token operator\">=</span> slackClient<span class=\"token punctuation\">.</span><span class=\"token function\">callChannel</span><span class=\"token punctuation\">(</span>channelSlackId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> channels<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>CallSlackApi</h4>\n<ul>\n<li><code class=\"language-text\">Slack 라이브러리</code>를 호출하고 결괏값을 반환하는 클래스</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">\n<span class=\"token annotation punctuation\">@Component</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CallSlackApi</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MethodsClient</span> methodsClient<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">CallSlackApi</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">MethodsClient</span> methodsClient<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>methodsClient <span class=\"token operator\">=</span> methodsClient<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">Channel</span> <span class=\"token function\">callChannel</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> channelSlackId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// `Slack 라이브러리`를 호출</span>\n      <span class=\"token class-name\">Conversation</span> conversation <span class=\"token operator\">=</span> methodsClient<span class=\"token punctuation\">.</span><span class=\"token function\">conversationsInfo</span><span class=\"token punctuation\">(</span>\n          request <span class=\"token operator\">-></span> request<span class=\"token punctuation\">.</span><span class=\"token function\">channel</span><span class=\"token punctuation\">(</span>channelSlackId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">getChannel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">// 결과값을 우리가 사용하는 객체 형태로 변경</span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Channel</span><span class=\"token punctuation\">(</span>conversation<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> conversation<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> <span class=\"token operator\">|</span> <span class=\"token class-name\">SlackApiException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SlackApiCallException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1197px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6231f99a3718bd7e12c64c62874a341e/7e04b/2022-10-10-service-ver2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAABJ0AAASdAHeZh94AAABrUlEQVR42j3O20vbYBgG8PwTXvkvjAnuSkG8qF7tbgMHdoon8EbEAyLeDCZTq4KHVqlSrR01Oqp1uFoUyjxUqphq0pimRkGwVVttapsvn5rPJA1+QhF+vPBcPA8voenGo6Knsko0Abg4YK8kLgHi6Wf4rCHNMBDMS3d5WdSTgnoRUi8pPRPPy2nM0FXi7Pax1smXj51UTNBfHNw3Z9RkY3Csnma3YjmV9YO5ZjBbLy+2Q7ILkh3yfAuYMcvL3doNTwT4h6Le/ZLh8Ichqmz8pGKS/mgJl44eF/ftjpCU7B3IDlZKthowUwccTcDRKE3VSNavWYsJRQOEj818trN7fGY1fId58aVSOwKY9IT72yzCrwblvw3FdhDtQ/Q/xGygyMaLsCe721DEj8tilZXZZEXyMPU7lHQfJF2hZIATe9Yuf2xeo8AE/PsTMT6FWn1z5EHUCl4BC614iAie5z4NHze7z+pcMbOL/+7iaxf41iXBZKWnthMv23bJboZ/emSyE75b6sbPq+dB4gnpwYuch75fi6QxL/MGRz8nilAzstfodKvwMOMroNdx01DgK7knOTQsKaCTAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2022 10 10 service ver2\"\n        title=\"\"\n        src=\"/static/6231f99a3718bd7e12c64c62874a341e/7e04b/2022-10-10-service-ver2.png\"\n        srcset=\"/static/6231f99a3718bd7e12c64c62874a341e/0eb09/2022-10-10-service-ver2.png 500w,\n/static/6231f99a3718bd7e12c64c62874a341e/1263b/2022-10-10-service-ver2.png 1000w,\n/static/6231f99a3718bd7e12c64c62874a341e/7e04b/2022-10-10-service-ver2.png 1197w\"\n        sizes=\"(max-width: 1197px) 100vw, 1197px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<br/>\n<h2>2. 추상화한 로직 인터페이스로 분리</h2>\n<p>좀 더 편리한 스텁 객체를 만들기 위해 <code class=\"language-text\">ExternalClient</code>라는 인터페이스를 만들었습니다.\n기존의 <code class=\"language-text\">CallSlackApi</code>에 존재하던 로직은 <code class=\"language-text\">ExternalClient</code> 인터페이스의 구현체인 <code class=\"language-text\">SlackClient</code>로 옮겼습니다.</p>\n<h4>ExternalClient</h4>\n<ul>\n<li>외부 라이브러리의 로직을 추상화한 인터페이스</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ExternalClient</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">Channel</span> <span class=\"token function\">callChannel</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> channelSlackId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>SlackClient</h4>\n<ul>\n<li><code class=\"language-text\">Slack 라이브러리</code>를 호출하는 <code class=\"language-text\">ExternalClient</code>의 구현체</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">\n<span class=\"token annotation punctuation\">@Component</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SlackClient</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ExternalClient</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token class-name\">MethodsClient</span> methodsClient<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">SlackClient</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">MethodsClient</span> methodsClient<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>methodsClient <span class=\"token operator\">=</span> slackClient<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">Channel</span> <span class=\"token function\">callChannel</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> channelSlackId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token class-name\">Conversation</span> conversation <span class=\"token operator\">=</span> methodsClient<span class=\"token punctuation\">.</span><span class=\"token function\">conversationsInfo</span><span class=\"token punctuation\">(</span>\n          request <span class=\"token operator\">-></span> request<span class=\"token punctuation\">.</span><span class=\"token function\">channel</span><span class=\"token punctuation\">(</span>channelSlackId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">getChannel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Channel</span><span class=\"token punctuation\">(</span>conversation<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> conversation<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IOException</span> <span class=\"token operator\">|</span> <span class=\"token class-name\">SlackApiException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SlackApiCallException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1192px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d40d3c3babceb5f8800be2be7348675a/bb7f4/2022-10-10-service-ver3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.800000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAABJ0AAASdAHeZh94AAABYUlEQVR42mP49uPvu88/rz/+ePnhh4sPPlx6+OHW008fvvz69uPPn7///uMFDAWrbln1n7PtP+c9/WLE/Cs+0y/Z9J+16jtXtPbum08/gSr+/f759/2zP++fAEkQ+vAMKPL/37//f/8wKNcdk284rtF20rDrjPWEc4bdZ9RbTyo2HlevPXTn7NmfB2d/2dr1ZVPb1x39X3f2f9nR/2VT69dtPV/3TP394jaD06TzG8++3HTu5epTL9acBqH1Z15uu/gqt3jGtpKiF22e7+uN3rXYfpgc8mFS8IeJAe+ard/Wm7zvdPl17zSDbf/ZladerDvzcsnxZ8tOPAeSa8+8ACK3KZfuPXj2/8X1X0+u/X567fejS1D0FMx9cvXv57cMVr1nc1bcKFpzO33ZjQwwKlx9K3/VTeeJ5x+9/g7yM+5QY9hy8XX7zoc9ex71QtDex0A2UGTb5Tc/fv0B6QXqxoEAeotOvbRvpyIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2022 10 10 service ver3\"\n        title=\"\"\n        src=\"/static/d40d3c3babceb5f8800be2be7348675a/bb7f4/2022-10-10-service-ver3.png\"\n        srcset=\"/static/d40d3c3babceb5f8800be2be7348675a/0eb09/2022-10-10-service-ver3.png 500w,\n/static/d40d3c3babceb5f8800be2be7348675a/1263b/2022-10-10-service-ver3.png 1000w,\n/static/d40d3c3babceb5f8800be2be7348675a/bb7f4/2022-10-10-service-ver3.png 1192w\"\n        sizes=\"(max-width: 1192px) 100vw, 1192px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<br/>\n<h2>3. 스텁용 객체 생성 및 적용</h2>\n<p>스텁용 객체를 생성한 뒤 <code class=\"language-text\">@Component</code>를 이용해 bean으로 등록하였습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">\n<span class=\"token annotation punctuation\">@Primary</span> <span class=\"token comment\">// SlackClient 보다 우선 순위가 높은 bean으로 등록하기 위해 붙였다.</span>\n<span class=\"token annotation punctuation\">@Component</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FakeClient</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ExternalClient</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Channel</span><span class=\"token punctuation\">></span></span> channels <span class=\"token operator\">=</span> <span class=\"token class-name\">List</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 채널 데이터 초기화</span>\n\n  <span class=\"token annotation punctuation\">@Override</span>\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">Channel</span> <span class=\"token function\">callChannel</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> channelSlackId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> channels<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span>it <span class=\"token operator\">-></span> it<span class=\"token punctuation\">.</span><span class=\"token function\">isSameSlackId</span><span class=\"token punctuation\">(</span>channelSlackId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">findAny</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">orElseThrow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SlackApiCallException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<h2>4. 테스트 코드에서 모킹 제거</h2>\n<p>스텁을 적용하였으니 이제 모킹한 코드들을 제거해주는 일만 남았습니다.\n전후 코드를 비교하여 코드가 얼마나 깔끔해졌는지 확인해보겠습니다.</p>\n<h4>AS-IS (목 적용)</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">\n<span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// given</span>\n  <span class=\"token class-name\">Workspace</span> workspace <span class=\"token operator\">=</span> workspaces<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">WorkspaceFixture</span><span class=\"token punctuation\">.</span><span class=\"token constant\">JUPJUP</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">Channel</span> channel <span class=\"token operator\">=</span> <span class=\"token class-name\">ChannelFixture</span><span class=\"token punctuation\">.</span><span class=\"token constant\">QNA</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>workspace<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">String</span> request <span class=\"token operator\">=</span> <span class=\"token function\">createRequest</span><span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">given</span><span class=\"token punctuation\">(</span>slackClient<span class=\"token punctuation\">.</span><span class=\"token function\">conversationsInfo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RequestConfigurator</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ConversationsInfoRequestBuilder</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">)</span> <span class=\"token function\">any</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">willReturn</span><span class=\"token punctuation\">(</span><span class=\"token function\">setUpChannelMockData</span><span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// when</span>\n  channelCreatedService<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// then</span>\n  <span class=\"token class-name\">Optional</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Channel</span><span class=\"token punctuation\">></span></span> actual <span class=\"token operator\">=</span> channels<span class=\"token punctuation\">.</span><span class=\"token function\">findBySlackId</span><span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">.</span><span class=\"token function\">getSlackId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>actual<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isNotEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token class-name\">ConversationsInfoResponse</span> <span class=\"token function\">setUpChannelMockData</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Channel</span> channel<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">Conversation</span> conversation <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Conversation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  conversation<span class=\"token punctuation\">.</span><span class=\"token function\">setId</span><span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">.</span><span class=\"token function\">getSlackId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  conversation<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">.</span><span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token class-name\">ConversationsInfoResponse</span> conversationsInfoResponse <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ConversationsInfoResponse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  conversationsInfoResponse<span class=\"token punctuation\">.</span><span class=\"token function\">setChannel</span><span class=\"token punctuation\">(</span>conversation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  conversationsInfoResponse<span class=\"token punctuation\">.</span><span class=\"token function\">setOk</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> conversationsInfoResponse<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>TO-BE (스텁 적용)</h4>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">\n<span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">execute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// given</span>\n  <span class=\"token class-name\">Workspace</span> workspace <span class=\"token operator\">=</span> workspaces<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">WorkspaceFixture</span><span class=\"token punctuation\">.</span><span class=\"token constant\">JUPJUP</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">Channel</span> channel <span class=\"token operator\">=</span> <span class=\"token class-name\">ChannelFixture</span><span class=\"token punctuation\">.</span><span class=\"token constant\">QNA</span><span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>workspace<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">String</span> request <span class=\"token operator\">=</span> <span class=\"token function\">createRequest</span><span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// when</span>\n  channelCreatedService<span class=\"token punctuation\">.</span><span class=\"token function\">execute</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// then</span>\n  <span class=\"token class-name\">Optional</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Channel</span><span class=\"token punctuation\">></span></span> actual <span class=\"token operator\">=</span> channels<span class=\"token punctuation\">.</span><span class=\"token function\">findBySlackId</span><span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">.</span><span class=\"token function\">getSlackId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>actual<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isNotEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><br/><br/></p>\n<h1>😉 마무리</h1>\n<p>해당 글에서는 테스트를 간편화하기 위해 서비스 추상화를 진행해보았습니다.\n서비스 추상화는 이 외에도 다양한 목적으로 진행할 수 있습니다.</p>\n<p>객체 지향적인 코드는 <code class=\"language-text\">단일 책임 원칙</code>을 준수합니다.\n기존의 <code class=\"language-text\">ChannelCreateService</code>에서는 ‘Slack 라이브러리 호출’, ‘예외 처리’, ‘채널 저장’ 3가지 역할을 하고 있었습니다.\n개선된 <code class=\"language-text\">ChannelCreateService</code>에서는 <code class=\"language-text\">SlackClient</code>를 통해 채널 정보를 가져오고 이를 DB에 ‘저장’하는 역할을 합니다.\n‘Slack 라이브러리 호출’과 이로 인한 ‘예외 처리’의 책임은 <code class=\"language-text\">SlackClient</code>으로 옮겨갔습니다.\n이렇듯 서비스를 추상화하면 이전보다 <strong>코드가 간결</strong>해지고 작업의 <strong>목적이 분명</strong>하게 드러납니다.</p>\n<p>각 오브젝트의 책임과 역할이 더 분명하게 분리되면 변경 사항이 생기는 경우 <strong>변경 포인트</strong>를 쉽게 찾아낼 수 있습니다.\n이제 <code class=\"language-text\">Slack 라이브러리</code>와 관련된 오류가 발생하면 <code class=\"language-text\">ChannelCreateService</code>가 아닌 <code class=\"language-text\">SlackClient</code>를 살피면 됩니다.\n의존되는 외부 라이브러리가 <code class=\"language-text\">Slack</code>이 아닌 <code class=\"language-text\">카카오톡</code>, <code class=\"language-text\">라인</code> 등으로 바뀔 수도 있습니다.\n이 경우에도 <code class=\"language-text\">ExternalClient</code>의 구현체를 생성하면 쉽게 대체할 수 있습니다.</p>\n<p><br/><br/></p>\n<hr>\n<h3>Reference &#x26; Source</h3>\n<ul>\n<li>토비의 스프링 3.1 / 이일민</li>\n<li>대표 이미지: 피에트 몬드리안의 추상화 작 <code class=\"language-text\">브로드웨이 부기우기</code></li>\n</ul>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"😘 서론"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"우아한테크코스에서 사용하는 협업 도구 중 하나인 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Slack"}]},{"type":"text","value":"은 무료 프리티어 사용 시 3개월이 지난 메시지들을 보여주지 않습니다.\n레벨 3 팀 프로젝트인 "},{"type":"element","tagName":"a","properties":{"href":"https://github.com/woowacourse-teams/2022-pickpick"},"children":[{"type":"text","value":"줍줍"}]},{"type":"text","value":"에서는 이 사라지는 메시지들을 백업해주는 서비스를 제공합니다.\n"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Slack"}]},{"type":"text","value":"의 메시지에 대한 정보를 주로 다루다 보니 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Slack 라이브러리"}]},{"type":"text","value":"에 의존적인 로직이 많습니다.\n이 포스팅에서는 외부 라이브러리("},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Slack 라이브러리"}]},{"type":"text","value":")를 사용하는 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"로직을 어떻게, 왜 추상화했는지"}]},{"type":"text","value":"에 관해 이야기하려고 합니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"🤔 왜 서비스를 추상화해야 하는가?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 2000px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/b2dcb1b209c58854930913b00f9529f5/c7a69/2022-10-10-slack.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 25.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAPoAAAD6AG1e1JrAAABBElEQVR42mNgAAKzox86jPYdmKm/rXYVA3awC4i5ccixAPEhOM/s2MfpZkc/bjDau75fb3vtPt1tNZO0VzWwAaU0gXgeECcA8XkgVgXiuUDcD8SeQJwExIuB2BiIrwOxOxDHMXQVLp1Z2rZjSk9PW8DSzV5T+reGrGxoaGACSqYB8SYg9oIaOAOIU4G4DYgnA/F+INYHYj0gfgfEV4CYn+GBfFTfA7moNU+8/Ka/2ay38c0mvUX/V2mDXOgGxI1AfBhqYDEQb4V6rwmIzwLxVCCOAuJbULlQsLfvy0VNeBbtCTJwAVLY8AKxIxCLQl3BDMTmQKwFxJJALAzEttAw1IeqNwQAM61MWZdp0PcAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"2022 10 10 slack","title":"","src":"/static/b2dcb1b209c58854930913b00f9529f5/f97d7/2022-10-10-slack.png","srcSet":["/static/b2dcb1b209c58854930913b00f9529f5/0eb09/2022-10-10-slack.png 500w","/static/b2dcb1b209c58854930913b00f9529f5/1263b/2022-10-10-slack.png 1000w","/static/b2dcb1b209c58854930913b00f9529f5/f97d7/2022-10-10-slack.png 2000w","/static/b2dcb1b209c58854930913b00f9529f5/c7a69/2022-10-10-slack.png 2560w"],"sizes":"(max-width: 2000px) 100vw, 2000px","style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy","decoding":"async"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"기존의 테스트에서는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Slack 라이브러리"}]},{"type":"text","value":"를 호출하는 부분은 모킹 처리해두었습니다.\n테스트 코드를 리팩토링하다 보니 모킹 작업이 계속 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"반복"}]},{"type":"text","value":"되는 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"지루"}]},{"type":"text","value":"한 작업으로 느껴졌습니다.\n반복되는 모킹 작업을 제거하기 위해 테스트 방식을 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"목"}]},{"type":"text","value":"에서 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"스텁"}]},{"type":"text","value":"으로 변경해야겠다는 결심을 하게 되었습니다.\n(테스트에 대한 이야기는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"2기_스티치"}]},{"type":"text","value":"의 "},{"type":"element","tagName":"a","properties":{"href":"https://tecoble.techcourse.co.kr/post/2020-09-19-what-is-test-double/"},"children":[{"type":"text","value":"Test Double을 알아보자"}]},{"type":"text","value":"를 참고\n바랍니다.)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Slack 라이브러리"}]},{"type":"text","value":"의 스텁용 객체를 만들기 위해서는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"MethodsClient"}]},{"type":"text","value":"라는 인터페이스를 구현해야 합니다.\n해당 인터페이스는 약 250개의 메서드를 갖고 있으며 그중 저희 서비스에서 실제로 사용하는 메서드는 약 10개 정도에 불과합니다.\n이를 모두 구현하는 것은 불필요하고 번거로운 작업이기에 더 간편한 방법을 고민하게 되었습니다.\n이때 떠오른 방법이 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"서비스를 추상화해 필요한 부분만"}]},{"type":"text","value":" 사용하도록 만드는 것이었습니다.\n자세한 설명은 아래 예제 코드를 보며 살펴보겠습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"😆 예제 코드"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"0. 기존 코드"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"예제로 채널을 생성하는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ChannelCreateService"}]},{"type":"text","value":"의 기존 로직을 가져와 보았습니다.\n로직 대부분이 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Slack 라이브러리"}]},{"type":"text","value":"에 의존하고 있습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Transactional"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Service"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ChannelCreatedService"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MethodsClient"}]},{"type":"text","value":" slackClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ChannelRepository"}]},{"type":"text","value":" channels"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ChannelCreatedService"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MethodsClient"}]},{"type":"text","value":" slackClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ChannelRepository"}]},{"type":"text","value":" channels"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"slackClient "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" slackClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"channels "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" channels"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Channel"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"execute"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" channelSlackId"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"try"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// slack api를 호출하는 부분"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Conversation"}]},{"type":"text","value":" conversation "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" slackClient\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"conversationsInfo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"request "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"->"}]},{"type":"text","value":" request"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"channel"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"channelSlackId"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getChannel"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n      "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// slack의 response를 우리 도메인인 channel 형태로 변환"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Channel"}]},{"type":"text","value":" channel "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"toChannel"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"conversation"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n      "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// channel을 저장하고 return"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" channels"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"save"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"channel"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"catch"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"IOException"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"SlackApiException"}]},{"type":"text","value":" e"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// slack api 호출로 인해 발생할 수 있는 exception"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"throw"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"SlackApiCallException"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 583px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/2ddb1dfc74cc90c3fa55a323c5b7fb7c/6d62d/2022-10-10-service-ver1.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 86.60000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAABJ0AAASdAHeZh94AAADUUlEQVR42o2TW0wTaRTHv0o2aqKo0RhjNuFhs68+GBMvwURf1Jjowz7sk49mFxAqVSKK8QoREVwvWYRdEzeuFyjFe5UaLW3p0Ov0QkGYmdLOtKUzbbcz085QWi5rPVO8Jb44+eXM/zvnOzP/nPkGvX9f/HwV5v4PJeQonwNIVorxOTo1HUrKEEFP8TPzCx93ww0aESguOxuIykR8eoSRDP5kv4N97GKfudkBX0Jnjz91s8AznHvqYn2MRMRzsJkVC9CIInze8o7Xe1Mt+vBFffjSANNmiLQamAt6+qKebnlFN7+iWweYywaF5pfhZj393JMcGufpdB7hoWyfk1tzEkPVRtWRQQRUG5drzJs78E1X3Jva3JU3vOXHLajKqKoZVDbUGMtPWHvsnHMygwIR6dCdMXT4TVmtUlCoNpbVDa5twlaftK5qtK5rwn5QmyC5WC2D/t/e/NId8NMSGqGlg92BFSesx/qDR3XUYlT3Ub8/JKp7iKoeAkStloQMUKulGh4F15zCdt/wQSMaZaS9nf7NV9wLufnxiOSkRAcljjGSN5RxBUV8MgMiOCU7g6IvnCFjcnF2Yfsfnm1XPaMRCQUYaX/XyIYzth4H122OXX8bvWWKdZkVbhpBK8vblqkuUwyqf1umYEAV5+07r3mhEcHnOdAdWNYwBG7rdZSmH+yRoOv6SI2OOloCdMkzeUSrJMsbrbvANlOyvafTv6UdF/m8ixKDMdk6wePBTITLOSgBI3iwTUbloQmeisnYhCBnZiuve7d24F9s/3jO/gRP/oPFH9jZu8Psv8Os1snB8i4WBw3JezYlc9/G6n2pn5odlZ9tH/wrsLRhqE5L1vSSMGGwBz4XowK47VVi1UNl+GotubLRuvtmadrwgH1guwMvyHMCXxCFgo0QYeaAP5x1BzMYIQTo7DAhCEIhnc4X8ws7rnm2d8C0ZTQWlX+9PVpx1vZ2NA2H9KUvpXMneh0cmNS5EhCBx3gSMlB94U1axvmfLzj2/+lXbMPx7HclNp6xIbVJpTGjerOq3rxEY1Z9BSpllBJEtWn96WGtg3NNZlEiO2sZF+CF7a+ZtgGFy9/Q9ikC7QbmhScFLVymoPySQm4ulJyJ/Jf/TmBzenquWCx+AL0D35U3xeXaAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"2022 10 10 service ver1","title":"","src":"/static/2ddb1dfc74cc90c3fa55a323c5b7fb7c/6d62d/2022-10-10-service-ver1.png","srcSet":["/static/2ddb1dfc74cc90c3fa55a323c5b7fb7c/0eb09/2022-10-10-service-ver1.png 500w","/static/2ddb1dfc74cc90c3fa55a323c5b7fb7c/6d62d/2022-10-10-service-ver1.png 583w"],"sizes":"(max-width: 583px) 100vw, 583px","style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy","decoding":"async"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"1. 외부 라이브러리를 쓰는 로직 추상화"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위 로직을 아래처럼 두 개의 클래스로 분리하여 역할을 나눠주었습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{},"children":[{"type":"text","value":"ChannelCreateService"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"채널 저장 로직을 가진 클래스"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Transactional"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Service"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ChannelCreatedService"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CallSlackApi"}]},{"type":"text","value":" slackClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ChannelRepository"}]},{"type":"text","value":" channels"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ChannelCreatedService"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CallSlackApi"}]},{"type":"text","value":" slackClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ChannelRepository"}]},{"type":"text","value":" channels"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"slackClient "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" slackClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"channels "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" channels"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Channel"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"execute"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" channelSlackId"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Channel"}]},{"type":"text","value":" channel "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" slackClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"callChannel"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"channelSlackId"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" channels"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"save"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"channel"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{},"children":[{"type":"text","value":"CallSlackApi"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Slack 라이브러리"}]},{"type":"text","value":"를 호출하고 결괏값을 반환하는 클래스"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Component"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CallSlackApi"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MethodsClient"}]},{"type":"text","value":" methodsClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CallSlackApi"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MethodsClient"}]},{"type":"text","value":" methodsClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"methodsClient "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" methodsClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Channel"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"callChannel"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" channelSlackId"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"try"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// `Slack 라이브러리`를 호출"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Conversation"}]},{"type":"text","value":" conversation "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" methodsClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"conversationsInfo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"\n          request "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"->"}]},{"type":"text","value":" request"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"channel"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"channelSlackId"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getChannel"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n      "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 결과값을 우리가 사용하는 객체 형태로 변경"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Channel"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"conversation"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getId"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" conversation"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getName"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"catch"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"IOException"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"SlackApiException"}]},{"type":"text","value":" e"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"throw"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"SlackApiCallException"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1197px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/6231f99a3718bd7e12c64c62874a341e/7e04b/2022-10-10-service-ver2.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 35%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAABJ0AAASdAHeZh94AAABrUlEQVR42j3O20vbYBgG8PwTXvkvjAnuSkG8qF7tbgMHdoon8EbEAyLeDCZTq4KHVqlSrR01Oqp1uFoUyjxUqphq0pimRkGwVVttapsvn5rPJA1+QhF+vPBcPA8voenGo6Knsko0Abg4YK8kLgHi6Wf4rCHNMBDMS3d5WdSTgnoRUi8pPRPPy2nM0FXi7Pax1smXj51UTNBfHNw3Z9RkY3Csnma3YjmV9YO5ZjBbLy+2Q7ILkh3yfAuYMcvL3doNTwT4h6Le/ZLh8Ichqmz8pGKS/mgJl44eF/ftjpCU7B3IDlZKthowUwccTcDRKE3VSNavWYsJRQOEj818trN7fGY1fId58aVSOwKY9IT72yzCrwblvw3FdhDtQ/Q/xGygyMaLsCe721DEj8tilZXZZEXyMPU7lHQfJF2hZIATe9Yuf2xeo8AE/PsTMT6FWn1z5EHUCl4BC614iAie5z4NHze7z+pcMbOL/+7iaxf41iXBZKWnthMv23bJboZ/emSyE75b6sbPq+dB4gnpwYuch75fi6QxL/MGRz8nilAzstfodKvwMOMroNdx01DgK7knOTQsKaCTAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"2022 10 10 service ver2","title":"","src":"/static/6231f99a3718bd7e12c64c62874a341e/7e04b/2022-10-10-service-ver2.png","srcSet":["/static/6231f99a3718bd7e12c64c62874a341e/0eb09/2022-10-10-service-ver2.png 500w","/static/6231f99a3718bd7e12c64c62874a341e/1263b/2022-10-10-service-ver2.png 1000w","/static/6231f99a3718bd7e12c64c62874a341e/7e04b/2022-10-10-service-ver2.png 1197w"],"sizes":"(max-width: 1197px) 100vw, 1197px","style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy","decoding":"async"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"2. 추상화한 로직 인터페이스로 분리"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"좀 더 편리한 스텁 객체를 만들기 위해 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ExternalClient"}]},{"type":"text","value":"라는 인터페이스를 만들었습니다.\n기존의 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"CallSlackApi"}]},{"type":"text","value":"에 존재하던 로직은 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ExternalClient"}]},{"type":"text","value":" 인터페이스의 구현체인 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"SlackClient"}]},{"type":"text","value":"로 옮겼습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{},"children":[{"type":"text","value":"ExternalClient"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"외부 라이브러리의 로직을 추상화한 인터페이스"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"interface"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ExternalClient"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Channel"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"callChannel"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" channelSlackId"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{},"children":[{"type":"text","value":"SlackClient"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Slack 라이브러리"}]},{"type":"text","value":"를 호출하는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ExternalClient"}]},{"type":"text","value":"의 구현체"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Component"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"SlackClient"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"implements"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ExternalClient"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MethodsClient"}]},{"type":"text","value":" methodsClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"SlackClient"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MethodsClient"}]},{"type":"text","value":" methodsClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"methodsClient "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" slackClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Channel"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"callChannel"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" channelSlackId"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"try"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Conversation"}]},{"type":"text","value":" conversation "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" methodsClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"conversationsInfo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"\n          request "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"->"}]},{"type":"text","value":" request"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"channel"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"channelSlackId"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getChannel"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n      "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Channel"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"conversation"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getId"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" conversation"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getName"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"catch"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"IOException"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"SlackApiException"}]},{"type":"text","value":" e"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"throw"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"SlackApiCallException"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1192px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/d40d3c3babceb5f8800be2be7348675a/bb7f4/2022-10-10-service-ver3.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 33.800000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAABJ0AAASdAHeZh94AAABYUlEQVR42mP49uPvu88/rz/+ePnhh4sPPlx6+OHW008fvvz69uPPn7///uMFDAWrbln1n7PtP+c9/WLE/Cs+0y/Z9J+16jtXtPbum08/gSr+/f759/2zP++fAEkQ+vAMKPL/37//f/8wKNcdk284rtF20rDrjPWEc4bdZ9RbTyo2HlevPXTn7NmfB2d/2dr1ZVPb1x39X3f2f9nR/2VT69dtPV/3TP394jaD06TzG8++3HTu5epTL9acBqH1Z15uu/gqt3jGtpKiF22e7+uN3rXYfpgc8mFS8IeJAe+ard/Wm7zvdPl17zSDbf/ZladerDvzcsnxZ8tOPAeSa8+8ACK3KZfuPXj2/8X1X0+u/X567fejS1D0FMx9cvXv57cMVr1nc1bcKFpzO33ZjQwwKlx9K3/VTeeJ5x+9/g7yM+5QY9hy8XX7zoc9ex71QtDex0A2UGTb5Tc/fv0B6QXqxoEAeotOvbRvpyIAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"2022 10 10 service ver3","title":"","src":"/static/d40d3c3babceb5f8800be2be7348675a/bb7f4/2022-10-10-service-ver3.png","srcSet":["/static/d40d3c3babceb5f8800be2be7348675a/0eb09/2022-10-10-service-ver3.png 500w","/static/d40d3c3babceb5f8800be2be7348675a/1263b/2022-10-10-service-ver3.png 1000w","/static/d40d3c3babceb5f8800be2be7348675a/bb7f4/2022-10-10-service-ver3.png 1192w"],"sizes":"(max-width: 1192px) 100vw, 1192px","style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy","decoding":"async"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"3. 스텁용 객체 생성 및 적용"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"스텁용 객체를 생성한 뒤 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"@Component"}]},{"type":"text","value":"를 이용해 bean으로 등록하였습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Primary"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// SlackClient 보다 우선 순위가 높은 bean으로 등록하기 위해 붙였다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Component"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"FakeClient"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"implements"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ExternalClient"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"List"}]},{"type":"element","tagName":"span","properties":{"className":["token","generics"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Channel"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":" channels "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"List"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"of"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 채널 데이터 초기화"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Override"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Channel"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"callChannel"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" channelSlackId"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" channels"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"stream"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"filter"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"it "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"->"}]},{"type":"text","value":" it"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"isSameSlackId"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"channelSlackId"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findAny"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"orElseThrow"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"->"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"SlackApiCallException"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"4. 테스트 코드에서 모킹 제거"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"스텁을 적용하였으니 이제 모킹한 코드들을 제거해주는 일만 남았습니다.\n전후 코드를 비교하여 코드가 얼마나 깔끔해졌는지 확인해보겠습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{},"children":[{"type":"text","value":"AS-IS (목 적용)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Test"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"execute"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// given"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Workspace"}]},{"type":"text","value":" workspace "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" workspaces"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"save"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"WorkspaceFixture"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","constant"]},"children":[{"type":"text","value":"JUPJUP"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"create"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Channel"}]},{"type":"text","value":" channel "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ChannelFixture"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","constant"]},"children":[{"type":"text","value":"QNA"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"create"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"workspace"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" request "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createRequest"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"channel"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"given"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"slackClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"conversationsInfo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"RequestConfigurator"}]},{"type":"element","tagName":"span","properties":{"className":["token","generics"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ConversationsInfoRequestBuilder"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"any"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"willReturn"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setUpChannelMockData"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"channel"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// when"}]},{"type":"text","value":"\n  channelCreatedService"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"execute"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"request"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// then"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Optional"}]},{"type":"element","tagName":"span","properties":{"className":["token","generics"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Channel"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":" actual "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" channels"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findBySlackId"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"channel"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getSlackId"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assertThat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"actual"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"isNotEmpty"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ConversationsInfoResponse"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setUpChannelMockData"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Channel"}]},{"type":"text","value":" channel"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Conversation"}]},{"type":"text","value":" conversation "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Conversation"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  conversation"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setId"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"channel"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getSlackId"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  conversation"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setName"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"channel"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getName"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ConversationsInfoResponse"}]},{"type":"text","value":" conversationsInfoResponse "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ConversationsInfoResponse"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  conversationsInfoResponse"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setChannel"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"conversation"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  conversationsInfoResponse"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setOk"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"true"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" conversationsInfoResponse"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{},"children":[{"type":"text","value":"TO-BE (스텁 적용)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Test"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"execute"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// given"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Workspace"}]},{"type":"text","value":" workspace "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" workspaces"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"save"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"WorkspaceFixture"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","constant"]},"children":[{"type":"text","value":"JUPJUP"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"create"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Channel"}]},{"type":"text","value":" channel "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ChannelFixture"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","constant"]},"children":[{"type":"text","value":"QNA"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"create"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"workspace"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" request "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createRequest"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"channel"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// when"}]},{"type":"text","value":"\n  channelCreatedService"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"execute"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"request"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// then"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Optional"}]},{"type":"element","tagName":"span","properties":{"className":["token","generics"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Channel"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":" actual "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" channels"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findBySlackId"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"channel"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getSlackId"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assertThat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"actual"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"isNotEmpty"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"😉 마무리"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"해당 글에서는 테스트를 간편화하기 위해 서비스 추상화를 진행해보았습니다.\n서비스 추상화는 이 외에도 다양한 목적으로 진행할 수 있습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"객체 지향적인 코드는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"단일 책임 원칙"}]},{"type":"text","value":"을 준수합니다.\n기존의 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ChannelCreateService"}]},{"type":"text","value":"에서는 ‘Slack 라이브러리 호출’, ‘예외 처리’, ‘채널 저장’ 3가지 역할을 하고 있었습니다.\n개선된 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ChannelCreateService"}]},{"type":"text","value":"에서는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"SlackClient"}]},{"type":"text","value":"를 통해 채널 정보를 가져오고 이를 DB에 ‘저장’하는 역할을 합니다.\n‘Slack 라이브러리 호출’과 이로 인한 ‘예외 처리’의 책임은 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"SlackClient"}]},{"type":"text","value":"으로 옮겨갔습니다.\n이렇듯 서비스를 추상화하면 이전보다 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"코드가 간결"}]},{"type":"text","value":"해지고 작업의 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"목적이 분명"}]},{"type":"text","value":"하게 드러납니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"각 오브젝트의 책임과 역할이 더 분명하게 분리되면 변경 사항이 생기는 경우 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"변경 포인트"}]},{"type":"text","value":"를 쉽게 찾아낼 수 있습니다.\n이제 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Slack 라이브러리"}]},{"type":"text","value":"와 관련된 오류가 발생하면 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ChannelCreateService"}]},{"type":"text","value":"가 아닌 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"SlackClient"}]},{"type":"text","value":"를 살피면 됩니다.\n의존되는 외부 라이브러리가 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Slack"}]},{"type":"text","value":"이 아닌 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"카카오톡"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"라인"}]},{"type":"text","value":" 등으로 바뀔 수도 있습니다.\n이 경우에도 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ExternalClient"}]},{"type":"text","value":"의 구현체를 생성하면 쉽게 대체할 수 있습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Reference & Source"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"토비의 스프링 3.1 / 이일민"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"대표 이미지: 피에트 몬드리안의 추상화 작 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"브로드웨이 부기우기"}]}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"excerpt":"😘 서론 우아한테크코스에서 사용하는 협업 도구 중 하나인 은 무료 프리티어 사용 시 3개월이 지난 메시지들을 보여주지 않습니다.\n레벨…","timeToRead":4,"frontmatter":{"title":"서비스 추상화","userDate":"10 October 2022","date":"2022-10-10T12:00:00.000Z","tags":["service","test"],"excerpt":null,"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAQADAQAAAAAAAAAAAAAAAAYBBAUJ/8QAFwEAAwEAAAAAAAAAAAAAAAAABAUHBv/aAAwDAQACEAMQAAAB9LKOY78v0kAyAIvJMZCaombv/8QAGRABAQEBAQEAAAAAAAAAAAAABAMFAQIT/9oACAEBAAEFAgZ8E6GnqVExJKVaWCGrXn6OnD1eLLg78W4GqnQqyvnlP//EACMRAQACAQIGAwEAAAAAAAAAAAECAxEAIQQSEyIjMTJBQlH/2gAIAQMBAT8BmwssC/iPDGqo7yfJVCUvIYrhXZmEjlxWkZhmDYJPXShg81te0e0bIhsfmVomfl6PbgDBqW8eMXdIVxF9keumD+GAMesAfWqJS6Nfc/E+3X//xAAhEQADAAEDBQEBAAAAAAAAAAABAgMEERIhAAUTFCIysv/aAAgBAgEBPwHCNU9WM8ONT7VJO0zVa6iMvC7IbtvHjDVsSlbqRtPi2Um57tmqdvgwfn5IacnYEaAqzAU1ZTwftuRyxPWKBOOIEAQNnK7BBt3O/a8irs2mmrPQmjE8s5LnVjr13ID3r8D9L/E+v//EACUQAAICAAUEAwEBAAAAAAAAAAIDAQQFERITIQAUIzEiMjMVUf/aAAgBAQAGPwLurFya80nKaIo19sSaJixHcD453HHashZrwJKgBVO63mOlMw9VXE4s3sEovEa1goq1Hnb7u7HbgyPAAROo52s/1Yoer5kyFh3r4RtpWUGoSy3NE0c0yTYZ4pY/iIbDZFkAFywnEblQBsmCaE1wBYTh1itZZYrtSB2XIxFZlUfqsMUSs+3XDNUlZw+haVSZA1JJkFaT495pFALHYasm5bZlys1jlHPu5ptt1Vblmk4WA0hW6syRYCNmC8ETyvcnd5mZiIkejkc9ZDegmS12soBixHVO5HrTnHHEzOWUZRFiy6Ihn9O1Q+DbeUpoXjQkp3LLClkh+ny25n6rCOOvwTzuzPB8zNl+c/f3Puf9nnr/xAAaEAEBAQEBAQEAAAAAAAAAAAABESEAMUFR/9oACAEBAAE/IQ+LGWUOCJSocZ8qf/mqh/BSVIB1L7QTDqdSZL5aOzQ6TIAuEJZ8tSyGU6YDzQh14roWwLC94AdiiK4EzQBcfAE1vv8AoqB69FhWD1O2VLDV19RWvf/aAAwDAQACAAMAAAAQvCA+/8QAGhEBAQEBAAMAAAAAAAAAAAAAAREhMQBBcf/aAAgBAwEBPxAyalZtlSHGnJeLEX2/YPdhOosBAnToI7NRPEECACQHTOzq96ur7d8//8QAFxEBAQEBAAAAAAAAAAAAAAAAAREAMf/aAAgBAgEBPxBgoKyEho65DcpszYAikLsPegBQ5aqCFYizskUIAgAYAAHIAgb/xAAYEAEBAQEBAAAAAAAAAAAAAAABEQAhMf/aAAgBAQABPxC9wNkweYe0ZmAC4ZFQZSyUYMfKbzMXy0nm5KUBa5Ef2sKkUzB/j3CF4PvjJkoA0kR7TBJKI5nryuQbCZA4Byd5ipZVE4jAZGdMBVVWlKqL/9k="},"images":{"fallback":{"src":"/static/77f1d37449b320280894d28b07fe5aa8/7cc31/abstract-art.jpg","srcSet":"/static/77f1d37449b320280894d28b07fe5aa8/65c0f/abstract-art.jpg 750w,\n/static/77f1d37449b320280894d28b07fe5aa8/7cc31/abstract-art.jpg 767w","sizes":"100vw"},"sources":[{"srcSet":"/static/77f1d37449b320280894d28b07fe5aa8/64aa2/abstract-art.avif 750w,\n/static/77f1d37449b320280894d28b07fe5aa8/74b0d/abstract-art.avif 767w","type":"image/avif","sizes":"100vw"},{"srcSet":"/static/77f1d37449b320280894d28b07fe5aa8/e8f6a/abstract-art.webp 750w,\n/static/77f1d37449b320280894d28b07fe5aa8/c6264/abstract-art.webp 767w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":1.001303780964798}}},"author":[{"name":"4기_연로그","bio":"우아한테크코스 4기 연로그(권시연)입니다 :)","avatar":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/d958de51fda2fab5c97e3aba9feeee2b/9ae34/yeonlog.png","srcSet":"/static/d958de51fda2fab5c97e3aba9feeee2b/e19e4/yeonlog.png 40w,\n/static/d958de51fda2fab5c97e3aba9feeee2b/bfb1c/yeonlog.png 80w,\n/static/d958de51fda2fab5c97e3aba9feeee2b/9ae34/yeonlog.png 120w","sizes":"100vw"},"sources":[{"srcSet":"/static/d958de51fda2fab5c97e3aba9feeee2b/d219b/yeonlog.webp 40w,\n/static/d958de51fda2fab5c97e3aba9feeee2b/664d4/yeonlog.webp 80w,\n/static/d958de51fda2fab5c97e3aba9feeee2b/eeedc/yeonlog.webp 120w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.9583333333333334}}}}],"source":null}},"relatedPosts":{"totalCount":1,"edges":[{"node":{"id":"b3f5c9f9-388e-5b0e-97b9-11425d949bdf","timeToRead":4,"excerpt":"😘 서론 우아한테크코스에서 사용하는 협업 도구 중 하나인 은 무료 프리티어 사용 시 3개월이 지난 메시지들을 보여주지 않습니다.\n레벨…","frontmatter":{"title":"서비스 추상화","date":"2022-10-10T12:00:00.000Z"},"fields":{"slug":"/post/2022-10-10-Service/"}}}]}},"pageContext":{"slug":"/post/2022-10-10-Service/","prev":{"excerpt":"서비스를 개발하다보면 하나의 서버 애플리케이션을 다양한 환경에서 실행할 일이 생깁니다. 그리고 H2 DB를 사용하는 테스트 환경과 MySQL DB…","timeToRead":7,"frontmatter":{"title":"Spring Profile: yml 파일 하나로 프로퍼티 관리하기","tags":["spring-boot","yml"],"date":"2022-10-04T17:00:00.000Z","draft":false,"excerpt":null,"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACuElEQVR42h3R20+TBxzG8f5N+wt26Y1ZdjOzgxMdTNiswHCwMKQrU4YBsrVFxFrMaDFaJVs4GJshq5Sim8qgdi1vD/T0ntq+x7YS49XXd7t4bj95fr/H1eUJ0j8ZwjMTwhcIsXwrxMPl2zy5F+LoaQyrkkFOJdHS27SPXvBWSfG2XuSN0aAjFnitqRy3bI47bWzTwuWeDjPij+Jd+I2pxTUCS+sEw2s8jv+FXRPQs0nEl3Gk/R30gxjHe6t0qiWMchmzkqNjarSsFqZhoWsmroX528z7gwR+nsc3G2B2dg6//xaHey95vvUnseh9nq0+oLm/RSeTRC8UMWQFQ2nQrJRQa+L/kGHYyLKG6+bMPL/6gtwJRliJrLD2+0O2t59RFPLs7z5lLx4nldgiH49R302gO5CuapSLEsV0FllUaGg2Sl2nVFFx+a/8QmB0ksDQD1wfGmdueo47y/cJ3gyzGLrLzh+PEYs5as8TqA4olWTEqkL+sEQuI1CTG9RUg6rSRJQkXJ+7R+kd/pGhy9fwTPrwLSyxGI6yFL7LxnqMfOqAXOoFmc0NpI0oqlCkUq2TfpUjl81TljREtem0bGC3DFwfdF/ixJkB3v/4K947eZaTXYMMf/8Tp3sG+bpvkIjPTybxiNKjCEryCYpYp1ypk0kXOPxXQFKdF1ganWObzusWLu/Yd0yMj3HF68Hj9TJ1bYZxz1UGhr2MXp4ieuM66ViU6moEdT+NIjUoHCmkD7KU8llMq+lANu2OhW07o/RfcHOxr4+L53sY6O3B3X2Gz059RNfpc0x7ryLsbiHs7SKvRxB3klTKCoVizcEETF2m3TadU3VsB7bMOq4Pz33DJ+e/5dPeS3xxYQT3wAhnv+ynq9vNxNgErxKbHP29ibC+Qu2flNNQpK5KtNoGrVbTgRpY/8XBTEPhHbc4f+OXevaMAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/d063012e17ba6cd472f6b623829cc06f/1e3fa/active-profile.png","srcSet":"/static/d063012e17ba6cd472f6b623829cc06f/da04c/active-profile.png 750w,\n/static/d063012e17ba6cd472f6b623829cc06f/d4e32/active-profile.png 1080w,\n/static/d063012e17ba6cd472f6b623829cc06f/da480/active-profile.png 1366w,\n/static/d063012e17ba6cd472f6b623829cc06f/1e3fa/active-profile.png 1790w","sizes":"100vw"},"sources":[{"srcSet":"/static/d063012e17ba6cd472f6b623829cc06f/bcdb5/active-profile.webp 750w,\n/static/d063012e17ba6cd472f6b623829cc06f/0d6ef/active-profile.webp 1080w,\n/static/d063012e17ba6cd472f6b623829cc06f/73e56/active-profile.webp 1366w,\n/static/d063012e17ba6cd472f6b623829cc06f/f4c14/active-profile.webp 1790w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.4905027932960894}}},"author":[{"name":"4기_정","bio":"우아한테크코스 4기 정(정진우)입니다 :)","avatar":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAUABQDASIAAhEBAxEB/8QAGgABAAIDAQAAAAAAAAAAAAAAAAYIAQQJB//EABUBAQEAAAAAAAAAAAAAAAAAAAMG/9oADAMBAAIQAxAAAAHvDVuYVenq3pgwoZLTgoTejhR//8QAGxAAAgMAAwAAAAAAAAAAAAAABAUAAwYBAgf/2gAIAQEAAQUCuYgUFAbPUEbeeiseicTHNiLNRLRx7uU2TRIbp//EACIRAAICAQQBBQAAAAAAAAAAAAECAwQTBRESIVEAEBUiMf/aAAgBAwEBPwHRdMpyUL9yxd0rJ8deMNG47xXcsMNh1eqrOiSocPLPHkK8ZowI2hdm9BmwSLyPHnD9dzt0JiOvzosxHjc+T7f/xAAhEQACAgEDBQEAAAAAAAAAAAABAgMSBAUREwAQFCIxUf/aAAgBAgEBPwHU9Tjhy8bGORJjN5cCWSTGpNyBX4nEiO9yglIhWjlFMvsh9eiicqvRb0dbVFti0bEW+7WRDt+op+qO3//EACcQAAICAQMDAwUBAAAAAAAAAAIDAQQSBRETACEiECMxMjNCU3KB/9oACAEBAAY/AkUXW667lrvXrGwYc2PKNwX8zG4lG/xJRjHft0WkO0Mo0/N1PBTo40pTY9zVzsmGFklhsLK9eYgeSF7SWzS6oaorUipajSa9lSuCuebwyrCwBK2w2SBcnI72h8giJawOtLuZ2bE3rbAaTRb5xeg4ecC3aBxLFrOPaBFUdsYj0GXIS2Q+iWLA5H+ZIZx/zp9rT6UBasfcstInOx/WojmYQqfyWiFic7ScFMR6f//EABkQAQEBAQEBAAAAAAAAAAAAAAERIQAQMf/aAAgBAQABPyEXKQr1HOdY0BYkZI5OrGNSMsXgUN0supFUFgyaAj5xj/DYoiZfirHVPX7S1C2WdSlQb3qyBoIIAd//2gAMAwEAAgADAAAAEBjIAP/EABkRAQEBAAMAAAAAAAAAAAAAAAERIQAQMf/aAAgBAwEBPxCwqSbD/wDiwR1Dr3JW1drVbAacjTn/xAAYEQEBAAMAAAAAAAAAAAAAAAABEQAQMf/aAAgBAgEBPxBJj6zjPcJrxA6OUoA1JJRLXqLRSZ//xAAdEAEBAQABBQEAAAAAAAAAAAABEQBhECExUXHR/9oACAEBAAE/EFTNJ6ROQMI6KG0ro2CY0jcwM7lk4/efeVrJwKFSyAXTrKnsTAzbD8cwqF8wv2ZWwB1RbSaNMKsMpP0UhQ3B0jkrf//Z"},"images":{"fallback":{"src":"/static/c23bd5a42e55c55255c0c206c571a0c8/6c354/jeong.jpg","srcSet":"/static/c23bd5a42e55c55255c0c206c571a0c8/6c354/jeong.jpg 571w","sizes":"100vw"},"sources":[{"srcSet":"/static/c23bd5a42e55c55255c0c206c571a0c8/82441/jeong.webp 571w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":1}}}}]},"fields":{"layout":"post","slug":"/post/2022-10-04-active_profiles/"}},"next":{"excerpt":"속닥속닥 프로젝트(https://github.com/woowacourse-teams/2022-sokdak…","timeToRead":3,"frontmatter":{"title":"좋아요 개수 조회 최적화하기","tags":["MySQL","동시성","반정규화"],"date":"2022-10-10T13:10:00.000Z","draft":false,"excerpt":null,"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAkGBwj/xAAVAQEBAAAAAAAAAAAAAAAAAAAFB//aAAwDAQACEAMQAAABaPmll0MTqFoAGS//xAAaEAACAwEBAAAAAAAAAAAAAAAFBgADBAcC/9oACAEBAAEFAuoNpRbuXeoNez3N4saVrGJaoHsn/8QAHBEAAgMBAQEBAAAAAAAAAAAAAgMBBAUGEgAT/9oACAEDAQE/AeR6zj8XHuVNzlg2bzFyNdxU8ZwyRNeUyVq5VZeqz4YkPddhyMV4/KEkwzn7/8QAHhEAAgMAAQUAAAAAAAAAAAAAAgMBBAUTAAYREhX/2gAIAQIBAT8B1rFK92p8emg87bgDGNhQV5mTK1YcLpYILuQQJYlHHLzVI1h8CHIz26//xAAhEAACAgICAgMBAAAAAAAAAAACAwEEBRESEwAGFCIjEP/aAAgBAQAGPwL1epjszivXwzVvJKt5fL02XK1YadRbUBIBy4RYcyFyyR+k8JkgCD3VdY9l9eyK3OAfgoogi2QfK6J5L+rlcw/fRwsukg1+vYtXgpyePo5FSz7AVfqIuLBmpHmIWFsET4zMcojepmN+Obj/AF/EV2utndlo0UkwHsmJnoNkMKssZGJUivKq6Z31KDc/z//EABoQAQACAwEAAAAAAAAAAAAAAAEAERAhMVH/2gAIAQEAAT8hLc8BEtsl8WKNNESnruVAgYpuE8LfEWnAfcwUih3dDNbqBoMvn//aAAwDAQACAAMAAAAQsA//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPxB5810DzJoFZDf/xAAWEQADAAAAAAAAAAAAAAAAAAABECH/2gAIAQIBAT8QjyHA2peeeCrf/8QAGBABAAMBAAAAAAAAAAAAAAAAAQAQMRH/2gAIAQEAAT8QhAoYRN3aUe3PGBaqqkTZamUthuADTA6dWdvq6i10fnJKr//Z"},"images":{"fallback":{"src":"/static/d89fd18e3c827ae4fc4d29f42a812cea/fefcc/likes.webp","srcSet":"/static/d89fd18e3c827ae4fc4d29f42a812cea/fefcc/likes.webp 600w","sizes":"100vw"},"sources":[]},"width":1,"height":0.7083333333333333}}},"author":[{"name":"4기_토르","bio":"우아한테크코스 4기 토르(손인준)입니다 :)","avatar":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABJ0AAASdAHeZh94AAADw0lEQVR42kXTW09iVxjGcb5PM+kkzVy2mSbtXTOtYzpJm2mcttPxjHJSxEFBEQRFOSiCnEFQOYmiVkUEPHAQoVV700/z79pqphe/vO/ee633WTvZWzbkbSAZ9tYfrUlqDHmE1RoDK1f0r1zS77qgz3lO73KVD0sV/rCf8ftiid9sp7yzFumZP+YX8xEyVaSNKnLzv7AQaqF8cI0icM1ooMmIr87IegO5TwquidArBj2XIvCCfneVXmeFD44yMv3230ylBKlu//VAL3zcknSYTLbRJVpMZ/5hItFGG2+hjbXQRK9RR5oivIEiWEfhr4nAS2S2wj22fUFUqzAv2bvDsnuHOX8r6v1D3693MrNZw7xziznbwZBui/AbESokWyK0KcIayKKlO5LlO7Yrj6ReEi/dPkiU71HOuNC9/5WNwzrh4i3hkw6Bow6egzauQhtbvoU112I+e41s+6xNttwmV2mzW22Tr3bICdnyDYXmv8zZ7Hzz4nP63nSTS22QrN4RKd6IoTcEj1v4j67xHjbx7DdYKYgTpktNMmcNMqUG2TPRn4paqovBN2wenPH65Qu+ePaMgR9eUQ8o2anU2Tq5InF0gTd1gjvxJ8F8CX/uFGfiEFn8qEHyuMGWkCo22C5K1zUylQ4L3jg/d3fxffc7TD3fsmv6kdTpJb5CDf/+FWv5c1ZyVTw756zmKjjSZ8h8e3VC+3WiB48iog+JDaGDJq6NA777Sc5nz7/GLe/iMB0mUKjj27nAk7vAmTnHnjrHslnBnCwzlxADTYkLJHNPTBvnzEriVSxbNb7qGuT5l6+xe+IsxE4xRsuYIiWM4RJTwVP0gSKT/mMmfMdoveLDnlwv8vHBySf6J7q1Q152j/JWsYjBV2DCc4TOc4hu9YAx9z4aVwG1Yw+VoFzeRWHfQaYVDyQT7sInWtceWuce4448b96+p2/cjMoaQ+vYRWPPopYsZlHZMkKaUWsKuWWbYfMWslFrGuVCGrWgWUwzbs+gW86gd2ZQi4WumW68bhX+kIkRSx6NNYFqPonSkkBh3mBkLo7cFGNoNsqAMYxsyLRBvzFGnyEqqnRTMIQZFot6BqcxKl/hd6iJBqaYmE+gX4iiFadVmyOMzgQZEYYNAQan18Xf5EOmscR4FGXMEnlYqJgNCiGGJpaYn55kfVFLzGvDaAtiXAjy0RpCY/KjMPpQCvJpL0P6Nfp0K+KVZwNicwCloDIFUD8ZmwugmQthsS5iX3Jit7sYMayjmfGKIV4UBg+j06vIp1YZ1q8woHPRq3XwH2Uce79XdsueAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/bd31c23826dcb344340755bc4cfc82a0/3958e/thor.png","srcSet":"/static/bd31c23826dcb344340755bc4cfc82a0/022aa/thor.png 750w,\n/static/bd31c23826dcb344340755bc4cfc82a0/3958e/thor.png 1060w","sizes":"100vw"},"sources":[{"srcSet":"/static/bd31c23826dcb344340755bc4cfc82a0/6d4a5/thor.webp 750w,\n/static/bd31c23826dcb344340755bc4cfc82a0/d88b2/thor.webp 1060w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.7792452830188679}}}},{"name":"4기_이스트","bio":"우아한테크코스 4기 이스트(신동훈)입니다 :)","avatar":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAE/klEQVR42l2U+28UVRTHp5IYo1IUpSgIsdRAIybyizEmEpUYjQIqkVYUoUERIbxaUguUYjGWH2gJlFLWPqHtspt9dHe7szs7O8+d2ZnZV7vbQgsVginyG/8BuLvz9U6lhHqTk3Nn772f+z3nnj0U9cQA8JTl7RF7qdM9WHPFM+i/Srvv9Th68xd6O/LtvZ33uob6/IPOyzV2u73U2tvc3GydKaH+Px4tUD6fY5vXO3Q3xHgRpN1m7eH9qK76GvW/HIHXa4c/4DIDIx64XEN33W77t0+efXKUEHUlPp+rPcoFQdNek2F8xcbGhgK14Gmz9PmF+Pi9d7Hv593myIi34Bt2FMIhnxmNhhDweduts49VPvqggiH/OVnmQAeH836/2xTECPb+9AM+f2cdmn7cDu/pE2g5Xo+RoA8h2m+ZyYSDeU2VwYTp8/OUhsP0DkURyUKwEKIDJh30gxdYnDpxFIPH9iLcehLOE7VgfS6wLAM2QoOLhokxpsCxhYSuQeL5HbMwK7mSGL0lSzxYhi4SAxMKIhJhMdJ3Ds6Te9C59zs4WprARyOzJvIcJIGHLAqWFS2gocX/FARhESULQo2uqeC5SIEjm6MRxppDYINg+89h4OguDLQ0IBqmIQoERGAxAlJlCXFFhqbGiI8VJrJZZFKpHZQSk4aThk5u5Ao8xxLPIqVGkYlzMKQweFcv0oIfCU2GTIAx4T+YpipElUp+j1tWuD4+jmwm46HILTPkBks6yUcUeiyKhBxCUmZwLR3DRFrFRErGVEZBLqlAkYiymAw9riJJQk0lDKQTiaKlMDs6eoNSY/JDNUaAkjibl5RGwmI94GgnATPIJQRkdQ7T4zqmxuLQSYgaEWAQYNowkCKW1PXizclJjI+N/U2pcowAFcQkmQAFpHWBhBwB7ekDH3QgrTDIkO/ReBSjxCdVcVadEY8TwCjsA3acavq9GBgOkND1e5SmqjM6WYxJkimJIgyVhyaSsggOgvX3wxD9uJ6WkdVYCKGrUIUQErqOTCJBQlfQeLQZdYcaio0Nv8Lv8U9RmqJ6M8mUpbAgCSJUKYq4RCMRY5BWGehCABp5FGbECaa/DalAP0lLnDxAGrbObuzfV4cjhxsKlzq6MJHNuUnIak1CNyBwfEHkReJZ9HTb0NZ6BpcutGKg9zwcg5dg62jD1c4zGGo/jaB9gOwTUXvoGA4fqEftwfq8LEj46/bt76lIJFIal5VpkktSsEJR4DjYbBfxh60dTnsPXI4+XCTglubj+K2pHlVbN+OzjRux+YtqbNrwKep27S5eaLfh2vjE9GxhW0MW5O16XCNA8SF5mCIdcODs2RYcOHgAW6uq8U11FepqD+KrLzdhw4YPsf6jT7Bz1x50dVw0GV/gn2xmjDzQ+PZ5bUsSpPOpRJJUvfKgu6srv3btOry2YhWWLl2OFxaX4aUlr+D99R+gtbUNvT395B/F5m9MTj24c/sOcunsvOZQMte+OJbryI1lcaXvirli5RuFysq386+Xr86/umxlsWzp8uIzzy7Md9m68tOTk4VsOmNOTVyz6rDDAs1rYdZkjp40ktsu912eKV+1BuUVlebqNW+BALFiZQWeW/giGo81mrdu3CTVIM8YhrFtrtPPtcF5Tdbj8SywJt3d3YsqKip3lpevCayqeHO6rGz5/ZeXLLtfumjx9JYtWwOTudxOsnf2AR6deQz7F1VH44X1wa9cAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/bde349dfae12c41c549e6f69a3b03084/c3c34/east.png","srcSet":"/static/bde349dfae12c41c549e6f69a3b03084/f054e/east.png 750w,\n/static/bde349dfae12c41c549e6f69a3b03084/ae1c8/east.png 1080w,\n/static/bde349dfae12c41c549e6f69a3b03084/b8ca7/east.png 1366w,\n/static/bde349dfae12c41c549e6f69a3b03084/c3c34/east.png 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/bde349dfae12c41c549e6f69a3b03084/4f03f/east.webp 750w,\n/static/bde349dfae12c41c549e6f69a3b03084/4f506/east.webp 1080w,\n/static/bde349dfae12c41c549e6f69a3b03084/d1870/east.webp 1366w,\n/static/bde349dfae12c41c549e6f69a3b03084/222eb/east.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.9994791666666666}}}}]},"fields":{"layout":"post","slug":"/post/2022-10-10-like-count/"}},"primaryTag":"service"}},"staticQueryHashes":["2337738035"],"slicesMap":{}}