{"componentChunkName":"component---src-templates-post-tsx","path":"/post/2023-10-04-spatial-data/","result":{"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAwUlEQVQY003Qvw7BUBTH8YYgLCKExWw1IczEwAtIJCa1GJuyCalI/EmERUgHi5cxeI8uTTt1aHp9r9wmhk/OOfee/HJzNd/3Dc/zutS24zgZIUQpiqIt9YY+vUb9+eur6Kh5GN9LGkEn2DBd1y1zmGfxjjf9AFm1XEQCBe6aVBMVLJHiLBcHTiHwQS0MQ/mSOlYsjPDCAjOMccUFR3Z0NdvYISkDW9jAQi8IAhnYgAyZ4wELEzUfcFZfYmCPJ9ZIfwG9owW1fLgCkwAAAABJRU5ErkJggg==","width":400,"height":88,"src":"/static/0b18bd94a62a12fdc81ea720c28722f6/3891b/tecoble.png","srcSet":"/static/0b18bd94a62a12fdc81ea720c28722f6/3891b/tecoble.png 1x"}}},"markdownRemark":{"html":"<h1>들어가며</h1>\n<p>성수동에 위치한 힙하고 트렌디한 카페를 쉽게 찾을 수 있는 <a href=\"https://yozm.cafe\">요즘카페</a> 서비스에 지도 기능을 추가하기로 했다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 982px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5a8449a9ca2afdadbd779574ef6c6ce6/9e029/map_example.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 159.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAgCAYAAAASYli2AAAACXBIWXMAABYlAAAWJQFJUiTwAAAGQklEQVRIx1VW+VPbZhDV/93pD5n+0M502unQNtPpDOmVo02aA0iggUC5GhqOAMYQjPEtS75025ZkGV7frqDTekZYlr5vv327773FyBoNxJubiFdXEW9tYby0iMw0IZ/rqyvkn+v872ika9NCAdHsLPzPPkN07x7Cb7+F/8knmJRKMCRgsrGBhMHSvT3Ey8uYWtZNnGv875MkSHZ2MPlwhtHDhwhnZjB68ABDBg++/BJZpQJjOp0im0wwyTJkV9eY8Pdkkuk1nV4hjmOE0RDV4i7CwEOaTnRNxuwzfidxwjUJpjw85W+jZlpotVqo1+sw+T0kLL03W6jVari8vESLJaiVPyDwPSQMmGVTDByHB0UYJymG41j39foDGG27g2azBcf1NJMgCOH5PizLhstnvb4Du9NDEA5vrgiO4+r7cvmS+1yMmaHsi4ZDGJbVgWl1sb28gNPDXYziiQbuDUKWYYqYGUTRiIcEGDETu9NFs2VqRrKuz0wjZqrJcJ0hpw0cH2dHu6iWz+F4Ecy2jc3lRYRhHmQwyLOQDHT9gEGGI1QuSigcHsH3Qx4wxuLjH2CkaYoRT0smeTZDLuz2HGwuPkG9VidEyS6C5+WluGLjQkIXJJtLT/FmbQ7RRGLERPgOhgTwg4in+JqFQOn2+vC5STIPCcMhLMnM9QI2JtA15XIZQ747tctwxyH6LMXK/BMYrjPA3P3vdYMz6PD0CB2+PC9doE0+CrXX5h/haHcbjdolVp79zPo6KBSOlWpSW5MNkrpuv34Oo1kto14+w3XqYVh9iXic5F0LCdHztATCP0HguQ7cvk061dlli+/GrPFY19SqFcQpebi3tYYgAbZPSZVGG363g4DZDqMwX8ymSBbSxSnJLNSpkp+e5ytVXH53bBvzP3+tKI1Op68crNoRPpRbSt5B18HyXg+rhy7i0NMu+twoEJN4rNQxKQhpUs7bAJXyBRYefAdjklFu2RVGw1DV4XOBHwRo9SLULGZG4vq9AcIO69QwsVNoUX6J1trlu0DXRxq0dPIextbyPG8OqUVgPM51KwoZE+4VIf65soSNuYcYmxvYXnyK7T9X1CfiJCN1UuWmwJca98kK42R/B1azRrEDxWIRlt1Fn12c/epTlOgq5fMzVM4OcFrr6YY0IWQi+ePpL3gz9yufuZptW6R4UYYRsVMuSRsxs263p1r12c2XD+7CtkyaAR1lkvuiT1hxmqFRKeH17z8Q2QEDddSRRBhbr1/AGFEyY149klnqcUsXgRMnE1pgjONzE0dnJVhkgGm2SXgPEZUhyYiOpe6iHqGXIfD61Kq4ivDL4WI5xPMCpY3U9kOxgF9/msHm2qK6jOwRmBIwt7smGg02ix5qHB+8w+5fGyge7sGiTQlsOVFMQbJtNZsK9+3aH7g/c4clyLQB0ryzwhHstqk+KKiEXka328Xx7hZO9t/SaRiAEpKuiVo6VhsL9+9qfRqVC9Zsny59rXQZEvL6wiNcnB5pQ29VZZhti/VK1MukMbkCAqWDbozIr+Ih1hef6aiyqIpev69cFdWIbUmzQq09aSM/bmUkAQVmzsdI+ShBurZJv3ynFJGS1BtN7a4EkXkiMWRc9Ho9MVhPN0qR5RIoAlfuZbGUpETn6VItgkaCSOaaBNcEN/WWg5qcSYYEE9nY7J6Iu07XqFerWg/R7GWlipPiKTs7+JdSuocsaHAWyQgRZMMbGukIENtZevIjClTNwfYK9rbeaCMkmASQ08XyU47bcZx3X8ZAs2lqx+WSMSGX4QdDhSNu4To5v25poY25kZbAuuWe1FjGxn+FIM8FqXHyfh+1ekNHpUw34aDr+jkMZtUnx/wbPxxRORbHrk2965jgc/FDOexwd4c0s2DMk2fih1IXsXFRgcd7ixtKlTou6y00OAUvaw2sLM7jt9mvsL78Skdv3lBfy7H64j7MRg2GFF7qKDBrlJDAFygx/4/R+UwqiJmOkikefXMHx3+v638NkoTAlE7LlJRElNhCTNFjh5AFiuf6qmHRczRKUXz/N3784mOUzk7/LceIc6fBhrSZ+YDJzH7+Efb+2uQBsTQlVA06A3bTG8AedOl5qZ4shzgMsL+1jOLBW6R0d+0qHVpGrAQV2hR2N7H+6jFWnj/CP6mcRArAa0D6AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"지도 기능 예시\"\n        title=\"지도 기능 예시\"\n        src=\"/static/5a8449a9ca2afdadbd779574ef6c6ce6/9e029/map_example.png\"\n        srcset=\"/static/5a8449a9ca2afdadbd779574ef6c6ce6/0eb09/map_example.png 500w,\n/static/5a8449a9ca2afdadbd779574ef6c6ce6/9e029/map_example.png 982w\"\n        sizes=\"(max-width: 982px) 100vw, 982px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>기능 개발을 위해 공부하던 중 공간 데이터에 대해 알게 되었다..</p>\n<p>공간 데이터는 좌표계를 통한 지리적인 위치 데이터를 의미한다.\n좌표계라는 단어가 굉장히 생소하게 느껴지지만 한 번쯤은 들어봤을 위도와 경도 또한 가장 일반적으로 사용되는 좌표계 중 하나다.\n좌표계는 지구 상의 특정 위치를 정확하게 나타내기 위해 사용되는 시스템으로, 각각의 목적에 따라 여러 종류가 존재한다.\n이 글에서는 위도/경도 좌표계를 사용하는 공간 데이터를 다루고 있다.</p>\n<p>공간 데이터에 대해 학습하고 적용하는 과정에서 수많은 시행착오를 거쳤다.\n처음 접해본 개념인데다가, 레퍼런스도 여기저기 흩어져 있어 여간 애를 먹은 게 아니었다.\n한 번에 정리된 글이 있으면 좋을 것 같아, 학습한 내용을 공유하고자 한다.</p>\n<h1>1. MySQL의 공간 데이터</h1>\n<h2>1-1. 공간 데이터 타입</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1390px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/89dbdb4036cfb12c8dc59529ae646613/55991/spatial_types.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABMElEQVQoz22SW6uCUBCF/f8/q8fwSQgVKRPxhmlaeamsiW9gRDhnweDsNbPXXLbO4/GQ1+slz+dTzXy+wzBI3/fy+Xzk/X7LPM/6hfM8T+q6FgBPPloOBwM+5BZJkujFaZpWrus65auqkjiOV54cxxK/369Wx/DpClCgaRq9vCyLcsSyLJM0TaUoiv8FASO2bbueETZBYlswdlmWa+E/gnTGHmx0xrTxbZ/jOGredkX3+13FiWHO7XZTZcYhAM7nsxwOBx0JXC4X2e12st/vdUTyT6eThGEoruuK7/vaAPf1UVAGiFqXQRBIFEXqk4xgnudajEeh4PF41A45sxbtEEG6vF6vOiJ7I8F2R5xCPAocArZf8riLrTtkN/a/EUAAHzNhKnOmKMZ/Cs8DmsGR9wNns7R6+ZL5CAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"공간 데이터 타입\"\n        title=\"공간 데이터 타입\"\n        src=\"/static/89dbdb4036cfb12c8dc59529ae646613/55991/spatial_types.png\"\n        srcset=\"/static/89dbdb4036cfb12c8dc59529ae646613/0eb09/spatial_types.png 500w,\n/static/89dbdb4036cfb12c8dc59529ae646613/1263b/spatial_types.png 1000w,\n/static/89dbdb4036cfb12c8dc59529ae646613/55991/spatial_types.png 1390w\"\n        sizes=\"(max-width: 1390px) 100vw, 1390px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>MySQL에서 제공하는 공간 데이터의 종류는 총 7가지이다.\n단일 타입으로는 <code class=\"language-text\">Point</code>, <code class=\"language-text\">LineString</code>, <code class=\"language-text\">Polygon</code> 세 가지가 있고,\n나머지 타입들은 이 세 가지 타입의 조합이다.</p>\n<blockquote>\n<ul>\n<li><strong>Point</strong> : 좌표 공간의 한 지점</li>\n<li><strong>LineString</strong> : 다수의 Point를 연결해 주는 선분</li>\n<li><strong>Polygon</strong> : 다수의 선분이 연결되어 닫혀있는 상태</li>\n</ul>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1362px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f252e97699bfa058be35fc7f30bc0eee/7046d/spatial_types_cli.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 33.800000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABa0lEQVQozyVR13KCUBDlYxLsigJSFFQ6KLZEFB1LyiT5/x842V0fGO5yOXWVNN9DN2YYaFO4kwTF8h1jO8RgOIU28uDPcsTpFkFUyl0QrbEqK8zmBYrVASHNjHfcGIY5h8KAvjZBr+/CdiKstyfMgxX6g+c3j+4Z5BNBXrwhzfaIky1Ma4GM5ijeYEH/J9kOOhPyodE08drQReFUfyAj152ejRd1BGcSY1keJAELsyCTN9tjSdAbuJJmpPvQ6K2wm3bXgtowRGGzqxElG4n9quqwnBCr9VGALSIp6bwIS3S6togyjp9myxRipb58SSdq04AxXqA6PXC5fsPzMwFNvJQIK3HXpnm7O0uPfMeVMBG7ZVPa0INyu/+iOt4RkKpNxdbnT1zvP7g//qivnSzlUN3EIYOP9QO8SCbp9Bxyp4sZnsXhkjaV5c+yOUpOm+SyuVsu250msmWLKjApAYvwokwrkJm7G458ScfPP/fw85JYlM5TAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"공간 데이터 타입 MySQL\"\n        title=\"공간 데이터 타입 MySQL\"\n        src=\"/static/f252e97699bfa058be35fc7f30bc0eee/7046d/spatial_types_cli.png\"\n        srcset=\"/static/f252e97699bfa058be35fc7f30bc0eee/0eb09/spatial_types_cli.png 500w,\n/static/f252e97699bfa058be35fc7f30bc0eee/1263b/spatial_types_cli.png 1000w,\n/static/f252e97699bfa058be35fc7f30bc0eee/7046d/spatial_types_cli.png 1362w\"\n        sizes=\"(max-width: 1362px) 100vw, 1362px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>각각의 컬럼에는 당연하게도 알맞은 데이터 타입만 입력할 수 있지만,\n<code class=\"language-text\">geometry</code> 타입에는 <strong>모든 공간 데이터 타입의 입력이 가능</strong>하다.</p>\n<h2>1-2. 공간 함수</h2>\n<p>공간 데이터들은 <strong>공간 함수</strong>를 통해 활용할 수 있다.\n공간 함수에 대해선 <a href=\"https://dev.mysql.com/doc/refman/8.0/en/spatial-function-reference.html\">공식 문서</a> 에 잘 소개되어 있으니, 여기서는 대표적으로 사용 되는 몇 가지의 함수만 확인하려 한다.</p>\n<table>\n<thead>\n<tr>\n<th>함수명</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>ST_GeomFromText(WKT<em>[, SRID]</em>)</td>\n<td>WKT와 SRID를 통해 geometry를 생성한다.</td>\n</tr>\n<tr>\n<td>ST_Buffer(<em>(Multi)</em> Point, Radius)</td>\n<td>Point(또는 MultiPoint)로 부터 Radius를 반지름으로 갖는 원을 그린다.</td>\n</tr>\n<tr>\n<td>ST_Contains(geom(a), geom(b))</td>\n<td>b가 a에 포함되어 있으면 1을 반환, 아니면 0을 반환.</td>\n</tr>\n<tr>\n<td>ST_Within(geom(a), geom(b))</td>\n<td>a가 b에 포함되어 있으면 1을 반환, 아니면 0을 반환.(ST_contains와 인자가 반대)</td>\n</tr>\n<tr>\n<td>ST_Distance(geom(a), geom(b))</td>\n<td>a와 b 사이의 거리</td>\n</tr>\n</tbody>\n</table>\n<p><strong>WKT</strong>(<strong>W</strong>ell-<strong>K</strong>nown-<strong>T</strong>ext)는 공간 데이터를 텍스트 형식으로 표현하는 방법 중 하나이다.\nWKT는 기하학적인 객체를 설명하기 위해 사용되며, 다양한 유형의 공간 개체를 나타낼 수 있다.<br>\n<em>예) POINT(80 110) , LINESTRING(0 0, 10 10) , POLYGON(0 0, 10 10, 20 20, 0 0)</em></p>\n<blockquote>\n<p><strong>ST_</strong></p>\n<p><code class=\"language-text\">ST_</code> 라는 prefix가 붙어있는데, <code class=\"language-text\">Spatial</code>의 약어이다.\n공간 함수라는 것을 명시적으로 보여주고, 다른 함수들과 네이밍이 겹치지 않게끔 하는 역할을 한다.</p>\n</blockquote>\n<h2>1-3. SRID</h2>\n<p>공간 데이터를 설명하며 빼놓을 수 없는 개념 중 하나인,\nSRID(<strong>S</strong>patial <strong>R</strong>eference <strong>Id</strong>entifier)는 데이터의 좌표계를 구분할 수 있는 식별 코드이다.<br>\n가장 흔하게 사용되는 값은 <code class=\"language-text\">4326</code>으로 위도(Latitude)와 경도(Longitude)를 사용하여 위치를 표현하는 <code class=\"language-text\">WGS84</code> 좌표계를 의미한다.\n이는 GPS 및 다양한 GIS 솔루션에서 널리 사용된다고 한다.</p>\n<p><code class=\"language-text\">MySQL</code>에 입력되는 데이터에도 이 SRID 값을 지정해 줄 수가 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">DESC</span> sridTest<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">-------+--------+------+-----+---------+----------------+</span>\n<span class=\"token operator\">|</span> Field <span class=\"token operator\">|</span> <span class=\"token keyword\">Type</span>   <span class=\"token operator\">|</span> <span class=\"token boolean\">Null</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">Key</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">Default</span> <span class=\"token operator\">|</span> Extra          <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">-------+--------+------+-----+---------+----------------+</span>\n<span class=\"token operator\">|</span> id    <span class=\"token operator\">|</span> <span class=\"token keyword\">bigint</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">NO</span>   <span class=\"token operator\">|</span> PRI <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>    <span class=\"token operator\">|</span> <span class=\"token keyword\">auto_increment</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> <span class=\"token keyword\">point</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">point</span>  <span class=\"token operator\">|</span> YES  <span class=\"token operator\">|</span>     <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>    <span class=\"token operator\">|</span>                <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">-------+--------+------+-----+---------+----------------+</span>\n<span class=\"token number\">2</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\n\nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> sridTest <span class=\"token punctuation\">(</span><span class=\"token keyword\">point</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span>ST_PointFromText<span class=\"token punctuation\">(</span><span class=\"token string\">'POINT(10 20)'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token keyword\">row</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.01</span> sec<span class=\"token punctuation\">)</span>\n\nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> sridTest <span class=\"token punctuation\">(</span><span class=\"token keyword\">point</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span>ST_PointFromText<span class=\"token punctuation\">(</span><span class=\"token string\">'POINT(10 20)'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4326</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token keyword\">row</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\n\nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">select</span> id<span class=\"token punctuation\">,</span> ST_SRID<span class=\"token punctuation\">(</span><span class=\"token keyword\">point</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> SRID <span class=\"token keyword\">FROM</span> sridTest<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+------+</span>\n<span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> SRID <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+------+</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">2</span> <span class=\"token operator\">|</span>    <span class=\"token number\">0</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">3</span> <span class=\"token operator\">|</span> <span class=\"token number\">4326</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+------+</span>\n<span class=\"token number\">2</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p>위의 그림에서 첫 번째 데이터는 SRID 값을 지정해 주지 않아 기본값인 0으로 입력이 되었다.\n문제는 <code class=\"language-text\">MySQL</code>에는 한 번 입력된 데이터의 SRID 값을 수정할 수 있는 방법이 없다.<br>\n즉, 해당 데이터를 지우고 다시 입력하거나, <code class=\"language-text\">UPDATE</code> 쿼리를 사용해야 한다.</p>\n<p>한두 개의 데이터야 직접 수정하면 된다지만, 잘못 작성된 쿼리로 입력된 데이터가 100개, 1000개, 10000개가 된다면,\n이를 수정하는 것은 제법 귀찮은 일이 될 것이 분명하다.<br>\n귀찮은 일의 발생을 막기 위해 처음부터 값을 잘 입력하는 것이 매우 중요한데,\nTable의 컬럼속성에 SRID 값을 설정해 준다면, 이러한 실수를 미리 방지할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> sridTest2 <span class=\"token punctuation\">(</span>\n\tid <span class=\"token keyword\">bigint</span> <span class=\"token keyword\">auto_increment</span> <span class=\"token keyword\">primary</span> <span class=\"token keyword\">key</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token keyword\">point</span> <span class=\"token keyword\">point</span> SRID <span class=\"token number\">4326</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이런 식으로 Table 생성 시 SRID 값을 지정해 주거나,</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> sridTest2 <span class=\"token keyword\">MODIFY</span> <span class=\"token keyword\">COLUMN</span> <span class=\"token keyword\">point</span> <span class=\"token keyword\">point</span> SRID <span class=\"token number\">4326</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> <span class=\"token punctuation\">[</span>테이블명<span class=\"token punctuation\">]</span> <span class=\"token keyword\">MODIFY</span> <span class=\"token keyword\">COLUMN</span> <span class=\"token punctuation\">[</span>컬럼명<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>컬럼유형<span class=\"token punctuation\">]</span> SRID <span class=\"token punctuation\">[</span>SRID 코드번호<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">ALTER TABLE</code>을 통해 SRID 값을 변경해 줄 수 있다.<br>\n<em>물론, 두 번째 방법은 하나의 데이터라도 컬럼에 지정하려는 SRID값과 일치하지 않는다면 에러가 발생한다.</em></p>\n<p>위와 같은 방법으로 컬럼에 직접 SRID 값을 지정해 주었다면, 데이터 삽입 시 다른 SRID 값을 입력하려 하면 에러가 발생한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> sridTest2 <span class=\"token punctuation\">(</span><span class=\"token keyword\">point</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span>ST_PointFromText<span class=\"token punctuation\">(</span><span class=\"token string\">'POINT(10 20)'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \nERROR <span class=\"token number\">3643</span> <span class=\"token punctuation\">(</span>HY000<span class=\"token punctuation\">)</span>: The SRID <span class=\"token keyword\">of</span> the <span class=\"token keyword\">geometry</span> does <span class=\"token operator\">not</span> <span class=\"token keyword\">match</span> the SRID <span class=\"token keyword\">of</span> the <span class=\"token keyword\">column</span> <span class=\"token string\">'point'</span><span class=\"token punctuation\">.</span> \nThe SRID <span class=\"token keyword\">of</span> the <span class=\"token keyword\">geometry</span> <span class=\"token operator\">is</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> but the SRID <span class=\"token keyword\">of</span> the <span class=\"token keyword\">column</span> <span class=\"token operator\">is</span> <span class=\"token number\">4326.</span> \nConsider changing the SRID <span class=\"token keyword\">of</span> the <span class=\"token keyword\">geometry</span> <span class=\"token operator\">or</span> the SRID property <span class=\"token keyword\">of</span> the <span class=\"token keyword\">column</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>컬럼에 지정한 SRID 값과 일치하는 값을 입력해주면 정상적으로 데이터가 삽입된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> sridTest2 <span class=\"token punctuation\">(</span><span class=\"token keyword\">point</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span>ST_PointFromText<span class=\"token punctuation\">(</span><span class=\"token string\">'POINT(10 20)'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4326</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token keyword\">row</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.01</span> sec<span class=\"token punctuation\">)</span>\n\nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> id<span class=\"token punctuation\">,</span>\n       ST_X<span class=\"token punctuation\">(</span><span class=\"token keyword\">point</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> latitude<span class=\"token punctuation\">,</span>\n       ST_Y<span class=\"token punctuation\">(</span><span class=\"token keyword\">point</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> longitude<span class=\"token punctuation\">,</span>\n       ST_SRID<span class=\"token punctuation\">(</span><span class=\"token keyword\">point</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> SRID\n       <span class=\"token keyword\">FROM</span> sridTest2<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+------+</span>\n<span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> latitude <span class=\"token operator\">|</span> longitude <span class=\"token operator\">|</span> SRID <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+------+</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">1</span> <span class=\"token operator\">|</span>       <span class=\"token number\">10</span> <span class=\"token operator\">|</span>        <span class=\"token number\">20</span> <span class=\"token operator\">|</span> <span class=\"token number\">4326</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+----------+-----------+------+</span>\n<span class=\"token number\">1</span> <span class=\"token keyword\">row</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<h1>2. 공간 인덱스</h1>\n<p>데이터베이스에서 데이터를 빠르게 검색하고 조회 성능을 향상하기 위해 인덱스를 사용한다.\n공간 데이터도 마찬가지로 조회 성능 향상을 위해 인덱스를 사용할 수 있다.</p>\n<p>공간 인덱스를 거는 방법은 매우 쉽다.\n일반적으로 인덱스를 거는 것처럼 명령어 한 줄 이면 해결된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> SPATIAL <span class=\"token keyword\">INDEX</span> idx_point <span class=\"token keyword\">ON</span> sridTest2<span class=\"token punctuation\">(</span><span class=\"token keyword\">point</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">CREATE</span> SPATIAL <span class=\"token keyword\">INDEX</span> <span class=\"token punctuation\">[</span>인덱스 명<span class=\"token punctuation\">]</span> <span class=\"token keyword\">ON</span> <span class=\"token punctuation\">[</span>테이블 명<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>컬럼 명<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">SHOW</span> INDEXES <span class=\"token keyword\">FROM</span> sridTest2<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">-----------+------------+-----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+</span>\n<span class=\"token operator\">|</span> <span class=\"token keyword\">Table</span>     <span class=\"token operator\">|</span> Non_unique <span class=\"token operator\">|</span> Key_name  <span class=\"token operator\">|</span> Seq_in_index <span class=\"token operator\">|</span> Column_name <span class=\"token operator\">|</span> Collation <span class=\"token operator\">|</span> Cardinality <span class=\"token operator\">|</span> Sub_part <span class=\"token operator\">|</span> Packed <span class=\"token operator\">|</span> <span class=\"token boolean\">Null</span> <span class=\"token operator\">|</span> Index_type <span class=\"token operator\">|</span> <span class=\"token keyword\">Comment</span> <span class=\"token operator\">|</span> Index_comment <span class=\"token operator\">|</span> Visible <span class=\"token operator\">|</span> Expression <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">-----------+------------+-----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+</span>\n<span class=\"token operator\">|</span> sridTest2 <span class=\"token operator\">|</span>          <span class=\"token number\">0</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">PRIMARY</span>   <span class=\"token operator\">|</span>            <span class=\"token number\">1</span> <span class=\"token operator\">|</span> id          <span class=\"token operator\">|</span> A         <span class=\"token operator\">|</span>           <span class=\"token number\">1</span> <span class=\"token operator\">|</span>     <span class=\"token boolean\">NULL</span> <span class=\"token operator\">|</span>   <span class=\"token boolean\">NULL</span> <span class=\"token operator\">|</span>      <span class=\"token operator\">|</span> <span class=\"token keyword\">BTREE</span>      <span class=\"token operator\">|</span>         <span class=\"token operator\">|</span>               <span class=\"token operator\">|</span> YES     <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>       <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> sridTest2 <span class=\"token operator\">|</span>          <span class=\"token number\">1</span> <span class=\"token operator\">|</span> idx_point <span class=\"token operator\">|</span>            <span class=\"token number\">1</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">point</span>       <span class=\"token operator\">|</span> A         <span class=\"token operator\">|</span>           <span class=\"token number\">1</span> <span class=\"token operator\">|</span>       <span class=\"token number\">32</span> <span class=\"token operator\">|</span>   <span class=\"token boolean\">NULL</span> <span class=\"token operator\">|</span>      <span class=\"token operator\">|</span> SPATIAL    <span class=\"token operator\">|</span>         <span class=\"token operator\">|</span>               <span class=\"token operator\">|</span> YES     <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>       <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">-----------+------------+-----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+</span>\n<span class=\"token number\">2</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p>생성된 인덱스를 확인해 보면 <code class=\"language-text\">Index_type</code>이 <code class=\"language-text\">SPATIAL</code>로 생성된 것을 확인해 볼 수 있다.\n이대로도 충분히 사용은 가능하지만 그래도 이왕이면, 공간 인덱스의 원리를 얕게나마 이해해 보자.</p>\n<h2>2-1. MBR</h2>\n<p><code class=\"language-text\">MySQL</code>의 공간 인덱스는 MBR의 포함관계를 바탕으로 트리 구조를 생성하여 이용하기에, MBR에 대한 이해가 필수적이다.</p>\n<p>이름이 거창해서 그렇지 그냥 사각형을 그리는 방법이다.\nMBR(<strong>M</strong>inimum <strong>B</strong>ounding <strong>R</strong>ectangle)의 약어로 <strong>최소 경계 사각형</strong>을 의미한다.\n글로 하는 설명보다는 그림을 보면 단박에 이해가 된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 934px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cd03e2c796015e48f09f1c80b5d1c091/e7956/point_line_poly.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.599999999999994%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA0ElEQVQoz5VSiwqFIAz1/z+zgoLsrRa9djmCIWtK94DM6Xbc2VTOObrvm4BgY+Asvuc+h2rbls7zFAM4ET+XoKSgFJG1lpqmyVcoSeJ7KKjrmqqqonVdk/KxVI4I0FpTURQ0z7OogOcoqWfANE2eqOs6cUCSf13Xu8Jt26gsS9+reFhSVQH7vvv4YRjehGg8vlKuqgA8CBKogUVeUnKuKlg83Pf9M6RlWfw+O5TUv0Qi+hvIAPT6mfI/iL8SpKJKrHEc31P+SsZbY4yh4zi8/wOGTrQxy5B/2wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"공간 데이터들\"\n        title=\"공간 데이터들\"\n        src=\"/static/cd03e2c796015e48f09f1c80b5d1c091/e7956/point_line_poly.png\"\n        srcset=\"/static/cd03e2c796015e48f09f1c80b5d1c091/0eb09/point_line_poly.png 500w,\n/static/cd03e2c796015e48f09f1c80b5d1c091/e7956/point_line_poly.png 934w\"\n        sizes=\"(max-width: 934px) 100vw, 934px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>위 같은 도형들(점, 선분, 다각형)이 있을 때 각각을 감싸는 최소크기의 사각형을 그리면 다음과 같다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 934px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/53523970bf5bfbbc7c78424572ae1352/e7956/point_line_poly_mbr.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.599999999999994%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABI0lEQVQoz52Th46DMBBE8/8/GVEOlFBCgHMgBs/NGptQUpRbaWRT/Jgdm0OeppAyxkyS+SsZA1/z+xsdeqXWL4wjzDA85K7BUUr3/Qx+Cpwf+LHrYLSedL9b8QEG3k+jCKcofO9w1aq4EdCmvaIsEYQhqroGxO0L2HMgW/LVNA2CIECWZY82XcvbfH3tgPL1joviOEbCDdN0jOViicFH4iRrNCPpb7cF0DkokgTh8QhFd7ZkY5YQyVjkspV7zfWKmJ3URbEGiizIOTWaoEFPEpjbeQiMpegoy3M7SjyKGe+AeHcOXU6aR60gqCZgdMepqip0bbsHfpJUe7kgZb6/BI8+KrbLwL8H2uXSMtXSVXk+45T8oObR+jdw/nukOO/EqdvtP0FesXIOytu+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"공간 데이터들 MBR\"\n        title=\"공간 데이터들 MBR\"\n        src=\"/static/53523970bf5bfbbc7c78424572ae1352/e7956/point_line_poly_mbr.png\"\n        srcset=\"/static/53523970bf5bfbbc7c78424572ae1352/0eb09/point_line_poly_mbr.png 500w,\n/static/53523970bf5bfbbc7c78424572ae1352/e7956/point_line_poly_mbr.png 934w\"\n        sizes=\"(max-width: 934px) 100vw, 934px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>여기서 보이는 빨간색 사각형이 각각의 도형에 대한 MBR이다.</p>\n<h2>2-2. R-Tree</h2>\n<p>인덱스가 <code class=\"language-text\">B-Tree</code>를 이용하는 것과 마찬가지로, 공간 인덱스는 <code class=\"language-text\">R-Tree</code>라는 트리 형태의 자료구조를 활용한다.\n<code class=\"language-text\">R-Tree</code>는 위에서 언급하였듯, MBR의 포함 관계를 트리로 표현한 것이다.\n삽입 및 삭제 과정에서도 <code class=\"language-text\">B-Tree</code>와 마찬가지로 동적으로 재구성되어 <code class=\"language-text\">leaf node</code>들의 균형을 유지한다.\n또한, 탐색 속도를 향상하기 위해 자식 노드들의 적정 개수를 유지하며, 삽입 과정에서 MBR의 크기가 작게 확장되는 분기를 선택한다.</p>\n<blockquote>\n<p><strong>균형유지</strong><br>\n<code class=\"language-text\">root node</code>부터 모든 <code class=\"language-text\">leaf node</code>까지의 거리가 동일하게 유지된다.</p>\n<p><strong>R-Tree의 네이밍 유래</strong><br>\n<strong>R</strong>ectangle(사각형) 과 B-Tree의 Tree를 섞어서 만들어진 네이밍이라고 한다.</p>\n</blockquote>\n<p>우선은 MBR의 포함관계가 정확히 무엇을 의미하는지 그림을 통해 알아보자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1299px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bc7948c45247047f810d302d3f14004b/9dba0/seongsu_map.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.199999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACh0lEQVQozx2TSW/dRhCE3///KT74aCf2RUYutmDBkhJYEiTykY/LcPaFQ1IBAnxp6UBwlu7qmq7qk/OatrmmGe9IwTL1Z7q+IcRIrTulVqwLWLkb/o50HzfM3c72uuFCwkSHCY66RYmZOVlr+OfxO9dPXxjm35jxTN+3rLlwCFjNEWMsixqYnw3z5x19tQvASikFlQeUUdSiCElzUlOLXxZJaOnO30m2xVjFtPQo/0A2Lck5xq6hrJbL18jwzQsbYZQcap+JPkhMw7ofnLQdKE7hJWkLBn05s5qBkCdUaniernkcr1HzC2posedA8SvrWlm2md5athLISopv/3Ja5hvG/hkXC1sMwnbEz2eiO5P9iJlbfrVX/Oy/8KTu0JviOA62faNJPT5tEndmurxQdgHsX/5kjZphSQymoF1k0YZNjxI4s0ujsx4YugdSntFV2EvxPgxMZSHK07eqiGYhC+vTfLmVjSTZEWsMSnvGJUqRhTVMxPFJ+jrgpgHjG/rpTnpmcYclbknEWKgSt2VPEpFOiyho1IUiSUnEWKZZ1kb+HVP3W0AlwSsRZ6S1N2RhFt5ivRHGCSttCXPz/uWSRGWtWUtkVOI1WW9rZjLy/MubWHLnJpI0PNkXLk8TZdHUOOGM3MWZ1XfEaNHzKAU8p67vSCKGjZV93/HSHxukl6JkFRt4LQ641dgbzcOHSn+V3p9X6spwbrC3hqKcDMVEEIOfhlGQgxfXF5mM+m6Htco0+EJKGbVYwiXh7zOXvzLd50ycD47XHvdDMX48UJ8q+kdmXgKncXxAi+/WdeUQhm/AIa1Y66lyZlxGy4i9/reLXaooLHs5O8o9w2OD+iqAfxy4e1E6Jf4H9J1+Wn/t1t4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"성수 지도\"\n        title=\"성수 지도\"\n        src=\"/static/bc7948c45247047f810d302d3f14004b/9dba0/seongsu_map.png\"\n        srcset=\"/static/bc7948c45247047f810d302d3f14004b/0eb09/seongsu_map.png 500w,\n/static/bc7948c45247047f810d302d3f14004b/1263b/seongsu_map.png 1000w,\n/static/bc7948c45247047f810d302d3f14004b/9dba0/seongsu_map.png 1299w\"\n        sizes=\"(max-width: 1299px) 100vw, 1299px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>위의 그림과 같이 성수역 쪽에 몇 개의 공간 데이터를 입력했다고 가정해보자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1794px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/21704bbb2dd4acac507918d6a9b590c7/d4913/without_map_seongsu.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABvElEQVQoz42TbWvUQBDH7/t/JBWhglQEQbB4+ELh2muTXLLZTbLPefg5SetRa9VOGJZsdv8PM5NdURQMw0DXdX9P09Hbjpt9wY+LkttDQaMalFK0bbudWTGqqmJnjOGl0V0HzBtQH9NGME4jJ1+yzMv2XQvWbmVYY57n8zpPM0PoKewtxmm89Vsq3VBeOIp3lsH2jGROoWRM43Z3xToDLsvCNI6MMeLFgg+BsHg6tDwKj5U9z2lvqG9avPf0GPogSvMzgGs4rUXddG9P5OeYN/aQPDop6rGkSRWjEFtvBa4lhkTK6XmFj9e+aQiiKKZITpnoIid14qivpS5Q2YKAI/0LcEupYRa7T2PK06ayDer+slMMrsdZx/Tg6lmFa1OCjMBqPUs9lwfAGCLleIsLlvPmk9BSsj8VPgBPWWxau7FbZ7Fh4PunI/VRkca4nUtTJEgp1vdpGX9XuCp7bPsXcBSV+ko6vxdLr8Fcgu0ceco0Xy3V24T+InNZOuq6/v9gr0TOBOwhY64E5EMi6Cx9mRi+zXQy6OaVNPEzNHXD7iW/njYtba/Qaw6Kfug3e1VdcrisObyvKYqSu+KOn0pJn+CElDckAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"데이터와 MBR\"\n        title=\"데이터와 MBR\"\n        src=\"/static/21704bbb2dd4acac507918d6a9b590c7/d4913/without_map_seongsu.png\"\n        srcset=\"/static/21704bbb2dd4acac507918d6a9b590c7/0eb09/without_map_seongsu.png 500w,\n/static/21704bbb2dd4acac507918d6a9b590c7/1263b/without_map_seongsu.png 1000w,\n/static/21704bbb2dd4acac507918d6a9b590c7/d4913/without_map_seongsu.png 1794w\"\n        sizes=\"(max-width: 1794px) 100vw, 1794px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>지도를 걷어 내고, 각각의 데이터들에 MBR을 그려보면 위와 같은 그림이 나온다. 그리고 이렇게 생성된 MBR들을 포함하는 MBR을 그리다 보면, 다음과 같은 그림이 나온다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 979px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dc7891cbf26d2ebe3f6245bf1576c566/1d5a8/MBRS.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACbklEQVQoz22Te3PSQBTF+f6fxvEfZ5yqtVVai8UgUCwUSNKQhJBsnpsXgZ9X8DWOe+fO7uzj7Ll7zvZc16WqWx7Gl8xG71ithxijAYP7AePJgNFX6aef6b+55urFNR/77xgat9wPbzHub1j6jxi+wS7dEfgBvTiO+dG89T2HIjmNSw3HPed2PHfxQhO9gnBYEicRddNirR6hORJ0IY1ElmT0lIpOBzbuDC1M9wIUqJJA+2Q6o9LVKaM4xL+s2PZLCp1TC4BpCmDZETQ7qkNJEif0ougMOJ6MCXcpcaBwPFlsClIUyVHJ4YqyLNl+TdnZSsaaRGJrPkP1E/BYkcapMPwFOOyTZ+eSnY0Aq5pDt6dsNaoN2XU+qgmlgj1FlRNLKGsrgC3BQcmVvwCVOoEsV1OSMKfdRFiGSWE7aMfDf9iSLn2syYyn2YjGSbCfZijPxf30jXa1ZX1zjS5T0vSvN3Q3E1prRTObkwlD7coGW1iYCcVziGetRbg1lZvgPM0Jnmy209VJNHsxJs8Tsiz7w9Brfao8xzYsct2gwpJWBDpl08i6Q1Hm/K89e1KRTsnSvwDd2qMV9VJHkxYdsQhU1QexSIGWN1sNN2xM2dM1wupI1ZRkItQPimtzRl78w3BzAswQM3H4eXNeVHjiu2J6JHotVVzpk4XqtmZpKKz3JeHywGhkkGSRMMzpJclZWX8fiElr8VXzu5SuE3zV0fhQiOWiz63sOa9Fa5l7C+kd3HxYSMkxRaHpOY5DrWtu3U/MRRh7/gXTnmJZE5bLKbP5hMV6wlxyYUrK3MODgTG54+3LAf0Lg4vrl7ieiCRf7zsjCYV+Mk7agwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"MBRS\"\n        title=\"MBRS\"\n        src=\"/static/dc7891cbf26d2ebe3f6245bf1576c566/1d5a8/MBRS.png\"\n        srcset=\"/static/dc7891cbf26d2ebe3f6245bf1576c566/0eb09/MBRS.png 500w,\n/static/dc7891cbf26d2ebe3f6245bf1576c566/1d5a8/MBRS.png 979w\"\n        sizes=\"(max-width: 979px) 100vw, 979px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>그리고 이 MBR들의 포함관계를 Tree 형태로 표현한 것이 R-Tree이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1319px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1def62040e1119bcc511f3a15c27671b/9eec3/RTree_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4UlEQVQoz4VSW2/aYAzl/w9pL2N7agsCtZOmXdVqpepbRQgJI4kgpCwUUtKAKCQChjpy+86+S0iL9tBIVuxjnxPbcSFNU7z2HGnvcf7726t1s9kMhSiKeMCECSEg1GcWUnw+n8NxHFi2hcHwFvfOPR4pFsZxXsc4+6Y8z3sWJEyQOTTeDAa46/ex9H2EYZh3sNvtsKAYy/2xLF5LMu5/gmmSCNZyiW2pBKzXuRDrICUvVkNz22IRWCwOuAeCYoAE7mgEu9XCZDyicSwybBWE7OXhjscYKgomI1YTZdxMMI6FYLAiaGse/CAQjfoB5LaHzXb/MYLVBlA7Lh3C5zWr9QpN9QHL4MXIcSR2pOgJPv6IsxHE+9NFBNtJ8wmanQRnWU0SizFrX2MohsDcByq4H8W6HePySqKjCYEoinFZv8FkMstX5019/NIGB6dydS3B7N89d8jat+0hJKkBVW1BUVRMp1NIzSbHZFnm+aenv9xvNG44kf3xRkOC0pJ5nWn2xR2apoXzi5+oVk9RrZ3h85fvqNevcXRcwUm5ijK1dlvj9/im+JYb++h8/oh3pQ+cU67UcHxSgeu6KFj0ngzDQKejQdN0ahq63S50XfgM6/V6tEs7zzMOixlH1w2Os3qG/QPn+SxbeCuo1gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"R-Tree\"\n        title=\"R-Tree\"\n        src=\"/static/1def62040e1119bcc511f3a15c27671b/9eec3/RTree_1.png\"\n        srcset=\"/static/1def62040e1119bcc511f3a15c27671b/0eb09/RTree_1.png 500w,\n/static/1def62040e1119bcc511f3a15c27671b/1263b/RTree_1.png 1000w,\n/static/1def62040e1119bcc511f3a15c27671b/9eec3/RTree_1.png 1319w\"\n        sizes=\"(max-width: 1319px) 100vw, 1319px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>최상위 MBR인 <code class=\"language-text\">A</code>와 <code class=\"language-text\">B</code>가 R-Tree의 루트 노드에 저장되는 정보이며,\n차상위 MBR인 <code class=\"language-text\">C,F,D,E</code>브랜치 노드가 된다.\n그리고 각각의 데이터의 MBR이 리프노드에 저장된다.</p>\n<h3>2-2-1. Insert</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1400px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/02f96a429946eaff1d9782e6f64d3ae0/3643c/insert_X_MBR.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACcElEQVQoz2WT627bRhCF/f4v0gfoz7QoUCNtbNlOrEhuZImkSJlc3pe3pXjVl5FsNwGy4GIvmD0z58zhVZ5lnIe//UTtbhj7iiTUZFGJqTS11hzbEm/h8/xbiHWzR/keURiwX6/pOoOeNHrWlLrkKkvTC2AcbZin4bI33Yl26DjNJ7mD+XSiLg35R4m7HmiP7SXOdf+DdpbvSD7m6Exzlb4BWvaGNK7QaY3nG/w6IOkV+pjT9z1lWbL/KyNYZhwF0NCgbJvZjJjJXACLvBDA5BVw/WVBHsVwGvFVKzRnuZ1oqSjI5HmJrjLaxtC2DbWccydgaqViOvLpHfC9wt2KsjBQt1j3Dpm9p1Mh2S6kdH3c7Zq99ZU+0sSeTVMqkvstxlbkzxvyLqHQxQ8Ng5cnzEEyegFaNXR5g0kNymk4Zg2e5eK9SJK0wzlYUk2FWjqMx4l49URahxTFuSlvXY5qjzFLUP8uqSLRMjCYTJRKWsai5ZDsKCX5VAvFKKLebznq5vI2U4rUxFLhT4DhENMPPeFWtKpHQj8TBUWBbqQXjSzPIU4STudg6apw532kvv8roOpCBvEU4rtzO8Qz0t2Bw0r8+DIQ/zmQPDY0pmaaZgIrJ3mQc9Kzf/5GLJTLnynHIupJ7EHZ/J95FuR412NWUHwSan/PdMX0SvNmpPwgnr0G54NH3Kg3Y78BfjMbYuNTK0swI6pKPFgoXPkrwtTDDzxe9i5xHBBnPs5ux+Z3D/sPxefrjyQmpCprrlzXJfADnpw1S/uR9dMd6/VC1gUrWb883r3O5R2PX8/7BQ+fb1k8/MPtjcxbmffXOK7NwTvwHVUZhmjKhEAFAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"MBR X 삽입\"\n        title=\"MBR X 삽입\"\n        src=\"/static/02f96a429946eaff1d9782e6f64d3ae0/3643c/insert_X_MBR.png\"\n        srcset=\"/static/02f96a429946eaff1d9782e6f64d3ae0/0eb09/insert_X_MBR.png 500w,\n/static/02f96a429946eaff1d9782e6f64d3ae0/1263b/insert_X_MBR.png 1000w,\n/static/02f96a429946eaff1d9782e6f64d3ae0/3643c/insert_X_MBR.png 1400w\"\n        sizes=\"(max-width: 1400px) 100vw, 1400px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>새로운 데이터 <code class=\"language-text\">X</code> 가 추가되었다.\n데이터가 추가되는 경우, MBR이 적게 확장되는 브랜치 노드를 따라 데이터가 삽입된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1103px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3191ee78505fc9a71acda39c912ba0bc/890d8/insert_X_tree.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACAUlEQVQoz4WSe28SURDF+bJ+FZP+YWKMpomxakVtGrSSWouKtS8IsLwELaC8i8CyS3eXbXk/ft69tBBSo5NMcmfOnTPnzlxXs9nEsixM01xxwzCwTAvd0Pmc81HTG9hWR+ZN07h13+FQVRWXruv8y4wrk0fBuxh2mf9Zu91eEk6nU2aOi/NAuC7ASqVCrfabvmWC3WR6UWZmq0wZy3vy/mwmax1zuBaEDijTnQ5Xfj/a+TmjyWTRfU4wYTbqwOE+FIorpLcIb7r0q1Vabjf0eotGTsFNkezp2WYaC85xif1FoaPBEAsoC0JNqCyVSth2Z1Hk2GQypFIuoRkX0FXBqgpwsqpQ0+aERYG9+dB3tM5V2GMRD7nsSv0MR7DjG5H51V0oTSR6RL8tlyIJWy1NBj8LJru+0gLsD2Z4vDk6l6PrkcDHgzqqvpxrQGly/CkmTuNrQrFlZ9WDwZBUKkEyqYit1mRcLBaIx0JksxmhbiRG2uPsR5JGvTb/TuI/RqMhMqkIai4iR6BrqqNQRYnGebLxHPfLLbze9+zt7bO+/pjNF694J+KzTBa//wtra/d4+mxTzNbm9dY2G6LG83aX+w8e0vfcoR334mo0GqTT3wkEgpwGAihKlHg8wcnJqcwp0Rj5fEG8IM3B10NCoTD1ep1IRJF4OBzh6OiYZmQHNZ/gD7m2LwrJdIKzAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tree X 삽입\"\n        title=\"tree X 삽입\"\n        src=\"/static/3191ee78505fc9a71acda39c912ba0bc/890d8/insert_X_tree.png\"\n        srcset=\"/static/3191ee78505fc9a71acda39c912ba0bc/0eb09/insert_X_tree.png 500w,\n/static/3191ee78505fc9a71acda39c912ba0bc/1263b/insert_X_tree.png 1000w,\n/static/3191ee78505fc9a71acda39c912ba0bc/890d8/insert_X_tree.png 1103w\"\n        sizes=\"(max-width: 1103px) 100vw, 1103px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><code class=\"language-text\">X</code> 가 추가된 MBR 그림을 다시 보면, <code class=\"language-text\">A MBR</code>에는 <code class=\"language-text\">X</code>가 포함되어 있지 않아<code class=\"language-text\">A MBR</code>의 크기가 확장되어야 한다.<br>\n그러나 <code class=\"language-text\">B MBR</code>에는 이미 <code class=\"language-text\">X</code> 가 포함되어 있으므로 크기의 확장이 필요하지 않다.<br>\n<code class=\"language-text\">D MBR</code>과 <code class=\"language-text\">E MBR</code>의 경우에도 마찬가지의 방식으로 결정되어 위와 같이 데이터가 추가된다.</p>\n<h3>2-2-2. Split</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1635px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8aed5da0340a31b019b12518740e471e/06640/insert_Y_MBR.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACbElEQVQoz1WS627aQBBG8/7v0vZv1DZNo1SEqNxiLoEANmBjG4Pvd2M4HZwoaWa19ko7e+ab3e/KMAzSvGCi3DLr36KpfZRBh26nw3jUYajIf9zl4ecf7r/c0/pzy6Dfpt975KnTRrXmDKwn9oGDbdlc+b7HJXarHqRxsy4z+dR8imhZ4F+D1y2JAp+qqjHUuSSDe/KoZERBxJXrus2BrfksSktJFLibYqcWYRaSpXkz3eCA9TvHbqXEaUQhpPV6JiJqdqVDfsoJvOADOBoq7J0Q3/EwTNksEyI8grOHIMmyjN0oZK97zTqQ4aw2kNU4AizOcsa/AA+HV2D/gTgKmrWxFbBXcKqPZFWKVx3Y1zu88sDxeCTJY8H5+OudAI840nIh45NCVZsQ7mOq7YHNYE2y0Ul1E2tiEy4t1sMJy+cnSsNns5jg27L3OKVUd2itO1K5njD87w4tc0y1UinGUyJRmJqSsBEVq4BE32OuVWxtRb4N2C4XOKqBM9HgDOv5iEQe9BXovQGrHUWcNOritMTdp1RHmlmWBWapN4eaKCII9HcH6PqLFO0RRvEH0CxsqksVIyFMavx9SF7UeEEirx+j9ky2mkV1qjjXFXnikiWFCDyz1EShb35u2SwkWexA6HN6qxwnOWZPbDI8436XLu5SAeUUVYnZjbBvchJxzqg7IIyDV6AvJr2EfXQuvYmvyvdWaiHHfk0pj5m8iIF7VWPkpuuF7P2SK2nB8420nMldxylXG33TVG1v20wNhdWsi7oaomkK84XCeDpkpipMlwozbch0PkQZdekpD7S+tvl73eXH3TdMS8e2d/wDtZ2EvSUDYxAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"MBR Y 삽입\"\n        title=\"MBR Y 삽입\"\n        src=\"/static/8aed5da0340a31b019b12518740e471e/06640/insert_Y_MBR.png\"\n        srcset=\"/static/8aed5da0340a31b019b12518740e471e/0eb09/insert_Y_MBR.png 500w,\n/static/8aed5da0340a31b019b12518740e471e/1263b/insert_Y_MBR.png 1000w,\n/static/8aed5da0340a31b019b12518740e471e/06640/insert_Y_MBR.png 1635w\"\n        sizes=\"(max-width: 1635px) 100vw, 1635px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>이번에는 어떤 MBR에도 속하지 않는 <code class=\"language-text\">Y</code>데이터가 추가되었다.<br>\n위의 <code class=\"language-text\">Insert</code> 에서 설명했듯이 가장 적은 확장이 일어나는 MBR을 따라 데이터가 삽입된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1605px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ed779e311acf062cacdca1409308d79c/3b19a/insert_Y_tree.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABwklEQVQoz42S3W7TQBCF8+JwzRP0AlQJIRUlTlJApuSnBYsK1Q40IoQ4MaUYStKWxKaNAy2JY/tjd91sc4UYabQ7u3POnJndQhzHSFsulyRJQnKzZlmmzqvuFu3Tt3nO2v26S6y08XhMgX+Z4Kx2HuGevuF/LAgCCiv2NE2VS12Xsxmj4ZCh8Fk0g6ufpNMh2XQkcuYqJ5O5ogvpEqcVSsmKMMkP6XaJLIv5MlkXSqpYxHjMCpn/TZOq+5vxTCaTW8IcBmetFueOo8nSVKrIgbEATpo18Hsas1K5Rpi3PI0yBt6I6PqaX/M/fHRHXEbZbaHxAs87QTW8iAi//+BqrkrqlhUhWU6431qw7yy0slcHMYfdWMclc457lOl4e+c3Xj9S+9W0JnKGK7lu36Pd/qAVvTtsc/T5WLcz8I4Jwwv9gPaBzYn9FMIBaZwLGUuFQRDS6XRpNJrs7u5hOy0s6zWm+VzEL3HdPl98H8MwVE4sfkW93qRWq2E2LN4/2wDrLnQeEpyPKPR6Ls3mHsVSmUr1CTsvalQq2xSLBka5iiMK2LbD/QeblIwyvv9VkFcoi/1WqUr98QYX5h3C+j38Tz3+Ag1n6SWit1ztAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tree Y 삽입\"\n        title=\"tree Y 삽입\"\n        src=\"/static/ed779e311acf062cacdca1409308d79c/3b19a/insert_Y_tree.png\"\n        srcset=\"/static/ed779e311acf062cacdca1409308d79c/0eb09/insert_Y_tree.png 500w,\n/static/ed779e311acf062cacdca1409308d79c/1263b/insert_Y_tree.png 1000w,\n/static/ed779e311acf062cacdca1409308d79c/3b19a/insert_Y_tree.png 1605w\"\n        sizes=\"(max-width: 1605px) 100vw, 1605px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>그런데 만약 트리의 최대 노드 개수(M)가 4이고, 최소 노드 개수(m)가 2인 경우라면, <code class=\"language-text\">E</code> 노드에서 <code class=\"language-text\">OverFlow</code>가 발생했기에 트리의 분할이 일어나야 한다.</p>\n<p>분할의 동작 순서는 다음과 같다.</p>\n<ol>\n<li>분할이 필요한 노드(<code class=\"language-text\">E</code>) 의 자식 노드(<code class=\"language-text\">O, P, Q, X, Y</code>) 중 <code class=\"language-text\">분할 알고리즘</code>에 따라 두 개의 노드가 선택된다.</li>\n<li>기준이 아닌 나머지 노드들은 <code class=\"language-text\">분할 알고리즘</code>에 따라 1에서 선택된 두 개의 노드 중의 하나를 선택한다.</li>\n<li>2의 결과를 통해 노드를 분할한다.</li>\n</ol>\n<p>분할 기준은 다양하지만, 대부분 <code class=\"language-text\">Quadratic Split</code> 방식이 일반적으로 사용된다.</p>\n<blockquote>\n<p><strong>R-Tree 분할 알고리즘</strong></p>\n<ul>\n<li>Plane Sweep<br>\n단순 추가 순으로 일정 비율을 새로운 노드에 삽입한다.</li>\n<li>Linear Split<br>\n한 축 기준으로 가장 멀리 있는 두 노드를 A, B로 하고 나머지 노드는 두 노드에 추가할 때 증가하는 MBR이 적은 곳으로 삽입한다.</li>\n<li>Quadratic Split<br>\n한 MBR에 속하면 낭비되는 공간이 가장 큰 두 노드를 A, B로 하고, 나머지 노드는 두 노드에 추가할 때 증가하는 MBR의 넓이가 적은 순서대로 찾아 삽입한다.</li>\n<li>Exponential Split<br>\n모든 분할 경우에 대해 계산한 후 공간상 가장 효율적인 분할을 선택한다.</li>\n</ul>\n</blockquote>\n<p><code class=\"language-text\">Quadratic Split</code>방식에 따라, <code class=\"language-text\">P</code> 와 <code class=\"language-text\">Y</code> 를 A, B로 지정하고 MBR을 확장해 나가면 다음과 같이 트리가 분할된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1337px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bfaa2c1309bdf2db16bc0bc9fe4a1a36/ac2ab/split_tree.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACEklEQVQoz42Rf2/SYBDHea++El+A+8NMM2OWxWWGbGiYOiZIjMOgE1AyGAXKRgu05cfYoIUx1lL4+LSFOPzDeMkl99x97/t87y7kui62beM4ju9ebNv3sID2yOBA2sNxHVa4h9gVfhW3221C/MOapsqz7IYgtPkf03U9IJzP5yw8F/FMuGmafrHZaqI0FVqtFoZuMBqP/fpcuI9fLNbcMIyA0Ct6IO7uGJ+c0BWFu+l07feJeLcvLpim0+LXGfxF6tkaoWd2r0dve1sEwYie8pV634ZDlM1NhpqGs8p5/QHfH0LPBoMhjUaDwWiEqqpY1mgJDtCWZYoVtNA6HUqlgjiAjqbpXF/3l4t6QNjuQTThXSto7vZdovEZM9fXSe8awodTJpOgMRKbUVO9aEqxNOBNzPG3YBjLo/SuJkSPyrjzgHBo3nP0sSRAwVimNSN5orOcjMSXLg1t4seqYbOzL/u1rlAfGt/eks//4vR7inK5zM3NDblclkwmTfH8XNxpKlah8OM0Rb/fF6Nb5DJfkeUqjnWFko3RKnyicJZHUVRCVblGOBzh1e5r4okkx/Eku3v7InfAu/cCLPYUibzlycZTstmfFApFtrZe8iGRYpKPwOEj+PyYnRfP+XaaIVSv18WSS0iS5CusVmVKUlnkJCqVin+oqixzLtReXl4KFYqPleULdEWmU8tj1M5EryTqdX4DFhUwguizXigAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"split Tree\"\n        title=\"split Tree\"\n        src=\"/static/bfaa2c1309bdf2db16bc0bc9fe4a1a36/ac2ab/split_tree.png\"\n        srcset=\"/static/bfaa2c1309bdf2db16bc0bc9fe4a1a36/0eb09/split_tree.png 500w,\n/static/bfaa2c1309bdf2db16bc0bc9fe4a1a36/1263b/split_tree.png 1000w,\n/static/bfaa2c1309bdf2db16bc0bc9fe4a1a36/ac2ab/split_tree.png 1337w\"\n        sizes=\"(max-width: 1337px) 100vw, 1337px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1726px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9d466e1fde6cc9e69e236b6d0aadfb0d/dd200/split_mbr.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACdElEQVQoz1WTfXPSQBCH+/2/i385jjpWrVZbFSm20EKhhYS8kRyQ5PJ2SQiPW8S3u9nJzd3tk7397Z7keUHb7nmYfuW2/4qFPWA46tHr9xje9rgZ9hhNvnN5ds7Zsw98On/H4PqS/uCSQe8Ts+iex+0jo/UQx3c44ThCd0SdhId1ZWDX8t/QbsX6NahvFTpLqbsGdz5lZ+rDudopfOVz0nX7w0awmpJmmUQrh1uDrwPSMqYsSkxp2KYb3A+a4GNBWRY0Mu3FhLY4ApsIPxLg/hePyeSOwFfoTYrrVySmJCclZkv1NBtDcLdl46aY2shJSmQ5NOUR2Kr/gdPbK9ZRcFi71obNKqWTt5tSExchqnJRmQtNQ64T0r0iefCodQbCUGb1G/iLuFzeCzCmCxOckYd2PEwUYQ8jtL1meTvlfnxDs8pYB1MqvSK+nlF7vjg7KPsaP3D+5jAM5dLykXo0JvdiMj8j9xPW84QqSESAB7yFRWpnBNYctfBQY5udREwnEUYzfN8W4K47AFd1JOrmOIMlqa7YRBl1s+dJxH3X4ZYWSaZlTyqgyCmcB4y4liVISln0X+K5/wJNiDGawstI8z3xWtNIfSqVUTY5i17AchKSFiJQtUMnW0zWULdGAtxhP97g/gsMjURYaUhijjoJsMUdFOQ/YPtW7py1rFelKN5hf0mIThs2V6K4V0oa7wW4lMI+evt1IM8TxRL9p5if9AoFoCwpmVGFfVGSRi3CYzuuSeUn8Rsp+knHbDbG8wRYSOt1dcdQDRmFN9iz78znVwdbiFnWgMVSvkezpTUn0orfrj5y8fwzly8+87V/zun7tziOxU910IUPR0TXDgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"split MBR\"\n        title=\"split MBR\"\n        src=\"/static/9d466e1fde6cc9e69e236b6d0aadfb0d/dd200/split_mbr.png\"\n        srcset=\"/static/9d466e1fde6cc9e69e236b6d0aadfb0d/0eb09/split_mbr.png 500w,\n/static/9d466e1fde6cc9e69e236b6d0aadfb0d/1263b/split_mbr.png 1000w,\n/static/9d466e1fde6cc9e69e236b6d0aadfb0d/dd200/split_mbr.png 1726w\"\n        sizes=\"(max-width: 1726px) 100vw, 1726px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>2-2-3. Search</h3>\n<p>검색의 경우도 마찬가지로 검색하려는 공간 데이터가 포함된 MBR들을 따라서 검색한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1229px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f7eabc5918c6d802c4ceae00629d8920/2324c/search_mbr.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACfElEQVQoz1WTWW/bSBCE/f9/zCJAHvK0gBNjnY1jWVlrbckSJR7ioeFNDu9DX1oygiBDNHtmwK6pqmneJEnMZbiHB/Ljhm4sUSolSQqqOqPUGVWXYz16HD7EmM82vnJQYYC1XdPOFe254zQG+LHPTRy/A6rTK+fzeJ23ncTQMg3zNcZxJItKsi+QPszoWtNMHdZ+A/O1hGRM8CLvN+DhsCFNawopdIMKvwpIpxA9FAzDQJkXHG8zgpeEtq3J54zTwYJpgjPEQ/Qn4Gr5QBRGwmbiFA0UWtjJoxFmpPIu0Y3I63vqviWRvdRSXNFkxHP6J+DubUUal5x1i/XsEJsOfRgSGRGZI34Zr6LihXOiRf6BugjIVnuEBQSKODnghS43SZYgFMi/CMDniHkVkro5rRJGfom3leyKVNsRUIvS1dj2G5Ecop4NaLQYmMklmnieKYCuMFyeKe5DpjuR9teR2i7FS5Enng5Fy5CXRNoiC2O6vKcLFYV5pMp6mgE6Cd/4hh84AriL3gEfE8bvFdUnYWQP0hYZvXxYtj1Vr9lbJq6r6OQOhloOy5U4DP00Mgni8fUOzz8K4EkYri4MY8Z/xMP7kqk5X82uqo7oraH3ZrLbGX+hpWVaqmbE2xSkywZ9qmnaAcf9JTlP5RjxcCd53UDY8mtcGMbmRPki/XcP9qdRmEmP9jOxrPXfEreyNhF2Br5nc6OUuha/6jVBYaGVTa4jikKRi6zLzR3Fm6PnYDvO+97JxTQcdh99rDuP3cbl++OTgArDKJK2SFLMk8nGW7Pd/8d2u2C7e7qGYSwx9kv2lzgs2RlPrDcLnn78y2L5VfJXFjJfb/+XHyPhJxNEhFJ8aBe9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"search MBR\"\n        title=\"search MBR\"\n        src=\"/static/f7eabc5918c6d802c4ceae00629d8920/2324c/search_mbr.png\"\n        srcset=\"/static/f7eabc5918c6d802c4ceae00629d8920/0eb09/search_mbr.png 500w,\n/static/f7eabc5918c6d802c4ceae00629d8920/1263b/search_mbr.png 1000w,\n/static/f7eabc5918c6d802c4ceae00629d8920/2324c/search_mbr.png 1229w\"\n        sizes=\"(max-width: 1229px) 100vw, 1229px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>위의 그림에서 분홍색 원안에 포함되어있는 모든 데이터를 반환하는 경우를 가정해보자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1462px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4a59a9528dd647d0f0fa1f50c4f4dd33/4ab23/search_tree.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.400000000000006%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACBUlEQVQoz42Sa28SURCG+bX+Cn+CJib6obFpTGwrimmsxNKgVWssKZVLhHKHbbkuULDcLwu7+zhnl27TL8bZTM5c3/POnPVZloVhGKxWK1fFNlYG2KDdVtiOv2CxXrI2117eq92o6lc4jUYDH/+Q1qjBXnJHwG3+R5rNpguo0G1RS9mi9kz8sfhjE3uxOR3bdmvkAlVvq1NU9SvxGN6BMRjAjyjM1QX3rGz1iWt3h3AagcVik1Bgrj5gaG9umFSrNHdfs14bbr3lMvBGnsxovtqlUyljmKYXv0vfA0pA17s0JDCazbi6uhay402x4gdrWQNTGWI4IZVOO81Kdb2FKY/2YOTSNRyGV96Iesfi4NjEJW6jdy3eB2UTc5dK4MgkW1bWimJlxP6HJUsZqtXaAFbrA0KfMx5grz8lFE57u1nOIRkfyK/j+t/P2mhVd4IbWeuOP8NCALvdNr5+/w+JRIxI5JR8vsBNr8eviyjR6BmpVErWNmXYuSWTSNLutBmPxpL/SSZ7yWLQoZ36Qi3xiWTsnGKxhC8WT/DGH2Bv/x3h8Amh47DYb53Yx+CR7KVJIHDAk6fPOI9ekM3m2Np6yWHoG8PfsofgIzh5jH/7Ocfhr/g0TSOXywm7PIVCgVKp7Nh5sYvFIvV6XWIlp0bTrqjVak6+XK7Qqmny4mn0yiXlUsHp+QtpJzM/fybErQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"search Tree\"\n        title=\"search Tree\"\n        src=\"/static/4a59a9528dd647d0f0fa1f50c4f4dd33/4ab23/search_tree.png\"\n        srcset=\"/static/4a59a9528dd647d0f0fa1f50c4f4dd33/0eb09/search_tree.png 500w,\n/static/4a59a9528dd647d0f0fa1f50c4f4dd33/1263b/search_tree.png 1000w,\n/static/4a59a9528dd647d0f0fa1f50c4f4dd33/4ab23/search_tree.png 1462w\"\n        sizes=\"(max-width: 1462px) 100vw, 1462px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>분홍색 원에 <code class=\"language-text\">A</code> MBR 과 <code class=\"language-text\">B</code> MBR이 모두 걸쳐 있기 때문에, <code class=\"language-text\">A</code> 와 <code class=\"language-text\">B</code> 모두 확인을 해본다.<br>\n<code class=\"language-text\">A</code> 의 자식 노드들 중에는 분홍색 원의 범위에 포함되는 MBR이 없으므로 <code class=\"language-text\">A</code> 브랜치의 검색은 종료된다.<br>\n반면, <code class=\"language-text\">B</code> 의 자식 노드들 중에는 <code class=\"language-text\">D</code> 가 범위에 포함되어 있다.<br>\n그리고 <code class=\"language-text\">D</code>의 자식 노드 중 <code class=\"language-text\">M</code>이 범위에 포함되기에 <code class=\"language-text\">M</code>의 데이터를 반환한다.</p>\n<h2>2-3. 인덱스 적용 안 되는 경우</h2>\n<p>어느정도 공간 인덱스를 이해한 것 같으니, 실행계획을 통해 인덱스가 잘 적용되는지 확인해보자.<br>\n인덱스가 정상적으로 등록되어 있지만, 몇몇 경우에 등록된 인덱스가 적용되지 않는 경우가 있다.<br>\n만약, 인덱스 등록은 정상적으로 이뤄졌으나 실행계획을 확인했을 때 인덱스가 적용되지 않는다면, 아래 항목들을 확인해보자.</p>\n<h3>2-3-1. 공간 함수 오용</h3>\n<p>대표적인 공간 데이터의 사용 예시는 <strong>기준점으로부터 반경 nKM 내에 있는 데이터를 검색</strong>하는 경우이다.<br>\n공간함수를 사용해서 예시의 결과를 반환하는 쿼리를 작성해 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> example <span class=\"token keyword\">WHERE</span> ST_DISTANCE<span class=\"token punctuation\">(</span><span class=\"token keyword\">point</span><span class=\"token punctuation\">,</span> ST_GeomFromText<span class=\"token punctuation\">(</span><span class=\"token string\">'POINT(10 20)'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4326</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">ST_DISTANCE</code> 함수를 활용해서 <code class=\"language-text\">point</code> 와 기준점(10, 20)의 거리가 5KM 이하인 모든 데이터를 가져오는 쿼리이다.<br>\n하지만 이 쿼리의 실행 계획을 확인해 보면 <code class=\"language-text\">type</code>이 <code class=\"language-text\">ALL</code>인 것을 확인할 수 있는데, 이는 곧, <strong>인덱스가 적용되지 않았다</strong>는 의미이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">EXPLAIN</span> <span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> example <span class=\"token keyword\">WHERE</span> ST_DISTANCE<span class=\"token punctuation\">(</span><span class=\"token keyword\">point</span><span class=\"token punctuation\">,</span> ST_GeomFromText<span class=\"token punctuation\">(</span><span class=\"token string\">'POINT(10 20)'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4326</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+-------------+</span>\n<span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> select_type <span class=\"token operator\">|</span> <span class=\"token keyword\">table</span>   <span class=\"token operator\">|</span> partitions <span class=\"token operator\">|</span> <span class=\"token keyword\">type</span> <span class=\"token operator\">|</span> possible_keys <span class=\"token operator\">|</span> <span class=\"token keyword\">key</span>  <span class=\"token operator\">|</span> key_len <span class=\"token operator\">|</span> ref  <span class=\"token operator\">|</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">|</span> filtered <span class=\"token operator\">|</span> Extra       <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+-------------+</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">1</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">SIMPLE</span>      <span class=\"token operator\">|</span> example <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>       <span class=\"token operator\">|</span> <span class=\"token keyword\">ALL</span>  <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>          <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span> <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>    <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span> <span class=\"token operator\">|</span>    <span class=\"token number\">1</span> <span class=\"token operator\">|</span>   <span class=\"token number\">100.00</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">Using</span> <span class=\"token keyword\">where</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+-------------+</span>\n<span class=\"token number\">1</span> <span class=\"token keyword\">row</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> warning <span class=\"token punctuation\">(</span><span class=\"token number\">0.01</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">R-Tree</code>는 <strong>MBR들의 포함관계</strong>를 이용하여 만들어진 트리라고 했다.<br>\n하지만 위의 <code class=\"language-text\">ST_DISTANCE</code>를 사용한 쿼리는 포함관계를 확인하는 것이 아니라, 모든 데이터와 기준점과의 거리를 계산하여 반환하는 쿼리이다.</p>\n<p>이러한 케이스는 <code class=\"language-text\">ST_DISTANCE</code> 대신 <code class=\"language-text\">ST_CONTAINS</code>와 <code class=\"language-text\">ST_BUFFER</code>를 활용하면 쉽게 해결할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> example <span class=\"token keyword\">WHERE</span> ST_CONTAINS<span class=\"token punctuation\">(</span>ST_BUFFER<span class=\"token punctuation\">(</span>ST_GeomFromText<span class=\"token punctuation\">(</span><span class=\"token string\">'POINT(10 20)'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4326</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">point</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">ST_BUFFER</code> 는 첫 번째 인자를 중심점으로 반지름이 두 번째 인자인 원을 그리는 함수이고,<br>\n<code class=\"language-text\">ST_CONTAINS</code> 는 첫 번째 인자가 두 번째 인자를 포함하는지 여부를 확인하는 함수이다.<br>\n즉, 위의 쿼리는 <code class=\"language-text\">POINT(10 20)</code>을 중심으로 반경 5KM 내에 있는 데이터를 조회하는 쿼리이다.</p>\n<p>수정한 쿼리는 공간 데이터 간의 포함관계를 이용하므로, 인덱스가 잘 적용되는 것을 확인할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">EXPLAIN</span> <span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> example <span class=\"token keyword\">WHERE</span> ST_CONTAINS<span class=\"token punctuation\">(</span>ST_BUFFER<span class=\"token punctuation\">(</span>ST_GeomFromText<span class=\"token punctuation\">(</span><span class=\"token string\">'POINT(10 20)'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4326</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">point</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------------+-----------+------------+-------+---------------+-----------+---------+------+------+----------+-------------+</span>\n<span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> select_type <span class=\"token operator\">|</span> <span class=\"token keyword\">table</span>     <span class=\"token operator\">|</span> partitions <span class=\"token operator\">|</span> <span class=\"token keyword\">type</span>  <span class=\"token operator\">|</span> possible_keys <span class=\"token operator\">|</span> <span class=\"token keyword\">key</span>       <span class=\"token operator\">|</span> key_len <span class=\"token operator\">|</span> ref  <span class=\"token operator\">|</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">|</span> filtered <span class=\"token operator\">|</span> Extra       <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------------+-----------+------------+-------+---------------+-----------+---------+------+------+----------+-------------+</span>\n<span class=\"token operator\">|</span>  <span class=\"token number\">1</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">SIMPLE</span>      <span class=\"token operator\">|</span> sridTest2 <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span>       <span class=\"token operator\">|</span> range <span class=\"token operator\">|</span> idx_point     <span class=\"token operator\">|</span> idx_point <span class=\"token operator\">|</span> <span class=\"token number\">34</span>      <span class=\"token operator\">|</span> <span class=\"token boolean\">NULL</span> <span class=\"token operator\">|</span>    <span class=\"token number\">1</span> <span class=\"token operator\">|</span>   <span class=\"token number\">100.00</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">Using</span> <span class=\"token keyword\">where</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+-------------+-----------+------------+-------+---------------+-----------+---------+------+------+----------+-------------+</span>\n<span class=\"token number\">1</span> <span class=\"token keyword\">row</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> warning <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>2-3-2. SRID 미 적용</h3>\n<p>두 번째 이유는 어딘가에 SRID가 적용되지 않았거나 서로 상이한 값을 사용했기 때문이다.\n다음 세 군데에 적용한 SRID 값이 모두 일치해야 인덱스가 정상적으로 동작한다.</p>\n<ol>\n<li>테이블의 컬럼 속성</li>\n<li>검색 쿼리의 SRID</li>\n<li>삽입된 데이터</li>\n</ol>\n<p>1-3 에서 얘기했듯, 테이블의 컬럼 속성에 SRID 값을 적용할 수 있다.\n이 부분에 SRID 값이 적용되지 않았다면, 인덱스는 적용되지 않는다.</p>\n<p>또한 검색 쿼리에 실수로 SRID를 미적용한 경우 역시 인덱스가 적용되지 않는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> example <span class=\"token keyword\">WHERE</span> ST_CONTAINS<span class=\"token punctuation\">(</span>ST_BUFFER<span class=\"token punctuation\">(</span>ST_GeomFromText<span class=\"token punctuation\">(</span><span class=\"token string\">'POINT(10 20)'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">point</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>위에서 사용한 쿼리를 예로 들어보자면, <code class=\"language-text\">ST_GeomFromText</code> 함수에 두 번째 인자로 SRID 값이 빠져있다.\n이런 경우에는 SRID값이 default인 0으로 지정되는데, 이때 point 데이터의 SRID값이 0이 아니라면 인덱스는 적용되지 않는다.\n포함관계를 이용한 검색의 경우에는 SRID 값이 일치해야 인덱스가 적용된다.</p>\n<p>마지막으로 삽입된 데이터들이 같은 SRID 값을 갖고있는 지 확인해 봐야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">SELECT</span> <span class=\"token keyword\">DISTINCT</span> ST_SRID<span class=\"token punctuation\">(</span><span class=\"token keyword\">point</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">FROM</span> example<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----------------+</span>\n<span class=\"token operator\">|</span> ST_SRID<span class=\"token punctuation\">(</span><span class=\"token keyword\">point</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----------------+</span>\n<span class=\"token operator\">|</span>              <span class=\"token number\">0</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span>           <span class=\"token number\">4326</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----------------+</span>\n<span class=\"token number\">2</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></code></pre></div>\n<p>위 쿼리를 실행했을 때 만약 예시와 같이 row가 두 개 이상 나온다면 데이터들의 SRID값이 통일되지 않았다는 뜻이다.\n안타깝게도 <code class=\"language-text\">MySQL</code>에서는 데이터의 SRID 값을 일괄적으로 변경할 수 있는 방법이 없다.<br>\n일일이 <code class=\"language-text\">UPDATE</code>문을 작성하거나, <code class=\"language-text\">DELETE</code> 후 새롭게 <code class=\"language-text\">INSERT</code>를 해줘야 한다.</p>\n<p>위 쿼리가 2개 이상의 row를 반환한다면, <code class=\"language-text\">아.. 오늘은 야근이구나..</code> 라고 생각하면 된다.</p>\n<p>하지만 다행히도, 1번의 내용인 컬럼 속성에 SRID 값이 설정되었다면, 나머지 2번 3번의 경우는 신경 쓰지 않아도 된다.\n<code class=\"language-text\">MySQL</code>은 기본적으로 <code class=\"language-text\">STRICT SQL MODE</code>가 활성화되어있기에 상이한 SRID 값의 삽입과 포함관계를 이용한 검색에 에러가 발생하기 때문이다.\n하지만 항상 만약이란 건 존재하기에 인덱스가 적용되지 않는다면, 꼭 한 번 확인을 해보자.</p>\n<h1>3. JPA로 공간 데이터 사용하기</h1>\n<p>공간 데이터와 충분히 친해진 것 같은 기분이 든다.<br>\n<code class=\"language-text\">hibernate 5.0</code> 부터 <code class=\"language-text\">Hibernate ORM</code>애 정식 라이브러리가 된 <code class=\"language-text\">Hibernate-spatial</code>을 이용하여 JPA로 공간 데이터의 입/출력을 다뤄보자.</p>\n<p><a href=\"https://docs.jboss.org/hibernate/orm/6.3/userguide/html_single/Hibernate_User_Guide.html#spatial\">Hibernate 공식문서</a>와 <a href=\"https://www.baeldung.com/hibernate-spatial\">Baeldung</a>을 함께 참고하면 좋다.</p>\n<h2>3-1. 설정</h2>\n<p>공간 데이터를 사용하기 위해서는 의존성을 하나 추가해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"groovy\"><pre class=\"language-groovy\"><code class=\"language-groovy\">implementation <span class=\"token string\">'org.hibernate.orm:hibernate-spatial:{hibernate vesion}'</span></code></pre></div>\n<p><code class=\"language-text\">hibernate-spatial</code>의 버전은 현재 프로젝트에 적용된 <code class=\"language-text\">hibernate</code>의 버전과 동일하게 작성해 주면 된다.<br>\n만약 사용하는 <code class=\"language-text\">hibernate</code>의 버전이 6.0 이전의 버전이라면, <code class=\"language-text\">Dialect</code> 설정을 따로 해주어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"groovy\"><pre class=\"language-groovy\"><code class=\"language-groovy\">spring<span class=\"token punctuation\">.</span>jpa<span class=\"token punctuation\">.</span>database<span class=\"token operator\">-</span>platform <span class=\"token operator\">=</span> org<span class=\"token punctuation\">.</span>hibernate<span class=\"token punctuation\">.</span>spatial<span class=\"token punctuation\">.</span>dialect<span class=\"token punctuation\">.</span>mysql<span class=\"token punctuation\">.</span>MySQL8SpatialDialect</code></pre></div>\n<p><code class=\"language-text\">hibernate 6.0</code> 부터는 spatial 관련 <code class=\"language-text\">Dialect</code>는 모두 <code class=\"language-text\">Deprecated</code>이다.</p>\n<blockquote>\n<p><strong>Hibernate-spatial</strong></p>\n<p><code class=\"language-text\">Point</code>, <code class=\"language-text\">LineString</code> 등의 데이터타입들은 <code class=\"language-text\">java</code> 표준 라이브러리도 아니고 <code class=\"language-text\">JDBC</code>의 사양도 아니다.<br>\n그렇기에 공간 데이터를 사용하기 위해서는 <code class=\"language-text\">JTS</code>라는 외부 라이브러리를 이용해서 공간 데이터를 사용해야 한다.</p>\n<p><code class=\"language-text\">hinernate-spatial</code>는 내부에 <code class=\"language-text\">JTS</code> 와 <code class=\"language-text\">geolatte-geom</code> 을 포함하고 있다.</p>\n</blockquote>\n<h2>3-2.  JTS 공간 데이터 다루기</h2>\n<p><code class=\"language-text\">hibernate spatial</code>은 <code class=\"language-text\">JTS</code>를 사용하여 공간 데이터에 대한 타입을 지원한다.<br>\n<code class=\"language-text\">Point</code>, <code class=\"language-text\">LineString</code>, <code class=\"language-text\">Polygon</code> 등의 공간 데이터를 사용하기 위해서는 <code class=\"language-text\">JTS</code>에서 제공하는 데이터 타입을 <code class=\"language-text\">import</code>해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>locationtech<span class=\"token punctuation\">.</span>jts<span class=\"token punctuation\">.</span>geom<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Point</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Entity</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"example\"</span><span class=\"token punctuation\">)</span>  \n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Coordinate</span> <span class=\"token punctuation\">{</span>  \n  \n    <span class=\"token annotation punctuation\">@Id</span>  \n    <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span>IDENTITY<span class=\"token punctuation\">)</span>  \n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>  \n  \n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Point</span> point<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>가장 흔하게 사용되는 <code class=\"language-text\">Point</code>와 <code class=\"language-text\">Polygon</code>을 생성해보면, 다른 타입에 대한 사용은 금새 익힐 수 있다.</p>\n<p>공간 데이터를 생성하는 방법에는 크게 두가지가 있다.<br>\n첫 번째는 <code class=\"language-text\">GeometryFactory</code> 를 사용하는 것이고,<br>\n두 번째는 <code class=\"language-text\">WKTReader</code>를 사용하는 것이다.</p>\n<p><em><code class=\"language-text\">WKT</code>에 대한 설명은 1-2를 참고</em></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>  \n<span class=\"token keyword\">void</span> <span class=\"token function\">createPointWithFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n    <span class=\"token comment\">//given  </span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">GeometryFactory</span> geometryFactory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GeometryFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">Coordinate</span> coordinate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Coordinate</span><span class=\"token punctuation\">(</span><span class=\"token number\">180</span><span class=\"token punctuation\">,</span> <span class=\"token number\">90</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n  \n    <span class=\"token comment\">//when  </span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">Point</span> point <span class=\"token operator\">=</span> geometryFactory<span class=\"token punctuation\">.</span><span class=\"token function\">createPoint</span><span class=\"token punctuation\">(</span>coordinate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n    point<span class=\"token punctuation\">.</span><span class=\"token function\">setSRID</span><span class=\"token punctuation\">(</span><span class=\"token number\">4326</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// SRID 설정  </span>\n  \n    <span class=\"token comment\">//then  </span>\n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">.</span><span class=\"token function\">getX</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">180</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">.</span><span class=\"token function\">getY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">90</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span>  \n\n<span class=\"token annotation punctuation\">@Test</span>  \n<span class=\"token keyword\">void</span> <span class=\"token function\">createPointWithWKT</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ParseException</span> <span class=\"token punctuation\">{</span>  \n    <span class=\"token comment\">//given  </span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">WKTReader</span> wktReader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WKTReader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">Geometry</span> read <span class=\"token operator\">=</span> wktReader<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"POINT(180 90)\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n  \n    <span class=\"token comment\">//when  </span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">Point</span> point <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Point</span><span class=\"token punctuation\">)</span> read<span class=\"token punctuation\">;</span>  \n    point<span class=\"token punctuation\">.</span><span class=\"token function\">setSRID</span><span class=\"token punctuation\">(</span><span class=\"token number\">4326</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n  \n    <span class=\"token comment\">//then  </span>\n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">.</span><span class=\"token function\">getX</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">180</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">.</span><span class=\"token function\">getY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">90</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">WKTReader</code>를 사용하는 방식은 <code class=\"language-text\">WKT</code> 를 읽어서 공간 데이터를 생성하는데, <code class=\"language-text\">WKT</code>는 모든 공간 데이터 타입의 입력이 가능하다. 그렇기 때문에 <code class=\"language-text\">read()</code>의 반환 값이 추상클래스인 <code class=\"language-text\">Geometry</code>타입을 반환하기에 다운캐스팅이 필요하다.<br>\n또한, <code class=\"language-text\">WKT</code>를 파싱하는 과정에서 발생할 수 있는 <code class=\"language-text\">ParseException</code>도 처리해줘야 하기에 사용하기에 번거롭기 때문에 개인적으로는 <code class=\"language-text\">GeometryFactory</code>를 사용하는 방식을 선호한다.</p>\n<p>어떠한 방식을 사용하든 꼭 한 가지 주의해야 할 점이 있다.<br>\nSRID 값이 4326이라는 가정하에, <code class=\"language-text\">MySQL</code> 에서 사용하는 <code class=\"language-text\">WKT</code>의 <code class=\"language-text\">X</code>, <code class=\"language-text\">Y</code> 값은 각각 위도와 경도이다.<br>\n<em>예시) POINT(위도 경도)</em></p>\n<p>그런데 <code class=\"language-text\">new Coordinate()</code>의 인자와 <code class=\"language-text\">WKTReader</code>가 읽는 <code class=\"language-text\">WKT</code> 모두 경도, 위도 순이다.<br>\n<em>예시) <code class=\"language-text\">new Coordinate(경도, 위도)</code>, <code class=\"language-text\">wktReader.read(\"POINT(경도 위도)\")</code></em></p>\n<p>SRID 값에 따라 <code class=\"language-text\">X, Y</code>가 각각 의미하는 값이 달라질 수 있기에 이런 차이가 발생한 듯하다.</p>\n<p>그런데 데이터의 삽입과정과 일반적인 조회에서는 <code class=\"language-text\">X, Y</code>에 그 어떤 값이 들어가도 예외가 발생하지 않는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">selectWithSpatialException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//given</span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">Point</span> point <span class=\"token operator\">=</span> geometryFactory<span class=\"token punctuation\">.</span><span class=\"token function\">createPoint</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Coordinate</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">110</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    point<span class=\"token punctuation\">.</span><span class=\"token function\">setSRID</span><span class=\"token punctuation\">(</span><span class=\"token number\">4326</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">CoordinateEntity</span> coordinateEntity <span class=\"token operator\">=</span> repository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">CoordinateEntity</span><span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">//when</span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">CoordinateEntity</span> saved <span class=\"token operator\">=</span> repository<span class=\"token punctuation\">.</span><span class=\"token function\">findById</span><span class=\"token punctuation\">(</span>coordinateEntity<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">//then</span>\n    <span class=\"token function\">assertSoftly</span><span class=\"token punctuation\">(</span>softAssertions <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>saved<span class=\"token punctuation\">.</span><span class=\"token function\">getPoint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getX</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>saved<span class=\"token punctuation\">.</span><span class=\"token function\">getPoint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">110</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>예외는 MySQL에서 <code class=\"language-text\">ST_X</code> 또는 <code class=\"language-text\">ST_Y</code>를 통해 point의 값을 위도 경도로 변환하려 할 때 발생한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token triple-quoted-string string\">\"\"\"\n        SELECT co.id AS id, st_x(co.point) AS latitude, st_y(co.point) AS longitude\n        FROM example AS co\n        WHERE co.id = :id\n        \"\"\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token class-name\">Optional</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CoordinateDto</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findCoordinatesById</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>공간함수인 <code class=\"language-text\">ST_X</code> 와 <code class=\"language-text\">ST_Y</code> 를 이용해 위도, 경도 값을 변환하여 반환받는 쿼리이다.<br>\n<em>JPA에서 사용 가능한 공간함수에 대한 설명은 3-3에서 조금 더 자세히 다룬다.</em></p>\n<p>위 메서드를 실행시켜보면, 위도 범위를 벗어났다는 예외가 발생한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Caused by: com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: \nA parameter of function st_x contains a geometry with latitude 110.000000, \nwhich is out of range. It must be within [-90.000000, 90.000000].\n\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:104)\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:972)\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)\n\tat org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:217)\n\t... 111 more</code></pre></div>\n<p>데이터를 삽입하는 순간에는 문제가 발생하지 않지만, 공간함수를 사용한 조회에서는 예외가 발생할 수 있다는 것은 문제사항에 대한 인지를 늦추게 된다. 이를 방지 하기 위해 공간 데이터를 사용하는 엔티티를 생성하는 시점에 위도 경도 범위에 따른 검증 절차를 추가해주는 것이 바람직하다고 생각한다.</p>\n<p>다음은 <code class=\"language-text\">Polygon</code> 을 생성하는 코드이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>  \n<span class=\"token keyword\">void</span> <span class=\"token function\">createPolygonWithFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n    <span class=\"token comment\">//given  </span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">GeometryFactory</span> geometryFactory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">GeometryFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">Coordinate</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> coordinates <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Coordinate</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">{</span>  \n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">Coordinate</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>  \n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">Coordinate</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>  \n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">Coordinate</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>  \n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">Coordinate</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>  \n            <span class=\"token keyword\">new</span> <span class=\"token class-name\">Coordinate</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>  \n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>  \n    \n    <span class=\"token comment\">//when  </span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">Polygon</span> polygon <span class=\"token operator\">=</span> geometryFactory<span class=\"token punctuation\">.</span><span class=\"token function\">createPolygon</span><span class=\"token punctuation\">(</span>coordinates<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n    polygon<span class=\"token punctuation\">.</span><span class=\"token function\">setSRID</span><span class=\"token punctuation\">(</span><span class=\"token number\">4326</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// SRID 설정  </span>\n  \n    <span class=\"token comment\">//then  </span>\n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>polygon<span class=\"token punctuation\">.</span><span class=\"token function\">getCoordinates</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">hasSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span>  \n  \n<span class=\"token annotation punctuation\">@Test</span>  \n<span class=\"token keyword\">void</span> <span class=\"token function\">createPolygonWithWKT</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ParseException</span> <span class=\"token punctuation\">{</span>  \n    <span class=\"token comment\">//given  </span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">WKTReader</span> wktReader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WKTReader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">Geometry</span> read <span class=\"token operator\">=</span> wktReader<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"POLYGON((0 0, 10 0, 10 10, 0 10, 0 0))\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n  \n    <span class=\"token comment\">//when  </span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">Polygon</span> polygon <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Polygon</span><span class=\"token punctuation\">)</span> read<span class=\"token punctuation\">;</span>  \n    polygon<span class=\"token punctuation\">.</span><span class=\"token function\">setSRID</span><span class=\"token punctuation\">(</span><span class=\"token number\">4326</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n  \n    <span class=\"token comment\">//then  </span>\n    <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>polygon<span class=\"token punctuation\">.</span><span class=\"token function\">getCoordinates</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">hasSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">Polygon</code>을 생성할 때는 주의해야 할 점들이 있다.</p>\n<ol>\n<li>마지막 좌표는 항상 시작점 이어야 한다.\n<code class=\"language-text\">Polygon</code>은 다각형의 모양인데, 마지막 좌표가 시작점이 아니라면 닫혀있는 형태가 아니게 된다.</li>\n<li>구멍 뚫린 <code class=\"language-text\">Polygon이 생성 가능하다.</code>\n<code class=\"language-text\">Polygon</code> 내부에 구멍이 뚫려 튜브 또는 도넛 형태의 <code class=\"language-text\">Polygon</code>을 생성 할 수 있다.</li>\n</ol>\n<p><code class=\"language-text\">GeometryFactory</code> 에서는 구멍을 위해 두 번째 인자로 <code class=\"language-text\">LinearRing[]</code> 을 받는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">Polygon</span> <span class=\"token function\">createPolygon</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LinearRing</span> shell<span class=\"token punctuation\">,</span> <span class=\"token class-name\">LinearRing</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> holes<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Polygon</span><span class=\"token punctuation\">(</span>shell<span class=\"token punctuation\">,</span> holes<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위에 내가 사용한 예시처럼 <code class=\"language-text\">Coordinate[]</code> 하나만 인자로 사용하게 되면 구멍이 없는 <code class=\"language-text\">Polygon</code>이 생성된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">Polygon</span> <span class=\"token function\">createPolygon</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Coordinate</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> shell<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n  <span class=\"token keyword\">return</span> <span class=\"token function\">createPolygon</span><span class=\"token punctuation\">(</span><span class=\"token function\">createLinearRing</span><span class=\"token punctuation\">(</span>shell<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">Polygon</span> <span class=\"token function\">createPolygon</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LinearRing</span> shell<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n  <span class=\"token keyword\">return</span> <span class=\"token function\">createPolygon</span><span class=\"token punctuation\">(</span>shell<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">WKT</code>에서는 <code class=\"language-text\">POLYGON((0 0, 10 0, 10 10, 0 10, 0 0), (2 2, 2 4, 4 4, 4 2))</code>\n이런 방식으로 구멍이 뚫린 <code class=\"language-text\">Polygon</code>을 생성할 수 있다.</p>\n<p>위에 내가 사용한 예시처럼 하나의 인자만 넣어준다면, 구멍이 없는 <code class=\"language-text\">Polygon</code>이 생성된다.</p>\n<h2>3-3. 공간함수를 사용한 조회</h2>\n<p>기본적인 <code class=\"language-text\">CRUD</code>는 여타 다른 데이터와 동일하게 <code class=\"language-text\">DataJpa</code>가 마법처럼 해결해 준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"example\"</span><span class=\"token punctuation\">)</span>  \n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Coordinate</span> <span class=\"token punctuation\">{</span>  \n  \n    <span class=\"token annotation punctuation\">@Id</span>  \n    <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span>IDENTITY<span class=\"token punctuation\">)</span>  \n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>  \n  \n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Point</span> point<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">CoordinateRepo</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">JpaRepository</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CoordinateEntity</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Long</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>우리가 궁금한 건</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> example <span class=\"token keyword\">WHERE</span> ST_CONTAINS<span class=\"token punctuation\">(</span>ST_BUFFER<span class=\"token punctuation\">(</span>ST_GeomFromText<span class=\"token punctuation\">(</span><span class=\"token string\">'POINT(10 20)'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4326</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">point</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이런 쿼리를 적용하는 방법이다.</p>\n<p><a href=\"https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#spatial-configuration-dependency\">hibernate 공식 문서</a><code class=\"language-text\">Table 5. Hibernate Spatial dialect function support</code> 항목을 참고하면 공간 함수 별로 지원 여부가 표시되어 있는데, 다른 DB는 모르겠지만 <code class=\"language-text\">MySQL</code>은 5.6 이전 버전으로 표가 만들어져 있다.</p>\n<p>표를 믿지 말고, <a href=\"https://dev.mysql.com/doc/refman/8.0/en/spatial-function-reference.html\">MySQL 공식 문서</a>와 비교를 해가며 사용해야 한다.</p>\n<p><code class=\"language-text\">hibernate</code>에서 지원하고 <code class=\"language-text\">MySQL</code>도 지원하는 공간 함수라면, <code class=\"language-text\">JPQL</code>이 사용 가능하다.</p>\n<p>위에서 얘기한 예시를 이용해 기준점으로부터 반경 5Km 내에 위치한 데이터들을 가져오는 기능을 만들어 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Query</span><span class=\"token punctuation\">(</span><span class=\"token triple-quoted-string string\">\"\"\"  \n        SELECT co  \n        FROM example AS co  \n        WHERE st_contains(st_buffer(:center, :radius), co.point)  \n        \"\"\"</span><span class=\"token punctuation\">)</span>  \n<span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CoordinateEntity</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findAllWithInCircleArea</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"center\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Point</span> center<span class=\"token punctuation\">,</span>  \n                                               <span class=\"token annotation punctuation\">@Param</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"radius\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> radius<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">MySQL</code>의 <code class=\"language-text\">ST_COTAINS</code>와 <code class=\"language-text\">ST_BUFFER</code>는  <code class=\"language-text\">hibernate</code>에서 지원을 해주기 때문에 <code class=\"language-text\">JPQL</code>로 사용이 가능하다.\n기준점과 반지름을 인자로 받아 쿼리를 생성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Test</span>  \n<span class=\"token keyword\">void</span> <span class=\"token function\">findAllWithInCircle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>  \n    <span class=\"token comment\">//given  </span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">Point</span> point <span class=\"token operator\">=</span> geometryFactory<span class=\"token punctuation\">.</span><span class=\"token function\">createPoint</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Coordinate</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n    point<span class=\"token punctuation\">.</span><span class=\"token function\">setSRID</span><span class=\"token punctuation\">(</span><span class=\"token number\">4326</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">CoordinateEntity</span> ce1 <span class=\"token operator\">=</span> repository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">CoordinateEntity</span><span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n  \n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">Point</span> point2 <span class=\"token operator\">=</span> geometryFactory<span class=\"token punctuation\">.</span><span class=\"token function\">createPoint</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Coordinate</span><span class=\"token punctuation\">(</span><span class=\"token number\">40</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n    point2<span class=\"token punctuation\">.</span><span class=\"token function\">setSRID</span><span class=\"token punctuation\">(</span><span class=\"token number\">4326</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n    repository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">CoordinateEntity</span><span class=\"token punctuation\">(</span>point2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n  \n    <span class=\"token comment\">//when  </span>\n    <span class=\"token keyword\">final</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CoordinateEntity</span><span class=\"token punctuation\">></span></span> allContainArea <span class=\"token operator\">=</span> repository<span class=\"token punctuation\">.</span><span class=\"token function\">findAllWithInCircleArea</span><span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n  \n    <span class=\"token comment\">//then  </span>\n    <span class=\"token function\">assertSoftly</span><span class=\"token punctuation\">(</span>softAssertions <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>  \n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>allContainArea<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">hasSize</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>allContainArea<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span>ce1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>allContainArea<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getPoint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getX</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>allContainArea<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getPoint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>테스트를 실행시켜 정상적으로 동작하는 것을 확인 할 수 있다.</p>\n<h1>나오며</h1>\n<p><code class=\"language-text\">MySQL</code> 에서의 공간 데이터, 공간 함수, 공간 인덱스 그리고 <code class=\"language-text\">DataJpa</code>에서의 적용까지 알아보았다.</p>\n<p>물론 공간 데이터와 관련된 복잡한 기능개발을 위해서는 부족한 글일 수 있다.\n그래도 이 글이 낯설기만 했던 공간 데이터와 한 걸음 더 가까워질 수 있는 기회가 되면 좋겠다.</p>\n<hr>\n<h4>참고 자료</h4>\n<ul>\n<li>8.4 R-Tree 인덱스 | Real MySQL 8.0</li>\n<li><a href=\"https://dev.mysql.com/doc/refman/8.0/en/spatial-types.html\">11.4 Spatial Data Types | MySQL</a></li>\n<li><a href=\"https://dev.mysql.com/doc/refman/8.0/en/spatial-analysis-functions.html\">12.16 Spatial Analysis Functions | MySQL</a></li>\n<li><a href=\"https://docs.jboss.org/hibernate/orm/6.1/userguide/html_single/Hibernate_User_Guide.html#spatial\">19. Spatial | Hibernate</a></li>\n<li><a href=\"https://www.baeldung.com/hibernate-spatial\">Introduction to Hibernate Spatial | Baeldung</a></li>\n</ul>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"들어가며"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"성수동에 위치한 힙하고 트렌디한 카페를 쉽게 찾을 수 있는 "},{"type":"element","tagName":"a","properties":{"href":"https://yozm.cafe"},"children":[{"type":"text","value":"요즘카페"}]},{"type":"text","value":" 서비스에 지도 기능을 추가하기로 했다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 982px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/5a8449a9ca2afdadbd779574ef6c6ce6/9e029/map_example.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 159.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAgCAYAAAASYli2AAAACXBIWXMAABYlAAAWJQFJUiTwAAAGQklEQVRIx1VW+VPbZhDV/93pD5n+0M502unQNtPpDOmVo02aA0iggUC5GhqOAMYQjPEtS75025ZkGV7frqDTekZYlr5vv327773FyBoNxJubiFdXEW9tYby0iMw0IZ/rqyvkn+v872ika9NCAdHsLPzPPkN07x7Cb7+F/8knmJRKMCRgsrGBhMHSvT3Ey8uYWtZNnGv875MkSHZ2MPlwhtHDhwhnZjB68ABDBg++/BJZpQJjOp0im0wwyTJkV9eY8Pdkkuk1nV4hjmOE0RDV4i7CwEOaTnRNxuwzfidxwjUJpjw85W+jZlpotVqo1+sw+T0kLL03W6jVari8vESLJaiVPyDwPSQMmGVTDByHB0UYJymG41j39foDGG27g2azBcf1NJMgCOH5PizLhstnvb4Du9NDEA5vrgiO4+r7cvmS+1yMmaHsi4ZDGJbVgWl1sb28gNPDXYziiQbuDUKWYYqYGUTRiIcEGDETu9NFs2VqRrKuz0wjZqrJcJ0hpw0cH2dHu6iWz+F4Ecy2jc3lRYRhHmQwyLOQDHT9gEGGI1QuSigcHsH3Qx4wxuLjH2CkaYoRT0smeTZDLuz2HGwuPkG9VidEyS6C5+WluGLjQkIXJJtLT/FmbQ7RRGLERPgOhgTwg4in+JqFQOn2+vC5STIPCcMhLMnM9QI2JtA15XIZQ747tctwxyH6LMXK/BMYrjPA3P3vdYMz6PD0CB2+PC9doE0+CrXX5h/haHcbjdolVp79zPo6KBSOlWpSW5MNkrpuv34Oo1kto14+w3XqYVh9iXic5F0LCdHztATCP0HguQ7cvk061dlli+/GrPFY19SqFcQpebi3tYYgAbZPSZVGG363g4DZDqMwX8ymSBbSxSnJLNSpkp+e5ytVXH53bBvzP3+tKI1Op68crNoRPpRbSt5B18HyXg+rhy7i0NMu+twoEJN4rNQxKQhpUs7bAJXyBRYefAdjklFu2RVGw1DV4XOBHwRo9SLULGZG4vq9AcIO69QwsVNoUX6J1trlu0DXRxq0dPIextbyPG8OqUVgPM51KwoZE+4VIf65soSNuYcYmxvYXnyK7T9X1CfiJCN1UuWmwJca98kK42R/B1azRrEDxWIRlt1Fn12c/epTlOgq5fMzVM4OcFrr6YY0IWQi+ePpL3gz9yufuZptW6R4UYYRsVMuSRsxs263p1r12c2XD+7CtkyaAR1lkvuiT1hxmqFRKeH17z8Q2QEDddSRRBhbr1/AGFEyY149klnqcUsXgRMnE1pgjONzE0dnJVhkgGm2SXgPEZUhyYiOpe6iHqGXIfD61Kq4ivDL4WI5xPMCpY3U9kOxgF9/msHm2qK6jOwRmBIwt7smGg02ix5qHB+8w+5fGyge7sGiTQlsOVFMQbJtNZsK9+3aH7g/c4clyLQB0ryzwhHstqk+KKiEXka328Xx7hZO9t/SaRiAEpKuiVo6VhsL9+9qfRqVC9Zsny59rXQZEvL6wiNcnB5pQ29VZZhti/VK1MukMbkCAqWDbozIr+Ih1hef6aiyqIpev69cFdWIbUmzQq09aSM/bmUkAQVmzsdI+ShBurZJv3ynFJGS1BtN7a4EkXkiMWRc9Ho9MVhPN0qR5RIoAlfuZbGUpETn6VItgkaCSOaaBNcEN/WWg5qcSYYEE9nY7J6Iu07XqFerWg/R7GWlipPiKTs7+JdSuocsaHAWyQgRZMMbGukIENtZevIjClTNwfYK9rbeaCMkmASQ08XyU47bcZx3X8ZAs2lqx+WSMSGX4QdDhSNu4To5v25poY25kZbAuuWe1FjGxn+FIM8FqXHyfh+1ekNHpUw34aDr+jkMZtUnx/wbPxxRORbHrk2965jgc/FDOexwd4c0s2DMk2fih1IXsXFRgcd7ixtKlTou6y00OAUvaw2sLM7jt9mvsL78Skdv3lBfy7H64j7MRg2GFF7qKDBrlJDAFygx/4/R+UwqiJmOkikefXMHx3+v638NkoTAlE7LlJRElNhCTNFjh5AFiuf6qmHRczRKUXz/N3784mOUzk7/LceIc6fBhrSZ+YDJzH7+Efb+2uQBsTQlVA06A3bTG8AedOl5qZ4shzgMsL+1jOLBW6R0d+0qHVpGrAQV2hR2N7H+6jFWnj/CP6mcRArAa0D6AAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"지도 기능 예시","title":"지도 기능 예시","src":"/static/5a8449a9ca2afdadbd779574ef6c6ce6/9e029/map_example.png","srcSet":["/static/5a8449a9ca2afdadbd779574ef6c6ce6/0eb09/map_example.png 500w","/static/5a8449a9ca2afdadbd779574ef6c6ce6/9e029/map_example.png 982w"],"sizes":["(max-width:","982px)","100vw,","982px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"기능 개발을 위해 공부하던 중 공간 데이터에 대해 알게 되었다.."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"공간 데이터는 좌표계를 통한 지리적인 위치 데이터를 의미한다.\n좌표계라는 단어가 굉장히 생소하게 느껴지지만 한 번쯤은 들어봤을 위도와 경도 또한 가장 일반적으로 사용되는 좌표계 중 하나다.\n좌표계는 지구 상의 특정 위치를 정확하게 나타내기 위해 사용되는 시스템으로, 각각의 목적에 따라 여러 종류가 존재한다.\n이 글에서는 위도/경도 좌표계를 사용하는 공간 데이터를 다루고 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"공간 데이터에 대해 학습하고 적용하는 과정에서 수많은 시행착오를 거쳤다.\n처음 접해본 개념인데다가, 레퍼런스도 여기저기 흩어져 있어 여간 애를 먹은 게 아니었다.\n한 번에 정리된 글이 있으면 좋을 것 같아, 학습한 내용을 공유하고자 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"1. MySQL의 공간 데이터"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"1-1. 공간 데이터 타입"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1390px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/89dbdb4036cfb12c8dc59529ae646613/55991/spatial_types.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 46%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABMElEQVQoz22SW6uCUBCF/f8/q8fwSQgVKRPxhmlaeamsiW9gRDhnweDsNbPXXLbO4/GQ1+slz+dTzXy+wzBI3/fy+Xzk/X7LPM/6hfM8T+q6FgBPPloOBwM+5BZJkujFaZpWrus65auqkjiOV54cxxK/369Wx/DpClCgaRq9vCyLcsSyLJM0TaUoiv8FASO2bbueETZBYlswdlmWa+E/gnTGHmx0xrTxbZ/jOGredkX3+13FiWHO7XZTZcYhAM7nsxwOBx0JXC4X2e12st/vdUTyT6eThGEoruuK7/vaAPf1UVAGiFqXQRBIFEXqk4xgnudajEeh4PF41A45sxbtEEG6vF6vOiJ7I8F2R5xCPAocArZf8riLrTtkN/a/EUAAHzNhKnOmKMZ/Cs8DmsGR9wNns7R6+ZL5CAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"공간 데이터 타입","title":"공간 데이터 타입","src":"/static/89dbdb4036cfb12c8dc59529ae646613/55991/spatial_types.png","srcSet":["/static/89dbdb4036cfb12c8dc59529ae646613/0eb09/spatial_types.png 500w","/static/89dbdb4036cfb12c8dc59529ae646613/1263b/spatial_types.png 1000w","/static/89dbdb4036cfb12c8dc59529ae646613/55991/spatial_types.png 1390w"],"sizes":["(max-width:","1390px)","100vw,","1390px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"MySQL에서 제공하는 공간 데이터의 종류는 총 7가지이다.\n단일 타입으로는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Point"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"LineString"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Polygon"}]},{"type":"text","value":" 세 가지가 있고,\n나머지 타입들은 이 세 가지 타입의 조합이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Point"}]},{"type":"text","value":" : 좌표 공간의 한 지점"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"LineString"}]},{"type":"text","value":" : 다수의 Point를 연결해 주는 선분"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Polygon"}]},{"type":"text","value":" : 다수의 선분이 연결되어 닫혀있는 상태"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1362px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/f252e97699bfa058be35fc7f30bc0eee/7046d/spatial_types_cli.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 33.800000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABa0lEQVQozyVR13KCUBDlYxLsigJSFFQ6KLZEFB1LyiT5/x842V0fGO5yOXWVNN9DN2YYaFO4kwTF8h1jO8RgOIU28uDPcsTpFkFUyl0QrbEqK8zmBYrVASHNjHfcGIY5h8KAvjZBr+/CdiKstyfMgxX6g+c3j+4Z5BNBXrwhzfaIky1Ma4GM5ijeYEH/J9kOOhPyodE08drQReFUfyAj152ejRd1BGcSY1keJAELsyCTN9tjSdAbuJJmpPvQ6K2wm3bXgtowRGGzqxElG4n9quqwnBCr9VGALSIp6bwIS3S6togyjp9myxRipb58SSdq04AxXqA6PXC5fsPzMwFNvJQIK3HXpnm7O0uPfMeVMBG7ZVPa0INyu/+iOt4RkKpNxdbnT1zvP7g//qivnSzlUN3EIYOP9QO8SCbp9Bxyp4sZnsXhkjaV5c+yOUpOm+SyuVsu250msmWLKjApAYvwokwrkJm7G458ScfPP/fw85JYlM5TAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"공간 데이터 타입 MySQL","title":"공간 데이터 타입 MySQL","src":"/static/f252e97699bfa058be35fc7f30bc0eee/7046d/spatial_types_cli.png","srcSet":["/static/f252e97699bfa058be35fc7f30bc0eee/0eb09/spatial_types_cli.png 500w","/static/f252e97699bfa058be35fc7f30bc0eee/1263b/spatial_types_cli.png 1000w","/static/f252e97699bfa058be35fc7f30bc0eee/7046d/spatial_types_cli.png 1362w"],"sizes":["(max-width:","1362px)","100vw,","1362px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"각각의 컬럼에는 당연하게도 알맞은 데이터 타입만 입력할 수 있지만,\n"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"geometry"}]},{"type":"text","value":" 타입에는 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"모든 공간 데이터 타입의 입력이 가능"}]},{"type":"text","value":"하다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"1-2. 공간 함수"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"공간 데이터들은 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"공간 함수"}]},{"type":"text","value":"를 통해 활용할 수 있다.\n공간 함수에 대해선 "},{"type":"element","tagName":"a","properties":{"href":"https://dev.mysql.com/doc/refman/8.0/en/spatial-function-reference.html"},"children":[{"type":"text","value":"공식 문서"}]},{"type":"text","value":" 에 잘 소개되어 있으니, 여기서는 대표적으로 사용 되는 몇 가지의 함수만 확인하려 한다."}]},{"type":"text","value":"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{"type":"element","tagName":"table","properties":{},"children":[{"type":"element","tagName":"thead","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"함수명"}]},{"type":"element","tagName":"th","properties":{},"children":[{"type":"text","value":"설명"}]}]}]},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"ST_GeomFromText(WKT"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"[, SRID]"}]},{"type":"text","value":")"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"WKT와 SRID를 통해 geometry를 생성한다."}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"ST_Buffer("},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"(Multi)"}]},{"type":"text","value":" Point, Radius)"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"Point(또는 MultiPoint)로 부터 Radius를 반지름으로 갖는 원을 그린다."}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"ST_Contains(geom(a), geom(b))"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"b가 a에 포함되어 있으면 1을 반환, 아니면 0을 반환."}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"ST_Within(geom(a), geom(b))"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"a가 b에 포함되어 있으면 1을 반환, 아니면 0을 반환.(ST_contains와 인자가 반대)"}]}]},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"ST_Distance(geom(a), geom(b))"}]},{"type":"element","tagName":"td","properties":{},"children":[{"type":"text","value":"a와 b 사이의 거리"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"WKT"}]},{"type":"text","value":"("},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"W"}]},{"type":"text","value":"ell-"},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"K"}]},{"type":"text","value":"nown-"},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"T"}]},{"type":"text","value":"ext)는 공간 데이터를 텍스트 형식으로 표현하는 방법 중 하나이다.\nWKT는 기하학적인 객체를 설명하기 위해 사용되며, 다양한 유형의 공간 개체를 나타낼 수 있다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"예) POINT(80 110) , LINESTRING(0 0, 10 10) , POLYGON(0 0, 10 10, 20 20, 0 0)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"ST_"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ST_"}]},{"type":"text","value":" 라는 prefix가 붙어있는데, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Spatial"}]},{"type":"text","value":"의 약어이다.\n공간 함수라는 것을 명시적으로 보여주고, 다른 함수들과 네이밍이 겹치지 않게끔 하는 역할을 한다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"1-3. SRID"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"공간 데이터를 설명하며 빼놓을 수 없는 개념 중 하나인,\nSRID("},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"S"}]},{"type":"text","value":"patial "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"R"}]},{"type":"text","value":"eference "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Id"}]},{"type":"text","value":"entifier)는 데이터의 좌표계를 구분할 수 있는 식별 코드이다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n가장 흔하게 사용되는 값은 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"4326"}]},{"type":"text","value":"으로 위도(Latitude)와 경도(Longitude)를 사용하여 위치를 표현하는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"WGS84"}]},{"type":"text","value":" 좌표계를 의미한다.\n이는 GPS 및 다양한 GIS 솔루션에서 널리 사용된다고 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"MySQL"}]},{"type":"text","value":"에 입력되는 데이터에도 이 SRID 값을 지정해 줄 수가 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"text","value":"mysql"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"DESC"}]},{"type":"text","value":" sridTest"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-------+--------+------+-----+---------+----------------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" Field "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"Type"}]},{"type":"text","value":"   "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"Null"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"Key"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"Default"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" Extra          "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-------+--------+------+-----+---------+----------------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" id    "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"bigint"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"NO"}]},{"type":"text","value":"   "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" PRI "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"NULL"}]},{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"auto_increment"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" YES  "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"     "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"NULL"}]},{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"                "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-------+--------+------+-----+---------+----------------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"rows"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"in"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"set"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.00"}]},{"type":"text","value":" sec"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n\nmysql"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"INSERT"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"INTO"}]},{"type":"text","value":" sridTest "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"VALUES"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"ST_PointFromText"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'POINT(10 20)'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nQuery OK"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"row"}]},{"type":"text","value":" affected "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.01"}]},{"type":"text","value":" sec"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n\nmysql"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"INSERT"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"INTO"}]},{"type":"text","value":" sridTest "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"VALUES"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"ST_PointFromText"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'POINT(10 20)'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4326"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nQuery OK"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"row"}]},{"type":"text","value":" affected "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.00"}]},{"type":"text","value":" sec"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n\nmysql"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"select"}]},{"type":"text","value":" id"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" ST_SRID"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"AS"}]},{"type":"text","value":" SRID "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"FROM"}]},{"type":"text","value":" sridTest"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"----+------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" id "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" SRID "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"----+------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"3"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4326"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"----+------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"rows"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"in"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"set"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.00"}]},{"type":"text","value":" sec"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위의 그림에서 첫 번째 데이터는 SRID 값을 지정해 주지 않아 기본값인 0으로 입력이 되었다.\n문제는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"MySQL"}]},{"type":"text","value":"에는 한 번 입력된 데이터의 SRID 값을 수정할 수 있는 방법이 없다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n즉, 해당 데이터를 지우고 다시 입력하거나, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"UPDATE"}]},{"type":"text","value":" 쿼리를 사용해야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"한두 개의 데이터야 직접 수정하면 된다지만, 잘못 작성된 쿼리로 입력된 데이터가 100개, 1000개, 10000개가 된다면,\n이를 수정하는 것은 제법 귀찮은 일이 될 것이 분명하다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n귀찮은 일의 발생을 막기 위해 처음부터 값을 잘 입력하는 것이 매우 중요한데,\nTable의 컬럼속성에 SRID 값을 설정해 준다면, 이러한 실수를 미리 방지할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"CREATE"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"TABLE"}]},{"type":"text","value":" sridTest2 "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"\n\tid "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"bigint"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"auto_increment"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"primary"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"key"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n\t"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"text","value":" SRID "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4326"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이런 식으로 Table 생성 시 SRID 값을 지정해 주거나,"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"ALTER"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"TABLE"}]},{"type":"text","value":" sridTest2 "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"MODIFY"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"COLUMN"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"text","value":" SRID "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4326"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"ALTER"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"TABLE"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"테이블명"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"MODIFY"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"COLUMN"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"컬럼명"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"컬럼유형"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" SRID "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"SRID 코드번호"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ALTER TABLE"}]},{"type":"text","value":"을 통해 SRID 값을 변경해 줄 수 있다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"물론, 두 번째 방법은 하나의 데이터라도 컬럼에 지정하려는 SRID값과 일치하지 않는다면 에러가 발생한다."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위와 같은 방법으로 컬럼에 직접 SRID 값을 지정해 주었다면, 데이터 삽입 시 다른 SRID 값을 입력하려 하면 에러가 발생한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"text","value":"mysql"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"INSERT"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"INTO"}]},{"type":"text","value":" sridTest2 "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"VALUES"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"ST_PointFromText"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'POINT(10 20)'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  \nERROR "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"3643"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"HY000"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":": The SRID "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"of"}]},{"type":"text","value":" the "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"geometry"}]},{"type":"text","value":" does "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"not"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"match"}]},{"type":"text","value":" the SRID "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"of"}]},{"type":"text","value":" the "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"column"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'point'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":" \nThe SRID "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"of"}]},{"type":"text","value":" the "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"geometry"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"is"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" but the SRID "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"of"}]},{"type":"text","value":" the "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"column"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"is"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4326."}]},{"type":"text","value":" \nConsider changing the SRID "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"of"}]},{"type":"text","value":" the "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"geometry"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"or"}]},{"type":"text","value":" the SRID property "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"of"}]},{"type":"text","value":" the "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"column"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"컬럼에 지정한 SRID 값과 일치하는 값을 입력해주면 정상적으로 데이터가 삽입된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"text","value":"mysql"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"INSERT"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"INTO"}]},{"type":"text","value":" sridTest2 "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"VALUES"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"ST_PointFromText"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'POINT(10 20)'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4326"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\nQuery OK"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"row"}]},{"type":"text","value":" affected "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.01"}]},{"type":"text","value":" sec"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n\nmysql"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"SELECT"}]},{"type":"text","value":" id"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n       ST_X"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"AS"}]},{"type":"text","value":" latitude"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n       ST_Y"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"AS"}]},{"type":"text","value":" longitude"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n       ST_SRID"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"AS"}]},{"type":"text","value":" SRID\n       "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"FROM"}]},{"type":"text","value":" sridTest2"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"----+----------+-----------+------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" id "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" latitude "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" longitude "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" SRID "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"----+----------+-----------+------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"       "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"10"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"        "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"20"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4326"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"----+----------+-----------+------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"row"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"in"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"set"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.00"}]},{"type":"text","value":" sec"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"2. 공간 인덱스"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"데이터베이스에서 데이터를 빠르게 검색하고 조회 성능을 향상하기 위해 인덱스를 사용한다.\n공간 데이터도 마찬가지로 조회 성능 향상을 위해 인덱스를 사용할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"공간 인덱스를 거는 방법은 매우 쉽다.\n일반적으로 인덱스를 거는 것처럼 명령어 한 줄 이면 해결된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"CREATE"}]},{"type":"text","value":" SPATIAL "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"INDEX"}]},{"type":"text","value":" idx_point "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"ON"}]},{"type":"text","value":" sridTest2"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"CREATE"}]},{"type":"text","value":" SPATIAL "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"INDEX"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"인덱스 명"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"ON"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"text","value":"테이블 명"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"컬럼 명"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"text","value":"mysql"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"SHOW"}]},{"type":"text","value":" INDEXES "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"FROM"}]},{"type":"text","value":" sridTest2"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-----------+------------+-----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"Table"}]},{"type":"text","value":"     "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" Non_unique "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" Key_name  "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" Seq_in_index "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" Column_name "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" Collation "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" Cardinality "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" Sub_part "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" Packed "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"Null"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" Index_type "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"Comment"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" Index_comment "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" Visible "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" Expression "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-----------+------------+-----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" sridTest2 "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"          "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"PRIMARY"}]},{"type":"text","value":"   "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"            "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" id          "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" A         "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"           "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"     "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"NULL"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"   "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"NULL"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"      "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"BTREE"}]},{"type":"text","value":"      "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"         "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"               "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" YES     "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"NULL"}]},{"type":"text","value":"       "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" sridTest2 "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"          "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" idx_point "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"            "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"text","value":"       "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" A         "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"           "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"       "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"32"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"   "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"NULL"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"      "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" SPATIAL    "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"         "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"               "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" YES     "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"NULL"}]},{"type":"text","value":"       "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-----------+------------+-----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+---------+------------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"rows"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"in"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"set"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.00"}]},{"type":"text","value":" sec"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"생성된 인덱스를 확인해 보면 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Index_type"}]},{"type":"text","value":"이 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"SPATIAL"}]},{"type":"text","value":"로 생성된 것을 확인해 볼 수 있다.\n이대로도 충분히 사용은 가능하지만 그래도 이왕이면, 공간 인덱스의 원리를 얕게나마 이해해 보자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"2-1. MBR"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"MySQL"}]},{"type":"text","value":"의 공간 인덱스는 MBR의 포함관계를 바탕으로 트리 구조를 생성하여 이용하기에, MBR에 대한 이해가 필수적이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이름이 거창해서 그렇지 그냥 사각형을 그리는 방법이다.\nMBR("},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"M"}]},{"type":"text","value":"inimum "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"B"}]},{"type":"text","value":"ounding "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"R"}]},{"type":"text","value":"ectangle)의 약어로 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"최소 경계 사각형"}]},{"type":"text","value":"을 의미한다.\n글로 하는 설명보다는 그림을 보면 단박에 이해가 된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 934px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/cd03e2c796015e48f09f1c80b5d1c091/e7956/point_line_poly.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 58.599999999999994%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA0ElEQVQoz5VSiwqFIAz1/z+zgoLsrRa9djmCIWtK94DM6Xbc2VTOObrvm4BgY+Asvuc+h2rbls7zFAM4ET+XoKSgFJG1lpqmyVcoSeJ7KKjrmqqqonVdk/KxVI4I0FpTURQ0z7OogOcoqWfANE2eqOs6cUCSf13Xu8Jt26gsS9+reFhSVQH7vvv4YRjehGg8vlKuqgA8CBKogUVeUnKuKlg83Pf9M6RlWfw+O5TUv0Qi+hvIAPT6mfI/iL8SpKJKrHEc31P+SsZbY4yh4zi8/wOGTrQxy5B/2wAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"공간 데이터들","title":"공간 데이터들","src":"/static/cd03e2c796015e48f09f1c80b5d1c091/e7956/point_line_poly.png","srcSet":["/static/cd03e2c796015e48f09f1c80b5d1c091/0eb09/point_line_poly.png 500w","/static/cd03e2c796015e48f09f1c80b5d1c091/e7956/point_line_poly.png 934w"],"sizes":["(max-width:","934px)","100vw,","934px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위 같은 도형들(점, 선분, 다각형)이 있을 때 각각을 감싸는 최소크기의 사각형을 그리면 다음과 같다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 934px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/53523970bf5bfbbc7c78424572ae1352/e7956/point_line_poly_mbr.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 58.599999999999994%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABI0lEQVQoz52Th46DMBBE8/8/GVEOlFBCgHMgBs/NGptQUpRbaWRT/Jgdm0OeppAyxkyS+SsZA1/z+xsdeqXWL4wjzDA85K7BUUr3/Qx+Cpwf+LHrYLSedL9b8QEG3k+jCKcofO9w1aq4EdCmvaIsEYQhqroGxO0L2HMgW/LVNA2CIECWZY82XcvbfH3tgPL1joviOEbCDdN0jOViicFH4iRrNCPpb7cF0DkokgTh8QhFd7ZkY5YQyVjkspV7zfWKmJ3URbEGiizIOTWaoEFPEpjbeQiMpegoy3M7SjyKGe+AeHcOXU6aR60gqCZgdMepqip0bbsHfpJUe7kgZb6/BI8+KrbLwL8H2uXSMtXSVXk+45T8oObR+jdw/nukOO/EqdvtP0FesXIOytu+AAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"공간 데이터들 MBR","title":"공간 데이터들 MBR","src":"/static/53523970bf5bfbbc7c78424572ae1352/e7956/point_line_poly_mbr.png","srcSet":["/static/53523970bf5bfbbc7c78424572ae1352/0eb09/point_line_poly_mbr.png 500w","/static/53523970bf5bfbbc7c78424572ae1352/e7956/point_line_poly_mbr.png 934w"],"sizes":["(max-width:","934px)","100vw,","934px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"여기서 보이는 빨간색 사각형이 각각의 도형에 대한 MBR이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"2-2. R-Tree"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"인덱스가 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"B-Tree"}]},{"type":"text","value":"를 이용하는 것과 마찬가지로, 공간 인덱스는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"R-Tree"}]},{"type":"text","value":"라는 트리 형태의 자료구조를 활용한다.\n"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"R-Tree"}]},{"type":"text","value":"는 위에서 언급하였듯, MBR의 포함 관계를 트리로 표현한 것이다.\n삽입 및 삭제 과정에서도 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"B-Tree"}]},{"type":"text","value":"와 마찬가지로 동적으로 재구성되어 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"leaf node"}]},{"type":"text","value":"들의 균형을 유지한다.\n또한, 탐색 속도를 향상하기 위해 자식 노드들의 적정 개수를 유지하며, 삽입 과정에서 MBR의 크기가 작게 확장되는 분기를 선택한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"균형유지"}]},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"root node"}]},{"type":"text","value":"부터 모든 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"leaf node"}]},{"type":"text","value":"까지의 거리가 동일하게 유지된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"R-Tree의 네이밍 유래"}]},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"R"}]},{"type":"text","value":"ectangle(사각형) 과 B-Tree의 Tree를 섞어서 만들어진 네이밍이라고 한다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"우선은 MBR의 포함관계가 정확히 무엇을 의미하는지 그림을 통해 알아보자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1299px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/bc7948c45247047f810d302d3f14004b/9dba0/seongsu_map.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 60.199999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACh0lEQVQozx2TSW/dRhCE3///KT74aCf2RUYutmDBkhJYEiTykY/LcPaFQ1IBAnxp6UBwlu7qmq7qk/OatrmmGe9IwTL1Z7q+IcRIrTulVqwLWLkb/o50HzfM3c72uuFCwkSHCY66RYmZOVlr+OfxO9dPXxjm35jxTN+3rLlwCFjNEWMsixqYnw3z5x19tQvASikFlQeUUdSiCElzUlOLXxZJaOnO30m2xVjFtPQo/0A2Lck5xq6hrJbL18jwzQsbYZQcap+JPkhMw7ofnLQdKE7hJWkLBn05s5qBkCdUaniernkcr1HzC2posedA8SvrWlm2md5athLISopv/3Ja5hvG/hkXC1sMwnbEz2eiO5P9iJlbfrVX/Oy/8KTu0JviOA62faNJPT5tEndmurxQdgHsX/5kjZphSQymoF1k0YZNjxI4s0ujsx4YugdSntFV2EvxPgxMZSHK07eqiGYhC+vTfLmVjSTZEWsMSnvGJUqRhTVMxPFJ+jrgpgHjG/rpTnpmcYclbknEWKgSt2VPEpFOiyho1IUiSUnEWKZZ1kb+HVP3W0AlwSsRZ6S1N2RhFt5ivRHGCSttCXPz/uWSRGWtWUtkVOI1WW9rZjLy/MubWHLnJpI0PNkXLk8TZdHUOOGM3MWZ1XfEaNHzKAU8p67vSCKGjZV93/HSHxukl6JkFRt4LQ641dgbzcOHSn+V3p9X6spwbrC3hqKcDMVEEIOfhlGQgxfXF5mM+m6Htco0+EJKGbVYwiXh7zOXvzLd50ycD47XHvdDMX48UJ8q+kdmXgKncXxAi+/WdeUQhm/AIa1Y66lyZlxGy4i9/reLXaooLHs5O8o9w2OD+iqAfxy4e1E6Jf4H9J1+Wn/t1t4AAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"성수 지도","title":"성수 지도","src":"/static/bc7948c45247047f810d302d3f14004b/9dba0/seongsu_map.png","srcSet":["/static/bc7948c45247047f810d302d3f14004b/0eb09/seongsu_map.png 500w","/static/bc7948c45247047f810d302d3f14004b/1263b/seongsu_map.png 1000w","/static/bc7948c45247047f810d302d3f14004b/9dba0/seongsu_map.png 1299w"],"sizes":["(max-width:","1299px)","100vw,","1299px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위의 그림과 같이 성수역 쪽에 몇 개의 공간 데이터를 입력했다고 가정해보자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1794px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/21704bbb2dd4acac507918d6a9b590c7/d4913/without_map_seongsu.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 61.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABvElEQVQoz42TbWvUQBDH7/t/JBWhglQEQbB4+ELh2muTXLLZTbLPefg5SetRa9VOGJZsdv8PM5NdURQMw0DXdX9P09Hbjpt9wY+LkttDQaMalFK0bbudWTGqqmJnjOGl0V0HzBtQH9NGME4jJ1+yzMv2XQvWbmVYY57n8zpPM0PoKewtxmm89Vsq3VBeOIp3lsH2jGROoWRM43Z3xToDLsvCNI6MMeLFgg+BsHg6tDwKj5U9z2lvqG9avPf0GPogSvMzgGs4rUXddG9P5OeYN/aQPDop6rGkSRWjEFtvBa4lhkTK6XmFj9e+aQiiKKZITpnoIid14qivpS5Q2YKAI/0LcEupYRa7T2PK06ayDer+slMMrsdZx/Tg6lmFa1OCjMBqPUs9lwfAGCLleIsLlvPmk9BSsj8VPgBPWWxau7FbZ7Fh4PunI/VRkca4nUtTJEgp1vdpGX9XuCp7bPsXcBSV+ko6vxdLr8Fcgu0ceco0Xy3V24T+InNZOuq6/v9gr0TOBOwhY64E5EMi6Cx9mRi+zXQy6OaVNPEzNHXD7iW/njYtba/Qaw6Kfug3e1VdcrisObyvKYqSu+KOn0pJn+CElDckAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"데이터와 MBR","title":"데이터와 MBR","src":"/static/21704bbb2dd4acac507918d6a9b590c7/d4913/without_map_seongsu.png","srcSet":["/static/21704bbb2dd4acac507918d6a9b590c7/0eb09/without_map_seongsu.png 500w","/static/21704bbb2dd4acac507918d6a9b590c7/1263b/without_map_seongsu.png 1000w","/static/21704bbb2dd4acac507918d6a9b590c7/d4913/without_map_seongsu.png 1794w"],"sizes":["(max-width:","1794px)","100vw,","1794px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"지도를 걷어 내고, 각각의 데이터들에 MBR을 그려보면 위와 같은 그림이 나온다. 그리고 이렇게 생성된 MBR들을 포함하는 MBR을 그리다 보면, 다음과 같은 그림이 나온다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 979px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/dc7891cbf26d2ebe3f6245bf1576c566/1d5a8/MBRS.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 61.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACbklEQVQoz22Te3PSQBTF+f6fxvEfZ5yqtVVai8UgUCwUSNKQhJBsnpsXgZ9X8DWOe+fO7uzj7Ll7zvZc16WqWx7Gl8xG71ithxijAYP7AePJgNFX6aef6b+55urFNR/77xgat9wPbzHub1j6jxi+wS7dEfgBvTiO+dG89T2HIjmNSw3HPed2PHfxQhO9gnBYEicRddNirR6hORJ0IY1ElmT0lIpOBzbuDC1M9wIUqJJA+2Q6o9LVKaM4xL+s2PZLCp1TC4BpCmDZETQ7qkNJEif0ougMOJ6MCXcpcaBwPFlsClIUyVHJ4YqyLNl+TdnZSsaaRGJrPkP1E/BYkcapMPwFOOyTZ+eSnY0Aq5pDt6dsNaoN2XU+qgmlgj1FlRNLKGsrgC3BQcmVvwCVOoEsV1OSMKfdRFiGSWE7aMfDf9iSLn2syYyn2YjGSbCfZijPxf30jXa1ZX1zjS5T0vSvN3Q3E1prRTObkwlD7coGW1iYCcVziGetRbg1lZvgPM0Jnmy209VJNHsxJs8Tsiz7w9Brfao8xzYsct2gwpJWBDpl08i6Q1Hm/K89e1KRTsnSvwDd2qMV9VJHkxYdsQhU1QexSIGWN1sNN2xM2dM1wupI1ZRkItQPimtzRl78w3BzAswQM3H4eXNeVHjiu2J6JHotVVzpk4XqtmZpKKz3JeHywGhkkGSRMMzpJclZWX8fiElr8VXzu5SuE3zV0fhQiOWiz63sOa9Fa5l7C+kd3HxYSMkxRaHpOY5DrWtu3U/MRRh7/gXTnmJZE5bLKbP5hMV6wlxyYUrK3MODgTG54+3LAf0Lg4vrl7ieiCRf7zsjCYV+Mk7agwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"MBRS","title":"MBRS","src":"/static/dc7891cbf26d2ebe3f6245bf1576c566/1d5a8/MBRS.png","srcSet":["/static/dc7891cbf26d2ebe3f6245bf1576c566/0eb09/MBRS.png 500w","/static/dc7891cbf26d2ebe3f6245bf1576c566/1d5a8/MBRS.png 979w"],"sizes":["(max-width:","979px)","100vw,","979px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그리고 이 MBR들의 포함관계를 Tree 형태로 표현한 것이 R-Tree이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1319px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/1def62040e1119bcc511f3a15c27671b/9eec3/RTree_1.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 57.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4UlEQVQoz4VSW2/aYAzl/w9pL2N7agsCtZOmXdVqpepbRQgJI4kgpCwUUtKAKCQChjpy+86+S0iL9tBIVuxjnxPbcSFNU7z2HGnvcf7726t1s9kMhSiKeMCECSEg1GcWUnw+n8NxHFi2hcHwFvfOPR4pFsZxXsc4+6Y8z3sWJEyQOTTeDAa46/ex9H2EYZh3sNvtsKAYy/2xLF5LMu5/gmmSCNZyiW2pBKzXuRDrICUvVkNz22IRWCwOuAeCYoAE7mgEu9XCZDyicSwybBWE7OXhjscYKgomI1YTZdxMMI6FYLAiaGse/CAQjfoB5LaHzXb/MYLVBlA7Lh3C5zWr9QpN9QHL4MXIcSR2pOgJPv6IsxHE+9NFBNtJ8wmanQRnWU0SizFrX2MohsDcByq4H8W6HePySqKjCYEoinFZv8FkMstX5019/NIGB6dydS3B7N89d8jat+0hJKkBVW1BUVRMp1NIzSbHZFnm+aenv9xvNG44kf3xRkOC0pJ5nWn2xR2apoXzi5+oVk9RrZ3h85fvqNevcXRcwUm5ijK1dlvj9/im+JYb++h8/oh3pQ+cU67UcHxSgeu6KFj0ngzDQKejQdN0ahq63S50XfgM6/V6tEs7zzMOixlH1w2Os3qG/QPn+SxbeCuo1gAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"R-Tree","title":"R-Tree","src":"/static/1def62040e1119bcc511f3a15c27671b/9eec3/RTree_1.png","srcSet":["/static/1def62040e1119bcc511f3a15c27671b/0eb09/RTree_1.png 500w","/static/1def62040e1119bcc511f3a15c27671b/1263b/RTree_1.png 1000w","/static/1def62040e1119bcc511f3a15c27671b/9eec3/RTree_1.png 1319w"],"sizes":["(max-width:","1319px)","100vw,","1319px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"최상위 MBR인 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"A"}]},{"type":"text","value":"와 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"B"}]},{"type":"text","value":"가 R-Tree의 루트 노드에 저장되는 정보이며,\n차상위 MBR인 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"C,F,D,E"}]},{"type":"text","value":"브랜치 노드가 된다.\n그리고 각각의 데이터의 MBR이 리프노드에 저장된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"2-2-1. Insert"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1400px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/02f96a429946eaff1d9782e6f64d3ae0/3643c/insert_X_MBR.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 62.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACcElEQVQoz2WT627bRhCF/f4v0gfoz7QoUCNtbNlOrEhuZImkSJlc3pe3pXjVl5FsNwGy4GIvmD0z58zhVZ5lnIe//UTtbhj7iiTUZFGJqTS11hzbEm/h8/xbiHWzR/keURiwX6/pOoOeNHrWlLrkKkvTC2AcbZin4bI33Yl26DjNJ7mD+XSiLg35R4m7HmiP7SXOdf+DdpbvSD7m6Exzlb4BWvaGNK7QaY3nG/w6IOkV+pjT9z1lWbL/KyNYZhwF0NCgbJvZjJjJXACLvBDA5BVw/WVBHsVwGvFVKzRnuZ1oqSjI5HmJrjLaxtC2DbWccydgaqViOvLpHfC9wt2KsjBQt1j3Dpm9p1Mh2S6kdH3c7Zq99ZU+0sSeTVMqkvstxlbkzxvyLqHQxQ8Ng5cnzEEyegFaNXR5g0kNymk4Zg2e5eK9SJK0wzlYUk2FWjqMx4l49URahxTFuSlvXY5qjzFLUP8uqSLRMjCYTJRKWsai5ZDsKCX5VAvFKKLebznq5vI2U4rUxFLhT4DhENMPPeFWtKpHQj8TBUWBbqQXjSzPIU4STudg6apw532kvv8roOpCBvEU4rtzO8Qz0t2Bw0r8+DIQ/zmQPDY0pmaaZgIrJ3mQc9Kzf/5GLJTLnynHIupJ7EHZ/J95FuR412NWUHwSan/PdMX0SvNmpPwgnr0G54NH3Kg3Y78BfjMbYuNTK0swI6pKPFgoXPkrwtTDDzxe9i5xHBBnPs5ux+Z3D/sPxefrjyQmpCprrlzXJfADnpw1S/uR9dMd6/VC1gUrWb883r3O5R2PX8/7BQ+fb1k8/MPtjcxbmffXOK7NwTvwHVUZhmjKhEAFAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"MBR X 삽입","title":"MBR X 삽입","src":"/static/02f96a429946eaff1d9782e6f64d3ae0/3643c/insert_X_MBR.png","srcSet":["/static/02f96a429946eaff1d9782e6f64d3ae0/0eb09/insert_X_MBR.png 500w","/static/02f96a429946eaff1d9782e6f64d3ae0/1263b/insert_X_MBR.png 1000w","/static/02f96a429946eaff1d9782e6f64d3ae0/3643c/insert_X_MBR.png 1400w"],"sizes":["(max-width:","1400px)","100vw,","1400px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"새로운 데이터 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"X"}]},{"type":"text","value":" 가 추가되었다.\n데이터가 추가되는 경우, MBR이 적게 확장되는 브랜치 노드를 따라 데이터가 삽입된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1103px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/3191ee78505fc9a71acda39c912ba0bc/890d8/insert_X_tree.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 55.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACAUlEQVQoz4WSe28SURDF+bJ+FZP+YWKMpomxakVtGrSSWouKtS8IsLwELaC8i8CyS3eXbXk/ft69tBBSo5NMcmfOnTPnzlxXs9nEsixM01xxwzCwTAvd0Pmc81HTG9hWR+ZN07h13+FQVRWXruv8y4wrk0fBuxh2mf9Zu91eEk6nU2aOi/NAuC7ASqVCrfabvmWC3WR6UWZmq0wZy3vy/mwmax1zuBaEDijTnQ5Xfj/a+TmjyWTRfU4wYTbqwOE+FIorpLcIb7r0q1Vabjf0eotGTsFNkezp2WYaC85xif1FoaPBEAsoC0JNqCyVSth2Z1Hk2GQypFIuoRkX0FXBqgpwsqpQ0+aERYG9+dB3tM5V2GMRD7nsSv0MR7DjG5H51V0oTSR6RL8tlyIJWy1NBj8LJru+0gLsD2Z4vDk6l6PrkcDHgzqqvpxrQGly/CkmTuNrQrFlZ9WDwZBUKkEyqYit1mRcLBaIx0JksxmhbiRG2uPsR5JGvTb/TuI/RqMhMqkIai4iR6BrqqNQRYnGebLxHPfLLbze9+zt7bO+/pjNF694J+KzTBa//wtra/d4+mxTzNbm9dY2G6LG83aX+w8e0vfcoR334mo0GqTT3wkEgpwGAihKlHg8wcnJqcwp0Rj5fEG8IM3B10NCoTD1ep1IRJF4OBzh6OiYZmQHNZ/gD7m2LwrJdIKzAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"tree X 삽입","title":"tree X 삽입","src":"/static/3191ee78505fc9a71acda39c912ba0bc/890d8/insert_X_tree.png","srcSet":["/static/3191ee78505fc9a71acda39c912ba0bc/0eb09/insert_X_tree.png 500w","/static/3191ee78505fc9a71acda39c912ba0bc/1263b/insert_X_tree.png 1000w","/static/3191ee78505fc9a71acda39c912ba0bc/890d8/insert_X_tree.png 1103w"],"sizes":["(max-width:","1103px)","100vw,","1103px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"X"}]},{"type":"text","value":" 가 추가된 MBR 그림을 다시 보면, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"A MBR"}]},{"type":"text","value":"에는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"X"}]},{"type":"text","value":"가 포함되어 있지 않아"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"A MBR"}]},{"type":"text","value":"의 크기가 확장되어야 한다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n그러나 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"B MBR"}]},{"type":"text","value":"에는 이미 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"X"}]},{"type":"text","value":" 가 포함되어 있으므로 크기의 확장이 필요하지 않다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"D MBR"}]},{"type":"text","value":"과 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"E MBR"}]},{"type":"text","value":"의 경우에도 마찬가지의 방식으로 결정되어 위와 같이 데이터가 추가된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"2-2-2. Split"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1635px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/8aed5da0340a31b019b12518740e471e/06640/insert_Y_MBR.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 61.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACbElEQVQoz1WS627aQBBG8/7v0vZv1DZNo1SEqNxiLoEANmBjG4Pvd2M4HZwoaWa19ko7e+ab3e/KMAzSvGCi3DLr36KpfZRBh26nw3jUYajIf9zl4ecf7r/c0/pzy6Dfpt975KnTRrXmDKwn9oGDbdlc+b7HJXarHqRxsy4z+dR8imhZ4F+D1y2JAp+qqjHUuSSDe/KoZERBxJXrus2BrfksSktJFLibYqcWYRaSpXkz3eCA9TvHbqXEaUQhpPV6JiJqdqVDfsoJvOADOBoq7J0Q3/EwTNksEyI8grOHIMmyjN0oZK97zTqQ4aw2kNU4AizOcsa/AA+HV2D/gTgKmrWxFbBXcKqPZFWKVx3Y1zu88sDxeCTJY8H5+OudAI840nIh45NCVZsQ7mOq7YHNYE2y0Ul1E2tiEy4t1sMJy+cnSsNns5jg27L3OKVUd2itO1K5njD87w4tc0y1UinGUyJRmJqSsBEVq4BE32OuVWxtRb4N2C4XOKqBM9HgDOv5iEQe9BXovQGrHUWcNOritMTdp1RHmlmWBWapN4eaKCII9HcH6PqLFO0RRvEH0CxsqksVIyFMavx9SF7UeEEirx+j9ky2mkV1qjjXFXnikiWFCDyz1EShb35u2SwkWexA6HN6qxwnOWZPbDI8436XLu5SAeUUVYnZjbBvchJxzqg7IIyDV6AvJr2EfXQuvYmvyvdWaiHHfk0pj5m8iIF7VWPkpuuF7P2SK2nB8420nMldxylXG33TVG1v20wNhdWsi7oaomkK84XCeDpkpipMlwozbch0PkQZdekpD7S+tvl73eXH3TdMS8e2d/wDtZ2EvSUDYxAAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"MBR Y 삽입","title":"MBR Y 삽입","src":"/static/8aed5da0340a31b019b12518740e471e/06640/insert_Y_MBR.png","srcSet":["/static/8aed5da0340a31b019b12518740e471e/0eb09/insert_Y_MBR.png 500w","/static/8aed5da0340a31b019b12518740e471e/1263b/insert_Y_MBR.png 1000w","/static/8aed5da0340a31b019b12518740e471e/06640/insert_Y_MBR.png 1635w"],"sizes":["(max-width:","1635px)","100vw,","1635px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이번에는 어떤 MBR에도 속하지 않는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Y"}]},{"type":"text","value":"데이터가 추가되었다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n위의 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Insert"}]},{"type":"text","value":" 에서 설명했듯이 가장 적은 확장이 일어나는 MBR을 따라 데이터가 삽입된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1605px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/ed779e311acf062cacdca1409308d79c/3b19a/insert_Y_tree.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 50.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABwklEQVQoz42S3W7TQBCF8+JwzRP0AlQJIRUlTlJApuSnBYsK1Q40IoQ4MaUYStKWxKaNAy2JY/tjd91sc4UYabQ7u3POnJndQhzHSFsulyRJQnKzZlmmzqvuFu3Tt3nO2v26S6y08XhMgX+Z4Kx2HuGevuF/LAgCCiv2NE2VS12Xsxmj4ZCh8Fk0g6ufpNMh2XQkcuYqJ5O5ogvpEqcVSsmKMMkP6XaJLIv5MlkXSqpYxHjMCpn/TZOq+5vxTCaTW8IcBmetFueOo8nSVKrIgbEATpo18Hsas1K5Rpi3PI0yBt6I6PqaX/M/fHRHXEbZbaHxAs87QTW8iAi//+BqrkrqlhUhWU6431qw7yy0slcHMYfdWMclc457lOl4e+c3Xj9S+9W0JnKGK7lu36Pd/qAVvTtsc/T5WLcz8I4Jwwv9gPaBzYn9FMIBaZwLGUuFQRDS6XRpNJrs7u5hOy0s6zWm+VzEL3HdPl98H8MwVE4sfkW93qRWq2E2LN4/2wDrLnQeEpyPKPR6Ls3mHsVSmUr1CTsvalQq2xSLBka5iiMK2LbD/QeblIwyvv9VkFcoi/1WqUr98QYX5h3C+j38Tz3+Ag1n6SWit1ztAAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"tree Y 삽입","title":"tree Y 삽입","src":"/static/ed779e311acf062cacdca1409308d79c/3b19a/insert_Y_tree.png","srcSet":["/static/ed779e311acf062cacdca1409308d79c/0eb09/insert_Y_tree.png 500w","/static/ed779e311acf062cacdca1409308d79c/1263b/insert_Y_tree.png 1000w","/static/ed779e311acf062cacdca1409308d79c/3b19a/insert_Y_tree.png 1605w"],"sizes":["(max-width:","1605px)","100vw,","1605px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그런데 만약 트리의 최대 노드 개수(M)가 4이고, 최소 노드 개수(m)가 2인 경우라면, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"E"}]},{"type":"text","value":" 노드에서 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"OverFlow"}]},{"type":"text","value":"가 발생했기에 트리의 분할이 일어나야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"분할의 동작 순서는 다음과 같다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"분할이 필요한 노드("},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"E"}]},{"type":"text","value":") 의 자식 노드("},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"O, P, Q, X, Y"}]},{"type":"text","value":") 중 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"분할 알고리즘"}]},{"type":"text","value":"에 따라 두 개의 노드가 선택된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"기준이 아닌 나머지 노드들은 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"분할 알고리즘"}]},{"type":"text","value":"에 따라 1에서 선택된 두 개의 노드 중의 하나를 선택한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"2의 결과를 통해 노드를 분할한다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"분할 기준은 다양하지만, 대부분 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Quadratic Split"}]},{"type":"text","value":" 방식이 일반적으로 사용된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"R-Tree 분할 알고리즘"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Plane Sweep"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n단순 추가 순으로 일정 비율을 새로운 노드에 삽입한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Linear Split"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n한 축 기준으로 가장 멀리 있는 두 노드를 A, B로 하고 나머지 노드는 두 노드에 추가할 때 증가하는 MBR이 적은 곳으로 삽입한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Quadratic Split"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n한 MBR에 속하면 낭비되는 공간이 가장 큰 두 노드를 A, B로 하고, 나머지 노드는 두 노드에 추가할 때 증가하는 MBR의 넓이가 적은 순서대로 찾아 삽입한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Exponential Split"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n모든 분할 경우에 대해 계산한 후 공간상 가장 효율적인 분할을 선택한다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Quadratic Split"}]},{"type":"text","value":"방식에 따라, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"P"}]},{"type":"text","value":" 와 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Y"}]},{"type":"text","value":" 를 A, B로 지정하고 MBR을 확장해 나가면 다음과 같이 트리가 분할된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1337px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/bfaa2c1309bdf2db16bc0bc9fe4a1a36/ac2ab/split_tree.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 53.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACEklEQVQoz42Rf2/SYBDHea++El+A+8NMM2OWxWWGbGiYOiZIjMOgE1AyGAXKRgu05cfYoIUx1lL4+LSFOPzDeMkl99x97/t87y7kui62beM4ju9ebNv3sID2yOBA2sNxHVa4h9gVfhW3221C/MOapsqz7IYgtPkf03U9IJzP5yw8F/FMuGmafrHZaqI0FVqtFoZuMBqP/fpcuI9fLNbcMIyA0Ct6IO7uGJ+c0BWFu+l07feJeLcvLpim0+LXGfxF6tkaoWd2r0dve1sEwYie8pV634ZDlM1NhpqGs8p5/QHfH0LPBoMhjUaDwWiEqqpY1mgJDtCWZYoVtNA6HUqlgjiAjqbpXF/3l4t6QNjuQTThXSto7vZdovEZM9fXSe8awodTJpOgMRKbUVO9aEqxNOBNzPG3YBjLo/SuJkSPyrjzgHBo3nP0sSRAwVimNSN5orOcjMSXLg1t4seqYbOzL/u1rlAfGt/eks//4vR7inK5zM3NDblclkwmTfH8XNxpKlah8OM0Rb/fF6Nb5DJfkeUqjnWFko3RKnyicJZHUVRCVblGOBzh1e5r4okkx/Eku3v7InfAu/cCLPYUibzlycZTstmfFApFtrZe8iGRYpKPwOEj+PyYnRfP+XaaIVSv18WSS0iS5CusVmVKUlnkJCqVin+oqixzLtReXl4KFYqPleULdEWmU8tj1M5EryTqdX4DFhUwguizXigAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"split Tree","title":"split Tree","src":"/static/bfaa2c1309bdf2db16bc0bc9fe4a1a36/ac2ab/split_tree.png","srcSet":["/static/bfaa2c1309bdf2db16bc0bc9fe4a1a36/0eb09/split_tree.png 500w","/static/bfaa2c1309bdf2db16bc0bc9fe4a1a36/1263b/split_tree.png 1000w","/static/bfaa2c1309bdf2db16bc0bc9fe4a1a36/ac2ab/split_tree.png 1337w"],"sizes":["(max-width:","1337px)","100vw,","1337px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1726px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/9d466e1fde6cc9e69e236b6d0aadfb0d/dd200/split_mbr.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 62.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACdElEQVQoz1WTfXPSQBCH+/2/i385jjpWrVZbFSm20EKhhYS8kRyQ5PJ2SQiPW8S3u9nJzd3tk7397Z7keUHb7nmYfuW2/4qFPWA46tHr9xje9rgZ9hhNvnN5ds7Zsw98On/H4PqS/uCSQe8Ts+iex+0jo/UQx3c44ThCd0SdhId1ZWDX8t/QbsX6NahvFTpLqbsGdz5lZ+rDudopfOVz0nX7w0awmpJmmUQrh1uDrwPSMqYsSkxp2KYb3A+a4GNBWRY0Mu3FhLY4ApsIPxLg/hePyeSOwFfoTYrrVySmJCclZkv1NBtDcLdl46aY2shJSmQ5NOUR2Kr/gdPbK9ZRcFi71obNKqWTt5tSExchqnJRmQtNQ64T0r0iefCodQbCUGb1G/iLuFzeCzCmCxOckYd2PEwUYQ8jtL1meTvlfnxDs8pYB1MqvSK+nlF7vjg7KPsaP3D+5jAM5dLykXo0JvdiMj8j9xPW84QqSESAB7yFRWpnBNYctfBQY5udREwnEUYzfN8W4K47AFd1JOrmOIMlqa7YRBl1s+dJxH3X4ZYWSaZlTyqgyCmcB4y4liVISln0X+K5/wJNiDGawstI8z3xWtNIfSqVUTY5i17AchKSFiJQtUMnW0zWULdGAtxhP97g/gsMjURYaUhijjoJsMUdFOQ/YPtW7py1rFelKN5hf0mIThs2V6K4V0oa7wW4lMI+evt1IM8TxRL9p5if9AoFoCwpmVGFfVGSRi3CYzuuSeUn8Rsp+knHbDbG8wRYSOt1dcdQDRmFN9iz78znVwdbiFnWgMVSvkezpTUn0orfrj5y8fwzly8+87V/zun7tziOxU910IUPR0TXDgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"split MBR","title":"split MBR","src":"/static/9d466e1fde6cc9e69e236b6d0aadfb0d/dd200/split_mbr.png","srcSet":["/static/9d466e1fde6cc9e69e236b6d0aadfb0d/0eb09/split_mbr.png 500w","/static/9d466e1fde6cc9e69e236b6d0aadfb0d/1263b/split_mbr.png 1000w","/static/9d466e1fde6cc9e69e236b6d0aadfb0d/dd200/split_mbr.png 1726w"],"sizes":["(max-width:","1726px)","100vw,","1726px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"2-2-3. Search"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"검색의 경우도 마찬가지로 검색하려는 공간 데이터가 포함된 MBR들을 따라서 검색한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1229px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/f7eabc5918c6d802c4ceae00629d8920/2324c/search_mbr.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 62.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACfElEQVQoz1WTWW/bSBCE/f9/zCJAHvK0gBNjnY1jWVlrbckSJR7ioeFNDu9DX1oygiBDNHtmwK6pqmneJEnMZbiHB/Ljhm4sUSolSQqqOqPUGVWXYz16HD7EmM82vnJQYYC1XdPOFe254zQG+LHPTRy/A6rTK+fzeJ23ncTQMg3zNcZxJItKsi+QPszoWtNMHdZ+A/O1hGRM8CLvN+DhsCFNawopdIMKvwpIpxA9FAzDQJkXHG8zgpeEtq3J54zTwYJpgjPEQ/Qn4Gr5QBRGwmbiFA0UWtjJoxFmpPIu0Y3I63vqviWRvdRSXNFkxHP6J+DubUUal5x1i/XsEJsOfRgSGRGZI34Zr6LihXOiRf6BugjIVnuEBQSKODnghS43SZYgFMi/CMDniHkVkro5rRJGfom3leyKVNsRUIvS1dj2G5Ecop4NaLQYmMklmnieKYCuMFyeKe5DpjuR9teR2i7FS5Enng5Fy5CXRNoiC2O6vKcLFYV5pMp6mgE6Cd/4hh84AriL3gEfE8bvFdUnYWQP0hYZvXxYtj1Vr9lbJq6r6OQOhloOy5U4DP00Mgni8fUOzz8K4EkYri4MY8Z/xMP7kqk5X82uqo7oraH3ZrLbGX+hpWVaqmbE2xSkywZ9qmnaAcf9JTlP5RjxcCd53UDY8mtcGMbmRPki/XcP9qdRmEmP9jOxrPXfEreyNhF2Br5nc6OUuha/6jVBYaGVTa4jikKRi6zLzR3Fm6PnYDvO+97JxTQcdh99rDuP3cbl++OTgArDKJK2SFLMk8nGW7Pd/8d2u2C7e7qGYSwx9kv2lzgs2RlPrDcLnn78y2L5VfJXFjJfb/+XHyPhJxNEhFJ8aBe9AAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"search MBR","title":"search MBR","src":"/static/f7eabc5918c6d802c4ceae00629d8920/2324c/search_mbr.png","srcSet":["/static/f7eabc5918c6d802c4ceae00629d8920/0eb09/search_mbr.png 500w","/static/f7eabc5918c6d802c4ceae00629d8920/1263b/search_mbr.png 1000w","/static/f7eabc5918c6d802c4ceae00629d8920/2324c/search_mbr.png 1229w"],"sizes":["(max-width:","1229px)","100vw,","1229px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위의 그림에서 분홍색 원안에 포함되어있는 모든 데이터를 반환하는 경우를 가정해보자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1462px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/4a59a9528dd647d0f0fa1f50c4f4dd33/4ab23/search_tree.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 53.400000000000006%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACBUlEQVQoz42Sa28SURCG+bX+Cn+CJib6obFpTGwrimmsxNKgVWssKZVLhHKHbbkuULDcLwu7+zhnl27TL8bZTM5c3/POnPVZloVhGKxWK1fFNlYG2KDdVtiOv2CxXrI2117eq92o6lc4jUYDH/+Q1qjBXnJHwG3+R5rNpguo0G1RS9mi9kz8sfhjE3uxOR3bdmvkAlVvq1NU9SvxGN6BMRjAjyjM1QX3rGz1iWt3h3AagcVik1Bgrj5gaG9umFSrNHdfs14bbr3lMvBGnsxovtqlUyljmKYXv0vfA0pA17s0JDCazbi6uhay402x4gdrWQNTGWI4IZVOO81Kdb2FKY/2YOTSNRyGV96Iesfi4NjEJW6jdy3eB2UTc5dK4MgkW1bWimJlxP6HJUsZqtXaAFbrA0KfMx5grz8lFE57u1nOIRkfyK/j+t/P2mhVd4IbWeuOP8NCALvdNr5+/w+JRIxI5JR8vsBNr8eviyjR6BmpVErWNmXYuSWTSNLutBmPxpL/SSZ7yWLQoZ36Qi3xiWTsnGKxhC8WT/DGH2Bv/x3h8Amh47DYb53Yx+CR7KVJIHDAk6fPOI9ekM3m2Np6yWHoG8PfsofgIzh5jH/7Ocfhr/g0TSOXywm7PIVCgVKp7Nh5sYvFIvV6XWIlp0bTrqjVak6+XK7Qqmny4mn0yiXlUsHp+QtpJzM/fybErQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"search Tree","title":"search Tree","src":"/static/4a59a9528dd647d0f0fa1f50c4f4dd33/4ab23/search_tree.png","srcSet":["/static/4a59a9528dd647d0f0fa1f50c4f4dd33/0eb09/search_tree.png 500w","/static/4a59a9528dd647d0f0fa1f50c4f4dd33/1263b/search_tree.png 1000w","/static/4a59a9528dd647d0f0fa1f50c4f4dd33/4ab23/search_tree.png 1462w"],"sizes":["(max-width:","1462px)","100vw,","1462px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"분홍색 원에 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"A"}]},{"type":"text","value":" MBR 과 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"B"}]},{"type":"text","value":" MBR이 모두 걸쳐 있기 때문에, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"A"}]},{"type":"text","value":" 와 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"B"}]},{"type":"text","value":" 모두 확인을 해본다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"A"}]},{"type":"text","value":" 의 자식 노드들 중에는 분홍색 원의 범위에 포함되는 MBR이 없으므로 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"A"}]},{"type":"text","value":" 브랜치의 검색은 종료된다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n반면, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"B"}]},{"type":"text","value":" 의 자식 노드들 중에는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"D"}]},{"type":"text","value":" 가 범위에 포함되어 있다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n그리고 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"D"}]},{"type":"text","value":"의 자식 노드 중 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"M"}]},{"type":"text","value":"이 범위에 포함되기에 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"M"}]},{"type":"text","value":"의 데이터를 반환한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"2-3. 인덱스 적용 안 되는 경우"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"어느정도 공간 인덱스를 이해한 것 같으니, 실행계획을 통해 인덱스가 잘 적용되는지 확인해보자."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n인덱스가 정상적으로 등록되어 있지만, 몇몇 경우에 등록된 인덱스가 적용되지 않는 경우가 있다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n만약, 인덱스 등록은 정상적으로 이뤄졌으나 실행계획을 확인했을 때 인덱스가 적용되지 않는다면, 아래 항목들을 확인해보자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"2-3-1. 공간 함수 오용"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"대표적인 공간 데이터의 사용 예시는 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"기준점으로부터 반경 nKM 내에 있는 데이터를 검색"}]},{"type":"text","value":"하는 경우이다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n공간함수를 사용해서 예시의 결과를 반환하는 쿼리를 작성해 보자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"SELECT"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"FROM"}]},{"type":"text","value":" example "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"WHERE"}]},{"type":"text","value":" ST_DISTANCE"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" ST_GeomFromText"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'POINT(10 20)'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4326"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"5000"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ST_DISTANCE"}]},{"type":"text","value":" 함수를 활용해서 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"point"}]},{"type":"text","value":" 와 기준점(10, 20)의 거리가 5KM 이하인 모든 데이터를 가져오는 쿼리이다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n하지만 이 쿼리의 실행 계획을 확인해 보면 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"type"}]},{"type":"text","value":"이 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ALL"}]},{"type":"text","value":"인 것을 확인할 수 있는데, 이는 곧, "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"인덱스가 적용되지 않았다"}]},{"type":"text","value":"는 의미이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"text","value":"mysql"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"EXPLAIN"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"SELECT"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"FROM"}]},{"type":"text","value":" example "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"WHERE"}]},{"type":"text","value":" ST_DISTANCE"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" ST_GeomFromText"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'POINT(10 20)'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4326"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"5000"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+-------------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" id "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" select_type "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"table"}]},{"type":"text","value":"   "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" partitions "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"type"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" possible_keys "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"key"}]},{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" key_len "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" ref  "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"rows"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" filtered "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" Extra       "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+-------------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"SIMPLE"}]},{"type":"text","value":"      "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" example "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"NULL"}]},{"type":"text","value":"       "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"ALL"}]},{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"NULL"}]},{"type":"text","value":"          "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"NULL"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"NULL"}]},{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"NULL"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"100.00"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"Using"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"where"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+-------------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"row"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"in"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"set"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" warning "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.01"}]},{"type":"text","value":" sec"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"R-Tree"}]},{"type":"text","value":"는 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"MBR들의 포함관계"}]},{"type":"text","value":"를 이용하여 만들어진 트리라고 했다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n하지만 위의 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ST_DISTANCE"}]},{"type":"text","value":"를 사용한 쿼리는 포함관계를 확인하는 것이 아니라, 모든 데이터와 기준점과의 거리를 계산하여 반환하는 쿼리이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이러한 케이스는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ST_DISTANCE"}]},{"type":"text","value":" 대신 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ST_CONTAINS"}]},{"type":"text","value":"와 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ST_BUFFER"}]},{"type":"text","value":"를 활용하면 쉽게 해결할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"SELECT"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"FROM"}]},{"type":"text","value":" example "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"WHERE"}]},{"type":"text","value":" ST_CONTAINS"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"ST_BUFFER"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"ST_GeomFromText"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'POINT(10 20)'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4326"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"5000"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ST_BUFFER"}]},{"type":"text","value":" 는 첫 번째 인자를 중심점으로 반지름이 두 번째 인자인 원을 그리는 함수이고,"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ST_CONTAINS"}]},{"type":"text","value":" 는 첫 번째 인자가 두 번째 인자를 포함하는지 여부를 확인하는 함수이다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n즉, 위의 쿼리는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"POINT(10 20)"}]},{"type":"text","value":"을 중심으로 반경 5KM 내에 있는 데이터를 조회하는 쿼리이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"수정한 쿼리는 공간 데이터 간의 포함관계를 이용하므로, 인덱스가 잘 적용되는 것을 확인할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"text","value":"mysql"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"EXPLAIN"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"SELECT"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"FROM"}]},{"type":"text","value":" example "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"WHERE"}]},{"type":"text","value":" ST_CONTAINS"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"ST_BUFFER"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"ST_GeomFromText"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'POINT(10 20)'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4326"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"5000"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"----+-------------+-----------+------------+-------+---------------+-----------+---------+------+------+----------+-------------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" id "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" select_type "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"table"}]},{"type":"text","value":"     "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" partitions "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"type"}]},{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" possible_keys "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"key"}]},{"type":"text","value":"       "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" key_len "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" ref  "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"rows"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" filtered "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" Extra       "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"----+-------------+-----------+------------+-------+---------------+-----------+---------+------+------+----------+-------------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"SIMPLE"}]},{"type":"text","value":"      "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" sridTest2 "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"NULL"}]},{"type":"text","value":"       "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" range "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" idx_point     "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" idx_point "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"34"}]},{"type":"text","value":"      "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean"]},"children":[{"type":"text","value":"NULL"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"   "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"100.00"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"Using"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"where"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"----+-------------+-----------+------------+-------+---------------+-----------+---------+------+------+----------+-------------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"row"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"in"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"set"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":" warning "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.00"}]},{"type":"text","value":" sec"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"2-3-2. SRID 미 적용"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"두 번째 이유는 어딘가에 SRID가 적용되지 않았거나 서로 상이한 값을 사용했기 때문이다.\n다음 세 군데에 적용한 SRID 값이 모두 일치해야 인덱스가 정상적으로 동작한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"테이블의 컬럼 속성"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"검색 쿼리의 SRID"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"삽입된 데이터"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"1-3 에서 얘기했듯, 테이블의 컬럼 속성에 SRID 값을 적용할 수 있다.\n이 부분에 SRID 값이 적용되지 않았다면, 인덱스는 적용되지 않는다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"또한 검색 쿼리에 실수로 SRID를 미적용한 경우 역시 인덱스가 적용되지 않는다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"SELECT"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"FROM"}]},{"type":"text","value":" example "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"WHERE"}]},{"type":"text","value":" ST_CONTAINS"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"ST_BUFFER"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"ST_GeomFromText"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'POINT(10 20)'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"5000"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위에서 사용한 쿼리를 예로 들어보자면, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ST_GeomFromText"}]},{"type":"text","value":" 함수에 두 번째 인자로 SRID 값이 빠져있다.\n이런 경우에는 SRID값이 default인 0으로 지정되는데, 이때 point 데이터의 SRID값이 0이 아니라면 인덱스는 적용되지 않는다.\n포함관계를 이용한 검색의 경우에는 SRID 값이 일치해야 인덱스가 적용된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"마지막으로 삽입된 데이터들이 같은 SRID 값을 갖고있는 지 확인해 봐야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"text","value":"mysql"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":">"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"SELECT"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"DISTINCT"}]},{"type":"text","value":" ST_SRID"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"FROM"}]},{"type":"text","value":" example"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"----------------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":" ST_SRID"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"----------------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"              "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"           "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4326"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"|"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"----------------+"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"2"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"rows"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"in"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"set"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0.00"}]},{"type":"text","value":" sec"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위 쿼리를 실행했을 때 만약 예시와 같이 row가 두 개 이상 나온다면 데이터들의 SRID값이 통일되지 않았다는 뜻이다.\n안타깝게도 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"MySQL"}]},{"type":"text","value":"에서는 데이터의 SRID 값을 일괄적으로 변경할 수 있는 방법이 없다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n일일이 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"UPDATE"}]},{"type":"text","value":"문을 작성하거나, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"DELETE"}]},{"type":"text","value":" 후 새롭게 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"INSERT"}]},{"type":"text","value":"를 해줘야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위 쿼리가 2개 이상의 row를 반환한다면, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"아.. 오늘은 야근이구나.."}]},{"type":"text","value":" 라고 생각하면 된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"하지만 다행히도, 1번의 내용인 컬럼 속성에 SRID 값이 설정되었다면, 나머지 2번 3번의 경우는 신경 쓰지 않아도 된다.\n"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"MySQL"}]},{"type":"text","value":"은 기본적으로 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"STRICT SQL MODE"}]},{"type":"text","value":"가 활성화되어있기에 상이한 SRID 값의 삽입과 포함관계를 이용한 검색에 에러가 발생하기 때문이다.\n하지만 항상 만약이란 건 존재하기에 인덱스가 적용되지 않는다면, 꼭 한 번 확인을 해보자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"3. JPA로 공간 데이터 사용하기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"공간 데이터와 충분히 친해진 것 같은 기분이 든다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"hibernate 5.0"}]},{"type":"text","value":" 부터 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Hibernate ORM"}]},{"type":"text","value":"애 정식 라이브러리가 된 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Hibernate-spatial"}]},{"type":"text","value":"을 이용하여 JPA로 공간 데이터의 입/출력을 다뤄보자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://docs.jboss.org/hibernate/orm/6.3/userguide/html_single/Hibernate_User_Guide.html#spatial"},"children":[{"type":"text","value":"Hibernate 공식문서"}]},{"type":"text","value":"와 "},{"type":"element","tagName":"a","properties":{"href":"https://www.baeldung.com/hibernate-spatial"},"children":[{"type":"text","value":"Baeldung"}]},{"type":"text","value":"을 함께 참고하면 좋다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"3-1. 설정"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"공간 데이터를 사용하기 위해서는 의존성을 하나 추가해야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"groovy"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-groovy"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-groovy"]},"children":[{"type":"text","value":"implementation "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'org.hibernate.orm:hibernate-spatial:{hibernate vesion}'"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"hibernate-spatial"}]},{"type":"text","value":"의 버전은 현재 프로젝트에 적용된 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"hibernate"}]},{"type":"text","value":"의 버전과 동일하게 작성해 주면 된다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n만약 사용하는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"hibernate"}]},{"type":"text","value":"의 버전이 6.0 이전의 버전이라면, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Dialect"}]},{"type":"text","value":" 설정을 따로 해주어야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"groovy"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-groovy"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-groovy"]},"children":[{"type":"text","value":"spring"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"jpa"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"database"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"platform "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" org"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"hibernate"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"spatial"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"dialect"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"mysql"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"MySQL8SpatialDialect"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"hibernate 6.0"}]},{"type":"text","value":" 부터는 spatial 관련 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Dialect"}]},{"type":"text","value":"는 모두 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Deprecated"}]},{"type":"text","value":"이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Hibernate-spatial"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Point"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"LineString"}]},{"type":"text","value":" 등의 데이터타입들은 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"java"}]},{"type":"text","value":" 표준 라이브러리도 아니고 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"JDBC"}]},{"type":"text","value":"의 사양도 아니다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n그렇기에 공간 데이터를 사용하기 위해서는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"JTS"}]},{"type":"text","value":"라는 외부 라이브러리를 이용해서 공간 데이터를 사용해야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"hinernate-spatial"}]},{"type":"text","value":"는 내부에 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"JTS"}]},{"type":"text","value":" 와 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"geolatte-geom"}]},{"type":"text","value":" 을 포함하고 있다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"3-2.  JTS 공간 데이터 다루기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"hibernate spatial"}]},{"type":"text","value":"은 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"JTS"}]},{"type":"text","value":"를 사용하여 공간 데이터에 대한 타입을 지원한다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Point"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"LineString"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Polygon"}]},{"type":"text","value":" 등의 공간 데이터를 사용하기 위해서는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"JTS"}]},{"type":"text","value":"에서 제공하는 데이터 타입을 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":"해야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"import"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","namespace"]},"children":[{"type":"text","value":"org"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"locationtech"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"jts"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"geom"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Point"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Entity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"name "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"example\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"  \n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Coordinate"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"  \n  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Id"}]},{"type":"text","value":"  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@GeneratedValue"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"strategy "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"GenerationType"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"IDENTITY"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Long"}]},{"type":"text","value":" id"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Point"}]},{"type":"text","value":" point"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"가장 흔하게 사용되는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Point"}]},{"type":"text","value":"와 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Polygon"}]},{"type":"text","value":"을 생성해보면, 다른 타입에 대한 사용은 금새 익힐 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"공간 데이터를 생성하는 방법에는 크게 두가지가 있다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n첫 번째는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"GeometryFactory"}]},{"type":"text","value":" 를 사용하는 것이고,"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n두 번째는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"WKTReader"}]},{"type":"text","value":"를 사용하는 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"em","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"WKT"}]},{"type":"text","value":"에 대한 설명은 1-2를 참고"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Test"}]},{"type":"text","value":"  \n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createPointWithFactory"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//given  "}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"GeometryFactory"}]},{"type":"text","value":" geometryFactory "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"GeometryFactory"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Coordinate"}]},{"type":"text","value":" coordinate "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Coordinate"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"180"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"90"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//when  "}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Point"}]},{"type":"text","value":" point "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" geometryFactory"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createPoint"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"coordinate"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n    point"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setSRID"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4326"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// SRID 설정  "}]},{"type":"text","value":"\n  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//then  "}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assertThat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"point"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getX"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"isEqualTo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"180"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assertThat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"point"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getY"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"isEqualTo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"90"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"  \n\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Test"}]},{"type":"text","value":"  \n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createPointWithWKT"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"throws"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ParseException"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//given  "}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"WKTReader"}]},{"type":"text","value":" wktReader "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"WKTReader"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Geometry"}]},{"type":"text","value":" read "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" wktReader"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"read"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"POINT(180 90)\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//when  "}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Point"}]},{"type":"text","value":" point "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Point"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" read"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n    point"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setSRID"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4326"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//then  "}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assertThat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"point"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getX"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"isEqualTo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"180"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assertThat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"point"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getY"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"isEqualTo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"90"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"WKTReader"}]},{"type":"text","value":"를 사용하는 방식은 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"WKT"}]},{"type":"text","value":" 를 읽어서 공간 데이터를 생성하는데, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"WKT"}]},{"type":"text","value":"는 모든 공간 데이터 타입의 입력이 가능하다. 그렇기 때문에 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"read()"}]},{"type":"text","value":"의 반환 값이 추상클래스인 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Geometry"}]},{"type":"text","value":"타입을 반환하기에 다운캐스팅이 필요하다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n또한, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"WKT"}]},{"type":"text","value":"를 파싱하는 과정에서 발생할 수 있는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ParseException"}]},{"type":"text","value":"도 처리해줘야 하기에 사용하기에 번거롭기 때문에 개인적으로는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"GeometryFactory"}]},{"type":"text","value":"를 사용하는 방식을 선호한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"어떠한 방식을 사용하든 꼭 한 가지 주의해야 할 점이 있다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\nSRID 값이 4326이라는 가정하에, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"MySQL"}]},{"type":"text","value":" 에서 사용하는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"WKT"}]},{"type":"text","value":"의 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"X"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Y"}]},{"type":"text","value":" 값은 각각 위도와 경도이다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"예시) POINT(위도 경도)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그런데 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"new Coordinate()"}]},{"type":"text","value":"의 인자와 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"WKTReader"}]},{"type":"text","value":"가 읽는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"WKT"}]},{"type":"text","value":" 모두 경도, 위도 순이다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"예시) "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"new Coordinate(경도, 위도)"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"wktReader.read(\"POINT(경도 위도)\")"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"SRID 값에 따라 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"X, Y"}]},{"type":"text","value":"가 각각 의미하는 값이 달라질 수 있기에 이런 차이가 발생한 듯하다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그런데 데이터의 삽입과정과 일반적인 조회에서는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"X, Y"}]},{"type":"text","value":"에 그 어떤 값이 들어가도 예외가 발생하지 않는다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Test"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"selectWithSpatialException"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//given"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Point"}]},{"type":"text","value":" point "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" geometryFactory"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createPoint"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Coordinate"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"10"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"110"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    point"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setSRID"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4326"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CoordinateEntity"}]},{"type":"text","value":" coordinateEntity "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" repository"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"save"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CoordinateEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"point"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//when"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CoordinateEntity"}]},{"type":"text","value":" saved "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" repository"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findById"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"coordinateEntity"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getId"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"get"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//then"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assertSoftly"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"softAssertions "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"->"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assertThat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"saved"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getPoint"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getX"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"isEqualTo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"10"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assertThat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"saved"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getPoint"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getY"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"isEqualTo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"110"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"예외는 MySQL에서 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ST_X"}]},{"type":"text","value":" 또는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ST_Y"}]},{"type":"text","value":"를 통해 point의 값을 위도 경도로 변환하려 할 때 발생한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Query"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"value "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","triple-quoted-string","string"]},"children":[{"type":"text","value":"\"\"\"\n        SELECT co.id AS id, st_x(co.point) AS latitude, st_y(co.point) AS longitude\n        FROM example AS co\n        WHERE co.id = :id\n        \"\"\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Optional"}]},{"type":"element","tagName":"span","properties":{"className":["token","generics"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CoordinateDto"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findCoordinatesById"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Param"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"id\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Long"}]},{"type":"text","value":" id"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"공간함수인 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ST_X"}]},{"type":"text","value":" 와 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ST_Y"}]},{"type":"text","value":" 를 이용해 위도, 경도 값을 변환하여 반환받는 쿼리이다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"JPA에서 사용 가능한 공간함수에 대한 설명은 3-3에서 조금 더 자세히 다룬다."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위 메서드를 실행시켜보면, 위도 범위를 벗어났다는 예외가 발생한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-text"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Caused by: com.mysql.cj.jdbc.exceptions.MysqlDataTruncation: Data truncation: \nA parameter of function st_x contains a geometry with latitude 110.000000, \nwhich is out of range. It must be within [-90.000000, 90.000000].\n\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:104)\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)\n\tat com.mysql.cj.jdbc.ClientPreparedStatement.executeQuery(ClientPreparedStatement.java:972)\n\tat com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52)\n\tat com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java)\n\tat org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:217)\n\t... 111 more"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"데이터를 삽입하는 순간에는 문제가 발생하지 않지만, 공간함수를 사용한 조회에서는 예외가 발생할 수 있다는 것은 문제사항에 대한 인지를 늦추게 된다. 이를 방지 하기 위해 공간 데이터를 사용하는 엔티티를 생성하는 시점에 위도 경도 범위에 따른 검증 절차를 추가해주는 것이 바람직하다고 생각한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"다음은 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Polygon"}]},{"type":"text","value":" 을 생성하는 코드이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Test"}]},{"type":"text","value":"  \n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createPolygonWithFactory"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//given  "}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"GeometryFactory"}]},{"type":"text","value":" geometryFactory "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"GeometryFactory"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Coordinate"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" coordinates "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Coordinate"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"  \n            "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Coordinate"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"  \n            "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Coordinate"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"10"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"  \n            "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Coordinate"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"10"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"10"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"  \n            "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Coordinate"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"10"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"  \n            "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Coordinate"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n    \n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//when  "}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Polygon"}]},{"type":"text","value":" polygon "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" geometryFactory"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createPolygon"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"coordinates"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n    polygon"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setSRID"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4326"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// SRID 설정  "}]},{"type":"text","value":"\n  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//then  "}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assertThat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"polygon"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getCoordinates"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"hasSize"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"5"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"  \n  \n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Test"}]},{"type":"text","value":"  \n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createPolygonWithWKT"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"throws"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ParseException"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//given  "}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"WKTReader"}]},{"type":"text","value":" wktReader "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"WKTReader"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Geometry"}]},{"type":"text","value":" read "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" wktReader"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"read"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"POLYGON((0 0, 10 0, 10 10, 0 10, 0 0))\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//when  "}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Polygon"}]},{"type":"text","value":" polygon "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Polygon"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" read"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n    polygon"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setSRID"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4326"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//then  "}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assertThat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"polygon"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getCoordinates"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"hasSize"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"5"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Polygon"}]},{"type":"text","value":"을 생성할 때는 주의해야 할 점들이 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"마지막 좌표는 항상 시작점 이어야 한다.\n"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Polygon"}]},{"type":"text","value":"은 다각형의 모양인데, 마지막 좌표가 시작점이 아니라면 닫혀있는 형태가 아니게 된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"구멍 뚫린 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Polygon이 생성 가능하다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Polygon"}]},{"type":"text","value":" 내부에 구멍이 뚫려 튜브 또는 도넛 형태의 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Polygon"}]},{"type":"text","value":"을 생성 할 수 있다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"GeometryFactory"}]},{"type":"text","value":" 에서는 구멍을 위해 두 번째 인자로 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"LinearRing[]"}]},{"type":"text","value":" 을 받는다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Polygon"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createPolygon"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"LinearRing"}]},{"type":"text","value":" shell"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"LinearRing"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" holes"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"  \n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Polygon"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"shell"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" holes"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위에 내가 사용한 예시처럼 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Coordinate[]"}]},{"type":"text","value":" 하나만 인자로 사용하게 되면 구멍이 없는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Polygon"}]},{"type":"text","value":"이 생성된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Polygon"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createPolygon"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Coordinate"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" shell"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"  \n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createPolygon"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createLinearRing"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"shell"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Polygon"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createPolygon"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"LinearRing"}]},{"type":"text","value":" shell"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"  \n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createPolygon"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"shell"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"null"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"WKT"}]},{"type":"text","value":"에서는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"POLYGON((0 0, 10 0, 10 10, 0 10, 0 0), (2 2, 2 4, 4 4, 4 2))"}]},{"type":"text","value":"\n이런 방식으로 구멍이 뚫린 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Polygon"}]},{"type":"text","value":"을 생성할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위에 내가 사용한 예시처럼 하나의 인자만 넣어준다면, 구멍이 없는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Polygon"}]},{"type":"text","value":"이 생성된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"3-3. 공간함수를 사용한 조회"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"기본적인 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"CRUD"}]},{"type":"text","value":"는 여타 다른 데이터와 동일하게 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"DataJpa"}]},{"type":"text","value":"가 마법처럼 해결해 준다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Entity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"name "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"example\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"  \n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Coordinate"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"  \n  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Id"}]},{"type":"text","value":"  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@GeneratedValue"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"strategy "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"GenerationType"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"IDENTITY"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Long"}]},{"type":"text","value":" id"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Point"}]},{"type":"text","value":" point"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"interface"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CoordinateRepo"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"extends"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"JpaRepository"}]},{"type":"element","tagName":"span","properties":{"className":["token","generics"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CoordinateEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Long"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"우리가 궁금한 건"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"SELECT"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"FROM"}]},{"type":"text","value":" example "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"WHERE"}]},{"type":"text","value":" ST_CONTAINS"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"ST_BUFFER"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"ST_GeomFromText"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'POINT(10 20)'"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4326"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"5000"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"point"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이런 쿼리를 적용하는 방법이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#spatial-configuration-dependency"},"children":[{"type":"text","value":"hibernate 공식 문서"}]},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Table 5. Hibernate Spatial dialect function support"}]},{"type":"text","value":" 항목을 참고하면 공간 함수 별로 지원 여부가 표시되어 있는데, 다른 DB는 모르겠지만 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"MySQL"}]},{"type":"text","value":"은 5.6 이전 버전으로 표가 만들어져 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"표를 믿지 말고, "},{"type":"element","tagName":"a","properties":{"href":"https://dev.mysql.com/doc/refman/8.0/en/spatial-function-reference.html"},"children":[{"type":"text","value":"MySQL 공식 문서"}]},{"type":"text","value":"와 비교를 해가며 사용해야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"hibernate"}]},{"type":"text","value":"에서 지원하고 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"MySQL"}]},{"type":"text","value":"도 지원하는 공간 함수라면, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"JPQL"}]},{"type":"text","value":"이 사용 가능하다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위에서 얘기한 예시를 이용해 기준점으로부터 반경 5Km 내에 위치한 데이터들을 가져오는 기능을 만들어 보자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Query"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","triple-quoted-string","string"]},"children":[{"type":"text","value":"\"\"\"  \n        SELECT co  \n        FROM example AS co  \n        WHERE st_contains(st_buffer(:center, :radius), co.point)  \n        \"\"\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"  \n"},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"List"}]},{"type":"element","tagName":"span","properties":{"className":["token","generics"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CoordinateEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findAllWithInCircleArea"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Param"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"center\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Point"}]},{"type":"text","value":" center"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"  \n                                               "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Param"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"radius\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"int"}]},{"type":"text","value":" radius"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"MySQL"}]},{"type":"text","value":"의 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ST_COTAINS"}]},{"type":"text","value":"와 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ST_BUFFER"}]},{"type":"text","value":"는  "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"hibernate"}]},{"type":"text","value":"에서 지원을 해주기 때문에 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"JPQL"}]},{"type":"text","value":"로 사용이 가능하다.\n기준점과 반지름을 인자로 받아 쿼리를 생성한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Test"}]},{"type":"text","value":"  \n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findAllWithInCircle"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//given  "}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Point"}]},{"type":"text","value":" point "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" geometryFactory"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createPoint"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Coordinate"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"20"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"10"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n    point"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setSRID"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4326"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CoordinateEntity"}]},{"type":"text","value":" ce1 "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" repository"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"save"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CoordinateEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"point"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Point"}]},{"type":"text","value":" point2 "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" geometryFactory"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"createPoint"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Coordinate"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"40"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"40"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n    point2"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setSRID"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"4326"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n    repository"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"save"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CoordinateEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"point2"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//when  "}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"List"}]},{"type":"element","tagName":"span","properties":{"className":["token","generics"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CoordinateEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":" allContainArea "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" repository"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findAllWithInCircleArea"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"point"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"5000"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"//then  "}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assertSoftly"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"softAssertions "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"->"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"  \n        "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assertThat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"allContainArea"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"hasSize"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n        "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assertThat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"allContainArea"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"get"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"isEqualTo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"ce1"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n        "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assertThat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"allContainArea"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"get"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getPoint"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getX"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"isEqualTo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"20"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n        "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assertThat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"allContainArea"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"get"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getPoint"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getY"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"isEqualTo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"10"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"  \n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"테스트를 실행시켜 정상적으로 동작하는 것을 확인 할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"나오며"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"MySQL"}]},{"type":"text","value":" 에서의 공간 데이터, 공간 함수, 공간 인덱스 그리고 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"DataJpa"}]},{"type":"text","value":"에서의 적용까지 알아보았다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"물론 공간 데이터와 관련된 복잡한 기능개발을 위해서는 부족한 글일 수 있다.\n그래도 이 글이 낯설기만 했던 공간 데이터와 한 걸음 더 가까워질 수 있는 기회가 되면 좋겠다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{},"children":[{"type":"text","value":"참고 자료"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"8.4 R-Tree 인덱스 | Real MySQL 8.0"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://dev.mysql.com/doc/refman/8.0/en/spatial-types.html"},"children":[{"type":"text","value":"11.4 Spatial Data Types | MySQL"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://dev.mysql.com/doc/refman/8.0/en/spatial-analysis-functions.html"},"children":[{"type":"text","value":"12.16 Spatial Analysis Functions | MySQL"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://docs.jboss.org/hibernate/orm/6.1/userguide/html_single/Hibernate_User_Guide.html#spatial"},"children":[{"type":"text","value":"19. Spatial | Hibernate"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.baeldung.com/hibernate-spatial"},"children":[{"type":"text","value":"Introduction to Hibernate Spatial | Baeldung"}]}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"excerpt":"…","timeToRead":20,"frontmatter":{"title":"공간 데이터 개념부터 적용까지","userDate":"24 October 2023","date":"2023-10-24T12:00:00.000Z","tags":["JPA","MYSQL","SPATIAL","INDEX"],"excerpt":null,"image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACvElEQVQozy2S228TRxjF928sEmrFA6Jq2hLkyPi23t3Zy+zs+l6bONhJoBVJSJwASftQbmorpQ9JX/uA1ApxLVVEQtpiIHXSF379bPEw0szs6OzvnPNZWbdMwfcItMHzA6725/m61+NCJkPd91np90nSKlm7SE7u0kqNKIqpyF0QRURuSvPzK3TOLVGfmsfKOg55z8O2HQolm63BgGcPHvD9nTv8+uMP/Ly5KSJVbOVRKhapyD6ODYlJ0UaTenV6pzfpfrLBpTPXsZTrEigfJ1/g4sUcq6trHI9GjI5P4P17dnd2qIqIiRNiU0FrjVMqyfsicZIS6Zi01KZ76iatL4UwDHyCMMTIR9f1GQzWGf7zN3t7exweHnDv/l0RrIhgjOtHEosmkvdRGBFLTJEen7XY7WPKFSxXcnMkq1BysR2PtdVV3r77l/2X+xwdveMnse3Ij1qtFp1OG2OMrIRGo8nc3Bzdbpd2u43tO6ITYHlKkYiY73rMTGfY+vY7ITvk+dMnHL46YHt7G6VCkqRKvV7HU4FQGdk3aDZbsppUq3XpQAlpjFXM5fDyeYw0psplBmtrQnbEk8ePONh/yc7OLqk06rqKhflFbm1ucW1phYXFRW7cuMny8ooUVSMU267EZ4WSgZI83FBJRi7r6xucnPzHi+fPeDMcsrv7CzoaEybUGjWqIu4H0YQ4kbJCoVVy9kMz0bE6n12jfXaJZmYBnatNCIevX3Pw6i9Go+MJ4TizUOzkL2WZ6X1BuVGQzA3aT/GVlnnUlGwfzwuxGjN9Zj9dpvfxLRofLXP9mwHDt294+Ptv/PniD+7evk0qdFrGY1yIXy2Qv5whe2WawlwWlfqkukY5b+MVC1iBCfECGdCZy5hMm686s2x8yGY8QrOzXbEcCWE0ITVCagIhNhH5ZoHp+SnO96fwUjUp738KuVUmRhYzRwAAAABJRU5ErkJggg==","aspectRatio":1.8562874251497006,"src":"/static/d07d53114d80bb20c6aaa50caef05ab3/8c530/spatial-data.png","srcSet":"/static/d07d53114d80bb20c6aaa50caef05ab3/3a443/spatial-data.png 930w,\n/static/d07d53114d80bb20c6aaa50caef05ab3/4d929/spatial-data.png 1860w,\n/static/d07d53114d80bb20c6aaa50caef05ab3/8c530/spatial-data.png 2080w","sizes":"(max-width: 2080px) 100vw, 2080px"}}},"author":[{"id":"5기_폴로","bio":"우아한테크코스 5기 폴로(이동훈)입니다 :)","avatar":{"children":[{"__typename":"ImageSharp","fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEwUlEQVQ4yw2R6U9bBQDAX3awQQ/o8Sh9r/dNr9e+no8er8crG6WvdEDbdT04Wo7COEs51h2VYwy2MQU2NnewOI2OZWrIZqbGzESnwbioUbMvyxJj/O4Hv2imyB/w++WX/IAoYXfZMJ1al8hPNXUOjc6vdw7PWDBXS+fJ7tMrwbZMdmoROxrtnJx/8M2LrlT0wvnZG1eXhybGA+Eo4HFgFmuDSo1MXv8wUZwv39lOTV6we5qO5acn1u/3nrl4vDA3tnY/3D249uSHYCzVGIlNXNs6MXO5we0D3A6Hul4DcWEnETI7PMmpC6nivK+9o2Pm/NLDp/HCbH5h9fazl5ZA2BvtxoiIzmTrW7rZ3DliwlwAZkEV9Vq+WOEMxe0E6Ytns7OrZHbY3xKfurMdL862941e+WQnkOgaXNl0hmMmpzc+VsaPpXWoBUDkIqPZLldpiUSv2R9qzQ5d/fz7ifV39HZXKNNLkK04EcgvbuDtqWuf7uTnVnRGo9WFG+wODPcBQa/VYDLzxdJAIqexunKlhbefPk+XFnkwT8xla8SQDOKAzLp6g23r658ubj0eeGMZtdmVKqVUKgbcPg+CObl8kc7mdJKxkaXV0uaWDG0AqypxjdihEjWiMrdewq6qGpu7dGxwKjMzF4wnVVq9kAcBGr3O3IBxIQhvbmkbKJSv3x1b2ZAp1QXS/WCk7d5o7OVHF39893TOI/M0BT1t6Z6Zc6n8EO1whdNpA7yNRLDRyWKDfIEw3N2fLp5pHRxvbwlt5KO/XJv+aiH7+vmD3VdPvl09mSEb9ajJgdm09Soum6FSSACISTfLOUxKhZhTI+ZDWrXKoJa3Ouwrmfjvt86+Wpv8b+fh3z8/2v1u62ouIRXBdq0MR8RaKU8IcQBBTSWu5YLUChXMgphUKYeBiDlHUW0h4H6xPPLbZunfna3dXx/98fFGLuTDzfXNDfqoB+kJoU0WGXAClw2TmiMIpIYZJilokHIJoyTlN5VjoT8fb/zz7O7rL2/sPv9gNkdadYqg09jsQoNOw6mMdzHrAkoJy1LOdmvcG8FEIYtkOIws97iXBwK4UvjZ6eN/bc99sZCZjHqHW63lbl8faY0daWjx2XvC9nNZAiglLatDniv9zqRH1hHQlJLY/XJk7DgGAECThtcXQLX8vdtwmnReGvRfPhlMk0Sz1zEc953r8u/BtlLSXmg3Tccsxbi9O4i69CIxn6dRSvZ4NrWyprIi7DVH/BaLWkLiaIvPkY40FXuT051BoD+CFeKO0VZju0ePyAV8DkipotBpdMJtVUtFIPWwTCYfSIcRGSQX1Inq2AohpFMIQ7i53BcBbhfJm4VmApXQqPQ6ZjXMYYKMal4tw4DoOlJxEcg4X56Kkn4JzNZIYJWQq5bACgGkEkPRgBV4r0u9lkYgFqOGSuXU0Bk0mgiu5TDoHjty78biUcK1uTarkQllPC7MZmqlsE7O49cy9xRWrRS4Q9a2qWn7DlSA1dRqStXBAxU8DgsCGahasvbmwvW3yuP9CQGXzeeCErgWUfCNSgGXVa2RcDVSGFgKy1mUw/v2H2RXUyoPHTqw/yCNShHBIMxhnT01uv3+ugVF+Hs6NmsvVa8QIEo+h0kX1rHEEPg/rahjHNO5Z0wAAAAASUVORK5CYII=","aspectRatio":1,"src":"/static/283756d694c1334511090ce8355d08da/6ba37/polo.png","srcSet":"/static/283756d694c1334511090ce8355d08da/22f7f/polo.png 40w,\n/static/283756d694c1334511090ce8355d08da/587c9/polo.png 80w,\n/static/283756d694c1334511090ce8355d08da/d966b/polo.png 120w,\n/static/283756d694c1334511090ce8355d08da/6ba37/polo.png 512w","sizes":"(max-width: 512px) 100vw, 512px"}}]}}],"source":null}},"relatedPosts":{"totalCount":4,"edges":[{"node":{"id":"9e3592bf-d7a1-576f-9fb0-9d698a9cafb8","timeToRead":20,"excerpt":"…","frontmatter":{"title":"공간 데이터 개념부터 적용까지","date":"2023-10-24T12:00:00.000Z"},"fields":{"slug":"/post/2023-10-04-spatial-data/"}}},{"node":{"id":"b262b0cf-321d-504b-9ece-95a9d5e06768","timeToRead":7,"excerpt":"들어가면서 JPA를 사용한 개발을 진행하면서 가장 많이 들었던 고민 중 하나는  였습니다. ‘Cascade…","frontmatter":{"title":"JPA Cascade는 무엇이고 언제 사용해야 할까?","date":"2023-10-16T12:00:00.000Z"},"fields":{"slug":"/post/2023-08-14-JPA-Cascade/"}}},{"node":{"id":"764d6aac-0cfd-53e8-b8e5-d95dfe0a3f5a","timeToRead":9,"excerpt":"F12 프로젝트를 진행하면서 검색기능을 개발하는 과정에서 고민했던 부분을 소개해드리려고 합니다.   F1…","frontmatter":{"title":"JPA의 동적 쿼리","date":"2022-10-24T12:00:00.000Z"},"fields":{"slug":"/post/2022-10-11-jpa-dynamic-query/"}}},{"node":{"id":"6b99ca22-2e97-57a7-9d69-3a11d5e8be95","timeToRead":6,"excerpt":"JPA…","frontmatter":{"title":"JPA Hibernate 프록시 제대로 알고 쓰기","date":"2022-10-17T13:10:00.000Z"},"fields":{"slug":"/post/2022-10-17-jpa-hibernate-proxy/"}}}]}},"pageContext":{"slug":"/post/2023-10-04-spatial-data/","prev":{"excerpt":"…","timeToRead":8,"frontmatter":{"title":"useLayoutEffect를 활용한 산발적 마커 렌더링 최적화","tags":["useLayoutEffect","rendering optimization","react","google map api"],"date":"2023-10-21T12:00:00.000Z","draft":false,"excerpt":null,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.4069591527987897,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABfUlEQVQ4y51STU/CQBDtr/QHmHjx5MVAwoU/wMGkEmKiBw8YTEiJJBx6EzAcjNxMrBeM8llYCgLt0t322V1SA6USZJPJTt7MvHkzuwoix/f9jTvu7MpRdhVw7sN1PSwDY9yTvsB2NVT+IhMkA0LRHzkYWhSfXRu9oSMxEdtbYZg0txk6Axsz28XTs4UHfYglX2Ei9m/C2YLBHFO8t+Y4PTegXrfReJkcTiiKBsTB5U0bJ2dvODp+xZ3Wx2hCZbODCNt9G2S6xO19DxdXX3J8sce9FEa/gijqmo5U9NgY46OzkI/TMW0sYghDX4mScc6lMcYxnlKYxIb1TUEmAXlAaAWY67LfvKiQLYWHnPXaDYWmaaJcLqNSqaDZbKJWqyGfz6NaraJUKsEwDNTrdelrmoZisQhK6bZCz1t91FarhXQ6jWw2K5MLhQJSqRRUVUUymYSu68jlcjKeyWSQSCRACIkfOQRD8rCRMLErcTO22t16LHbkKCgS991p9FF+AAcIL+F24PU5AAAAAElFTkSuQmCC","sizes":"(max-width: 1440px) 100vw, 1440px","src":"/static/2a116c77162b22ac825d47f365048d5c/d9bdf/scent-rendering-optimization.png","srcSet":"/static/2a116c77162b22ac825d47f365048d5c/3a443/scent-rendering-optimization.png 930w,\n/static/2a116c77162b22ac825d47f365048d5c/d9bdf/scent-rendering-optimization.png 1440w"}}},"author":[{"id":"5기_센트","bio":"우아한테크코스 5기 센트(김영우)입니다 :)","avatar":{"children":[{"fluid":{"aspectRatio":1,"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAUHCP/EABcBAQEBAQAAAAAAAAAAAAAAAAcGAgj/2gAMAwEAAhADEAAAAaoktC2MWXeClWqbWi5MPkycDpz7/8QAGxAAAgMBAQEAAAAAAAAAAAAABAUBAgMGABX/2gAIAQEAAQUCa/JA9D1CswYmCtN+RW1IYrOG56LvSMVbMfS+oQM3Y5QqBb5//8QAJBEAAQMDBAMAAwAAAAAAAAAAAQIDEgQFEQAGExQVISIzQVT/2gAIAQMBAT8Bve574q+XW1+W3CBT11YlpVNerg02OJ5aeKKalDeUIKFQ9njBUEYTLT+47u0ttrzF2EKajSZ3KpnLqU8iuTkioqyVFX0SST71uy227v056FFly51fIeqxlyW2rw8qZh9SeAdMs5dAcP171UqUXRlR/DS/s/zMa//EACYRAAEDAwMDBQEAAAAAAAAAAAECAwQFERIUIiMABiETFSYxMkT/2gAIAQIBAT8B7am0GfV0UM0+ktyUUiNOVKkQoUpL6yzGW+3sadUwtsvN5F/FalKKClGTJebo8FzNXt8BV35NlIiNYECQ4E42QBja2NgBb667YnTdHIOslXapcb0zqHbt/JKKzs37OHi224uP8+OmkpAWAlIGoleAAP6Xev/EACcQAAICAQMDAwUBAAAAAAAAAAIDAQQFERIhABMiBhUxFCMyQUJS/9oACAEBAAY/AuxN2E24xdV6VfcbMGcgxhvkdxgoaoMkY26FO0R5mOsUq1hr2SlnnkrilZA1praaLtE0TUuutpnCxN0xWIojmT4GLuIVax1Fqx7VYCk9NJKN5ETdZJnB/viYiJnr3ezicZZrVKNNa8tYlJ26dlVOUnUVXOdZRZrtJhMIJiGKLbPXqipZpzSDJLtlHesVWDklZWaGQXXx9dbIEa9SUQutXMZcmXt8A3GZWqVOHV6in2fpUnDkmqvNt8pWSuZAlr2hIl5Dt0n46y4kU6JxjAXtkh2x7jSDWNJ/KB1GJ/yRD8FMTiqVprSSu16gaEiZAyHHQW8Xbx57iG10HW/lMqDYPHVfKXa6yt5CrVuWZEAEJfZrre8hDbMBDHGbJGPGCMtIiOOv/8QAGBABAQEBAQAAAAAAAAAAAAAAARExACH/2gAIAQEAAT8hmcU6DZdmpRaxaNe0kkp1lIR4QjN6rkqSeiAoA9W8EOUAn2NHhqdw4Hw0ChHp3fvum+JdKVrSCbTklsBOyBdQEgA3aMJQNiw740ErLhgHdJAP/9oADAMBAAIAAwAAABDbyHz/xAAZEQEAAwEBAAAAAAAAAAAAAAABABEhMVH/2gAIAQMBAT8QKwBsWMpUJGhOLkQimiyKkZKxUs7OfsD7btNqAhcUrcrLh1fMn//EABkRAQADAQEAAAAAAAAAAAAAAAEAETEhgf/aAAgBAgEBPxDXasegg5GQrQ1bNdiom8wIAAKA4DRIUAr6QkqonWR9gAIGAAB5P//EABcQAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQEAAT8QR6ZDm4V6GBFhAOGEWLKCZqI7HTUjoiLFRZtsTlIKOmLeiyrTx55QWqNagEhOjqFTMjRqH1V7hfHFuGaLg8tejjGEEIKCGhW9atm8oVQf/9k=","sizes":"(max-width: 460px) 100vw, 460px","src":"/static/75c48ec248b8d46e91c41f2ec02a5a32/f86e8/scent.jpg","srcSet":"/static/75c48ec248b8d46e91c41f2ec02a5a32/fd013/scent.jpg 200w,\n/static/75c48ec248b8d46e91c41f2ec02a5a32/25252/scent.jpg 400w,\n/static/75c48ec248b8d46e91c41f2ec02a5a32/f86e8/scent.jpg 460w"}}]}}]},"fields":{"layout":"post","slug":"/post/2023-10-11-marker-rendering-optimization/"}},"next":{"excerpt":"…","timeToRead":6,"frontmatter":{"title":"어떤 경우에 한 방 조인 쿼리와 여러 개 쿼리 분리를 고려할 수 있을까?","tags":["query","sub-query","join"],"date":"2023-11-13T12:00:00.000Z","draft":false,"excerpt":null,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.7181818181818183,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABSklEQVQoz41SO8+CQBC8n29hQWHrPyA2VEbwETukINFEMWIUNSRQUIgoKM6X3eTIefl8THJhb+9mmZtdAQ3P55O/dV0jDENkWYaqqnA+n1EUBe73e3NP3lUh3hUsyxKWZWE4HGI6nWI8HsP3fRyPx88F1QM1fjwecF0Xo9EI/X4fs9kMk8kEu92ueYHKkTyhK9PjT9BVUvyi8HK5sE/ykFTSl3LkocTtdmvuESgmn1+eTIntdovNZsMEtTmHwwHr9RrX65WbslqtMJ/PWQDlFosF54gnJDGKInQ6HRiGgSAIuCA1IY5jdLtdtNtteJ7HJNu22dfT6YQ0TTEYDOA4DsdNwf1+z6RWq4Xlcsm5PM+5ACmkZtAIfUNTMEkS9Ho9mKbJaj81grylp0u7aC/9FuoIqNDHgva/dF/of6b134z9usS7if91FnX8AbTBmyaEGKmpAAAAAElFTkSuQmCC","sizes":"(max-width: 756px) 100vw, 756px","src":"/static/3621bcf695c69be193a38a9b89c7ef9a/6113c/join-query-vs-multiple-quries.png","srcSet":"/static/3621bcf695c69be193a38a9b89c7ef9a/6113c/join-query-vs-multiple-quries.png 756w"}}},"author":[{"id":"5기_무민","bio":"끊임없이 생각하고 나아가는 개발자 무민(박무현)입니다","avatar":{"children":[{"fluid":{"aspectRatio":1.3157894736842106,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAADh0lEQVQozxXO609aBxjH8fMPbS+apmvaCiJwQEAz56VaJr14aatjOvDGmC1yE/FaYLMKnOPhrkwWkGERRTj3A8hNrMCYW7I3W9ZkybbsxbLE0eT79vP8HsBeuPRXr1xvr6yFGlxr+Bo/wbUrS/FygSrPoeVptDiRLD8/KvWGclwvzfPRoI8R+jOivWJHsAzosMoiXdVRNQ1ZNeTqZqq8TjKLVGkyWXyeKEoP8l37WXEgI/TRbR6C56Va3TTHzQh8eXGgCCgO87PH5+pU5av0uSJ5uZVOlSvR9RT2KFbu2M20eUjQg49EGTNRXCGLlkxlGS9p0bcjsSroPQPk0bzyqDx3fK5MVHr2znx48t8/6W275eE3Qbab7gjQtlzFX6n6LxqhWiNSu4JLP8yn658Eyzx3Duh0MR97cz2BjMST4cJECIv9fHUSdK2vm8wP9gi+m3p6WHgSLvQFz0YOio9CeSHCsCGmFcnxXVmADxFcmObBFLjDcJ04XsGvr+sFJqBRaHpdJAumWiGc5UDZEMZy4Cw7znESbTDFRbLvcfsOIUKYdpgRIMy9LWKXTP/3N40lEe2ExuiNd/twvifbDIRIvpPkwxQPorhQcywDIhlABBPiHUYMMRIX02InvTh6fX1xEHw9JBm2zpvGP5sfGDd063ZAB96UAojkOZvRfDjDb2IxRIhhWvI+hrNNITj21ztCq1DKwPtP2vsfg/2jgoFhXt/wU7XYkRY4CEHzipMCYUbUfFsM4U3c7qT1R+ho8PRLJGyemelj962OyTGHcfHZ2GPR4JBY5pmTT1ncLHtWCJGdO6TEyUi2MEDkQDthatCDxhunzO/ogs7Yf7drUCiNmBbowOqGUv4pTzoISqcfPJyUjaherMish9Kvkz1radUeDoDbaBdC7l+cZH89rvyBEY3Yq1XjpvzzlWfjjhmFdXJibUxuHh2zySf2teqSTaMzbnO0qdYXSdZLFOjdeDPkOI3VqdxvaeyXVO4dXvsHq9GujEMf1SuLW9ofkaU6bGy4TZeQseY2fmFwfTidvDGb+EB5CAzbjnqXE6Aucd+SliylRp2kPkZN7+NTUNzkSWx6ItZN/9LroN4eMrzaXfO96V47uak67rMkDPEToGU2eE8ValGFbs9+d2cufHv24NbU9zenIrdmwh/NRO6qondUEa42zp6PdS1HepcifHWYo/52YCMss0X/B/HJE5CweCwwAAAAAElFTkSuQmCC","sizes":"(max-width: 399px) 100vw, 399px","src":"/static/6369129db37503fc50518a11710d5840/b31c1/moomin.png","srcSet":"/static/6369129db37503fc50518a11710d5840/8ac63/moomin.png 200w,\n/static/6369129db37503fc50518a11710d5840/b31c1/moomin.png 399w"}}]}}]},"fields":{"layout":"post","slug":"/post/2023-10-09-join-query-vs-multiple-quries/"}},"primaryTag":"JPA"}},"staticQueryHashes":["2130001345","4041952199"]}