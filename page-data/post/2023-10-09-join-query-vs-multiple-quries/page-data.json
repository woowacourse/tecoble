{"componentChunkName":"component---src-templates-post-tsx","path":"/post/2023-10-09-join-query-vs-multiple-quries/","result":{"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAwUlEQVQY003Qvw7BUBTH8YYgLCKExWw1IczEwAtIJCa1GJuyCalI/EmERUgHi5cxeI8uTTt1aHp9r9wmhk/OOfee/HJzNd/3Dc/zutS24zgZIUQpiqIt9YY+vUb9+eur6Kh5GN9LGkEn2DBd1y1zmGfxjjf9AFm1XEQCBe6aVBMVLJHiLBcHTiHwQS0MQ/mSOlYsjPDCAjOMccUFR3Z0NdvYISkDW9jAQi8IAhnYgAyZ4wELEzUfcFZfYmCPJ9ZIfwG9owW1fLgCkwAAAABJRU5ErkJggg==","width":400,"height":88,"src":"/static/0b18bd94a62a12fdc81ea720c28722f6/3891b/tecoble.png","srcSet":"/static/0b18bd94a62a12fdc81ea720c28722f6/3891b/tecoble.png 1x"}}},"markdownRemark":{"html":"<p>최근에 프로젝트에서 리팩토링과 동시에 쿼리 개선을 하고 있는데요. 조인 한 방 쿼리로 <strong>한 번에 끝내는 게 여러 번 네트워크 타는 것보다 좋을 것</strong> 같아서 한 방 쿼리로 수정하고 있다가 다음과 같이 모든 쿼리가 조인이 덕지 덕지 붙어있는 코드를 보고 뭔가 이상함을 감지했습니다.</p>\n<p>​</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> pet_food p1_0\n<span class=\"token keyword\">join</span> brand b1_0 <span class=\"token keyword\">on</span> b1_0<span class=\"token punctuation\">.</span>id<span class=\"token operator\">=</span>p1_0<span class=\"token punctuation\">.</span>brand_id\n<span class=\"token keyword\">join</span> pet_food_primary_ingredient p2_0 <span class=\"token keyword\">on</span> p1_0<span class=\"token punctuation\">.</span>id<span class=\"token operator\">=</span>p2_0<span class=\"token punctuation\">.</span>pet_food_id\n<span class=\"token keyword\">join</span> primary_ingredient p3_0 <span class=\"token keyword\">on</span> p3_0<span class=\"token punctuation\">.</span>id<span class=\"token operator\">=</span>p2_0<span class=\"token punctuation\">.</span>primary_ingredient_id\n<span class=\"token keyword\">where</span> p1_0<span class=\"token punctuation\">.</span>id<span class=\"token operator\">=</span><span class=\"token number\">1</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> review r1_0\n<span class=\"token keyword\">join</span> pet p1_0 <span class=\"token keyword\">on</span> p1_0<span class=\"token punctuation\">.</span>id<span class=\"token operator\">=</span>r1_0<span class=\"token punctuation\">.</span>pet_id\n<span class=\"token keyword\">join</span> breed b1_0 <span class=\"token keyword\">on</span> b1_0<span class=\"token punctuation\">.</span>id<span class=\"token operator\">=</span>p1_0<span class=\"token punctuation\">.</span>breed_id\n<span class=\"token keyword\">join</span> pet_size p2_0 <span class=\"token keyword\">on</span> p2_0<span class=\"token punctuation\">.</span>id<span class=\"token operator\">=</span>b1_0<span class=\"token punctuation\">.</span>pet_size_id\n<span class=\"token keyword\">left</span> <span class=\"token keyword\">join</span> helpful_reaction h1_0 <span class=\"token keyword\">on</span> r1_0<span class=\"token punctuation\">.</span>id<span class=\"token operator\">=</span>h1_0<span class=\"token punctuation\">.</span>review_id\n<span class=\"token keyword\">join</span> adverse_reaction a1_0 <span class=\"token keyword\">on</span> r1_0<span class=\"token punctuation\">.</span>id<span class=\"token operator\">=</span>a1_0<span class=\"token punctuation\">.</span>review_id\n<span class=\"token keyword\">where</span> r1_0<span class=\"token punctuation\">.</span>id<span class=\"token operator\">=</span>?</code></pre></div>\n<p>​</p>\n<p><code class=\"language-text\">뭔가 아닌 거 같은데..?</code> 물론 한 방 쿼리가 좋을 때도 있지만 항상 한 방 쿼리가 좋진 않을 것인데 <strong>언제 한 방 쿼리를 사용하고 언제 여러 개 쿼리를 사용</strong>할 수 있을지 궁금증이 생겼습니다.\n​</p>\n<hr>\n<p>​</p>\n<h2>조인(Join)으로 한 방 쿼리 vs 쿼리 여러 개</h2>\n<p>​</p>\n<blockquote>\n<p>No Silver Bullet - 만병통치약은 없다.\n​</p>\n</blockquote>\n<p><strong>어떤 성능 시나리오에서든 어느 솔루션이 더 빠른지 확인하기 위해 직접 솔루션을 테스트하고 측정해야 합니다.</strong> 즉, 최선의 경우는 없는데요. 하지만, 일반적으로 어떤 상황에서 쓰면 좋을지는 통계가 있을 것입니다. 테이블 관계를 기준으로 한번 살펴봅시다.\n​</p>\n<h3>일대일 관계</h3>\n<p>​\n일반적으로 일대일 관계 같은 <strong>많은 외부 레코드를 가리키지 않는 경우</strong> 다음과 같은 성능을 나타냅니다.</p>\n<p>​\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1290px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/636920497aec5a6398404e4910dc0c52/629d2/2023-10-09-join-vs-multiple-performance_graph.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQklEQVQoz11S7XKDMAzj/V9ztx/brgVKvuNYk51Cu+VOOJgg2XIWcKkCQgyLfIwxmFOHf8Rz72fP/XxvMeD754btERBTxiL8udaKIQKBEZLYSRXCF4tGcMYLT8Kwb/j4/MIjJPQuWIy5xgjdV4zHhpEiRu+EgNwOE7HKHTKFTrFSBysr3pWtZd0eSKWhK9tkpUhGvgHHDqWAWmReKcISoCTSp9CkeC2rfNn2AzE27K0iaMcxOqPgkIpY2EYraCSt7KDt9xlNiAD9mza/rFjurDCGCsk2mMFKxWH7QpiIC52RQkdNRERs2Wfzh9DNZ/+9KlpSdJ7pjPyPPqpD38HJGTq9NLxP3gktIe7LNLwUDoTm1CLIgYNp3GdFjqy8KFLonu8FzPVrGBfh+/163beZSznjtu74ua0o9BjzxPVd8e8qEb+EEMSiSGQo7gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2023 10 09 join vs multiple performance graph\"\n        title=\"2023 10 09 join vs multiple performance graph\"\n        src=\"/static/636920497aec5a6398404e4910dc0c52/629d2/2023-10-09-join-vs-multiple-performance_graph.png\"\n        srcset=\"/static/636920497aec5a6398404e4910dc0c52/0eb09/2023-10-09-join-vs-multiple-performance_graph.png 500w,\n/static/636920497aec5a6398404e4910dc0c52/1263b/2023-10-09-join-vs-multiple-performance_graph.png 1000w,\n/static/636920497aec5a6398404e4910dc0c52/629d2/2023-10-09-join-vs-multiple-performance_graph.png 1290w\"\n        sizes=\"(max-width: 1290px) 100vw, 1290px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>​\n조인이 가장 빠른데 그 이유는 여러 개 쿼리가 발생하면 데이터베이스에 대한 각 쿼리에 <strong>고정 비용</strong>이 발생하기 때문입니다. 일대일 관계 같은 경우 중복도 발생하지 않아서 부담 없이 조인을 사용할 수 있을 것 같습니다.</p>\n<p>​\n그렇다고 해서, 일대다 관계에서는 절대 조인을 쓰지 말란 것이 아닙니다. 위에서 말한 것에 핵심 포인트는 일대일 관계뿐 아니라 일대다 관계에서도 많은 외부 레코드를 가리키지 않는 경우입니다. 한 방 조인으로 결괏값 주기 vs 여러 번 통신 + 애플리케이션에서 조합의 <strong>트레이드오프</strong>를 잘 고려해 봐야 됩니다.\n​</p>\n<h3>일대다 관계</h3>\n<p>​\n하지만, 참조된 레코드 중 다수가 동일할 수 있는 <strong>일대다 관계</strong> 같은 경우 조인 시에 중복이 엄청나게 발생할 수 있으니 잘 생각해 봐야 됩니다.\n​</p>\n<p>예를 들어봅시다.\n​</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 670px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/05f9ff9efd6579a443ab577404f3c5d3/6bbca/2023-10-09-join-vs-multiple-entities.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 23.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA1ElEQVQY0z1QyQqFMBDr/3+aR1EQ9CDijrXuW5W8Znh6CG2nSSYzappnzA5xHKNpGuz7jmVZcF0Wy7rCWovVnawdxyH/933DDAO2bXfYkGWZnNM0QbVti6Io4Hke8jwXERuc5wnd92LIRnVdixlFrHVd56ChtUaapmI4jiOU7/tiFgQBemfAJDSgIEkSRFEkIJmGrBtj5I/aMAxFQ7CuqqoS0vM8H5iQBKYqy/JrRPDOFTAZp6MJE1PH6RQJ83+PLyjgnpiIJIIj8f3u8E1E7huAU/wAjil71/lP1cUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2023 10 09 join vs multiple entities\"\n        title=\"2023 10 09 join vs multiple entities\"\n        src=\"/static/05f9ff9efd6579a443ab577404f3c5d3/6bbca/2023-10-09-join-vs-multiple-entities.png\"\n        srcset=\"/static/05f9ff9efd6579a443ab577404f3c5d3/0eb09/2023-10-09-join-vs-multiple-entities.png 500w,\n/static/05f9ff9efd6579a443ab577404f3c5d3/6bbca/2023-10-09-join-vs-multiple-entities.png 670w\"\n        sizes=\"(max-width: 670px) 100vw, 670px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n​</p>\n<p>위와 같은 관계에서 1개의 게시물이 있고 게시물에는 2개의 댓글과 2개의 태그가 있다고 가정해 봅시다.</p>\n<p>​</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> post<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token keyword\">comment</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">.</span>id\n<span class=\"token keyword\">FROM</span> post\n<span class=\"token keyword\">LEFT</span> <span class=\"token keyword\">JOIN</span> <span class=\"token keyword\">comment</span> <span class=\"token keyword\">on</span> post<span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> <span class=\"token keyword\">comment</span><span class=\"token punctuation\">.</span>post_id\n<span class=\"token keyword\">LEFT</span> <span class=\"token keyword\">JOIN</span> tag <span class=\"token keyword\">on</span> tag<span class=\"token punctuation\">.</span>post_id <span class=\"token operator\">=</span> post<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">;</span>\n​\n<span class=\"token comment\">-- post_id comment_id tag_id</span>\n<span class=\"token comment\">-- 1        1           1</span>\n<span class=\"token comment\">-- 1        1           2</span>\n<span class=\"token comment\">-- 1        2           1</span>\n<span class=\"token comment\">-- 1        2           2</span></code></pre></div>\n<p>​</p>\n<p>위와 같은 쿼리를 실행하면 2 * 2로 4개의 결과가 나왔습니다. 여기서 댓글과 태그가 4개로 늘어난다면 어떻게 될까요?</p>\n<p>​</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> post<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token keyword\">comment</span><span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> tag<span class=\"token punctuation\">.</span>id\n<span class=\"token keyword\">FROM</span> post\n<span class=\"token keyword\">LEFT</span> <span class=\"token keyword\">JOIN</span> <span class=\"token keyword\">comment</span> <span class=\"token keyword\">on</span> post<span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> <span class=\"token keyword\">comment</span><span class=\"token punctuation\">.</span>post_id\n<span class=\"token keyword\">LEFT</span> <span class=\"token keyword\">JOIN</span> tag <span class=\"token keyword\">on</span> tag<span class=\"token punctuation\">.</span>post_id <span class=\"token operator\">=</span> post<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">;</span>\n​\n<span class=\"token comment\">-- post_id comment_id tag_id</span>\n<span class=\"token comment\">-- 1        1           1</span>\n<span class=\"token comment\">-- 1        1           2</span>\n<span class=\"token comment\">-- 1        1           3</span>\n<span class=\"token comment\">-- 1        1           4</span>\n<span class=\"token comment\">-- 1        2           1</span>\n<span class=\"token comment\">-- 1        2           2</span>\n<span class=\"token comment\">-- 1        2           3</span>\n<span class=\"token comment\">-- 1        2           4</span>\n<span class=\"token comment\">-- 1        3           1</span>\n<span class=\"token comment\">-- 1        3           2</span>\n<span class=\"token comment\">-- 1        3           3</span>\n<span class=\"token comment\">-- 1        3           4</span>\n<span class=\"token comment\">-- 1        4           1</span>\n<span class=\"token comment\">-- 1        4           2</span>\n<span class=\"token comment\">-- 1        4           3</span>\n<span class=\"token comment\">-- 1        4           4</span></code></pre></div>\n<p>​</p>\n<p>각 행의 곱인 4 * 4 = 16개의 행이 나오게 됩니다. 그럼 만약에 각 데이터의 수가 1000개씩만 되어도 나오는 행의 수는 몇 개일까요..? 여기서 더 <strong>많은 테이블과 레코드들을 추가하면 수많은 중복된 데이터가 생겨날 것입니다.</strong>\n​\n실제 테스트를 해봅시다. 실험 환경은 다음과 같습니다.</p>\n<ul>\n<li>Mac M1 Pro 16G 512GB</li>\n<li>실험 데이터 수는 게시글 1개, 댓글 1000개, 태그 1000개\n​</li>\n</ul>\n<p>먼저 조인을 이용하여 100만(1000 * 1000)개의 테이블을 생성해 결괏값 100만 개를 내어줄 때는 <strong>12초</strong>가 걸렸습니다.\n​</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1178px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/486af2325274fb1cefcf08eddda9bfcf/dc992/2023-10-09-join-vs-multiple-log1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 13.799999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAe0lEQVQI1zWPQRJEEQxEHQWDSPiF1d+5/616JDMWr6pbyQuOa0U9EBGqMFLJEGbr3nsjhGDcrsQYbU6JQngpYdcEt/fGGAO9d8w58TyPoVlEsNYCnwWtNZRSDJXdJZd4+Bwcy++yDqtY85WqSM9Vcl+jXLH96t9zzqCTv0JpV7mWqNb8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2023 10 09 join vs multiple log1\"\n        title=\"2023 10 09 join vs multiple log1\"\n        src=\"/static/486af2325274fb1cefcf08eddda9bfcf/dc992/2023-10-09-join-vs-multiple-log1.png\"\n        srcset=\"/static/486af2325274fb1cefcf08eddda9bfcf/0eb09/2023-10-09-join-vs-multiple-log1.png 500w,\n/static/486af2325274fb1cefcf08eddda9bfcf/1263b/2023-10-09-join-vs-multiple-log1.png 1000w,\n/static/486af2325274fb1cefcf08eddda9bfcf/dc992/2023-10-09-join-vs-multiple-log1.png 1178w\"\n        sizes=\"(max-width: 1178px) 100vw, 1178px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>​\n하지만, 두 개의 쿼리(1000 + 1000)로 분리하여 결괏값 100만 개를 내어 줄 때는 고작 <strong>0.2초</strong>밖에 안 걸린 걸 볼 수 있습니다.</p>\n<p>​\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1106px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9b5589e00f115d68ff951eddf98972d2/22593/2023-10-09-join-vs-multiple-log2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 12.200000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAbUlEQVQI1x2NSw4DIQxD5yY0IZQ/jNBQVer9z+WSLKz35IV9/T4PxhhIKSHnjFSyea0V3nvEGMHM5kRkcc5ZJyIg8SjCeDzhKy9cay3svdFaQ+8d95wopWAe6qhSe3U90oMQgo3pyfu4Ug75dH9p/Tqud5920wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2023 10 09 join vs multiple log2\"\n        title=\"2023 10 09 join vs multiple log2\"\n        src=\"/static/9b5589e00f115d68ff951eddf98972d2/22593/2023-10-09-join-vs-multiple-log2.png\"\n        srcset=\"/static/9b5589e00f115d68ff951eddf98972d2/0eb09/2023-10-09-join-vs-multiple-log2.png 500w,\n/static/9b5589e00f115d68ff951eddf98972d2/1263b/2023-10-09-join-vs-multiple-log2.png 1000w,\n/static/9b5589e00f115d68ff951eddf98972d2/22593/2023-10-09-join-vs-multiple-log2.png 1106w\"\n        sizes=\"(max-width: 1106px) 100vw, 1106px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n​\n​\n여러 개의 테이블을 조인하는 경우도 아래의 벤치마크를 한번 봅시다. 두 경우 모두 동일한 결과(6 x 50 x 7 x 12 x 90 = 2268000)를 얻지만 여러 개의 쿼리가 훨씬 더 빠릅니다.\n​</p>\n<ol>\n<li>\n<p><strong>5개의 조인을 사용한 단일 쿼리</strong></p>\n<p>쿼리: <strong>8.074508초</strong></p>\n<p>결과 크기: 2268000</p>\n</li>\n<li>\n<p><strong>연속 쿼리 5개</strong></p>\n<p>결합된 쿼리 시간: <strong>0.00262초</strong></p>\n<p>결과 크기: 165(6 + 50 + 7 + 12 + 90)\n​</p>\n</li>\n</ol>\n<p>또한, 중복 데이터로 인해 더 많은 <strong>메모리</strong>를 사용합니다. 적은 테이블의 수를 조인하는 경우 메모리 사용량이 적겠지만, 테이블이 점점 늘어날수록 차지하는 메모리가 기하급수적으로 늘기 때문에 잘 고려하면 좋을 것 같습니다.</p>\n<p>​</p>\n<h3>조인이 적합한 지 여부 판단</h3>\n<p>​\n조인을 사용해야 하는지는 조인이 <strong>적합한지</strong>에 따라 판단해 볼 수도 있습니다. 위의 예시로 사용한 테이블에서 댓글과 태그는 게시글과는 관련이 있지만 서로는 관련이 없습니다. 이 경우 두 개의 별도 쿼리를 사용하는 것이 더 좋습니다. 태그와 댓글을 결합하려고 하면 둘 사이에는 직접적인 관계가 없는데도 각 테이블행의 곱만큼 가능한 모든 조합이 생성됩니다. 또한, 두 쿼리를 병렬로 수행하여 이득을 얻을 수도 있습니다.</p>\n<p>​\n하지만, 여기서 만약에 다음과 같은 상황을 생각해 봅시다.</p>\n<p>​\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 697px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/665449e94bd3520f9c11844f6017733e/11663/2023-10-09-join-vs-multiple-entities-modified.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.200000000000003%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA0UlEQVQY01VQ2QqEMAzs//+Zbz4poqLgAavWq97XrBPowhaGkGaOtGrfdxzH8YPtr+vCOBrptdao6xrbtmFZFtz3LSDneZ6/Xn0+lQiKokBZlljXFX3fCzHLMsRxDMdx4HkejDEyo7FuW8zzjDzPMQzDGz5KmGKy67rwfV8uiaqqRJymKYIgQJIkIhajN7xpGkRRhDAMJZRG5E/TBEVi13XyNLs+77g+Se27CSsPZxTTmKYMpgn55LCKoV2XQwuK+RQSacCvIDhjmP1rVovzPPEFUsV+/YIiJpwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"2023 10 09 join vs multiple entities modified\"\n        title=\"2023 10 09 join vs multiple entities modified\"\n        src=\"/static/665449e94bd3520f9c11844f6017733e/11663/2023-10-09-join-vs-multiple-entities-modified.png\"\n        srcset=\"/static/665449e94bd3520f9c11844f6017733e/0eb09/2023-10-09-join-vs-multiple-entities-modified.png 500w,\n/static/665449e94bd3520f9c11844f6017733e/11663/2023-10-09-join-vs-multiple-entities-modified.png 697w\"\n        sizes=\"(max-width: 697px) 100vw, 697px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>​\n게시물에 댓글을 달고 댓글 작성자의 이름까지 원한다면? 조인을 고려해 볼 수 있습니다. 훨씬 더 자연스러운 쿼리일 뿐 아니라 데이터베이스 시스템에서 이와 같은 쿼리를 <a href=\"https://dev.mysql.com/doc/refman/8.0/en/optimization.html\">최적화</a>하려고 노력하고 있다고 합니다.</p>\n<p>​</p>\n<h2>서브쿼리(SubQuery)</h2>\n<p>​</p>\n<p>조인 대신에 <strong>서브 쿼리</strong>를 이용하는 방법도 있습니다. 서브 쿼리와 조인의 성능을 비교해 봅시다. 우선 MySQL <strong>5.5</strong> 버전에서 서브 쿼리는 못쓸 정도라고 평할 정도로 제대로 수행되지 않았습니다.</p>\n<p>​\n테스트 데이터</p>\n<ul>\n<li>메인 테이블 100만 건</li>\n<li>서브 테이블1 (Index O) 1000건</li>\n<li>서브 테이블2 (Index X) 1000건</li>\n</ul>\n<p>​\n수행 시간</p>\n<ul>\n<li>MySQL 5.5 + 서브 쿼리 + No Index에서 100만 건 &#x26; 1천 건 조회에 <strong>3분</strong>이 소요</li>\n<li>MySQL 5.5 + 서브 쿼리 + Index에서 100만 건 &#x26; 1천 건 조회에 <strong>1.8초</strong> 소요</li>\n<li>MySQL 5.5 + 조인 + No Index에서 100만 건 &#x26; 1천 건 조회에 <strong>11초</strong> 소요</li>\n<li>MySQL 5.5 + 조인 + Index에서 100만 건 &#x26; 1천 건 조회에 <strong>0.139초</strong> 소요\n​\nMySQL 특정 버전(5.5이하)에서는 서브 쿼리 대신 조인이 압도적으로 빠른 것을 볼 수 있습니다. </li>\n</ul>\n<p>MySQL에서는 무슨 일이 있었기에 5.5 버전에서는 서브 쿼리 성능이 좋지 않을까요?</p>\n<ol>\n<li>최적화 부재: 초기 버전의 MySQL에서는 서브 쿼리에 대한 충분한 최적화가 이루어지지 않았습니다. 그 결과 서브 쿼리는 복잡한 연산을 필요로 하는 경우에 매우 비효율적으로 동작하게 되었습니다.</li>\n<li>재귀적 처리: MySQL 5.5에서 서브 쿼리는 종종 재귀적으로 처리되었고, 이는 성능 문제를 야기했습니다. 특히, 상위 쿼리에서 서브 쿼리의 결과를 여러 번 재참조해야 할 때 이 문제가 두드러졌습니다.</li>\n</ol>\n<p><strong>5.6</strong>에서는 <strong>서브 쿼리 성능 개선</strong>이 많이 이루어졌습니다.\n​</p>\n<p>수행 시간</p>\n<ul>\n<li>MySQL 5.6 + 서브 쿼리 + No Index에서 100만 건 &#x26; 1천 건 조회에 <strong>19초</strong> 소요</li>\n<li>MySQL 5.6 + 서브 쿼리 + Index에서 100만 건 &#x26; 1천 건 조회에 <strong>0.18초</strong> 소요\n​</li>\n</ul>\n<p>3분에서 19초, 11초에서 0.18초 개선될 정도로 5.6에서는 최적화가 이루어졌지만 아직 <strong>모든 서브 쿼리가 다 최적화가 된 것은 아니라고 합니다.</strong></p>\n<p>​\n즉, 웬만하면 <strong>최대한 조인을 이용</strong>하고 조인을 이용하기 어렵다면 5.6 이상은 서브 쿼리를 사용합니다. 5.5 이하는 절대 사용하지 않고 차라리 쿼리를 나눠서 2번(메인 쿼리, 서브 쿼리) 실행하고 애플리케이션에서 조립하면 좋을 것 같습니다. 물론, 스칼라 서브 쿼리 캐싱 등의 최적화 기술로 때때로 서브 쿼리가 조인보다 더 효율적일 때도 있습니다.</p>\n<p>​</p>\n<h2>결론</h2>\n<p>​</p>\n<p>사실 위의 내용은 어느 정도 통계에 기반에서 이렇다 할 뿐이지 자신의 상황에서는 전혀 다르게 동작(고려해야 할 변수가 많기 때문에)할 수도 있습니다. 그러므로 <strong>참고만 하고</strong> EXPLAIN 같은 실행 계획이나 <strong>직접 테스트하여 측정해 사용</strong>하도록 합시다.</p>\n<p>​</p>\n<blockquote>\n<p>Don’t guess, measure!</p>\n</blockquote>\n<h2>​</h2>\n<p>참고:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/1067016/join-queries-vs-multiple-queries\">JOIN queries vs multiple queries</a></li>\n<li><a href=\"https://jojoldu.tistory.com/520\">MySQL where in (서브쿼리) vs 조인 조회 성능 비교 (5.5 vs 5.6)</a></li>\n</ul>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"최근에 프로젝트에서 리팩토링과 동시에 쿼리 개선을 하고 있는데요. 조인 한 방 쿼리로 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"한 번에 끝내는 게 여러 번 네트워크 타는 것보다 좋을 것"}]},{"type":"text","value":" 같아서 한 방 쿼리로 수정하고 있다가 다음과 같이 모든 쿼리가 조인이 덕지 덕지 붙어있는 코드를 보고 뭔가 이상함을 감지했습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"select"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" pet_food p1_0\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"join"}]},{"type":"text","value":" brand b1_0 "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"on"}]},{"type":"text","value":" b1_0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"p1_0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"brand_id\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"join"}]},{"type":"text","value":" pet_food_primary_ingredient p2_0 "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"on"}]},{"type":"text","value":" p1_0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"p2_0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"pet_food_id\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"join"}]},{"type":"text","value":" primary_ingredient p3_0 "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"on"}]},{"type":"text","value":" p3_0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"p2_0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"primary_ingredient_id\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"where"}]},{"type":"text","value":" p1_0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"select"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" review r1_0\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"join"}]},{"type":"text","value":" pet p1_0 "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"on"}]},{"type":"text","value":" p1_0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"r1_0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"pet_id\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"join"}]},{"type":"text","value":" breed b1_0 "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"on"}]},{"type":"text","value":" b1_0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"p1_0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"breed_id\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"join"}]},{"type":"text","value":" pet_size p2_0 "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"on"}]},{"type":"text","value":" p2_0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"b1_0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"pet_size_id\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"left"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"join"}]},{"type":"text","value":" helpful_reaction h1_0 "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"on"}]},{"type":"text","value":" r1_0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"h1_0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"review_id\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"join"}]},{"type":"text","value":" adverse_reaction a1_0 "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"on"}]},{"type":"text","value":" r1_0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"a1_0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"review_id\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"where"}]},{"type":"text","value":" r1_0"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"?"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"뭔가 아닌 거 같은데..?"}]},{"type":"text","value":" 물론 한 방 쿼리가 좋을 때도 있지만 항상 한 방 쿼리가 좋진 않을 것인데 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"언제 한 방 쿼리를 사용하고 언제 여러 개 쿼리를 사용"}]},{"type":"text","value":"할 수 있을지 궁금증이 생겼습니다.\n​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"조인(Join)으로 한 방 쿼리 vs 쿼리 여러 개"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"No Silver Bullet - 만병통치약은 없다.\n​"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"어떤 성능 시나리오에서든 어느 솔루션이 더 빠른지 확인하기 위해 직접 솔루션을 테스트하고 측정해야 합니다."}]},{"type":"text","value":" 즉, 최선의 경우는 없는데요. 하지만, 일반적으로 어떤 상황에서 쓰면 좋을지는 통계가 있을 것입니다. 테이블 관계를 기준으로 한번 살펴봅시다.\n​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"일대일 관계"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​\n일반적으로 일대일 관계 같은 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"많은 외부 레코드를 가리키지 않는 경우"}]},{"type":"text","value":" 다음과 같은 성능을 나타냅니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​\n"},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1290px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/636920497aec5a6398404e4910dc0c52/629d2/2023-10-09-join-vs-multiple-performance_graph.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 44.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQklEQVQoz11S7XKDMAzj/V9ztx/brgVKvuNYk51Cu+VOOJgg2XIWcKkCQgyLfIwxmFOHf8Rz72fP/XxvMeD754btERBTxiL8udaKIQKBEZLYSRXCF4tGcMYLT8Kwb/j4/MIjJPQuWIy5xgjdV4zHhpEiRu+EgNwOE7HKHTKFTrFSBysr3pWtZd0eSKWhK9tkpUhGvgHHDqWAWmReKcISoCTSp9CkeC2rfNn2AzE27K0iaMcxOqPgkIpY2EYraCSt7KDt9xlNiAD9mza/rFjurDCGCsk2mMFKxWH7QpiIC52RQkdNRERs2Wfzh9DNZ/+9KlpSdJ7pjPyPPqpD38HJGTq9NLxP3gktIe7LNLwUDoTm1CLIgYNp3GdFjqy8KFLonu8FzPVrGBfh+/163beZSznjtu74ua0o9BjzxPVd8e8qEb+EEMSiSGQo7gAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"2023 10 09 join vs multiple performance graph","title":"2023 10 09 join vs multiple performance graph","src":"/static/636920497aec5a6398404e4910dc0c52/629d2/2023-10-09-join-vs-multiple-performance_graph.png","srcSet":["/static/636920497aec5a6398404e4910dc0c52/0eb09/2023-10-09-join-vs-multiple-performance_graph.png 500w","/static/636920497aec5a6398404e4910dc0c52/1263b/2023-10-09-join-vs-multiple-performance_graph.png 1000w","/static/636920497aec5a6398404e4910dc0c52/629d2/2023-10-09-join-vs-multiple-performance_graph.png 1290w"],"sizes":["(max-width:","1290px)","100vw,","1290px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​\n조인이 가장 빠른데 그 이유는 여러 개 쿼리가 발생하면 데이터베이스에 대한 각 쿼리에 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"고정 비용"}]},{"type":"text","value":"이 발생하기 때문입니다. 일대일 관계 같은 경우 중복도 발생하지 않아서 부담 없이 조인을 사용할 수 있을 것 같습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​\n그렇다고 해서, 일대다 관계에서는 절대 조인을 쓰지 말란 것이 아닙니다. 위에서 말한 것에 핵심 포인트는 일대일 관계뿐 아니라 일대다 관계에서도 많은 외부 레코드를 가리키지 않는 경우입니다. 한 방 조인으로 결괏값 주기 vs 여러 번 통신 + 애플리케이션에서 조합의 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"트레이드오프"}]},{"type":"text","value":"를 잘 고려해 봐야 됩니다.\n​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"일대다 관계"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​\n하지만, 참조된 레코드 중 다수가 동일할 수 있는 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"일대다 관계"}]},{"type":"text","value":" 같은 경우 조인 시에 중복이 엄청나게 발생할 수 있으니 잘 생각해 봐야 됩니다.\n​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"예를 들어봅시다.\n​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 670px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/05f9ff9efd6579a443ab577404f3c5d3/6bbca/2023-10-09-join-vs-multiple-entities.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 23.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA1ElEQVQY0z1QyQqFMBDr/3+aR1EQ9CDijrXuW5W8Znh6CG2nSSYzappnzA5xHKNpGuz7jmVZcF0Wy7rCWovVnawdxyH/933DDAO2bXfYkGWZnNM0QbVti6Io4Hke8jwXERuc5wnd92LIRnVdixlFrHVd56ChtUaapmI4jiOU7/tiFgQBemfAJDSgIEkSRFEkIJmGrBtj5I/aMAxFQ7CuqqoS0vM8H5iQBKYqy/JrRPDOFTAZp6MJE1PH6RQJ83+PLyjgnpiIJIIj8f3u8E1E7huAU/wAjil71/lP1cUAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"2023 10 09 join vs multiple entities","title":"2023 10 09 join vs multiple entities","src":"/static/05f9ff9efd6579a443ab577404f3c5d3/6bbca/2023-10-09-join-vs-multiple-entities.png","srcSet":["/static/05f9ff9efd6579a443ab577404f3c5d3/0eb09/2023-10-09-join-vs-multiple-entities.png 500w","/static/05f9ff9efd6579a443ab577404f3c5d3/6bbca/2023-10-09-join-vs-multiple-entities.png 670w"],"sizes":["(max-width:","670px)","100vw,","670px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위와 같은 관계에서 1개의 게시물이 있고 게시물에는 2개의 댓글과 2개의 태그가 있다고 가정해 봅시다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"SELECT"}]},{"type":"text","value":" post"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"comment"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" tag"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"id\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"FROM"}]},{"type":"text","value":" post\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"LEFT"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"JOIN"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"comment"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"on"}]},{"type":"text","value":" post"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"id "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"comment"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"post_id\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"LEFT"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"JOIN"}]},{"type":"text","value":" tag "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"on"}]},{"type":"text","value":" tag"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"post_id "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" post"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n​\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- post_id comment_id tag_id"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- 1        1           1"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- 1        1           2"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- 1        2           1"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- 1        2           2"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위와 같은 쿼리를 실행하면 2 * 2로 4개의 결과가 나왔습니다. 여기서 댓글과 태그가 4개로 늘어난다면 어떻게 될까요?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"SELECT"}]},{"type":"text","value":" post"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"comment"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" tag"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"id\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"FROM"}]},{"type":"text","value":" post\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"LEFT"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"JOIN"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"comment"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"on"}]},{"type":"text","value":" post"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"id "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"comment"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"post_id\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"LEFT"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"JOIN"}]},{"type":"text","value":" tag "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"on"}]},{"type":"text","value":" tag"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"post_id "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" post"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n​\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- post_id comment_id tag_id"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- 1        1           1"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- 1        1           2"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- 1        1           3"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- 1        1           4"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- 1        2           1"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- 1        2           2"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- 1        2           3"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- 1        2           4"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- 1        3           1"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- 1        3           2"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- 1        3           3"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- 1        3           4"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- 1        4           1"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- 1        4           2"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- 1        4           3"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- 1        4           4"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"각 행의 곱인 4 * 4 = 16개의 행이 나오게 됩니다. 그럼 만약에 각 데이터의 수가 1000개씩만 되어도 나오는 행의 수는 몇 개일까요..? 여기서 더 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"많은 테이블과 레코드들을 추가하면 수많은 중복된 데이터가 생겨날 것입니다."}]},{"type":"text","value":"\n​\n실제 테스트를 해봅시다. 실험 환경은 다음과 같습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Mac M1 Pro 16G 512GB"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"실험 데이터 수는 게시글 1개, 댓글 1000개, 태그 1000개\n​"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"먼저 조인을 이용하여 100만(1000 * 1000)개의 테이블을 생성해 결괏값 100만 개를 내어줄 때는 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"12초"}]},{"type":"text","value":"가 걸렸습니다.\n​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1178px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/486af2325274fb1cefcf08eddda9bfcf/dc992/2023-10-09-join-vs-multiple-log1.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 13.799999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAe0lEQVQI1zWPQRJEEQxEHQWDSPiF1d+5/616JDMWr6pbyQuOa0U9EBGqMFLJEGbr3nsjhGDcrsQYbU6JQngpYdcEt/fGGAO9d8w58TyPoVlEsNYCnwWtNZRSDJXdJZd4+Bwcy++yDqtY85WqSM9Vcl+jXLH96t9zzqCTv0JpV7mWqNb8AAAAAElFTkSuQmCC'); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"2023 10 09 join vs multiple log1","title":"2023 10 09 join vs multiple log1","src":"/static/486af2325274fb1cefcf08eddda9bfcf/dc992/2023-10-09-join-vs-multiple-log1.png","srcSet":["/static/486af2325274fb1cefcf08eddda9bfcf/0eb09/2023-10-09-join-vs-multiple-log1.png 500w","/static/486af2325274fb1cefcf08eddda9bfcf/1263b/2023-10-09-join-vs-multiple-log1.png 1000w","/static/486af2325274fb1cefcf08eddda9bfcf/dc992/2023-10-09-join-vs-multiple-log1.png 1178w"],"sizes":["(max-width:","1178px)","100vw,","1178px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​\n하지만, 두 개의 쿼리(1000 + 1000)로 분리하여 결괏값 100만 개를 내어 줄 때는 고작 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"0.2초"}]},{"type":"text","value":"밖에 안 걸린 걸 볼 수 있습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​\n"},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1106px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/9b5589e00f115d68ff951eddf98972d2/22593/2023-10-09-join-vs-multiple-log2.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 12.200000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAbUlEQVQI1x2NSw4DIQxD5yY0IZQ/jNBQVer9z+WSLKz35IV9/T4PxhhIKSHnjFSyea0V3nvEGMHM5kRkcc5ZJyIg8SjCeDzhKy9cay3svdFaQ+8d95wopWAe6qhSe3U90oMQgo3pyfu4Ug75dH9p/Tqud5920wAAAABJRU5ErkJggg=='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"2023 10 09 join vs multiple log2","title":"2023 10 09 join vs multiple log2","src":"/static/9b5589e00f115d68ff951eddf98972d2/22593/2023-10-09-join-vs-multiple-log2.png","srcSet":["/static/9b5589e00f115d68ff951eddf98972d2/0eb09/2023-10-09-join-vs-multiple-log2.png 500w","/static/9b5589e00f115d68ff951eddf98972d2/1263b/2023-10-09-join-vs-multiple-log2.png 1000w","/static/9b5589e00f115d68ff951eddf98972d2/22593/2023-10-09-join-vs-multiple-log2.png 1106w"],"sizes":["(max-width:","1106px)","100vw,","1106px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]},{"type":"text","value":"\n​\n​\n여러 개의 테이블을 조인하는 경우도 아래의 벤치마크를 한번 봅시다. 두 경우 모두 동일한 결과(6 x 50 x 7 x 12 x 90 = 2268000)를 얻지만 여러 개의 쿼리가 훨씬 더 빠릅니다.\n​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"5개의 조인을 사용한 단일 쿼리"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"쿼리: "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"8.074508초"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"결과 크기: 2268000"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"연속 쿼리 5개"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"결합된 쿼리 시간: "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"0.00262초"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"결과 크기: 165(6 + 50 + 7 + 12 + 90)\n​"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"또한, 중복 데이터로 인해 더 많은 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"메모리"}]},{"type":"text","value":"를 사용합니다. 적은 테이블의 수를 조인하는 경우 메모리 사용량이 적겠지만, 테이블이 점점 늘어날수록 차지하는 메모리가 기하급수적으로 늘기 때문에 잘 고려하면 좋을 것 같습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"조인이 적합한 지 여부 판단"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​\n조인을 사용해야 하는지는 조인이 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"적합한지"}]},{"type":"text","value":"에 따라 판단해 볼 수도 있습니다. 위의 예시로 사용한 테이블에서 댓글과 태그는 게시글과는 관련이 있지만 서로는 관련이 없습니다. 이 경우 두 개의 별도 쿼리를 사용하는 것이 더 좋습니다. 태그와 댓글을 결합하려고 하면 둘 사이에는 직접적인 관계가 없는데도 각 테이블행의 곱만큼 가능한 모든 조합이 생성됩니다. 또한, 두 쿼리를 병렬로 수행하여 이득을 얻을 수도 있습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​\n하지만, 여기서 만약에 다음과 같은 상황을 생각해 봅시다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​\n"},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-wrapper"],"style":"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 697px; "},"children":[{"type":"text","value":"\n      "},{"type":"element","tagName":"a","properties":{"className":["gatsby-resp-image-link"],"href":"/static/665449e94bd3520f9c11844f6017733e/11663/2023-10-09-join-vs-multiple-entities-modified.png","style":"display: block","target":"_blank","rel":["noopener"]},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["gatsby-resp-image-background-image"],"style":"padding-bottom: 27.200000000000003%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA0UlEQVQY01VQ2QqEMAzs//+Zbz4poqLgAavWq97XrBPowhaGkGaOtGrfdxzH8YPtr+vCOBrptdao6xrbtmFZFtz3LSDneZ6/Xn0+lQiKokBZlljXFX3fCzHLMsRxDMdx4HkejDEyo7FuW8zzjDzPMQzDGz5KmGKy67rwfV8uiaqqRJymKYIgQJIkIhajN7xpGkRRhDAMJZRG5E/TBEVi13XyNLs+77g+Se27CSsPZxTTmKYMpgn55LCKoV2XQwuK+RQSacCvIDhjmP1rVovzPPEFUsV+/YIiJpwAAAAASUVORK5CYII='); background-size: cover; display: block;"},"children":[]},{"type":"text","value":"\n  "},{"type":"element","tagName":"img","properties":{"className":["gatsby-resp-image-image"],"alt":"2023 10 09 join vs multiple entities modified","title":"2023 10 09 join vs multiple entities modified","src":"/static/665449e94bd3520f9c11844f6017733e/11663/2023-10-09-join-vs-multiple-entities-modified.png","srcSet":["/static/665449e94bd3520f9c11844f6017733e/0eb09/2023-10-09-join-vs-multiple-entities-modified.png 500w","/static/665449e94bd3520f9c11844f6017733e/11663/2023-10-09-join-vs-multiple-entities-modified.png 697w"],"sizes":["(max-width:","697px)","100vw,","697px"],"style":"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;","loading":"lazy"},"children":[]},{"type":"text","value":"\n  "}]},{"type":"text","value":"\n    "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​\n게시물에 댓글을 달고 댓글 작성자의 이름까지 원한다면? 조인을 고려해 볼 수 있습니다. 훨씬 더 자연스러운 쿼리일 뿐 아니라 데이터베이스 시스템에서 이와 같은 쿼리를 "},{"type":"element","tagName":"a","properties":{"href":"https://dev.mysql.com/doc/refman/8.0/en/optimization.html"},"children":[{"type":"text","value":"최적화"}]},{"type":"text","value":"하려고 노력하고 있다고 합니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"서브쿼리(SubQuery)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"조인 대신에 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"서브 쿼리"}]},{"type":"text","value":"를 이용하는 방법도 있습니다. 서브 쿼리와 조인의 성능을 비교해 봅시다. 우선 MySQL "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"5.5"}]},{"type":"text","value":" 버전에서 서브 쿼리는 못쓸 정도라고 평할 정도로 제대로 수행되지 않았습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​\n테스트 데이터"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"메인 테이블 100만 건"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"서브 테이블1 (Index O) 1000건"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"서브 테이블2 (Index X) 1000건"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​\n수행 시간"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"MySQL 5.5 + 서브 쿼리 + No Index에서 100만 건 & 1천 건 조회에 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"3분"}]},{"type":"text","value":"이 소요"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"MySQL 5.5 + 서브 쿼리 + Index에서 100만 건 & 1천 건 조회에 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"1.8초"}]},{"type":"text","value":" 소요"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"MySQL 5.5 + 조인 + No Index에서 100만 건 & 1천 건 조회에 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"11초"}]},{"type":"text","value":" 소요"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"MySQL 5.5 + 조인 + Index에서 100만 건 & 1천 건 조회에 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"0.139초"}]},{"type":"text","value":" 소요\n​\nMySQL 특정 버전(5.5이하)에서는 서브 쿼리 대신 조인이 압도적으로 빠른 것을 볼 수 있습니다. "}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"MySQL에서는 무슨 일이 있었기에 5.5 버전에서는 서브 쿼리 성능이 좋지 않을까요?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"최적화 부재: 초기 버전의 MySQL에서는 서브 쿼리에 대한 충분한 최적화가 이루어지지 않았습니다. 그 결과 서브 쿼리는 복잡한 연산을 필요로 하는 경우에 매우 비효율적으로 동작하게 되었습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"재귀적 처리: MySQL 5.5에서 서브 쿼리는 종종 재귀적으로 처리되었고, 이는 성능 문제를 야기했습니다. 특히, 상위 쿼리에서 서브 쿼리의 결과를 여러 번 재참조해야 할 때 이 문제가 두드러졌습니다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"5.6"}]},{"type":"text","value":"에서는 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"서브 쿼리 성능 개선"}]},{"type":"text","value":"이 많이 이루어졌습니다.\n​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"수행 시간"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"MySQL 5.6 + 서브 쿼리 + No Index에서 100만 건 & 1천 건 조회에 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"19초"}]},{"type":"text","value":" 소요"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"MySQL 5.6 + 서브 쿼리 + Index에서 100만 건 & 1천 건 조회에 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"0.18초"}]},{"type":"text","value":" 소요\n​"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"3분에서 19초, 11초에서 0.18초 개선될 정도로 5.6에서는 최적화가 이루어졌지만 아직 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"모든 서브 쿼리가 다 최적화가 된 것은 아니라고 합니다."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​\n즉, 웬만하면 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"최대한 조인을 이용"}]},{"type":"text","value":"하고 조인을 이용하기 어렵다면 5.6 이상은 서브 쿼리를 사용합니다. 5.5 이하는 절대 사용하지 않고 차라리 쿼리를 나눠서 2번(메인 쿼리, 서브 쿼리) 실행하고 애플리케이션에서 조립하면 좋을 것 같습니다. 물론, 스칼라 서브 쿼리 캐싱 등의 최적화 기술로 때때로 서브 쿼리가 조인보다 더 효율적일 때도 있습니다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"결론"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"사실 위의 내용은 어느 정도 통계에 기반에서 이렇다 할 뿐이지 자신의 상황에서는 전혀 다르게 동작(고려해야 할 변수가 많기 때문에)할 수도 있습니다. 그러므로 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"참고만 하고"}]},{"type":"text","value":" EXPLAIN 같은 실행 계획이나 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"직접 테스트하여 측정해 사용"}]},{"type":"text","value":"하도록 합시다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Don’t guess, measure!"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"​"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"참고:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://stackoverflow.com/questions/1067016/join-queries-vs-multiple-queries"},"children":[{"type":"text","value":"JOIN queries vs multiple queries"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://jojoldu.tistory.com/520"},"children":[{"type":"text","value":"MySQL where in (서브쿼리) vs 조인 조회 성능 비교 (5.5 vs 5.6)"}]}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"excerpt":"…","timeToRead":6,"frontmatter":{"title":"어떤 경우에 한 방 조인 쿼리와 여러 개 쿼리 분리를 고려할 수 있을까?","userDate":"13 November 2023","date":"2023-11-13T12:00:00.000Z","tags":["query","sub-query","join"],"excerpt":null,"image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABSklEQVQoz41SO8+CQBC8n29hQWHrPyA2VEbwETukINFEMWIUNSRQUIgoKM6X3eTIefl8THJhb+9mmZtdAQ3P55O/dV0jDENkWYaqqnA+n1EUBe73e3NP3lUh3hUsyxKWZWE4HGI6nWI8HsP3fRyPx88F1QM1fjwecF0Xo9EI/X4fs9kMk8kEu92ueYHKkTyhK9PjT9BVUvyi8HK5sE/ykFTSl3LkocTtdmvuESgmn1+eTIntdovNZsMEtTmHwwHr9RrX65WbslqtMJ/PWQDlFosF54gnJDGKInQ6HRiGgSAIuCA1IY5jdLtdtNtteJ7HJNu22dfT6YQ0TTEYDOA4DsdNwf1+z6RWq4Xlcsm5PM+5ACmkZtAIfUNTMEkS9Ho9mKbJaj81grylp0u7aC/9FuoIqNDHgva/dF/of6b134z9usS7if91FnX8AbTBmyaEGKmpAAAAAElFTkSuQmCC","aspectRatio":1.7181818181818183,"src":"/static/3621bcf695c69be193a38a9b89c7ef9a/6113c/join-query-vs-multiple-quries.png","srcSet":"/static/3621bcf695c69be193a38a9b89c7ef9a/6113c/join-query-vs-multiple-quries.png 756w","sizes":"(max-width: 756px) 100vw, 756px"}}},"author":[{"id":"5기_무민","bio":"끊임없이 생각하고 나아가는 개발자 무민(박무현)입니다","avatar":{"children":[{"__typename":"ImageSharp","fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAADh0lEQVQozxXO609aBxjH8fMPbS+apmvaCiJwQEAz56VaJr14aatjOvDGmC1yE/FaYLMKnOPhrkwWkGERRTj3A8hNrMCYW7I3W9ZkybbsxbLE0eT79vP8HsBeuPRXr1xvr6yFGlxr+Bo/wbUrS/FygSrPoeVptDiRLD8/KvWGclwvzfPRoI8R+jOivWJHsAzosMoiXdVRNQ1ZNeTqZqq8TjKLVGkyWXyeKEoP8l37WXEgI/TRbR6C56Va3TTHzQh8eXGgCCgO87PH5+pU5av0uSJ5uZVOlSvR9RT2KFbu2M20eUjQg49EGTNRXCGLlkxlGS9p0bcjsSroPQPk0bzyqDx3fK5MVHr2znx48t8/6W275eE3Qbab7gjQtlzFX6n6LxqhWiNSu4JLP8yn658Eyzx3Duh0MR97cz2BjMST4cJECIv9fHUSdK2vm8wP9gi+m3p6WHgSLvQFz0YOio9CeSHCsCGmFcnxXVmADxFcmObBFLjDcJ04XsGvr+sFJqBRaHpdJAumWiGc5UDZEMZy4Cw7znESbTDFRbLvcfsOIUKYdpgRIMy9LWKXTP/3N40lEe2ExuiNd/twvifbDIRIvpPkwxQPorhQcywDIhlABBPiHUYMMRIX02InvTh6fX1xEHw9JBm2zpvGP5sfGDd063ZAB96UAojkOZvRfDjDb2IxRIhhWvI+hrNNITj21ztCq1DKwPtP2vsfg/2jgoFhXt/wU7XYkRY4CEHzipMCYUbUfFsM4U3c7qT1R+ho8PRLJGyemelj962OyTGHcfHZ2GPR4JBY5pmTT1ncLHtWCJGdO6TEyUi2MEDkQDthatCDxhunzO/ogs7Yf7drUCiNmBbowOqGUv4pTzoISqcfPJyUjaherMish9Kvkz1radUeDoDbaBdC7l+cZH89rvyBEY3Yq1XjpvzzlWfjjhmFdXJibUxuHh2zySf2teqSTaMzbnO0qdYXSdZLFOjdeDPkOI3VqdxvaeyXVO4dXvsHq9GujEMf1SuLW9ofkaU6bGy4TZeQseY2fmFwfTidvDGb+EB5CAzbjnqXE6Aucd+SliylRp2kPkZN7+NTUNzkSWx6ItZN/9LroN4eMrzaXfO96V47uak67rMkDPEToGU2eE8ValGFbs9+d2cufHv24NbU9zenIrdmwh/NRO6qondUEa42zp6PdS1HepcifHWYo/52YCMss0X/B/HJE5CweCwwAAAAAElFTkSuQmCC","aspectRatio":1.3333333333333333,"src":"/static/6369129db37503fc50518a11710d5840/b31c1/moomin.png","srcSet":"/static/6369129db37503fc50518a11710d5840/22f7f/moomin.png 40w,\n/static/6369129db37503fc50518a11710d5840/587c9/moomin.png 80w,\n/static/6369129db37503fc50518a11710d5840/d966b/moomin.png 120w,\n/static/6369129db37503fc50518a11710d5840/b31c1/moomin.png 399w","sizes":"(max-width: 399px) 100vw, 399px"}}]}}],"source":null}},"relatedPosts":{"totalCount":1,"edges":[{"node":{"id":"066686c9-04a1-5a39-a905-802b74b6ed5c","timeToRead":6,"excerpt":"…","frontmatter":{"title":"어떤 경우에 한 방 조인 쿼리와 여러 개 쿼리 분리를 고려할 수 있을까?","date":"2023-11-13T12:00:00.000Z"},"fields":{"slug":"/post/2023-10-09-join-query-vs-multiple-quries/"}}}]}},"pageContext":{"slug":"/post/2023-10-09-join-query-vs-multiple-quries/","prev":{"excerpt":"…","timeToRead":20,"frontmatter":{"title":"공간 데이터 개념부터 적용까지","tags":["JPA","MYSQL","SPATIAL","INDEX"],"date":"2023-10-24T12:00:00.000Z","draft":false,"excerpt":null,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.8562874251497006,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACvElEQVQozy2S228TRxjF928sEmrFA6Jq2hLkyPi23t3Zy+zs+l6bONhJoBVJSJwASftQbmorpQ9JX/uA1ApxLVVEQtpiIHXSF379bPEw0szs6OzvnPNZWbdMwfcItMHzA6725/m61+NCJkPd91np90nSKlm7SE7u0kqNKIqpyF0QRURuSvPzK3TOLVGfmsfKOg55z8O2HQolm63BgGcPHvD9nTv8+uMP/Ly5KSJVbOVRKhapyD6ODYlJ0UaTenV6pzfpfrLBpTPXsZTrEigfJ1/g4sUcq6trHI9GjI5P4P17dnd2qIqIiRNiU0FrjVMqyfsicZIS6Zi01KZ76iatL4UwDHyCMMTIR9f1GQzWGf7zN3t7exweHnDv/l0RrIhgjOtHEosmkvdRGBFLTJEen7XY7WPKFSxXcnMkq1BysR2PtdVV3r77l/2X+xwdveMnse3Ij1qtFp1OG2OMrIRGo8nc3Bzdbpd2u43tO6ITYHlKkYiY73rMTGfY+vY7ITvk+dMnHL46YHt7G6VCkqRKvV7HU4FQGdk3aDZbsppUq3XpQAlpjFXM5fDyeYw0psplBmtrQnbEk8ePONh/yc7OLqk06rqKhflFbm1ucW1phYXFRW7cuMny8ooUVSMU267EZ4WSgZI83FBJRi7r6xucnPzHi+fPeDMcsrv7CzoaEybUGjWqIu4H0YQ4kbJCoVVy9kMz0bE6n12jfXaJZmYBnatNCIevX3Pw6i9Go+MJ4TizUOzkL2WZ6X1BuVGQzA3aT/GVlnnUlGwfzwuxGjN9Zj9dpvfxLRofLXP9mwHDt294+Ptv/PniD+7evk0qdFrGY1yIXy2Qv5whe2WawlwWlfqkukY5b+MVC1iBCfECGdCZy5hMm686s2x8yGY8QrOzXbEcCWE0ITVCagIhNhH5ZoHp+SnO96fwUjUp738KuVUmRhYzRwAAAABJRU5ErkJggg==","sizes":"(max-width: 2080px) 100vw, 2080px","src":"/static/d07d53114d80bb20c6aaa50caef05ab3/8c530/spatial-data.png","srcSet":"/static/d07d53114d80bb20c6aaa50caef05ab3/3a443/spatial-data.png 930w,\n/static/d07d53114d80bb20c6aaa50caef05ab3/4d929/spatial-data.png 1860w,\n/static/d07d53114d80bb20c6aaa50caef05ab3/8c530/spatial-data.png 2080w"}}},"author":[{"id":"5기_폴로","bio":"우아한테크코스 5기 폴로(이동훈)입니다 :)","avatar":{"children":[{"fluid":{"aspectRatio":1,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEwUlEQVQ4yw2R6U9bBQDAX3awQQ/o8Sh9r/dNr9e+no8er8crG6WvdEDbdT04Wo7COEs51h2VYwy2MQU2NnewOI2OZWrIZqbGzESnwbioUbMvyxJj/O4Hv2imyB/w++WX/IAoYXfZMJ1al8hPNXUOjc6vdw7PWDBXS+fJ7tMrwbZMdmoROxrtnJx/8M2LrlT0wvnZG1eXhybGA+Eo4HFgFmuDSo1MXv8wUZwv39lOTV6we5qO5acn1u/3nrl4vDA3tnY/3D249uSHYCzVGIlNXNs6MXO5we0D3A6Hul4DcWEnETI7PMmpC6nivK+9o2Pm/NLDp/HCbH5h9fazl5ZA2BvtxoiIzmTrW7rZ3DliwlwAZkEV9Vq+WOEMxe0E6Ytns7OrZHbY3xKfurMdL862941e+WQnkOgaXNl0hmMmpzc+VsaPpXWoBUDkIqPZLldpiUSv2R9qzQ5d/fz7ifV39HZXKNNLkK04EcgvbuDtqWuf7uTnVnRGo9WFG+wODPcBQa/VYDLzxdJAIqexunKlhbefPk+XFnkwT8xla8SQDOKAzLp6g23r658ubj0eeGMZtdmVKqVUKgbcPg+CObl8kc7mdJKxkaXV0uaWDG0AqypxjdihEjWiMrdewq6qGpu7dGxwKjMzF4wnVVq9kAcBGr3O3IBxIQhvbmkbKJSv3x1b2ZAp1QXS/WCk7d5o7OVHF39893TOI/M0BT1t6Z6Zc6n8EO1whdNpA7yNRLDRyWKDfIEw3N2fLp5pHRxvbwlt5KO/XJv+aiH7+vmD3VdPvl09mSEb9ajJgdm09Soum6FSSACISTfLOUxKhZhTI+ZDWrXKoJa3Ouwrmfjvt86+Wpv8b+fh3z8/2v1u62ouIRXBdq0MR8RaKU8IcQBBTSWu5YLUChXMgphUKYeBiDlHUW0h4H6xPPLbZunfna3dXx/98fFGLuTDzfXNDfqoB+kJoU0WGXAClw2TmiMIpIYZJilokHIJoyTlN5VjoT8fb/zz7O7rL2/sPv9gNkdadYqg09jsQoNOw6mMdzHrAkoJy1LOdmvcG8FEIYtkOIws97iXBwK4UvjZ6eN/bc99sZCZjHqHW63lbl8faY0daWjx2XvC9nNZAiglLatDniv9zqRH1hHQlJLY/XJk7DgGAECThtcXQLX8vdtwmnReGvRfPhlMk0Sz1zEc953r8u/BtlLSXmg3Tccsxbi9O4i69CIxn6dRSvZ4NrWyprIi7DVH/BaLWkLiaIvPkY40FXuT051BoD+CFeKO0VZju0ePyAV8DkipotBpdMJtVUtFIPWwTCYfSIcRGSQX1Inq2AohpFMIQ7i53BcBbhfJm4VmApXQqPQ6ZjXMYYKMal4tw4DoOlJxEcg4X56Kkn4JzNZIYJWQq5bACgGkEkPRgBV4r0u9lkYgFqOGSuXU0Bk0mgiu5TDoHjty78biUcK1uTarkQllPC7MZmqlsE7O49cy9xRWrRS4Q9a2qWn7DlSA1dRqStXBAxU8DgsCGahasvbmwvW3yuP9CQGXzeeCErgWUfCNSgGXVa2RcDVSGFgKy1mUw/v2H2RXUyoPHTqw/yCNShHBIMxhnT01uv3+ugVF+Hs6NmsvVa8QIEo+h0kX1rHEEPg/rahjHNO5Z0wAAAAASUVORK5CYII=","sizes":"(max-width: 512px) 100vw, 512px","src":"/static/283756d694c1334511090ce8355d08da/6ba37/polo.png","srcSet":"/static/283756d694c1334511090ce8355d08da/8ac63/polo.png 200w,\n/static/283756d694c1334511090ce8355d08da/3891b/polo.png 400w,\n/static/283756d694c1334511090ce8355d08da/6ba37/polo.png 512w"}}]}}]},"fields":{"layout":"post","slug":"/post/2023-10-04-spatial-data/"}},"next":{"excerpt":"Android 레이어드 아키텍처에서 이미지 업로드하기 배경 저는 현재 ‘나아가’라는 우테코 프로젝트와 ‘ZOOC…","timeToRead":20,"frontmatter":{"title":"레이어드 아키텍처에서 이미지 업로드하기","tags":["ANDROID","MULTIPART","IMAGE","UPLOAD","ARCHITECTURE"],"date":"2023-11-13T12:00:00.000Z","draft":false,"excerpt":null,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.6006884681583478,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABYElEQVQoz2NgmGT1n6oYQ2CiJXY20QZCNTFOskbCVnCaZIMhGiz+M/SbQnCfCZA2A2IgPcEMbhnRBoMI6bl+/703lfx3WZ/3P2Rb9X+rVen/g7dW/bdfmwUxFGTJBHOEoTCD0WmYgeJzfICas//brsn877wu97/+svj/TkAahKWAlinMD/4vMssTbCjctbjCnWmyzX/ZeQH/rVen/3ddn/8/cEvFf/XFEUB+xv+oHQ3/3TYUgF2rtCAE4soJFhBXg4IFRIOCC9lQiJf9/9utyfqvsyTmf+i2GiCu/u+4Lue/+4ZCsMs9Nxb/99tc9t9/c/n/6J0NYLkAoMW+m0vBekGGMyLHMtsU+/+CM93/889wBXtPcUHwf4GZbv9FZ3uBxUVmeYG9zD/D7b8EMHhAYhJzfP8Lz/IA6rXDDEOws8HeMYfELiwSQF6C01A2KCXAaWxeRksKjFBMUmLGcCEVMQBTqsZ90HOqjwAAAABJRU5ErkJggg==","sizes":"(max-width: 1090px) 100vw, 1090px","src":"/static/13fb617e5ad8359478dd70acd363e5c2/a163d/image-upload.png","srcSet":"/static/13fb617e5ad8359478dd70acd363e5c2/3a443/image-upload.png 930w,\n/static/13fb617e5ad8359478dd70acd363e5c2/a163d/image-upload.png 1090w"}}},"author":[{"id":"5기_빅스","bio":"우아한테크코스 5기 빅스(권용민)입니다 :)","avatar":{"children":[{"fluid":{"aspectRatio":1,"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAgGCQX/xAAXAQADAQAAAAAAAAAAAAAAAAAEBQYD/9oADAMBAAIQAxAAAAHrDLPv5gE6tWLC6ypJ5UIeiAmnv//EAB0QAAEEAgMAAAAAAAAAAAAAAAQBAgUGAwcSFCH/2gAIAQEAAQUCJykIHqaavMuIrvbrMFBhydoQctxzUdsLF3K5XGZm2fm5V//EACARAQEAAQQCAwEAAAAAAAAAAAECEgADETEEExQhwdH/2gAIAQMBAT8B+VB7o9O5dRM17JrgiTFtwxczGp+8pxaO+TXBry7t83YhqmB26IaWSqsKonoaJkXtJB6Nf39Nf//EAB4RAQEAAQQDAQAAAAAAAAAAAAECEQADEjEEBSJx/9oACAECAQE/AY8Tcs2KNyJnfbkKl7nJObz8tVNYMVyJ/dZ16yZPV+VYBab8tgcmZ2eUzy7xLVIdDSnbo1//xAAmEAACAgAFBAEFAAAAAAAAAAACAwEEBRESEyIAFCExBhAyQUOB/9oACAEBAAY/ArU0xFlsa1gqiz+w7UJOawH5jiTtAl5jjM+esfn5s/C7J1L9evTZh2xqU3baV+o+K4LEe3nt9sGDDg3Cg/x9MJVTsEo8QxVFcxXMw5qBICaKyHlECMybcuO2JayiPeGxhdmuAuxvbvzXgSWQmEjpsaB0Sx7CWMGU5nOnn1MZ+pn31yY5LK1+maLFVpIsKlhEtuhg+oYHEv5I6TiCjBKrbty2hVuuYrtu3v0OdEEUjDDGGiB5GU5kAyWfnOZnr//EABwQAQADAAIDAAAAAAAAAAAAAAEAESFBUTFhof/aAAgBAQABPyEMdY2LkInKI4HkPQegUaHWyVgMFygYitqLDRbagcKZcCQuEcmSyqVq4u2L2QwoYRIC74PWhUMqNdvqQOEcyIsC1bX20v2f/9oADAMBAAIAAwAAABC4BwH/xAAbEQEBAAIDAQAAAAAAAAAAAAABETFxACHwYf/aAAgBAwEBPxBriooQtAAFmwyDu9Pu/YZ+eg2gpXYKRCK17cuH/8QAHREBAQABBAMAAAAAAAAAAAAAARExACFBYZHB4f/aAAgBAgEBPxB3kZCIWAKQZEkgwxxwdfPPe4HYACCAW2zCgsghsYPWv//EABwQAQEBAAIDAQAAAAAAAAAAAAERACExQVFhsf/aAAgBAQABPxB0DTD9InwxGYJoPM+6jYUORiTgzoZ6eknJ08/gpj0iiQbIpqrjoQyjmQxjCguE5gAWYo8lJH6OrX4xTMkwUufvkQsHHX3U90QdppdFVBCrVUq+Vd//2Q==","sizes":"(max-width: 800px) 100vw, 800px","src":"/static/13a3c587effa024d7cd223f0e8496f46/2f1b1/vix.jpg","srcSet":"/static/13a3c587effa024d7cd223f0e8496f46/fd013/vix.jpg 200w,\n/static/13a3c587effa024d7cd223f0e8496f46/25252/vix.jpg 400w,\n/static/13a3c587effa024d7cd223f0e8496f46/2f1b1/vix.jpg 800w,\n/static/13a3c587effa024d7cd223f0e8496f46/0ff54/vix.jpg 1200w,\n/static/13a3c587effa024d7cd223f0e8496f46/06655/vix.jpg 1600w,\n/static/13a3c587effa024d7cd223f0e8496f46/16018/vix.jpg 3024w"}}]}}]},"fields":{"layout":"post","slug":"/post/2023-10-17-image-upload/"}},"primaryTag":"query"}},"staticQueryHashes":["2130001345","4041952199"]}