{"componentChunkName":"component---src-templates-post-tsx","path":"/post/2022-09-20-external-in-transaction/","result":{"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAwUlEQVQY003Qvw7BUBTH8YYgLCKExWw1IczEwAtIJCa1GJuyCalI/EmERUgHi5cxeI8uTTt1aHp9r9wmhk/OOfee/HJzNd/3Dc/zutS24zgZIUQpiqIt9YY+vUb9+eur6Kh5GN9LGkEn2DBd1y1zmGfxjjf9AFm1XEQCBe6aVBMVLJHiLBcHTiHwQS0MQ/mSOlYsjPDCAjOMccUFR3Z0NdvYISkDW9jAQi8IAhnYgAyZ4wELEzUfcFZfYmCPJ9ZIfwG9owW1fLgCkwAAAABJRU5ErkJggg==","width":400,"height":88,"src":"/static/0b18bd94a62a12fdc81ea720c28722f6/3891b/tecoble.png","srcSet":"/static/0b18bd94a62a12fdc81ea720c28722f6/3891b/tecoble.png 1x"}}},"markdownRemark":{"html":"<p>트랜잭션 처리를 위해서는 데이터베이스와 통신하기 위한 <code class=\"language-text\">커넥션</code>이 필요하다. 하지만 커넥션 생성을 위해서 많은 비용이 필요하다. 이러한 비용을 절감하기 위해 커넥션을 미리 생성한 뒤 <code class=\"language-text\">커넥션 풀</code>을 통해 관리한다.</p>\n<p>커넥션 풀의 개수는 <code class=\"language-text\">제한</code>되어 있다. 만약 동시에 데이터베이스 처리 로직이 담긴 요청을 커넥션 풀의 개수 이상으로 받았다고 가정하자. 커넥션을 획득하지 못한 요청은 다른 데이터베이스 커넥션이 반납될 때까지 기다리게 될 것이다. 결국 이러한 상황이 길어지면 <code class=\"language-text\">병목 현상</code>이 발생하게 된다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/59357153/192680529-da0076fe-6ac4-4fdc-aae5-49a00551abab.png\"></p>\n<h2>불필요한 로직이 섞인 트랜잭션</h2>\n<p>먼저 간단한 예시를 위해 아래와 같은 요구사항을 줬다고 가정한다.</p>\n<ul>\n<li>회원가입을 진행한다.</li>\n<li>회원가입은 외부 <code class=\"language-text\">OAuth</code>를 통해 진행된다.</li>\n<li>우리는 전달받은 <code class=\"language-text\">인가 코드</code>를 기반으로 <code class=\"language-text\">회원 정보를 조회</code>한 뒤 <code class=\"language-text\">회원가입</code>을 진행한다.</li>\n<li>회원가입이 완료되면 <code class=\"language-text\">NEWBIE</code>라는 칭호를 획득할 수 있다. (회원은 여러 개의 칭호를 가질 수 있다고 가정한다. <code class=\"language-text\">회원 : 칭호 = 1 : N</code>)</li>\n<li>회원가입이 완료되면 가입한 email을 통해 가입 완료 메일을 전송한다.</li>\n</ul>\n<p>위 과정을 코드로 표현하면 아래와 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MemberService</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> NEWBIE <span class=\"token operator\">=</span> <span class=\"token string\">\"뉴비\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> CONGRATULATIONS_MESSAGE <span class=\"token operator\">=</span> <span class=\"token string\">\"가입을 축하드립니다!\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MemberRepository</span> memberRepository<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">HonorRepository</span> honorRepository<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">OAuthClient</span> oAuthClient<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">EmailSender</span> emailSender<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Transactional</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Member</span> <span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> code<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Member</span> member <span class=\"token operator\">=</span> oAuthClient<span class=\"token punctuation\">.</span><span class=\"token function\">getMember</span><span class=\"token punctuation\">(</span>code<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 1</span>\n\n        <span class=\"token class-name\">Member</span> savedMember <span class=\"token operator\">=</span> memberRepository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 2</span>\n        honorRepository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Honor</span><span class=\"token punctuation\">(</span>savedMember<span class=\"token punctuation\">,</span> NEWBIE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 3</span>\n\n        emailSender<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>savedMember<span class=\"token punctuation\">.</span><span class=\"token function\">getEmail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> CONGRATULATIONS_MESSAGE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 4</span>\n\n        <span class=\"token keyword\">return</span> savedMember<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">1</code>: 외부 서비스에서 인가 코드를 전달하여 회원 정보를 조회한다.</li>\n<li><code class=\"language-text\">2</code>: 조회한 회원 정보를 기반으로 저장한다.</li>\n<li><code class=\"language-text\">3</code>: 가입과 동시에 <code class=\"language-text\">NEWBIE</code> 칭호를 획득한다.</li>\n<li><code class=\"language-text\">4</code>: 가입 축하 메일을 전송한다.</li>\n</ul>\n<p>이 모든 과정은 하나의 논리적인 작업 단위이기 때문에 하나의 트랜잭션으로 묶여 진행된다. </p>\n<p>위 로직 중 데이터베이스 트랜잭션이 실질적으로 사용되는 부분은 어디일까? 바로 <code class=\"language-text\">2</code>, <code class=\"language-text\">3</code>이다. <code class=\"language-text\">MemberRepository</code>와 <code class=\"language-text\">HonorRepository</code>는 <code class=\"language-text\">member</code>와 <code class=\"language-text\">honor</code>를 적절히 <code class=\"language-text\">영속</code>시키기 위해 <code class=\"language-text\">데이터베이스 커넥션</code>을 활용한다. 외부 서비스를 통해 회원 정보를 조회하는 <code class=\"language-text\">1</code>과 메일을 전송하기 위한 <code class=\"language-text\">4</code>는 데이터베이스와 관련된 처리가 아니므로 데이터베이스를 활용한 트랜잭션이라 보기 어렵다.</p>\n<p>또한 외부 서비스는 우리가 <code class=\"language-text\">제어할 수 없는 영역</code>에 가깝다. 데이터베이스의 커넥션과 요청 처리를 위한 스레드는 외부 서비스에서 적절한 응답이 올 때까지 계속 <code class=\"language-text\">대기</code>해야 한다. 특히 데이터베이스의 커넥션은 <code class=\"language-text\">한정된 개수</code>를 가지고 있다. 대기 시간이 길어질수록 <code class=\"language-text\">병목 현상</code>이 발생할 가능성이 커진다.</p>\n<p>위 코드를 그림으로 표현하면 아래와 같다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/59357153/192531474-38498110-b3c8-47b1-aafd-0c1ab3944c33.png\"></p>\n<p>실질적으로 데이터베이스의 트랜잭션이 필요한 부분은 파란 화살표지만, 데이터베이스 커넥션을 사용하지 않는 시간까지 불필요하게 <code class=\"language-text\">낭비</code>되고 있는 것을 확인할 수 있다.</p>\n<h2>외부 리소스 요청 로직 분리하기</h2>\n<p>트랜잭션은 필요한 부분에 최소한으로 적용되어야 하므로, 제어할 수 없는 외부 요청 로직을 분리해야 한다. 먼저 작성된 코드에서 트랜잭션이 필요한 로직만 남겨둔다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MemberService</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> NEWBIE <span class=\"token operator\">=</span> <span class=\"token string\">\"뉴비\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> CONGRATULATIONS_MESSAGE <span class=\"token operator\">=</span> <span class=\"token string\">\"가입을 축하드립니다!\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MemberRepository</span> memberRepository<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">HonorRepository</span> honorRepository<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Transactional</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Member</span> <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">Member</span> member<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Member</span> savedMember <span class=\"token operator\">=</span> memberRepository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        honorRepository<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Honor</span><span class=\"token punctuation\">(</span>savedMember<span class=\"token punctuation\">,</span> NEWBIE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> savedMember<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>트랜잭션이 불필요한 로직을 상위 클래스로 분리하여 작성한다. </p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token annotation punctuation\">@Component</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MemberRegister</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> CONGRATULATIONS_MESSAGE <span class=\"token operator\">=</span> <span class=\"token string\">\"가입을 축하드립니다!\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MemberService</span> memberService<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">OAuthClient</span> oAuthClient<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">EmailSender</span> emailSender<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Member</span> <span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> code<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Member</span> member <span class=\"token operator\">=</span> oAuthClient<span class=\"token punctuation\">.</span><span class=\"token function\">getMember</span><span class=\"token punctuation\">(</span>code<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Member</span> savedMember <span class=\"token operator\">=</span> memberService<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        emailSender<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>savedMember<span class=\"token punctuation\">.</span><span class=\"token function\">getEmail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> CONGRATULATIONS_MESSAGE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> savedMember<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>기존에 <code class=\"language-text\">memberService</code>를 호출하던 부분을 <code class=\"language-text\">memberRegister</code>를 의존하도록 변경한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@RequiredArgsConstructor</span>\n<span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/members\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MemberController</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MemberRegister</span> memberRegister<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@PostMapping</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MemberResponse</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">MemberRegisterRequest</span> request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">Member</span> savedMember <span class=\"token operator\">=</span> memberRegister<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">MemberResponse</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MemberResponse</span><span class=\"token punctuation\">(</span>savedMember<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 로직을 그림으로 표현하면 아래와 같다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/59357153/192531482-de0d3295-a02c-42c5-a5fe-5493be9d7fc7.png\"></p>\n<p>불필요하게 낭비되던 데이터베이스 커넥션 유지 시간이 줄어든 것을 확인할 수 있다.</p>\n<h2>정리</h2>\n<p>지금까지 트랜잭션 내의 외부 리소스 요청에 대한 로직을 분리해야 하는 이유와 방법에 대해 간단히 알아보았다. </p>\n<p><code class=\"language-text\">제어할 수 없는 영역</code>인 외부 리소스에 대한 요청을 트랜잭션에서 분리하지 않으면 응답이 올 때까지 요청 스레드가 <code class=\"language-text\">대기</code>하게 된다. 이때 요청에 데이터베이스 로직이 포함되면 커넥션도 함께 <code class=\"language-text\">대기</code>하게 된다. <code class=\"language-text\">한정된 개수</code>를 가진 커넥션을 빠르게 반납하지 않으면 <code class=\"language-text\">병목 현상</code>이 일어날 수 있다.</p>\n<p>이런 상황을 피하기 위해서는 트랜잭션이 활성화된 범위를 <code class=\"language-text\">최소화</code>해야한다. 이러한 개선 작업을 통해 불필요하게 낭비되는 서버 자원을 적절히 아낄 수 있다. </p>\n<h2>Referernces.</h2>\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=Xx9BXrzNHn8\">구구의 Servlet &#x26; Servlet Container 강의</a></li>\n<li>백은빈, 이성욱 지음, 『Real MySQL 8.0』 (위키북스, 2021), 158-160.</li>\n</ul>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"트랜잭션 처리를 위해서는 데이터베이스와 통신하기 위한 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"커넥션"}]},{"type":"text","value":"이 필요하다. 하지만 커넥션 생성을 위해서 많은 비용이 필요하다. 이러한 비용을 절감하기 위해 커넥션을 미리 생성한 뒤 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"커넥션 풀"}]},{"type":"text","value":"을 통해 관리한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"커넥션 풀의 개수는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"제한"}]},{"type":"text","value":"되어 있다. 만약 동시에 데이터베이스 처리 로직이 담긴 요청을 커넥션 풀의 개수 이상으로 받았다고 가정하자. 커넥션을 획득하지 못한 요청은 다른 데이터베이스 커넥션이 반납될 때까지 기다리게 될 것이다. 결국 이러한 상황이 길어지면 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"병목 현상"}]},{"type":"text","value":"이 발생하게 된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/59357153/192680529-da0076fe-6ac4-4fdc-aae5-49a00551abab.png"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"불필요한 로직이 섞인 트랜잭션"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"먼저 간단한 예시를 위해 아래와 같은 요구사항을 줬다고 가정한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"회원가입을 진행한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"회원가입은 외부 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"OAuth"}]},{"type":"text","value":"를 통해 진행된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"우리는 전달받은 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"인가 코드"}]},{"type":"text","value":"를 기반으로 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"회원 정보를 조회"}]},{"type":"text","value":"한 뒤 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"회원가입"}]},{"type":"text","value":"을 진행한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"회원가입이 완료되면 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"NEWBIE"}]},{"type":"text","value":"라는 칭호를 획득할 수 있다. (회원은 여러 개의 칭호를 가질 수 있다고 가정한다. "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"회원 : 칭호 = 1 : N"}]},{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"회원가입이 완료되면 가입한 email을 통해 가입 완료 메일을 전송한다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위 과정을 코드로 표현하면 아래와 같다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@RequiredArgsConstructor"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Service"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MemberService"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"static"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" NEWBIE "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"뉴비\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"static"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" CONGRATULATIONS_MESSAGE "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"가입을 축하드립니다!\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MemberRepository"}]},{"type":"text","value":" memberRepository"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"HonorRepository"}]},{"type":"text","value":" honorRepository"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"OAuthClient"}]},{"type":"text","value":" oAuthClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"EmailSender"}]},{"type":"text","value":" emailSender"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Transactional"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Member"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"register"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" code"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Member"}]},{"type":"text","value":" member "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" oAuthClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getMember"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"code"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 1"}]},{"type":"text","value":"\n\n        "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Member"}]},{"type":"text","value":" savedMember "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" memberRepository"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"save"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"member"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 2"}]},{"type":"text","value":"\n        honorRepository"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"save"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Honor"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"savedMember"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" NEWBIE"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 3"}]},{"type":"text","value":"\n\n        emailSender"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"send"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"savedMember"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getEmail"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" CONGRATULATIONS_MESSAGE"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 4"}]},{"type":"text","value":"\n\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" savedMember"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":": 외부 서비스에서 인가 코드를 전달하여 회원 정보를 조회한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"2"}]},{"type":"text","value":": 조회한 회원 정보를 기반으로 저장한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"3"}]},{"type":"text","value":": 가입과 동시에 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"NEWBIE"}]},{"type":"text","value":" 칭호를 획득한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"4"}]},{"type":"text","value":": 가입 축하 메일을 전송한다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이 모든 과정은 하나의 논리적인 작업 단위이기 때문에 하나의 트랜잭션으로 묶여 진행된다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위 로직 중 데이터베이스 트랜잭션이 실질적으로 사용되는 부분은 어디일까? 바로 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"2"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"3"}]},{"type":"text","value":"이다. "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"MemberRepository"}]},{"type":"text","value":"와 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"HonorRepository"}]},{"type":"text","value":"는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"member"}]},{"type":"text","value":"와 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"honor"}]},{"type":"text","value":"를 적절히 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"영속"}]},{"type":"text","value":"시키기 위해 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"데이터베이스 커넥션"}]},{"type":"text","value":"을 활용한다. 외부 서비스를 통해 회원 정보를 조회하는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":"과 메일을 전송하기 위한 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"4"}]},{"type":"text","value":"는 데이터베이스와 관련된 처리가 아니므로 데이터베이스를 활용한 트랜잭션이라 보기 어렵다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"또한 외부 서비스는 우리가 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"제어할 수 없는 영역"}]},{"type":"text","value":"에 가깝다. 데이터베이스의 커넥션과 요청 처리를 위한 스레드는 외부 서비스에서 적절한 응답이 올 때까지 계속 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"대기"}]},{"type":"text","value":"해야 한다. 특히 데이터베이스의 커넥션은 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"한정된 개수"}]},{"type":"text","value":"를 가지고 있다. 대기 시간이 길어질수록 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"병목 현상"}]},{"type":"text","value":"이 발생할 가능성이 커진다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위 코드를 그림으로 표현하면 아래와 같다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/59357153/192531474-38498110-b3c8-47b1-aafd-0c1ab3944c33.png"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"실질적으로 데이터베이스의 트랜잭션이 필요한 부분은 파란 화살표지만, 데이터베이스 커넥션을 사용하지 않는 시간까지 불필요하게 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"낭비"}]},{"type":"text","value":"되고 있는 것을 확인할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"외부 리소스 요청 로직 분리하기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"트랜잭션은 필요한 부분에 최소한으로 적용되어야 하므로, 제어할 수 없는 외부 요청 로직을 분리해야 한다. 먼저 작성된 코드에서 트랜잭션이 필요한 로직만 남겨둔다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@RequiredArgsConstructor"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Service"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MemberService"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"static"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" NEWBIE "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"뉴비\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"static"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" CONGRATULATIONS_MESSAGE "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"가입을 축하드립니다!\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MemberRepository"}]},{"type":"text","value":" memberRepository"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"HonorRepository"}]},{"type":"text","value":" honorRepository"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Transactional"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Member"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"save"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Member"}]},{"type":"text","value":" member"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Member"}]},{"type":"text","value":" savedMember "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" memberRepository"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"save"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"member"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        honorRepository"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"save"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Honor"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"savedMember"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" NEWBIE"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" savedMember"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"트랜잭션이 불필요한 로직을 상위 클래스로 분리하여 작성한다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@RequiredArgsConstructor"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Component"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MemberRegister"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"static"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" CONGRATULATIONS_MESSAGE "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"가입을 축하드립니다!\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MemberService"}]},{"type":"text","value":" memberService"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"OAuthClient"}]},{"type":"text","value":" oAuthClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"EmailSender"}]},{"type":"text","value":" emailSender"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Member"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"register"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" code"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Member"}]},{"type":"text","value":" member "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" oAuthClient"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getMember"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"code"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Member"}]},{"type":"text","value":" savedMember "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" memberService"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"save"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"member"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        emailSender"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"send"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"savedMember"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getEmail"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" CONGRATULATIONS_MESSAGE"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" savedMember"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"기존에 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"memberService"}]},{"type":"text","value":"를 호출하던 부분을 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"memberRegister"}]},{"type":"text","value":"를 의존하도록 변경한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@RequiredArgsConstructor"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@RequestMapping"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/members\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@RestController"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MemberController"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"final"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MemberRegister"}]},{"type":"text","value":" memberRegister"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@PostMapping"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ResponseEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","generics"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MemberResponse"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"register"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@RequestBody"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MemberRegisterRequest"}]},{"type":"text","value":" request"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Member"}]},{"type":"text","value":" savedMember "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" memberRegister"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"register"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"request"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getCode"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MemberResponse"}]},{"type":"text","value":" response "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MemberResponse"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"savedMember"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ResponseEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"ok"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"response"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"위 로직을 그림으로 표현하면 아래와 같다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/59357153/192531482-de0d3295-a02c-42c5-a5fe-5493be9d7fc7.png"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"불필요하게 낭비되던 데이터베이스 커넥션 유지 시간이 줄어든 것을 확인할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"정리"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"지금까지 트랜잭션 내의 외부 리소스 요청에 대한 로직을 분리해야 하는 이유와 방법에 대해 간단히 알아보았다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"제어할 수 없는 영역"}]},{"type":"text","value":"인 외부 리소스에 대한 요청을 트랜잭션에서 분리하지 않으면 응답이 올 때까지 요청 스레드가 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"대기"}]},{"type":"text","value":"하게 된다. 이때 요청에 데이터베이스 로직이 포함되면 커넥션도 함께 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"대기"}]},{"type":"text","value":"하게 된다. "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"한정된 개수"}]},{"type":"text","value":"를 가진 커넥션을 빠르게 반납하지 않으면 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"병목 현상"}]},{"type":"text","value":"이 일어날 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이런 상황을 피하기 위해서는 트랜잭션이 활성화된 범위를 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"최소화"}]},{"type":"text","value":"해야한다. 이러한 개선 작업을 통해 불필요하게 낭비되는 서버 자원을 적절히 아낄 수 있다. "}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Referernces."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.youtube.com/watch?v=Xx9BXrzNHn8"},"children":[{"type":"text","value":"구구의 Servlet & Servlet Container 강의"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"백은빈, 이성욱 지음, 『Real MySQL 8.0』 (위키북스, 2021), 158-160."}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"excerpt":"…","timeToRead":3,"frontmatter":{"title":"트랜잭션 내에 외부 리소스 요청이 담기게 되면 어떤 문제가 발생할까?","userDate":"20 September 2022","date":"2022-09-20T00:00:00.000Z","tags":["transactional"],"excerpt":null,"image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABFklEQVQoz5WSMcqDQBCFFS0sLbVKIYgnEM8QcgQLmxTiAQx4ANHOxgNYWFjkQGIhChZimjSiUV9wwfCHX8U8GHbYeXw7ww6FFU3T9O+uqiq0bfupr3lmUVuwx+OBIAgQhiHu9zvO5zNOpxPiON6FbgKbpkEURTAMAxzHged5yLKMJEl+A84ahoGcZVlCFEWwLAuapiEIAvI8//Ic6rDve5Lbtg2KomBZFkzTJPntdiO12XN45AXoeR6BXC4X6LpOctd1fwPOGsfx87OKohDQHKqq4vl8fnkOdbi87DgOGIaBJEnQNI10er1eURTFJnQXWNc1gfq+T3YwyzKkaYqu6zb3dXXkLfOR+m6H80iv14ucf2Opr0Hf/wQTGxn1ORwAAAAASUVORK5CYII=","aspectRatio":1.7782026768642447,"src":"/static/78909983daa4e23be69f5f64d315c228/a76e0/external-in-transaction.png","srcSet":"/static/78909983daa4e23be69f5f64d315c228/3a443/external-in-transaction.png 930w,\n/static/78909983daa4e23be69f5f64d315c228/4d929/external-in-transaction.png 1860w,\n/static/78909983daa4e23be69f5f64d315c228/a76e0/external-in-transaction.png 2560w","sizes":"(max-width: 2560px) 100vw, 2560px"}}},"author":[{"id":"4기_매트","bio":"우아한테크코스 4기 매트(최기현)입니다 :)","avatar":{"children":[{"__typename":"ImageSharp","fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAASABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAcGBQj/xAAXAQADAQAAAAAAAAAAAAAAAAAFBgcE/9oADAMBAAIQAxAAAAHwNWuRc1wzpGTYmGD5MAVi4gtPv//EAB0QAAICAgMBAAAAAAAAAAAAAAIEBQYDEQABFBX/2gAIAQEAAQUCPEOwpjHyISM1FVuQGOsNrtyckSFzVXWREfOBn1ysL4MqX//EACcRAAIBAwEGBwAAAAAAAAAAAAECAwQFEQAGEhQhIjETNTZ0hLK0/9oACAEDAQE/AbHY6yvoJrrLxJpo5nplcKFgEqxpIxkm7dIkHThQMZLEctPspe4naPgWk3TgSRyRNG45YZG8Vd5SMEHAyD21sL6V2Z+T+qp1fvOrl7yX7DX/xAApEQABAgQEBAcAAAAAAAAAAAABAgMABAUhESIxMhITIzQ1QXJzgbGz/9oACAECAQE/AaxMy8o43KssM8xbYdJKlKcSCpSQEpxtdO4k67fOG6jJ8COrhlFii40schv8mK74pUvU1+bUSnbMe2n6j//EACgQAAIBAwMEAQQDAAAAAAAAAAECAwQREgATIRQiUWEjBTEzQUKBkf/aAAgBAQAGPwIgDhTbxc+z/fIGmr6nKnqyFngoJSkbvQ4ktJtPHuPLIcHhRZFXbDZjJlGqLe5Z4FlW3Hxy/KgxGOOIbHG3FuDa2qSraMTRwyzNIGQSHZaFo3dVbt3QGvG38XsQb6po6Gvmxjmill+nbNnYxi13c96xMLqydwOV8h9tLBWQkNF8cOEnHTKAIR3G/YLx+wgPrVUbD8h/XhAR/h5HjUjBmDZsL3N7dPObX8X5tqoaWCKRutcZPGjm3TUvF2BNvWv/xAAaEAEBAQEBAQEAAAAAAAAAAAABESExAEFR/9oACAEBAAE/IddaBoGLSOxB2Ak8545GqhnWEXSFa6FkzqgVbDBKeFhabUJlwhigPX/J1iRQ6jOnAXcR5lLAKKr0kVDFOpqhUIrNEQ+mm+5EhymKTYAKl3vgkYoyUBCFUqCv77//2gAMAwEAAgADAAAAEAMPwv/EABkRAQACAwAAAAAAAAAAAAAAAAEQESFBof/aAAgBAwEBPxBrHcNKwSLKAoBAQO4LSnWsjzimuaFX/8QAHBEBAQACAgMAAAAAAAAAAAAAAREAIRAxQVHw/9oACAECAQE/EDLJfO4KkENiABjdm4tzAHwBETs1W3hX9v0z/8QAGRABAQEBAQEAAAAAAAAAAAAAAREAITFB/9oACAEBAAE/EDsvsUWrJMgKUzhLr51KiN7NjU/QeQqGAyJL2MNIFn+UIqE1KS1BKeuLyYCL4XsDFGESzkKJbl3Z3bkyUgKKAS40uEPo0vmASEAOL5WKkagMBEAq/wD/2Q==","aspectRatio":1.1111111111111112,"src":"/static/d0383ede10aebc9055f7d5902f2ac4ea/a14e5/mat.jpg","srcSet":"/static/d0383ede10aebc9055f7d5902f2ac4ea/b3d27/mat.jpg 40w,\n/static/d0383ede10aebc9055f7d5902f2ac4ea/5a735/mat.jpg 80w,\n/static/d0383ede10aebc9055f7d5902f2ac4ea/6e81a/mat.jpg 120w,\n/static/d0383ede10aebc9055f7d5902f2ac4ea/a14e5/mat.jpg 592w","sizes":"(max-width: 592px) 100vw, 592px"}}]}}],"source":null}},"relatedPosts":{"totalCount":3,"edges":[{"node":{"id":"f86a6336-fe74-5ddf-b375-b6fcdd2abb6d","timeToRead":9,"excerpt":"안녕하세요. 우아한테크코스 5기 BE…","frontmatter":{"title":"무한스크롤 기능에서 동시성 이슈 해결하기","date":"2023-10-11T12:00:00.000Z"},"fields":{"slug":"/post/2023-08-16-ObjectOptimisticLockingFailureException/"}}},{"node":{"id":"2f9c3482-bb8c-5939-8d77-c45988ed96be","timeToRead":3,"excerpt":"…","frontmatter":{"title":"트랜잭션 내에 외부 리소스 요청이 담기게 되면 어떤 문제가 발생할까?","date":"2022-09-20T00:00:00.000Z"},"fields":{"slug":"/post/2022-09-20-external-in-transaction/"}}},{"node":{"id":"4bbaafa6-9116-5be7-acdb-8d49ba5f2d3e","timeToRead":3,"excerpt":"@Transactional…","frontmatter":{"title":"Transactional 어노테이션","date":"2021-04-26T12:00:00.000Z"},"fields":{"slug":"/post/2021-05-25-transactional/"}}}]}},"pageContext":{"slug":"/post/2022-09-20-external-in-transaction/","prev":{"excerpt":"레벨 3 프로젝트 과정 중 이미지 서버를 개발하고 개선해나가는 과정을 이야기하려 합니다. 왜 이미지 서버를 만들어야 하는가? 레벨…","timeToRead":6,"frontmatter":{"title":"이미지 스토리지 서버 구축 및 최적화","tags":["nginx","image","cache"],"date":"2022-09-13T12:00:00.000Z","draft":false,"excerpt":null,"image":{"childImageSharp":{"fluid":{"aspectRatio":2.3604060913705585,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABfklEQVQoz22S7yuDURTHn5f+I14oWtlbpaTJ7xRpkfJCZorJTBliihcUVpLNrCXWrGYI61nb2JYfLWQNbcpE2u59vuw+e7aZnbq32znnfu75nns4ZI0KFMUm+SilEASBrVImZPMycS6zSRcD8TvIdpWoNHfBFfUyHyFETIYIS9MUNsJ6LPrVMPhUeEze/nmck161RFyotvRAbu1D2VIVKkydmPdvsVjs9RlpkmJn+8MW+l21WLnSYvSsAzPegVx1rEKpbC2/hvoDFYKJCGb9m2hzaNB9NAV8ECiaGmHe3sEnTWLktAWrV5NY8A3BGJ6B+rQZx9E9UY1A8kCddx011l4o7COw3Z+g7VCDduc4i03P6cHzPBM+cd6N5cDYr+RhBhx0N+D6zZeTzdGs5Mh7FK2/EM5Qzlbd/iA8L6F/HxCMe9DlkEHnUaLHKWdQEUbyPSz8YePNAQyXJhAq+ggluf5I/Q4leLifbLiIOfFNvkr3MAMtHgsJWggrNTqFsR/VtTYkAa584wAAAABJRU5ErkJggg==","sizes":"(max-width: 1618px) 100vw, 1618px","src":"/static/30e739e21332622c2eb01b602c2e97e4/71829/image-storage-server.png","srcSet":"/static/30e739e21332622c2eb01b602c2e97e4/3a443/image-storage-server.png 930w,\n/static/30e739e21332622c2eb01b602c2e97e4/71829/image-storage-server.png 1618w"}}},"author":[{"id":"4기_오리","bio":"우아한테크코스 4기 오리(최진영)입니다 :)","avatar":{"children":[{"fluid":{"aspectRatio":1,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADz0lEQVQ4y42U60+bZRjG+zfwdX4w8ZPRxGwfjAxj1OgGajZYlUOxdbBxZhuH0lI6NlrYWFmhlEHKKQwop8I4DMYQWIcD6rDNNgQM0oriwIlGXLKhYePw86VQRCiLd/LkSZ73fq73uq77vh8RL4i1tTX3Wo/V1VX38pazfRf9XzBPfNnbT4GhiMXFxa1zT55XwJ1/XFlZce9O5xRpChWBRz7E781XCAj4mL7e3q0crwx3SdwEW1paIiQkmLf9/Dgp2U9izFHe8n0Hu92+N+B2sO0S1iM9XYlUKiUxIYZD7x8gWHyYqOhYJicnd1ki2inVI/Hb0Qd0NJm4fCmb4BAJ5zLPkpoqJykpldBjBwXpAQJDx4sk/8tw4fFTaisL+PuBBntzHDJJIMdPxCKXywUf0zke9i6fBh5k4c8n3ovikev50GxpYHbEADOF8KiEeVsmeapQImQSPguRIhO/THX5uU2wVe9V9vgwMeniq9YL8DCfhW+0TPak84ewPxvP5a4lkeq8COSRvnR3tWzIXV72ztDjnbW/h5kBNfxk4FdbFpZCKdaaGO42xWFvTYb5ElYncmivzeP5yn+t2iF5g2Ffl5nfhlWCXCNjHacx6rWMOEYxXdFhbzkNU/nwg472KjWPnyzt7aGn5/q6rzF3Ww6/m5i7o6ZSn0BXrQbDxTSs1ScFK4w8H9Nw3azj2fIeDLd7OD09TUVeNH1X41kczRUO9HzfkyqwzsBSrmLmjpYZq5JbvTc27m22zFbbeIZ+fXl8NBiLhVY5xtgNJU8dZ+HnAly9aTQ0X6fepCJXIWZ65pE7d1koyvo9D8auWXa5nCiSIgXAIOSJUjqbTZTnJdB+RcpFRTBnYkOZHZDTc63E66MiGhoawuFwuCfDcW+MptJ0/nJkUG7UMPadk4ezv9DTP0hL5XluVkRSl/8F819rORXhj6GwCHNtLRaLxT2GTqcLkUajITs7m4b6OmrMTegywhkRqllTc5WpqSmMxkLM5hoh5xKxIe8xZ9Og112gsqqWpsZGVCoVxcXFwpwnoJCJEbW1tdHd3c3w8DDm+gYU8VGoZZ9QVV7Gvfv3GRocxDX9I1UlRWTJAshKklDXYKGjo52J8XH3va7OTjQaLeFHP0JkNpuprKigvKwMfYGB+LAgilKiSI6LorHJgs1m47I+n/TkM5hyMjkVJuaEVIJOp0MvnCuVSnx8fHhp3z7e2H8AkdFoJDYuns+PHCb8A1+0mWpuDwzQ0trqTo6OjiY1JYXzWRq3gltWK7ocLQlBh4iTiHn1tdfx9/dHrVZTVlrKPz2FHH5YjcpeAAAAAElFTkSuQmCC","sizes":"(max-width: 300px) 100vw, 300px","src":"/static/eb0d39b517ea32a18b9b6239fa2da091/37d5a/ori.png","srcSet":"/static/eb0d39b517ea32a18b9b6239fa2da091/8ac63/ori.png 200w,\n/static/eb0d39b517ea32a18b9b6239fa2da091/37d5a/ori.png 300w"}}]}}]},"fields":{"layout":"post","slug":"/post/2022-09-13-image-storage-server/"}},"next":{"excerpt":"본 포스팅은 도커에 대한 자세한 개념, 도커 기본 명령어, 컨테이너 실행 실습, 도커 컴포즈, 도커 이미지 빌드, 도커 허브에 이미지 배포 등 전반적인 도커 기초에 대한 내용을 다룬다. 도커 (Docker…","timeToRead":21,"frontmatter":{"title":"이론과 실습을 통해 이해하는 Docker 기초","tags":["docker"],"date":"2022-09-25T12:00:00.000Z","draft":false,"excerpt":null,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.7782026768642447,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABUUlEQVQoz51Ty0rDQBSdT/AHXfgVrlyKiAvRhVBw40IXrmxFax/WQqmIxbbUIlRa1NIkZvJonKTQpJ0cm9AmMWoxXrjM48w9M+dwhyASrusGY3SeJMhPBFPOg72kxCR6mMeKuDvHIuTLMiD8QsanyD52oH6w0Io/yvVISZTdHNtYPcliZeMAh7cNbN338CBqPqYrCphhYKipUCgFlWXoQwNU02Bao/CFvmfzRaraAtlOg+wVQHYusH5Vg2FasGfa088C2rKOfFfA3auEpqii2x8gX6ni/LqMsW2Hkhdyh+YIZ+0e1i6bSNW6gRTTmWKzJSHVUbD7RP3xtM/QEyRkiiXsHx2DWVb4Qi8MxpAplJAr3aBRryNXLCJbruBtVoSkHnph2w4kqvgEIlXxIogYSO9wJhMf92zhsVz4z+dt9q1tlt0cX//2CUgc4JFb+T8a+xNizEr+5AuV8QAAAABJRU5ErkJggg==","sizes":"(max-width: 1920px) 100vw, 1920px","src":"/static/40a730f43ffb6c029e36c9be353f9f92/0e6e2/docker-basic.png","srcSet":"/static/40a730f43ffb6c029e36c9be353f9f92/3a443/docker-basic.png 930w,\n/static/40a730f43ffb6c029e36c9be353f9f92/4d929/docker-basic.png 1860w,\n/static/40a730f43ffb6c029e36c9be353f9f92/0e6e2/docker-basic.png 1920w"}}},"author":[{"id":"4기_후디","bio":"우아한테크코스 4기 후디(조동현)입니다 :)","avatar":{"children":[{"fluid":{"aspectRatio":1.0050251256281406,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEwklEQVQ4yx2U61fSBxjHf//DztZp7bQsu2zVqC1dtWyghmihgMjlBz+uiYCAIBIiKMjlByKigoBc5OYFSLl4v4SC10q32lbbi7UuW1k7a+vN/oHRzvm+eN48z+d7Pi8egAGS6FRqHY5SfYPaQL5JAzk0kMtiClhskbTlFostxBNZuHomoYFNhwScmxIGg08gMrG1tOtYKlCPreHQSVwmRKFAWBxUjcGTiRQBX8oTKLwul1qth9hSJlfKYIkhZjODKaRQuNg6EI0hXqsiAJjKmnJkdXkVpgFfq5SJxAI+kUACGQIaS2q39atUOiqNT6PzIaZQLFbQIV49sdCCQyRxGsgcgEoGEV+W8aR6uWbQbND7HZYGPFbE50EMLr6eRaE2gpCAzpRIpJr4aEjS0gEyxFRISCCyCnygvBJ78Qqm152698u/ixtPA+NZocxwo5ZEp5B6tDK3pRVW8RgkPBpVAVEalC08DlhfhSwjViP5FAzgtJlUynZHcHH70bvs/VfZ3dfZuy/DU/d1Zn9malIs4KllbHu3QN5EkjWRWti1hMpSCafWaeD7esTAN1cx31bgw5Pb9x7/s/Fgf3Hz2Vzu16WN33Z+eLv13RuosQOBKI359MmweSneB8tZ504dteuE6VF4bLgTOFeCKqvAp1Yebzx4u7D5bGnrWYF8Z/PJ6IA1l/9J3G5HISvmxnoXY/3r08N9qkbM5fOpIJwKw3G/Dii5jEZjweXtF5sP/17be7O0/Txz59Fi/knEG4rYtAqpHIlC5zPuh/mxvbVoxNri13JX086FmD0TsQAXr1bjyI2ru/vr3/+1svP70tbz7M4f+d1XOz++y8xsejU8r6E5N+Nan+nPJq2JgDYZ1G3ODqwmB+fG7cAVFJbGkRWYub03d+6+LFQoOJ/N/jyffbyy9ZzBbRXQ65xmadR5K5fuTfg7UyHdYsyYDHStTDoK5Ossvmp178+Vuy+z9/bXdl/n7u+v7rxYXn+S237aKlXQ8OhEAM5EzXPjptkx00IcjrmVQZskm3QCFRWYOhxZ1KKWKvRKjU2lHdSaho3WEbhvNBJJ+XvkHi0rP+OZCpnSEUM6YpmPW8fdCp+1NZscAqYjloK9+HC3z9busrSdPnGsmU10wm19hjaPrSPQp4y5NMu3HWFX52RQnwpqkyOaqYBmOmpeSw0BhWPpsLmgbnLEFPcZEJ+dcJhkW7PuQtYz7rW050E2lJ92+fvbE4HuhQljJtQV8ygzYfh97UTAePv/JPzG4KD68+KiAZM8MdI75rWOuCzDA3DY3eNzwD1dorBDGRtWT0d0M1Hd/IR1+fYAMOEzxP3GCa+hMAzC8jMnjvAa+Ye/oh6/xDz6Na2olP7pBfAQgqiUsC1tZFJNGZdSZVFCsxHj/EQfEHJqIy5d2NU96jF0yLjHiw5DNPBMCebsJVxRCeXQeepBBOnD0ziFiDlu40uZNc0g2qmG0gHt+2X/gCbo6AoN6eIBWCagnyo+UvgKHxRf+wSBO/gF8ePz5ANnCR+dxsn5tKi1ySgDNUKCV88ZG+qMB3qBkEMXdRsi7u501C5qpJ0sPkrmtB24wDmGbD6GEp+slB4vl5xE8ky32CEzt62JDNaiPF0MWC3hNyv+A081WE3LGkRBAAAAAElFTkSuQmCC","sizes":"(max-width: 800px) 100vw, 800px","src":"/static/e88c3ca6c1dcd01f0a3a4db5b3373c50/bc8e0/hudi.png","srcSet":"/static/e88c3ca6c1dcd01f0a3a4db5b3373c50/8ac63/hudi.png 200w,\n/static/e88c3ca6c1dcd01f0a3a4db5b3373c50/3891b/hudi.png 400w,\n/static/e88c3ca6c1dcd01f0a3a4db5b3373c50/bc8e0/hudi.png 800w,\n/static/e88c3ca6c1dcd01f0a3a4db5b3373c50/6050d/hudi.png 1200w,\n/static/e88c3ca6c1dcd01f0a3a4db5b3373c50/97244/hudi.png 1326w"}}]}}]},"fields":{"layout":"post","slug":"/post/2022-09-20-docker-basic/"}},"primaryTag":"transactional"}},"staticQueryHashes":["2130001345","4041952199"]}