{"componentChunkName":"component---src-templates-post-tsx","path":"/post/2020-09-30-ETag-with-Spring/","result":{"data":{"logo":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#080808","images":{"fallback":{"src":"/static/0b18bd94a62a12fdc81ea720c28722f6/a9770/tecoble.png","srcSet":"/static/0b18bd94a62a12fdc81ea720c28722f6/a9770/tecoble.png 400w","sizes":"400px"},"sources":[{"srcSet":"/static/0b18bd94a62a12fdc81ea720c28722f6/65935/tecoble.webp 400w","type":"image/webp","sizes":"400px"}]},"width":500,"height":110}}},"markdownRemark":{"html":"<h2>ETag란 무엇일까?</h2>\n<blockquote>\n<p>ETag 또는 Entity Tag는 월드 와이드 웹 프로토콜인 HTTP의 일부다. 그것은 HTTP가 웹 캐시 유효성 검사를 위해 제공하는 몇 가지 메커니즘 중 하나로, 클라이언트가 조건부 요청을 할 수 있게 한다.</p>\n<p>…</p>\n<p>ETag는 웹 서버가 URL에서 찾은 리소스의 특정 버전에 할당한 불투명한 식별자다. 만약 그 URL의 리소스 표현이 변경된다면, 새롭고 다른 ETag가 할당된다. 이러한 방식으로 사용되는 ETag는 지문과 유사하며, 한 자원의 두 가지 표현이 동일한지 여부를 결정하기 위해 빠르게 비교할 수 있다.</p>\n<p><a href=\"https://en.wikipedia.org/wiki/HTTP_ETag\">위키백과</a></p>\n</blockquote>\n<p>간단하게 말하면 ETag(entity tag)는 웹 서버가 주어진 URL의 콘텐츠가 변경되었는지 알려주고 이를 반환하는 HTTP 응답 헤더이다.</p>\n<h2>왜 사용할까?</h2>\n<p>먼저 캐시는 왜 사용할까?</p>\n<p><a href=\"https://www.youtube.com/watch?v=NxFJ-mJdVNQ\">소니의 Cache</a>의 영상을 보면 좋다.😊😊</p>\n<blockquote>\n<p>캐시는 컴퓨터 과학에서 데이터나 값을 미리 복사해 놓는 임시 장소를 가리킨다. 캐시는 캐시의 접근 시간에 비해 원래 데이터를 접근하는 시간이 오래 걸리는 경우나 값을 다시 계산하는 시간을 절약하고 싶은 경우에 사용한다. 캐시에 데이터를 미리 복사해 놓으면 계산이나 접근 시간 없이 더 빠른 속도로 데이터에 접근할 수 있다.</p>\n<p><a href=\"https://ko.wikipedia.org/wiki/%EC%BA%90%EC%8B%9C\">위키백과</a></p>\n</blockquote>\n<p>캐시를 사용하면 불필요한 요청을 줄이면서 서버의 부하를 줄일 수 있고, 미리 캐시에 저장해 놓은 값을 사용함으로써 빠른 응답을 할 수 있다.</p>\n<p>추가적으로 캐싱의 동작 대상은 정적리소스에 대해 사용하고 HTTP Method는 GET에 대한 응답을 캐싱하는 것으로 제한한다.</p>\n<blockquote>\n<p>캐싱 동작의 대상</p>\n<p>HTTP 캐싱은 부가적이지만 캐시된 리소스를 재사용하는 것은 보통 바람직한 일입니다. 하지만, 일반적인 HTTP 캐시들은 <a href=\"https://developer.mozilla.org/ko/docs/Web/HTTP/Methods/GET\"><code class=\"language-text\">GET</code></a>에 대한 응답을 캐싱하는 것으로 제한되며 다른 메서드들은 제외될 겁니다. 기본 캐시 키는 요청 메서드 그리고 대상 URI로 구성됩니다(GET 요청으로만 응답을 캐싱하므로 URI만 사용되는 경우가 많습니다).</p>\n</blockquote>\n<p>그럼 다시 ETag로 돌아오자.</p>\n<p>ETag는 저희가 사용하는 캐시가 유효한지 검증하기 위해 사용한다. 서버의 리소스가 변경된다면 어떨까? 그러면 저희가 저장해 놓은 캐시의 데이터와 서버의 리소스 데이터는 다른 값이겠지? 그때 캐시가 서버에게 리소스가 변경되었는지 안 되었는지 물어보는 것을 <strong>캐시 유효성 검사</strong>라고 한다. 우리는 ETag를 사용하여 <strong>캐시 유효성 검사</strong>를 하는 것이다.</p>\n<h2>클라이언트와 서버 간 통신을 어떻게 하는지 알아볼까?</h2>\n<h3>첫 요청에 대한 응답</h3>\n<p><img src=\"https://user-images.githubusercontent.com/45934117/98198859-51d8ef80-1f6d-11eb-8686-f78359f4ad5f.png\" alt=\"image\"></p>\n<p>먼저 요청은 보낸다.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\">curl -H \"Accept: application/json\" \n     -i http://localhost:8080/spring-boot-rest/foos/1</code></pre></div>\n<p>그러면 서버는 <code class=\"language-text\">ETag</code>를 응답 header에 담아서 보낸다.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token response-status\"><span class=\"token http-version property\">HTTP/1.1</span> <span class=\"token status-code number\">200</span> <span class=\"token reason-phrase string\">OK</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">ETag</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">\"f88dd058fe004909615a64f01be66a7\"</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Content-Type</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">application/json;charset=UTF-8</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Content-Length</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">52</span></span></code></pre></div>\n<p>클라이언트는 재요청할 때 <code class=\"language-text\">ETag</code>를 header의 <code class=\"language-text\">If-None-Match</code>에 담아 요청을 보낸다. 여기서 <code class=\"language-text\">If-None-Match</code>는 뭘까? ETag를 사용할 때 Conditional headers로  <code class=\"language-text\">If-None-Match</code>와 <code class=\"language-text\">If-Match</code>가 있다.</p>\n<p>간단하게 설명하면</p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-None-Match\">If-None-Match</a> - 클라이언트에서 캐싱된 ETag와 서버의 ETag가 다를 때 요청을 처리한다.</p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-Match\">If-Match</a>  - 클라이언트에서 캐싱된 ETag와 서버의 ETag가 같을 때 요청을 처리한다.</p>\n<h3>재요청에 대한 응답</h3>\n<p><img src=\"https://user-images.githubusercontent.com/45934117/98199041-b5631d00-1f6d-11eb-90e0-120c48f78800.png\" alt=\"image\"></p>\n<p>서버에 요청을 다시 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\">curl -H \"Accept: application/json\" \n     -H 'If-None-Match: \"f88dd058fe004909615a64f01be66a7\"'\n     -i http://localhost:8080/spring-boot-rest/foos/1</code></pre></div>\n<p>리소스가 바뀌지 않았기 때문에 서버는 <code class=\"language-text\">304 Not Modified</code>를 응답한다. <code class=\"language-text\">ETag</code>는 이전 요청에 대한 응답과 같다.</p>\n<blockquote>\n<p><a href=\"https://developer.mozilla.org/ko/docs/Web/HTTP/Status/304\">304 Not Modified</a>  - 이것은 캐시를 목적으로 사용됩니다. 이것은 클라이언트에게 응답이 수정되지 않았음을 알려주며, 그러므로 클라이언트는 계속해서 응답의 캐시된 버전을 사용할 수 있습니다.</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token response-status\"><span class=\"token http-version property\">HTTP/1.1</span> <span class=\"token status-code number\">304</span> <span class=\"token reason-phrase string\">Not Modified</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">ETag</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">\"f88dd058fe004909615a64f01be66a7\"</span></span></code></pre></div>\n<p>이제 리소스를 바꿔준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\">curl -H \"Content-Type: application/json\" \n     -i -X PUT --data '{ \"id\":1, \"name\":\"Transformers2\"}' \n     http://localhost:8080/spring-boot-rest/foos/1</code></pre></div>\n<p>요청에 대한 응답을 확인한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token response-status\"><span class=\"token http-version property\">HTTP/1.1</span> <span class=\"token status-code number\">200</span> <span class=\"token reason-phrase string\">OK</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">ETag</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">\"d41d8cd98f00b204e9800998ecf8427e\" </span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Content-Length</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">0</span></span></code></pre></div>\n<p>지난 요청을 다시 한다. 요청을 다시 할 때는 마지막으로 가지고 있던 ETag를 담아서 보낼 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\">curl -H \"Accept: application/json\" \n     -H 'If-None-Match: \"f88dd058fe004909615a64f01be66a7\"' \n     -i http://localhost:8080/spring-boot-rest/foos/1</code></pre></div>\n<p>클라이언트에서 보낸 ETag와 서버의 ETag가 다르기 때문에 요청을 처리한다. 리소스가 바뀌었으니 새로운 ETag를 header에 담아 보낸다. 새로운 요청을 처리했기 때문에 서버는 <code class=\"language-text\">200 OK</code>를 응답한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token response-status\"><span class=\"token http-version property\">HTTP/1.1</span> <span class=\"token status-code number\">200</span> <span class=\"token reason-phrase string\">OK</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">ETag</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">\"03cb37ca667706c68c0aad4cb04c3a211\"</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Content-Type</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">application/json;charset=UTF-8</span></span>\n<span class=\"token header\"><span class=\"token header-name keyword\">Content-Length</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">56</span></span></code></pre></div>\n<h2>ETag를 사용하지 않은 API vs 사용한 API</h2>\n<p>ETag 사용 예시와 ETag를 사용한 API와 사용하지 않은 API를 비교를 설명하기 위해 간단하게 Controller를 작성해 보았다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/posts\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">PostController</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">// ...</span>\n    \n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/no-etag\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PostResponse</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findAllWhenNoETag</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span>postService<span class=\"token punctuation\">.</span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/etag\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PostResponse</span><span class=\"token punctuation\">></span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findAllWhenETag</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span>postService<span class=\"token punctuation\">.</span><span class=\"token function\">findAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 ETag 설정으로 ShallowEtagHeaderFilter를 Bean으로 등록해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ETagHeaderFilter</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ShallowEtagHeaderFilter</span> <span class=\"token function\">shallowEtagHeaderFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ShallowEtagHeaderFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>추가 필터를 구성할 필요 없다면 위의 코드와 같이 작성해도 된다. 하지만 ETag를 사용한 API와 사용하지 않은 API를 비교하기 위해 필터를 사용했다.</p>\n<p>추가 필터 구성을 하고 싶다면 다음과 같이 설정해주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ETagHeaderFilter</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">FilterRegistrationBean</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ShallowEtagHeaderFilter</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">shallowEtagHeaderFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">FilterRegistrationBean</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ShallowEtagHeaderFilter</span><span class=\"token punctuation\">></span></span> filterRegistrationBean\n                <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FilterRegistrationBean</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ShallowEtagHeaderFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        filterRegistrationBean<span class=\"token punctuation\">.</span><span class=\"token function\">addUrlPatterns</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/posts/etag\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        filterRegistrationBean<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"PostAPIFilter\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> filterRegistrationBean<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>현재 PostController에서 <code class=\"language-text\">/posts/etag</code>만  etag를 사용한다는 설정이다. 만약 <code class=\"language-text\">/post/</code>에 대해 전부 ETag를 설정하고 싶다면  <code class=\"language-text\">filterRegistrationBean.addUrlPatterns(\"/posts/*\")</code> 이렇게 설정하면 된다.</p>\n<p>그럼 이제 <code class=\"language-text\">/no-etag</code>와 <code class=\"language-text\">/etag</code>를 호출해 볼까요? 호출하면 네트워크 상에 어떤 일이 일어날까요?</p>\n<p><img src=\"https://user-images.githubusercontent.com/45934117/94986209-cb10ab80-0597-11eb-9b8d-d88597fcc56e.png\" alt=\"image\"></p>\n<p>얼핏 보면 둘의 차이가 안 보인다. 하지만 Response Headers를 보면 차이를 볼 수 있다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/45934117/94986113-e929dc00-0596-11eb-84c1-7f12b318c509.png\" alt=\"image\"></p>\n<p>두 응답의 차이를 볼 수 있는 곳은 ETag일 것이다. <code class=\"language-text\">/etag</code>는 ETag를 사용하고 있기 때문에 응답으로 ETag를 header에 해시값으로 보내준다. 이는 재요청할 때 header의 <code class=\"language-text\">If-None-Match</code>의 값으로 보내 줄 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"http\"><pre class=\"language-http\"><code class=\"language-http\"><span class=\"token header\"><span class=\"token header-name keyword\">If-None-Match</span><span class=\"token punctuation\">:</span> <span class=\"token header-value\">\"0fad8e1b47f45fa4ce7fef400e87c9289\"</span></span></code></pre></div>\n<p>이렇게 ETag를 <code class=\"language-text\">/etag</code> 요청 header의 <code class=\"language-text\">If-None-Match</code>에 담아 재요청해 보겠다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/45934117/94986192-af0d0a00-0597-11eb-8966-f7123a1fd879.png\" alt=\"image\"></p>\n<p><code class=\"language-text\">etag</code>를 보면 앞서 설명했듯이 같은 요청에 대해서 304 상태 코드를 응답한다. 이는 서버에서 캐시 유효성 검사를 한 결과 변경되지 않았기 때문이다.</p>\n<p>여기서 봐야 할 것은 사이즈다. <code class=\"language-text\">no-etag</code>는 재요청에 대해서 <code class=\"language-text\">796B -> 796B</code>인 반면에 <code class=\"language-text\">etag</code>는 <code class=\"language-text\">820B -> 145B</code>이다. 이유는 ETag를 사용하지 않으면 했던 일을 똑같이 또 하지만, ETag를 사용하면 같은 요청에 대해서 변경된 리소스가 없다면 304 상태 코드와 ETag를 header에 담아 보내줄 뿐 요청에 대한 리소스를 또 보내지 않는다.</p>\n<p>이제 ETag를 사용했을 때와 사용하지 않을 때 차이가 있는 것을 아시겠죠?😊😊</p>\n<h2>Test Code 작성</h2>\n<p>테스트할 때 중요하게 볼 것은 <strong>두 가지</strong>라고 생각한다.</p>\n<p>첫 번째, 첫 요청을 보낼 때 <strong>응답에 “ETag”를 가졌는지</strong>\n두 번째, header “If-None-Match”에 받은 etag 값을 넣고 같은 <strong>요청을 또 보낼 때 <code class=\"language-text\">304 Not Modified</code>를 응답</strong>하는지\n추가로 리소스를 변경한 다음 <strong>다시 요청 보냈을 때 <code class=\"language-text\">200 OK</code>를 응답</strong>하는지 본다면 더 좋을 것 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Autowired</span>\n<span class=\"token keyword\">private</span> <span class=\"token class-name\">MockMvc</span> mockMvc<span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">findAll_ETag</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 먼저 데이터를 만들어 줍니다.</span>\n\n    <span class=\"token class-name\">String</span> url <span class=\"token operator\">=</span> <span class=\"token string\">\"/posts/etag\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 첫 번째 요청을 보낸다.</span>\n    <span class=\"token class-name\">MvcResult</span> mvcResult <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mockMvc<span class=\"token punctuation\">.</span><span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">andDo</span><span class=\"token punctuation\">(</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">andExpect</span><span class=\"token punctuation\">(</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isOk</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 첫 요청이기 때문에 200 OK </span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">andExpect</span><span class=\"token punctuation\">(</span><span class=\"token function\">header</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">exists</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ETag\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// ETag를 사용하고 있기 때문에 header가 ETag를 가지고 있는지 확인해준다.</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">andReturn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">String</span> etag <span class=\"token operator\">=</span> mvcResult<span class=\"token punctuation\">.</span><span class=\"token function\">getResponse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ETag\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 두 번째 요청을 보낸다.</span>\n    mvcResult <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mockMvc<span class=\"token punctuation\">.</span><span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">header</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"If-None-Match\"</span><span class=\"token punctuation\">,</span> etag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 응답받은 ETag를 해더에 담아 보낸다.</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">andDo</span><span class=\"token punctuation\">(</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">andExpect</span><span class=\"token punctuation\">(</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isNotModified</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 유효성 검사를 하고 변경이 안되었기때문에 304 Not Modified</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">andExpect</span><span class=\"token punctuation\">(</span><span class=\"token function\">header</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">exists</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ETag\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">andReturn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 리소스를 변경한다.</span>\n\n    etag <span class=\"token operator\">=</span> mvcResult<span class=\"token punctuation\">.</span><span class=\"token function\">getResponse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ETag\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>mockMvc<span class=\"token punctuation\">.</span><span class=\"token function\">perform</span><span class=\"token punctuation\">(</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">header</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"If-None-Match\"</span><span class=\"token punctuation\">,</span> etag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 두 번째 응답에 대한 ETag를 header에 담아 보낸다.</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">andDo</span><span class=\"token punctuation\">(</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">andExpect</span><span class=\"token punctuation\">(</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isOk</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 리소스가 변경되었기 때문에 200 OK </span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">andExpect</span><span class=\"token punctuation\">(</span><span class=\"token function\">header</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">exists</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ETag\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">andReturn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// ...</span>\n</code></pre></div>\n<p>첫 요청에 대한 응답이다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/45934117/98199684-1d663300-1f6f-11eb-91e4-1aafb74a9bf2.png\" alt=\"image\"></p>\n<p>앞서 설명한 것과 같이 <strong>상태코드 200</strong>에 <strong>ETag를 담고 있는 것</strong>을 볼 수 있다.</p>\n<p>다음은 재요청에 대한 응답이다.</p>\n<p><img src=\"https://user-images.githubusercontent.com/45934117/98199712-30790300-1f6f-11eb-8c4d-d848fe61d379.png\" alt=\"image\"></p>\n<p>재용청에 대해 ETag가 같기 때문에 <strong>상태코드 304</strong>에 다시 ETag를 담아 보내는 것을 볼 수 있다.</p>\n<p>수정 후 요청은 어떻게 오는지 확인해 보자.</p>\n<p><img src=\"https://user-images.githubusercontent.com/45934117/98199771-54d4df80-1f6f-11eb-9096-b73326cb02bb.png\" alt=\"image\"></p>\n<p>변경된 리소스를 감지하고 <strong>상태코드 200</strong>를 보낸다. 또, 이전 응답과 <strong>다른 ETag를 확인</strong>할 수 있다.</p>\n<h2>마무리</h2>\n<p>ETag가 무조건 좋은 것은 아니다. 만약 여러 대의 서버를 운영하고 있다면 같은 콘텐츠이지만 ETag가 다를 수 있기 때문이다. 따라서 ETag를 사용한다면 이러한 문제점을 인지하고 사용해야 할 것이다.</p>\n<p>😊😊글을 읽으면서 제가 잘못 알고 있는 점, 틀린 점, 추가했으면 하는 점 등 아낌없는 피드백 부탁합니다.😊😊</p>\n<h2>참고자료</h2>\n<p><a href=\"https://www.baeldung.com/etags-for-rest-with-spring\">ETags for REST with Spring</a></p>\n<p><a href=\"https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching\">HTTP Cache</a></p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"ETag란 무엇일까?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ETag 또는 Entity Tag는 월드 와이드 웹 프로토콜인 HTTP의 일부다. 그것은 HTTP가 웹 캐시 유효성 검사를 위해 제공하는 몇 가지 메커니즘 중 하나로, 클라이언트가 조건부 요청을 할 수 있게 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"…"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ETag는 웹 서버가 URL에서 찾은 리소스의 특정 버전에 할당한 불투명한 식별자다. 만약 그 URL의 리소스 표현이 변경된다면, 새롭고 다른 ETag가 할당된다. 이러한 방식으로 사용되는 ETag는 지문과 유사하며, 한 자원의 두 가지 표현이 동일한지 여부를 결정하기 위해 빠르게 비교할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://en.wikipedia.org/wiki/HTTP_ETag"},"children":[{"type":"text","value":"위키백과"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"간단하게 말하면 ETag(entity tag)는 웹 서버가 주어진 URL의 콘텐츠가 변경되었는지 알려주고 이를 반환하는 HTTP 응답 헤더이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"왜 사용할까?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"먼저 캐시는 왜 사용할까?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.youtube.com/watch?v=NxFJ-mJdVNQ"},"children":[{"type":"text","value":"소니의 Cache"}]},{"type":"text","value":"의 영상을 보면 좋다.😊😊"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"캐시는 컴퓨터 과학에서 데이터나 값을 미리 복사해 놓는 임시 장소를 가리킨다. 캐시는 캐시의 접근 시간에 비해 원래 데이터를 접근하는 시간이 오래 걸리는 경우나 값을 다시 계산하는 시간을 절약하고 싶은 경우에 사용한다. 캐시에 데이터를 미리 복사해 놓으면 계산이나 접근 시간 없이 더 빠른 속도로 데이터에 접근할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://ko.wikipedia.org/wiki/%EC%BA%90%EC%8B%9C"},"children":[{"type":"text","value":"위키백과"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"캐시를 사용하면 불필요한 요청을 줄이면서 서버의 부하를 줄일 수 있고, 미리 캐시에 저장해 놓은 값을 사용함으로써 빠른 응답을 할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"추가적으로 캐싱의 동작 대상은 정적리소스에 대해 사용하고 HTTP Method는 GET에 대한 응답을 캐싱하는 것으로 제한한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"캐싱 동작의 대상"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"HTTP 캐싱은 부가적이지만 캐시된 리소스를 재사용하는 것은 보통 바람직한 일입니다. 하지만, 일반적인 HTTP 캐시들은 "},{"type":"element","tagName":"a","properties":{"href":"https://developer.mozilla.org/ko/docs/Web/HTTP/Methods/GET"},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"GET"}]}]},{"type":"text","value":"에 대한 응답을 캐싱하는 것으로 제한되며 다른 메서드들은 제외될 겁니다. 기본 캐시 키는 요청 메서드 그리고 대상 URI로 구성됩니다(GET 요청으로만 응답을 캐싱하므로 URI만 사용되는 경우가 많습니다)."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그럼 다시 ETag로 돌아오자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ETag는 저희가 사용하는 캐시가 유효한지 검증하기 위해 사용한다. 서버의 리소스가 변경된다면 어떨까? 그러면 저희가 저장해 놓은 캐시의 데이터와 서버의 리소스 데이터는 다른 값이겠지? 그때 캐시가 서버에게 리소스가 변경되었는지 안 되었는지 물어보는 것을 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"캐시 유효성 검사"}]},{"type":"text","value":"라고 한다. 우리는 ETag를 사용하여 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"캐시 유효성 검사"}]},{"type":"text","value":"를 하는 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"클라이언트와 서버 간 통신을 어떻게 하는지 알아볼까?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"첫 요청에 대한 응답"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/45934117/98198859-51d8ef80-1f6d-11eb-8686-f78359f4ad5f.png","alt":"image"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"먼저 요청은 보낸다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"http"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-http"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-http"]},"children":[{"type":"text","value":"curl -H \"Accept: application/json\" \n     -i http://localhost:8080/spring-boot-rest/foos/1"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그러면 서버는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ETag"}]},{"type":"text","value":"를 응답 header에 담아서 보낸다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"http"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-http"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-http"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","response-status"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","http-version","property"]},"children":[{"type":"text","value":"HTTP/1.1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","status-code","number"]},"children":[{"type":"text","value":"200"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","reason-phrase","string"]},"children":[{"type":"text","value":"OK"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","header"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","header-name","keyword"]},"children":[{"type":"text","value":"ETag"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","header-value"]},"children":[{"type":"text","value":"\"f88dd058fe004909615a64f01be66a7\""}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","header"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","header-name","keyword"]},"children":[{"type":"text","value":"Content-Type"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","header-value"]},"children":[{"type":"text","value":"application/json;charset=UTF-8"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","header"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","header-name","keyword"]},"children":[{"type":"text","value":"Content-Length"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","header-value"]},"children":[{"type":"text","value":"52"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"클라이언트는 재요청할 때 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ETag"}]},{"type":"text","value":"를 header의 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"If-None-Match"}]},{"type":"text","value":"에 담아 요청을 보낸다. 여기서 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"If-None-Match"}]},{"type":"text","value":"는 뭘까? ETag를 사용할 때 Conditional headers로  "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"If-None-Match"}]},{"type":"text","value":"와 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"If-Match"}]},{"type":"text","value":"가 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"간단하게 설명하면"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-None-Match"},"children":[{"type":"text","value":"If-None-Match"}]},{"type":"text","value":" - 클라이언트에서 캐싱된 ETag와 서버의 ETag가 다를 때 요청을 처리한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-Match"},"children":[{"type":"text","value":"If-Match"}]},{"type":"text","value":"  - 클라이언트에서 캐싱된 ETag와 서버의 ETag가 같을 때 요청을 처리한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"재요청에 대한 응답"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/45934117/98199041-b5631d00-1f6d-11eb-90e0-120c48f78800.png","alt":"image"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"서버에 요청을 다시 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"http"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-http"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-http"]},"children":[{"type":"text","value":"curl -H \"Accept: application/json\" \n     -H 'If-None-Match: \"f88dd058fe004909615a64f01be66a7\"'\n     -i http://localhost:8080/spring-boot-rest/foos/1"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"리소스가 바뀌지 않았기 때문에 서버는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"304 Not Modified"}]},{"type":"text","value":"를 응답한다. "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ETag"}]},{"type":"text","value":"는 이전 요청에 대한 응답과 같다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://developer.mozilla.org/ko/docs/Web/HTTP/Status/304"},"children":[{"type":"text","value":"304 Not Modified"}]},{"type":"text","value":"  - 이것은 캐시를 목적으로 사용됩니다. 이것은 클라이언트에게 응답이 수정되지 않았음을 알려주며, 그러므로 클라이언트는 계속해서 응답의 캐시된 버전을 사용할 수 있습니다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"http"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-http"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-http"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","response-status"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","http-version","property"]},"children":[{"type":"text","value":"HTTP/1.1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","status-code","number"]},"children":[{"type":"text","value":"304"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","reason-phrase","string"]},"children":[{"type":"text","value":"Not Modified"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","header"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","header-name","keyword"]},"children":[{"type":"text","value":"ETag"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","header-value"]},"children":[{"type":"text","value":"\"f88dd058fe004909615a64f01be66a7\""}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이제 리소스를 바꿔준다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"http"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-http"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-http"]},"children":[{"type":"text","value":"curl -H \"Content-Type: application/json\" \n     -i -X PUT --data '{ \"id\":1, \"name\":\"Transformers2\"}' \n     http://localhost:8080/spring-boot-rest/foos/1"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"요청에 대한 응답을 확인한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"http"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-http"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-http"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","response-status"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","http-version","property"]},"children":[{"type":"text","value":"HTTP/1.1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","status-code","number"]},"children":[{"type":"text","value":"200"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","reason-phrase","string"]},"children":[{"type":"text","value":"OK"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","header"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","header-name","keyword"]},"children":[{"type":"text","value":"ETag"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","header-value"]},"children":[{"type":"text","value":"\"d41d8cd98f00b204e9800998ecf8427e\" "}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","header"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","header-name","keyword"]},"children":[{"type":"text","value":"Content-Length"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","header-value"]},"children":[{"type":"text","value":"0"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"지난 요청을 다시 한다. 요청을 다시 할 때는 마지막으로 가지고 있던 ETag를 담아서 보낼 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"http"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-http"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-http"]},"children":[{"type":"text","value":"curl -H \"Accept: application/json\" \n     -H 'If-None-Match: \"f88dd058fe004909615a64f01be66a7\"' \n     -i http://localhost:8080/spring-boot-rest/foos/1"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"클라이언트에서 보낸 ETag와 서버의 ETag가 다르기 때문에 요청을 처리한다. 리소스가 바뀌었으니 새로운 ETag를 header에 담아 보낸다. 새로운 요청을 처리했기 때문에 서버는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"200 OK"}]},{"type":"text","value":"를 응답한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"http"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-http"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-http"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","response-status"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","http-version","property"]},"children":[{"type":"text","value":"HTTP/1.1"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","status-code","number"]},"children":[{"type":"text","value":"200"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","reason-phrase","string"]},"children":[{"type":"text","value":"OK"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","header"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","header-name","keyword"]},"children":[{"type":"text","value":"ETag"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","header-value"]},"children":[{"type":"text","value":"\"03cb37ca667706c68c0aad4cb04c3a211\""}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","header"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","header-name","keyword"]},"children":[{"type":"text","value":"Content-Type"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","header-value"]},"children":[{"type":"text","value":"application/json;charset=UTF-8"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","header"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","header-name","keyword"]},"children":[{"type":"text","value":"Content-Length"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","header-value"]},"children":[{"type":"text","value":"56"}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"ETag를 사용하지 않은 API vs 사용한 API"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ETag 사용 예시와 ETag를 사용한 API와 사용하지 않은 API를 비교를 설명하기 위해 간단하게 Controller를 작성해 보았다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@RequestMapping"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/posts\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@RestController"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"PostController"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// ..."}]},{"type":"text","value":"\n    \n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@GetMapping"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/no-etag\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ResponseEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","generics"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"List"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"PostResponse"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findAllWhenNoETag"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ResponseEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"ok"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"body"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"postService"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findAll"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n    \n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@GetMapping"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/etag\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ResponseEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","generics"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"List"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"PostResponse"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findAllWhenETag"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ResponseEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"ok"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"body"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"postService"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findAll"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n    \n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// ..."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그리고 ETag 설정으로 ShallowEtagHeaderFilter를 Bean으로 등록해준다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Configuration"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ETagHeaderFilter"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Bean"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ShallowEtagHeaderFilter"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"shallowEtagHeaderFilter"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ShallowEtagHeaderFilter"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"추가 필터를 구성할 필요 없다면 위의 코드와 같이 작성해도 된다. 하지만 ETag를 사용한 API와 사용하지 않은 API를 비교하기 위해 필터를 사용했다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"추가 필터 구성을 하고 싶다면 다음과 같이 설정해주면 된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Configuration"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ETagHeaderFilter"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Bean"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"FilterRegistrationBean"}]},{"type":"element","tagName":"span","properties":{"className":["token","generics"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ShallowEtagHeaderFilter"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"shallowEtagHeaderFilter"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"FilterRegistrationBean"}]},{"type":"element","tagName":"span","properties":{"className":["token","generics"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ShallowEtagHeaderFilter"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":" filterRegistrationBean\n                "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"FilterRegistrationBean"}]},{"type":"element","tagName":"span","properties":{"className":["token","generics"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ShallowEtagHeaderFilter"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        filterRegistrationBean"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"addUrlPatterns"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/posts/etag\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        filterRegistrationBean"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"setName"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"PostAPIFilter\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" filterRegistrationBean"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"현재 PostController에서 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/posts/etag"}]},{"type":"text","value":"만  etag를 사용한다는 설정이다. 만약 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/post/"}]},{"type":"text","value":"에 대해 전부 ETag를 설정하고 싶다면  "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"filterRegistrationBean.addUrlPatterns(\"/posts/*\")"}]},{"type":"text","value":" 이렇게 설정하면 된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그럼 이제 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/no-etag"}]},{"type":"text","value":"와 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/etag"}]},{"type":"text","value":"를 호출해 볼까요? 호출하면 네트워크 상에 어떤 일이 일어날까요?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/45934117/94986209-cb10ab80-0597-11eb-9b8d-d88597fcc56e.png","alt":"image"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"얼핏 보면 둘의 차이가 안 보인다. 하지만 Response Headers를 보면 차이를 볼 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/45934117/94986113-e929dc00-0596-11eb-84c1-7f12b318c509.png","alt":"image"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"두 응답의 차이를 볼 수 있는 곳은 ETag일 것이다. "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/etag"}]},{"type":"text","value":"는 ETag를 사용하고 있기 때문에 응답으로 ETag를 header에 해시값으로 보내준다. 이는 재요청할 때 header의 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"If-None-Match"}]},{"type":"text","value":"의 값으로 보내 줄 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"http"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-http"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-http"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","header"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","header-name","keyword"]},"children":[{"type":"text","value":"If-None-Match"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","header-value"]},"children":[{"type":"text","value":"\"0fad8e1b47f45fa4ce7fef400e87c9289\""}]}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이렇게 ETag를 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"/etag"}]},{"type":"text","value":" 요청 header의 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"If-None-Match"}]},{"type":"text","value":"에 담아 재요청해 보겠다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/45934117/94986192-af0d0a00-0597-11eb-8966-f7123a1fd879.png","alt":"image"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"etag"}]},{"type":"text","value":"를 보면 앞서 설명했듯이 같은 요청에 대해서 304 상태 코드를 응답한다. 이는 서버에서 캐시 유효성 검사를 한 결과 변경되지 않았기 때문이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"여기서 봐야 할 것은 사이즈다. "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"no-etag"}]},{"type":"text","value":"는 재요청에 대해서 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"796B -> 796B"}]},{"type":"text","value":"인 반면에 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"etag"}]},{"type":"text","value":"는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"820B -> 145B"}]},{"type":"text","value":"이다. 이유는 ETag를 사용하지 않으면 했던 일을 똑같이 또 하지만, ETag를 사용하면 같은 요청에 대해서 변경된 리소스가 없다면 304 상태 코드와 ETag를 header에 담아 보내줄 뿐 요청에 대한 리소스를 또 보내지 않는다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이제 ETag를 사용했을 때와 사용하지 않을 때 차이가 있는 것을 아시겠죠?😊😊"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Test Code 작성"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"테스트할 때 중요하게 볼 것은 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"두 가지"}]},{"type":"text","value":"라고 생각한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"첫 번째, 첫 요청을 보낼 때 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"응답에 “ETag”를 가졌는지"}]},{"type":"text","value":"\n두 번째, header “If-None-Match”에 받은 etag 값을 넣고 같은 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"요청을 또 보낼 때 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"304 Not Modified"}]},{"type":"text","value":"를 응답"}]},{"type":"text","value":"하는지\n추가로 리소스를 변경한 다음 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"다시 요청 보냈을 때 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"200 OK"}]},{"type":"text","value":"를 응답"}]},{"type":"text","value":"하는지 본다면 더 좋을 것 같다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Autowired"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MockMvc"}]},{"type":"text","value":" mockMvc"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Test"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findAll_ETag"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"throws"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Exception"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"create"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 먼저 데이터를 만들어 줍니다."}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" url "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/posts/etag\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 첫 번째 요청을 보낸다."}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MvcResult"}]},{"type":"text","value":" mvcResult "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"mockMvc"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"perform"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"get"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"url"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"andDo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"print"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"andExpect"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"status"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"isOk"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 첫 요청이기 때문에 200 OK "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"andExpect"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"header"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"exists"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"ETag\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// ETag를 사용하고 있기 때문에 header가 ETag를 가지고 있는지 확인해준다."}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"andReturn"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" etag "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" mvcResult"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getResponse"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getHeader"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"ETag\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 두 번째 요청을 보낸다."}]},{"type":"text","value":"\n    mvcResult "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"mockMvc"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"perform"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"get"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"url"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"header"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"If-None-Match\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" etag"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 응답받은 ETag를 해더에 담아 보낸다."}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"andDo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"print"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"andExpect"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"status"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"isNotModified"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 유효성 검사를 하고 변경이 안되었기때문에 304 Not Modified"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"andExpect"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"header"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"exists"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"ETag\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"andReturn"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"update"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 리소스를 변경한다."}]},{"type":"text","value":"\n\n    etag "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" mvcResult"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getResponse"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getHeader"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"ETag\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"this"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"mockMvc"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"perform"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"get"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"url"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"header"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"If-None-Match\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" etag"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 두 번째 응답에 대한 ETag를 header에 담아 보낸다."}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"andDo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"print"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"andExpect"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"status"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"isOk"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 리소스가 변경되었기 때문에 200 OK "}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"andExpect"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"header"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"exists"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"ETag\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"andReturn"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// ..."}]},{"type":"text","value":"\n"}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"첫 요청에 대한 응답이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/45934117/98199684-1d663300-1f6f-11eb-91e4-1aafb74a9bf2.png","alt":"image"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"앞서 설명한 것과 같이 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"상태코드 200"}]},{"type":"text","value":"에 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"ETag를 담고 있는 것"}]},{"type":"text","value":"을 볼 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"다음은 재요청에 대한 응답이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/45934117/98199712-30790300-1f6f-11eb-8c4d-d848fe61d379.png","alt":"image"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"재용청에 대해 ETag가 같기 때문에 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"상태코드 304"}]},{"type":"text","value":"에 다시 ETag를 담아 보내는 것을 볼 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"수정 후 요청은 어떻게 오는지 확인해 보자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/45934117/98199771-54d4df80-1f6f-11eb-9096-b73326cb02bb.png","alt":"image"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"변경된 리소스를 감지하고 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"상태코드 200"}]},{"type":"text","value":"를 보낸다. 또, 이전 응답과 "},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"다른 ETag를 확인"}]},{"type":"text","value":"할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"마무리"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ETag가 무조건 좋은 것은 아니다. 만약 여러 대의 서버를 운영하고 있다면 같은 콘텐츠이지만 ETag가 다를 수 있기 때문이다. 따라서 ETag를 사용한다면 이러한 문제점을 인지하고 사용해야 할 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"😊😊글을 읽으면서 제가 잘못 알고 있는 점, 틀린 점, 추가했으면 하는 점 등 아낌없는 피드백 부탁합니다.😊😊"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"참고자료"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.baeldung.com/etags-for-rest-with-spring"},"children":[{"type":"text","value":"ETags for REST with Spring"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching"},"children":[{"type":"text","value":"HTTP Cache"}]}]}],"data":{"quirksMode":false}},"excerpt":"ETag란 무엇일까? ETag 또는 Entity Tag는 월드 와이드 웹 프로토콜인 HTTP의 일부다. 그것은 HTTP가 웹 캐시 유효성 검사를 위해 제공하는 몇 가지 메커니즘 중 하나로, 클라이언트가 조건부 요청을 할 수 있게 한다. … ETag…","timeToRead":6,"frontmatter":{"title":"ETag with Spring","userDate":"30 September 2020","date":"2020-09-30T12:00:00.000Z","tags":["spring","etag"],"excerpt":null,"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAPABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAUCAwcJ/8QAFQEBAQAAAAAAAAAAAAAAAAAABgX/2gAMAwEAAhADEAAAAee7XP4XQtQoFpX/xAAZEAACAwEAAAAAAAAAAAAAAAAEBQMGBwL/2gAIAQEAAQUCU51A5EVZ5WTwjqwhgMW6ZGqGH0mEPtlfA2hf/8QAHxEAAgIBBQEBAAAAAAAAAAAAAgMBBAUGEhMiMREU/9oACAEDAQE/AWV/tDAwletV5Ia9gdRG14PqnYJo/lbjlhkarJFat3IDWJ39Bkt8G2bFPVsPdFYs8yvDT4Ta16WErd0I0jcsCspH0Be6B85D9n//xAAgEQACAgMAAQUAAAAAAAAAAAACAwEEBQYSIQARExQx/9oACAECAQE/AUNyQ5LYisHpTsWViqWsKUL61tdYUz9xeUaWOuLg2u5+JiVu49jPmQkEjWs69NdE2xxCrMqCXrQC7CQbzHYreytVNoQXgWFWRJR5lQfnr//EACMQAAMBAAIBBAIDAAAAAAAAAAECAwQREgUAEyExFCIjMpH/2gAIAQEABj8Cvqx+KxGWTlHa/kdEKaKBDXpCZvw9AvA4HRfr57c+hs2bfF+IJ0CP42seYpdJuEMdlTKonPJcsyRp2Jdo1AX45OmEYZ9EY3pGWnPTcIaUkxRdMRocXErhfdQVCuFb5A+vV8uHR5KE9YP5CDJkcBiCneLPftNzP47r1P8AgPqVMuzzU2jOUU/gyFRKAKyn198hlVSV/bk9Txz6fXrbfoq4Ue5SEJkKo+ECSt0VE/qgH0vHr//EABkQAQEBAQEBAAAAAAAAAAAAAAERIQBBcf/aAAgBAQABPyFP4MFIsk7xTS7c5t0WQ+w/CHiCpUD1OgJCPxVzY21XyrLxnep95U1HC9CUsCYj2Job57Xj8H//2gAMAwEAAgADAAAAECDf/8QAGBEBAQADAAAAAAAAAAAAAAAAAQAhMUH/2gAIAQMBAT8Q7Lz2dhfrgiSyowGuWwuERgBX/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQBB/9oACAECAQE/EDwH15scVmukM1pZtT2pBMMKf//EABcQAQEBAQAAAAAAAAAAAAAAAAERACH/2gAIAQEAAT8QIOjrJ0z+UnpMdbOyHMI+TECdHCFo2gdGmEU1IFGeHvpF6g2LwI2KLTrATBG4s4pqJANRuP/Z"},"images":{"fallback":{"src":"/static/b42bdce191b6a1fa84148cbe6656947c/4d5c4/etag.jpg","srcSet":"/static/b42bdce191b6a1fa84148cbe6656947c/4d5c4/etag.jpg 640w","sizes":"100vw"},"sources":[{"srcSet":"/static/b42bdce191b6a1fa84148cbe6656947c/80a20/etag.avif 640w","type":"image/avif","sizes":"100vw"},{"srcSet":"/static/b42bdce191b6a1fa84148cbe6656947c/ffef7/etag.webp 640w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.75}}},"author":[{"name":"2기_티거","bio":"우아한테크코스 2기 티거(김준석)입니다 :)","avatar":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#182838","images":{"fallback":{"src":"/static/dc549e08fc27699127f47060a32e80ca/73bb6/tigger.jpg","srcSet":"/static/dc549e08fc27699127f47060a32e80ca/2f28c/tigger.jpg 40w,\n/static/dc549e08fc27699127f47060a32e80ca/499f6/tigger.jpg 80w,\n/static/dc549e08fc27699127f47060a32e80ca/73bb6/tigger.jpg 120w","sizes":"100vw"},"sources":[{"srcSet":"/static/dc549e08fc27699127f47060a32e80ca/e73fe/tigger.webp 40w,\n/static/dc549e08fc27699127f47060a32e80ca/61ca6/tigger.webp 80w,\n/static/dc549e08fc27699127f47060a32e80ca/507b0/tigger.webp 120w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":1}}}}],"source":null}},"relatedPosts":{"totalCount":32,"edges":[{"node":{"id":"8a459858-1bca-5b40-bb2f-c8450cc8b5d6","timeToRead":5,"excerpt":"…","frontmatter":{"title":"@Configuration은 어떻게 빈을 등록하고, 싱글톤으로 관리할까?","date":"2023-06-28T12:00:00.000Z"},"fields":{"slug":"/post/2023-05-22-configuration/"}}},{"node":{"id":"9e041370-5677-52ea-ac38-aa071cd5cdd6","timeToRead":4,"excerpt":"콘솔 애플리케이션을 구현할 때, 우리는 예외를 핸들링하기 위해 try / catch…","frontmatter":{"title":"ExceptionHandler와 ControllerAdvice를 알아보자","date":"2023-05-21T12:00:00.000Z"},"fields":{"slug":"/post/2023-05-03-ExceptionHandler-ControllerAdvice/"}}},{"node":{"id":"68a8791f-9973-50b4-8c17-9a2edbe75c58","timeToRead":7,"excerpt":"상황 스모디 프로젝트를 하면서 랭킹 기능을 도입하기로 했습니다. 랭킹 기능은 유저가 활동을 했을 때, 활동에 따라 랭킹 점수를 부여해야 합니다. 저희 서비스는 챌린지에 도전하고 매일 챌린지에 해당하는 활동을 인증하여 총…","frontmatter":{"title":"스프링 이벤트 적용기","date":"2022-11-14T13:10:00.000Z"},"fields":{"slug":"/post/2022-11-14-spring-event/"}}},{"node":{"id":"895ac54c-c1c3-508d-b88a-7542dc458eb2","timeToRead":7,"excerpt":"…","frontmatter":{"title":"Spring에서 Server-Sent-Events 구현하기","date":"2022-10-11T12:00:00.000Z"},"fields":{"slug":"/post/2022-10-11-server-sent-events/"}}},{"node":{"id":"c209a85e-6260-50e5-b817-48f63e9796b4","timeToRead":5,"excerpt":"이 글은 웹 소켓으로 만든 채팅방을 어떻게 테스트할지 고민하는 독자를 위해 작성되었다. 웹 소켓은 어떻게 테스트하면 좋을까? Babble…","frontmatter":{"title":"웹 소켓에 대해 알아보자! - 테스트 편","date":"2021-11-10T12:00:00.000Z"},"fields":{"slug":"/post/2021-11-10-web-socket-test/"}}}]}},"pageContext":{"slug":"/post/2020-09-30-ETag-with-Spring/","prev":{"excerpt":"개요 Spring Boot를 이용해서 어플리케이션을 만들다 보면 외부에서 특정 값들을 주입받아야 하는 경우가 있다. 예를 들면 AWS의 특정 컴포넌트를 사용하기 위한 secret key가 될 수도 있고 외부 API를 사용하기 위한 API key…","timeToRead":5,"frontmatter":{"title":"Spring Boot에서 properties 값 주입받기","tags":["spring"],"date":"2020-09-29T12:00:00.000Z","draft":false,"excerpt":null,"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3UlEQVR42m2SwWsTQRTG9+8UDz3p3f+gUESq4KG9S0ERIVQQPVptCz1IjWkxQY3RWtNtmk03m+zMzu7sTD7nm2VCLD0Ms/vNvN+8974Xaa1RVRWKooBSCmVZ+nVTD2fUVnXuXOEsklL6AwKMMX6nJoRwF+V/OjUhhQfcvD+bzTCfzxGRGl4KWWhdwdYWixoolXu51Ki1gTULGG1RVwZlUbkzF1uqJTTPc0T8ISSkTqg1FufpD/QuP2E6nyDJRhhlQ0xEjN+THuLpHwyTM1ylsYtpgIwjNCLVQ6xF5TMDvsVfsLl/D+vv72D36zb2B7t43n6E1sk2XnWe4l3vGV52njj9NZSskKbXvlxyotB8/rA/cMDW6Ra2jh5g5/MGHh/cx/H5Hr6P2khmMS7SM6R5gs7wEN3hMWReeNjSlLqul65JB7R6gf74BA8/rmFj7y5etDfxod/yWR0M3uCt238lXUADIm/MYKlkMLmocbNxjWX7fsgS/dEpOn8PkasM4/wCg3EXP2OuHq6uLx2k8IYQREaWZX7d6jI177JpXC6Em03pWqOcgYVzVEgfTFCIudXlMJNNG5ymmpKm2dTtmW8J+0xQmLsQw3jqfrAJ5JASFF4LL4bv1bKCo6s67xL6DzTMPi/CtHFKAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/516a73681232b8ef2340bd0196ec5b8c/ea178/spring-boot.png","srcSet":"/static/516a73681232b8ef2340bd0196ec5b8c/5b584/spring-boot.png 750w,\n/static/516a73681232b8ef2340bd0196ec5b8c/c1f05/spring-boot.png 1080w,\n/static/516a73681232b8ef2340bd0196ec5b8c/9f70c/spring-boot.png 1366w,\n/static/516a73681232b8ef2340bd0196ec5b8c/ea178/spring-boot.png 1800w","sizes":"100vw"},"sources":[{"srcSet":"/static/516a73681232b8ef2340bd0196ec5b8c/73e0d/spring-boot.webp 750w,\n/static/516a73681232b8ef2340bd0196ec5b8c/9fede/spring-boot.webp 1080w,\n/static/516a73681232b8ef2340bd0196ec5b8c/d6ece/spring-boot.webp 1366w,\n/static/516a73681232b8ef2340bd0196ec5b8c/8fb7c/spring-boot.webp 1800w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.525}}},"author":[{"name":"2기_비밥","bio":"우아한테크코스 2기 비밥(박찬인)입니다 :)","avatar":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAkHCP/EABYBAQEBAAAAAAAAAAAAAAAAAAYHBf/aAAwDAQACEAMQAAAB2qYNI5QmmnR7FG8KoxzcBKtnwSzn/8QAGhAAAwEBAQEAAAAAAAAAAAAAAwQFBgIHEv/aAAgBAQABBQLdfV9DXxK2VZjz+yzvQTgfyTadFoSO2Z4BSEPgc+YhMsJxETi//8QAJBEAAQMDAwQDAAAAAAAAAAAAAQIDEQQSYQAFIQYTMTJygbL/2gAIAQMBAT8BpkIZ2Pa7aF5hSG6hg2RFa53HIItMqNyHEgRcpYKRckIklUngDnxJ4x9apPTpXDm5kYMvCRmNK9lfI/oa/8QAJhEAAgEDAwIHAQAAAAAAAAAAAQIRAxIhAAQFQWEGIzFRUmJxgf/aAAgBAgEBPwHdNUrcvyN+7p1UarSqgMDO1W1AZJEBQHR2abVQXEg36gDEFu8rnv66r5HiSfhx4/nlGPycx76DNAyenU/XX//EACoQAAICAAQEBQUBAAAAAAAAAAECAwQREhMhAAUUIiMxMkFRBhUkYXGB/9oACAEBAAY/Aq1e7pV7SUE/KX1uzbxurADNXxxzRuuZAzoyq4x4FG5fq2Bnsp4CHSaWs8QsMRISWiZpVWCT3CyZ/YCtKOoTVjSTKhQAF0Vj6wWPn5/GAGwxPTxRunP+XMFaxHqgVqiRtPZ1dIqsupFgNDcpKcR278XevtJz3m3SVfsXLqZsc1lsVnso9i60vd0NSjThmywO0T68+YRkIw4CzRcyVhgAsZrZQoRQMPBG3x+uJ3EaZ6+KxnIo2aLIc4ACuSFHcwLY4778PLRrLB1f0iZZUzzSIJHtO0hjEskhiEjjOY0YRKSdJIxtwXYSA5yO0p7BflD/AD/OP//EABsQAQEBAQEAAwAAAAAAAAAAAAERIQAxQVFh/9oACAEBAAE/IQVTv3YsqBbGJSanA6TOFkC0ScIi6pnSPxtIYEOFrhFVAiIFeIg9hgZfEyXCYrgTX/QRS3miCQg+IfRWmi3Iqao8I5RACeSP2sZ4puGIxOJb7E9eDLV//9oADAMBAAIAAwAAABDPEDz/xAAbEQEAAgMBAQAAAAAAAAAAAAABETEAIUFxUf/aAAgBAwEBPxB2A6DURla7xhr4WgFSVKycUUrlfWzztJ3wRRJuNTGAqPMw/8QAHREBAQABBAMAAAAAAAAAAAAAARExACFhcVGBkf/aAAgBAgEBPxBUbGyHBJzuxKAQmADmQB7Frz6vm1Td7dtz0GUu+gAGT4OWv//EABgQAQEBAQEAAAAAAAAAAAAAAAEAESFB/9oACAEBAAE/EBLhO3KokvRUykUnUYpGgzkuXXONHZHaes7yB42FqyUuSPusvx12DeQTP4er7chQg3gBiJFUP0nXRGvTbDCumZJrY2Fnh1aqbLwB6+x2Ajtgf//Z"},"images":{"fallback":{"src":"/static/8c8a115e552db482996c8d9290335965/37851/bebob.jpg","srcSet":"/static/8c8a115e552db482996c8d9290335965/37851/bebob.jpg 460w","sizes":"100vw"},"sources":[{"srcSet":"/static/8c8a115e552db482996c8d9290335965/b5c5b/bebob.webp 460w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":1}}}}]},"fields":{"layout":"post","slug":"/post/2020-09-29-spring-properties-binding/"}},"next":{"excerpt":"자바 반복문 알고 쓰자! 를 작성하다가 궁금해진 내용이다. 아래처럼 Collection.forEach 메서드로 반복할 때와 Stream.forEach…","timeToRead":3,"frontmatter":{"title":"Collection.forEach와 Stream.forEach는 뭐가 다를까?","tags":["stream","collection","loop"],"date":"2020-09-30T12:00:00.000Z","draft":false,"excerpt":null,"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAALABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAQDBQYJ/8QAFwEAAwEAAAAAAAAAAAAAAAAAAQMEBf/aAAwDAQACEAMQAAAB5r0OcTszJhUDP//EABoQAAMAAwEAAAAAAAAAAAAAAAIDBAABBRP/2gAIAQEAAQUC53Glvnp5O57HL8WA5qxMiPef/8QAHBEBAQEBAAIDAAAAAAAAAAAAAQIREgMxACFB/9oACAEDAQE/AfGXNtN9HWksyzzv3KUV7lZ6Mo3rx1Fk0U9VVATqvM7zOu8mq4ejVc/fn//EABwRAAICAgMAAAAAAAAAAAAAAAERAiESMQBhkf/aAAgBAgEBPwFSZeOKNIg6CLEhcd3RrIEMSHvfP//EACcQAAIBAgUBCQAAAAAAAAAAAAECAxESAAQhIjFBEBQjM1FSYWJx/9oACAEBAAY/AlkJmQiO6UxtdTV1utZTtujtoOrr84zmVBMvdzEY3BjUyQy0dZAHZV1j6VoDXBTXQKdxQncoYeU0icH3VHBoajHhyyIDWoV2A59AcVc3H7a8fvZ//8QAGxABAQEAAwEBAAAAAAAAAAAAAREhADFBUXH/2gAIAQEAAT8hl9Oyoqd+ASS4CywwtIrLdFqecdMLAhaB1BYOkRAsAFEjwgJqpIre+XYkF1gwGoHgYc66h+Zz/9oADAMBAAIAAwAAABDT7//EABgRAQADAQAAAAAAAAAAAAAAAAEAESFB/9oACAEDAQE/EA2Fo6ikzcIdPyEU3IUB5cdQnZ//xAAXEQEBAQEAAAAAAAAAAAAAAAABEQAx/9oACAECAQE/EBESiASqXxSwF4D2EAVQAqVhKwCvWAXhv//EABkQAQEBAQEBAAAAAAAAAAAAAAERIQAxQf/aAAgBAQABPxAiv2MFbJMnmeAEkKXdz+oMagU1dURR7RgtByzHssgJ1At0IEKXgOvDgEMIIEAAABOAEAHgAH1gAa65qq69/9k="},"images":{"fallback":{"src":"/static/6c6274661900b34396f6daba20a2373b/4a49b/stream.jpg","srcSet":"/static/6c6274661900b34396f6daba20a2373b/37bba/stream.jpg 750w,\n/static/6c6274661900b34396f6daba20a2373b/61c72/stream.jpg 1080w,\n/static/6c6274661900b34396f6daba20a2373b/4a49b/stream.jpg 1280w","sizes":"100vw"},"sources":[{"srcSet":"/static/6c6274661900b34396f6daba20a2373b/a66aa/stream.webp 750w,\n/static/6c6274661900b34396f6daba20a2373b/65dd5/stream.webp 1080w,\n/static/6c6274661900b34396f6daba20a2373b/71d4d/stream.webp 1280w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5625}}},"author":[{"name":"2기_둔덩","bio":"우아한테크코스 2기 둔덩(홍준성)입니다 :)","avatar":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAgHAQn/xAAYAQADAQEAAAAAAAAAAAAAAAAEBQYAAv/aAAwDAQACEAMQAAAByu8fPPcVerlnDoaFbvArDgZSP//EABoQAQACAwEAAAAAAAAAAAAAAAUEBgIDBwH/2gAIAQEAAQUCHvlmrkw/ql6HSS7CpjMWYQHP5ir5axkaTp1SulPIE3mwWWWbhihP2Y//xAAnEQACAQIEBAcAAAAAAAAAAAABAgMEEQASE1EhIjEyBQYjJEFDcv/aAAgBAwEBPwGGiipKCSSIszyaaxBWk0IMmfVf1buc3Kp5B23sgLBtCuPELUEHiCFFiDbpa3DbHl9Ebw0llViCgBZQTYyG/Xf53xLWVmrJ7qp7j98u/wCsf//EACcRAAICAQIDCQEAAAAAAAAAAAECAxEEABITI1EFITEyQ2FxcqGx/9oACAECAQE/AcAZQxkeFYkSTeiRzSSkCiBFKA0Y2fUXuUAkm+45GSCQ02KGBo80D84i/wAB6jXbDsskG1mW0e6JF/NeOooYeHHyovIvpr0Htr//xAAnEAACAgEDAwQCAwAAAAAAAAACAwEEBRITIhEUIQAGMUEjJDIzUf/aAAgBAQAGPwKmVecvG6O5crIVYbMEkeC7FdVa1SYRGsokyDVuxwMkytpVE+8MFSZiMjXEsfcpQ1Nx7ZCDFZjoIFWJ69GVbKUmv5/HHy6MdgETQ6/qtum3ubC48S41JeEV9TIOBQcboiMEc8o9YxNITpxkAvElonbWe0nbkpS223ueJPX+QdK44rSXHpDne7Mhey+Zo5vI49FZuQkFS0YqWe+Ma+3zWlprtW3bnzrEZtMDUes8gW9psLicRNsFqdGtakNYJFFcBmNoJMyEf7TJ0sn17ByVYlG/HtrNSuyoX1j7jLgl63IPixTVDCyGenjyMiYgQ5u5jqGCo2w7l/dVcJjlWDaMeGNfCN1p+f5sMin7mfPoTfdtWGkIETXPYRlMjE/UwMR/giIjH1Hr/8QAGhABAQEBAAMAAAAAAAAAAAAAAREhADFBUf/aAAgBAQABPyFC7Rj65F30fNBIYyZgz5RErE5LllwFtqxdQJFxdiYFOrSuUTsnHkREwmm0Hr+HgBZcYATz2MfbE0SjMzUJ7BCEUlNsq9X6DqRLs5n1GlYRwe//2gAMAwEAAgADAAAAEIAXfv/EABsRAQEAAwADAAAAAAAAAAAAAAERACFBMVFh/9oACAEDAQE/ELimIO23kaRdZ4kpsyCsIaDRdA0FrVBmABLkQoIEDEFuesRnAEB8gAHAmf/EABoRAQEBAAMBAAAAAAAAAAAAAAERIQBBUTH/2gAIAQIBAT8QiXzCEC+V2FlbwuSAghEEEwawSEAfpQJLNhyEEVlsrz1Ur2qyvtdXt3n/xAAXEAEBAQEAAAAAAAAAAAAAAAABABEh/9oACAEBAAE/EG8lQadNQkGXVok/qibwBMyqMfkVELeTUeVarTwcBygopgCmlII4/wB2uLURNVpH94bpOMS7jIZIVVfNEOZM3YvObAWV6FrcST9JgshRd3//2Q=="},"images":{"fallback":{"src":"/static/bf066f4bbef9e9297e8f2a6e551f4748/37851/dundung.jpg","srcSet":"/static/bf066f4bbef9e9297e8f2a6e551f4748/37851/dundung.jpg 460w","sizes":"100vw"},"sources":[{"srcSet":"/static/bf066f4bbef9e9297e8f2a6e551f4748/b5c5b/dundung.webp 460w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":1}}}}]},"fields":{"layout":"post","slug":"/post/2020-09-30-collection-stream-for-each/"}},"primaryTag":"spring"}},"staticQueryHashes":["2337738035"],"slicesMap":{}}