{"componentChunkName":"component---src-templates-post-tsx","path":"/post/2021-09-18-java-thread-pool/","result":{"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAwUlEQVQY003Qvw7BUBTH8YYgLCKExWw1IczEwAtIJCa1GJuyCalI/EmERUgHi5cxeI8uTTt1aHp9r9wmhk/OOfee/HJzNd/3Dc/zutS24zgZIUQpiqIt9YY+vUb9+eur6Kh5GN9LGkEn2DBd1y1zmGfxjjf9AFm1XEQCBe6aVBMVLJHiLBcHTiHwQS0MQ/mSOlYsjPDCAjOMccUFR3Z0NdvYISkDW9jAQi8IAhnYgAyZ4wELEzUfcFZfYmCPJ9ZIfwG9owW1fLgCkwAAAABJRU5ErkJggg==","width":400,"height":88,"src":"/static/0b18bd94a62a12fdc81ea720c28722f6/3891b/tecoble.png","srcSet":"/static/0b18bd94a62a12fdc81ea720c28722f6/3891b/tecoble.png 1x"}}},"markdownRemark":{"html":"<p>프로세스 내에서 스레드의 생성 및 수거가 빈번하게 발생한다면 메모리 할당에 소모되는 비용이 많이 들지 않을까? 이에 대한 해답으로 스레드 풀에 대해 알아보고 Java 에서 어떻게 사용하면 되는지 알아보자.</p>\n<h2>스레드 풀(Thread Pool)</h2>\n<p>스레드 제어 문제를 해결할 방법으로 스레드 풀을 사용한다. 스레드 풀은 매번 생성 및 수거 요청이 올 때 스레드를 생성하고 수거하는 것이 아닌, 스레드 사용자가 설정해둔 개수만큼 미리 생성해두는 것이다.</p>\n<h3>스레드(Thread)</h3>\n<ul>\n<li>어떤 프로그램 내에서 실행되는 흐름의 단위</li>\n<li>특히 프로세스 내에서 실행되는 흐름의 단위</li>\n</ul>\n<h3>풀(Pool)</h3>\n<ul>\n<li>필요할 때마다 개체를 할당하고 파괴하는 대신, 사용 준비된 상태로 초기화된 개체 집합</li>\n</ul>\n<p>스레드는 동일한 메모리 영역에서 생성 및 관리가 이루어지지만, 생성하거나 수거할 때 커널 오브젝트를 동반하는 리소스이므로 생성 비용이 크게 발생한다. 스레드를 제어할 수 없는 상태에서 스레드를 무차별적으로 생성하면 리소스가 빠르게 소진되는 상황이 발생할 수 있다. 그러면 어떻게 하면 효율적으로 스레드를 제어할 수 있을까?\n스레드 풀의 동작 방식은 간단하게 보면 다음과 같다.</p>\n<ol>\n<li>병렬 작업의 형태로 동시 코드를 작성한다.</li>\n<li>실행을 위해 스레드 풀의 인스턴스에 제출한다.</li>\n<li>제출한 인스턴스에서 실행하기 위해 재사용되는 여러 스레드를 제어한다.</li>\n</ol>\n<p>스레드 풀을 사용하면 비용적인 측면이나 컨텍스트 스위치가 발생하는 상황에서 딜레이를 줄일 수 있다는 장점이 있다. 그렇다면 단점은 어떤 것이 있을까?</p>\n<p>단점은 스레드 풀에 너무 많은 양의 스레드를 만들어둔다면 메모리 낭비가 심해질 수 있다는 점이다. 그 때문에 얼만큼의 스레드가 필요할지 예측하고 할당해서 사용하는 것이 스레드 풀을 현명하게 사용하는 것이라고 할 수 있다.</p>\n<h2>Java 에서 스레드 풀 사용하기</h2>\n<p><code class=\"language-text\">ExecutorService</code> 인터페이스의 구현 객체를 정적 팩토리 메서드로 제공하는 <code class=\"language-text\">Executors</code> 클래스의 세 가지 메소드 중 하나를 이용하여 스레드 풀을 쉽게 생성할 수 있다. 자세한 메서드 사용법은 <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html\">이곳</a>에서 알 수 있다.</p>\n<p><code class=\"language-text\">ThreadPoolExecutor</code> 에서 사용되는 파라미터로는 <code class=\"language-text\">corePoolSize(생성할 개수), maximumPoolSize(생성할 최대 개수), keepAliveTime(유지 시간)</code> 이 있다. 스레드 풀에서 스레드를 생성할 때 <code class=\"language-text\">corePoolSize</code> 의 파라미터만큼 코어 스레드를 생성한다. 그리고 새로운 작업이 들어올 때 모든 코어 스레드가 사용 중이고 내부 큐가 가득 차면 스레드 풀의 최대 크기가 <code class=\"language-text\">maximumPoolSize</code> 만큼 커질 수 있다. 만약 현재 스레드 풀이 <code class=\"language-text\">corePoolSize</code> 보다 많은 스레드를 가지고 있다면, 초과한 스레드에 대해서 <code class=\"language-text\">keepAliveTime</code> 파라미터값보다 오랫동안 할 일이 없으면 제거된다. 이것은 자원의 낭비를 감소 시켜 효율적으로 스레드 풀을 관리할 수 있게 된다.</p>\n<p>스레드 풀에 작업요청을 하는 방식은 <code class=\"language-text\">execute( )</code>, <code class=\"language-text\">submit( )</code> 방식이 있다. <code class=\"language-text\">execute</code> 방식은 작업 처리 중에 예외가 발생하면 해당 <b>스레드가 종료</b>되고 스레드 풀에서 제거한 뒤, 새로운 스레드를 생성하여 다른 작업을 처리한다. 또한 <b>처리결과를 반환하지 않는다.</b> 반대로 <code class=\"language-text\">submit</code> 은 작업 처리 중에 예외가 발생하더라도 <b>스레드가 종료되지 않고</b> 다음 작업에 사용된다. 또한 <b>처리 결과를 <code class=\"language-text\">Future&lt;?></code> 로 반환</b>한다. 따라서 스레드 풀을 사용할 때 <code class=\"language-text\">submit</code> 을 사용하는 점이 더 바람직하다.</p>\n<p>테스트 클래스를 하나 생성하여 테스트를 진행한다.</p>\n<p>우선 <code class=\"language-text\">MyCounter</code> 클래스를 하나 만든다. 해당 클래스는 <code class=\"language-text\">increment</code> 메서드를 통해 <code class=\"language-text\">count</code> 를 증가시킨 후 1초의 대기시간을 갖는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyCounter</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> count<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">int</span> temp <span class=\"token operator\">=</span> count<span class=\"token punctuation\">;</span>\n            count <span class=\"token operator\">=</span> temp <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">InterruptedException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> count<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>첫 번째 방법은 <code class=\"language-text\">Executors.newFixedThreadPool(int nThreads)</code> 에 대해 알아본다.</p>\n<p>파라미터로 제공되는 n 개 만큼 스레드 풀을 생성한다. 보통 일정량의 업무가 발생할 때 사용한다. 다음 예시는 18개의 스레드가 필요한 Task 를 제공하고 5개의 스레드 풀로 처리하는 과정을 확인해 보는 테스트다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">    <span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"FixedThreadPool 을 생성한다.\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">testCounterWithConcurrencyFixed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">int</span> numberOfThreads <span class=\"token operator\">=</span> <span class=\"token number\">18</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">ExecutorService</span> service <span class=\"token operator\">=</span> <span class=\"token class-name\">Executors</span><span class=\"token punctuation\">.</span><span class=\"token function\">newFixedThreadPool</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">CountDownLatch</span> latch <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CountDownLatch</span><span class=\"token punctuation\">(</span>numberOfThreads<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">MyCounter</span> counter <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyCounter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">iterateThread</span><span class=\"token punctuation\">(</span>numberOfThreads<span class=\"token punctuation\">,</span> service<span class=\"token punctuation\">,</span> latch<span class=\"token punctuation\">,</span> counter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ThreadPoolExecutor</span><span class=\"token punctuation\">)</span> service<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getPoolSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">iterateThread</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> numberOfThreads<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ExecutorService</span> service<span class=\"token punctuation\">,</span> <span class=\"token class-name\">CountDownLatch</span> latch<span class=\"token punctuation\">,</span> <span class=\"token class-name\">MyCounter</span> counter<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> numberOfThreads<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            service<span class=\"token punctuation\">.</span><span class=\"token function\">submit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token punctuation\">{</span>\n                counter<span class=\"token punctuation\">.</span><span class=\"token function\">increment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                latch<span class=\"token punctuation\">.</span><span class=\"token function\">countDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        latch<span class=\"token punctuation\">.</span><span class=\"token function\">await</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p><img src=\"https://user-images.githubusercontent.com/49058669/133976949-a4dd1594-0b04-4013-86c5-d2f8fb6c688a.png\" alt=\"image\"></p>\n<p>실행 결과를 살펴보면 한 스레드에서 작업을 처리하는 데 1초가 걸리도록 설정이 되어있다. 그 때문에 5개의 작업을 3번, 3개의 작업을 1번 하게 되면서 총 작업 시간은 (3+1)초 + 로직 실행 시간(300ms)이 된다. 따라서 스레드 풀에 생성된 <b>스레드 개수만큼 작업을 처리</b>하는 모습을 확인할 수 있다. 또한, 스레드 풀의 크기가 5개로 유지되는 모습을 확인할 수 있다. 해당 작업에서 Count 가 여러 스레드에서 동시에 호출되는데 이 경우 비동기로 처리되기 때문에 실제 Count 의 결과(<code class=\"language-text\">counter.getCount()</code>)는 100보다 작은 값이 반환되며 실행할 때마다 랜덤한 결과를 반환하는 모습을 확인할 수 있다.</p>\n<p>두 번째 방법은 <code class=\"language-text\">Executors.newCachedThreadPool()</code> 에 대해 알아본다.</p>\n<p>초기 스레드 개수가 0개로 설정되며 스레드 개수보다 많은 양의 작업의 요청되면 <b>새로운 스레드를 생성하여 작업을 처리</b>한다. 작업이 끝난 스레드가 60초 이상 새로운 작업요청이 없으면 스레드를 종료하고 스레드 풀에서 제거된다. 다음 예시는 18개의 스레드가 필요한 Task 를 제공하고 5개의 스레드 풀로 처리하는 과정을 확인해 보는 테스트다. 위에 생성해둔 코드에 이어서 작성해서 테스트를 진행하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">    <span class=\"token annotation punctuation\">@DisplayName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"CachedThreadPool 을 생성한다.\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">testCounterWithConcurrencyCached</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">InterruptedException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">int</span> numberOfThreads <span class=\"token operator\">=</span> <span class=\"token number\">18</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">ExecutorService</span> service <span class=\"token operator\">=</span> <span class=\"token class-name\">Executors</span><span class=\"token punctuation\">.</span><span class=\"token function\">newCachedThreadPool</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">CountDownLatch</span> latch <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CountDownLatch</span><span class=\"token punctuation\">(</span>numberOfThreads<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">MyCounter</span> counter <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyCounter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">iterateThread</span><span class=\"token punctuation\">(</span>numberOfThreads<span class=\"token punctuation\">,</span> service<span class=\"token punctuation\">,</span> latch<span class=\"token punctuation\">,</span> counter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span>counter<span class=\"token punctuation\">.</span><span class=\"token function\">getCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span>numberOfThreads<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ThreadPoolExecutor</span><span class=\"token punctuation\">)</span> service<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getPoolSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">18</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">60000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 60초 후 생성된 스레드가 제거되는지 확인한다.</span>\n        <span class=\"token function\">assertThat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ThreadPoolExecutor</span><span class=\"token punctuation\">)</span> service<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getPoolSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEqualTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p><img src=\"https://user-images.githubusercontent.com/49058669/133979857-aea7e9c2-050c-433c-b445-f83b32d45b4e.png\" alt=\"image\"></p>\n<p>세 번째 방법은 <code class=\"language-text\">Executors.newScheduledThreadPool(int corePoolSize)</code> 에 대해 알아본다.</p>\n<p>스레드를 <b>일정시간이 흐르고 난 뒤 실행</b>시키도록 하는 스케줄링 스레드 기능이다. 해당 기능을 테스트해 보기 위해서는 테스트 코드가 아닌 메인에서 실행해봐야 한다. 따라서 <code class=\"language-text\">Sample</code> 클래스를 만들고 실습을 해본다. corePoolSize 는 생성할 corePool 의 크기를 지정해주는 부분인데 <code class=\"language-text\">Executors.newScheduledThreadPool(0)</code> 을 하더라도 실행에는 문제가 없어 보인다. 다만 JDK 8 버전 이하에서 발견된 <a href=\"https://bugs.openjdk.java.net/browse/JDK-8129861\">버그</a>로 단일 코어 가상 머신에서 CPU 를 100% 사용하는 버그가 있기 때문에 파라미터로 1 이상으로 설정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Sample</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">ScheduledExecutorService</span> service <span class=\"token operator\">=</span> <span class=\"token class-name\">Executors</span><span class=\"token punctuation\">.</span><span class=\"token function\">newScheduledThreadPool</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"첫 번째 작업이 실행됩니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        service<span class=\"token punctuation\">.</span><span class=\"token function\">schedule</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-></span> <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"두 번째 작업이 실행됩니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">TimeUnit</span><span class=\"token punctuation\">.</span>SECONDS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"세 번째 작업이 실행됩니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        service<span class=\"token punctuation\">.</span><span class=\"token function\">shutdown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><img src=\"https://user-images.githubusercontent.com/49058669/133980017-e1cc4860-0fc2-4e88-872c-6853887db442.png\" alt=\"image\">\n스케줄에서 설정한 5초가 흐른 후 <code class=\"language-text\">두 번째 작업이 실행됩니다.</code> 가 실행되는 모습을 확인할 수 있다.</p>\n<h2>결론</h2>\n<p>자바에서 사용하게 될 스레드 풀에 대해 간단하게 알아봤다. 얼마만큼의 스레드가 주기적으로 소모될지, 스레드를 추가로 생성할지, 작업 후 반환 값을 받을지에 대한 분석을 토대로 상황에 적합한 Thread 및 ThreadPool 을 적용한다면 멀티 코어 프로그래밍에 큰 도움이 된다고 생각한다. 다만, 적절하지 않게 사용할 경우 오히려 사용하지 않은 것보다 못할 수 있기 때문에 주의해야 한다.</p>\n<h2>참고</h2>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html\">Class Executor Oracle Docs</a></li>\n<li><a href=\"https://www.baeldung.com/thread-pool-java-and-guava\">Introduction to Thread Pools in Java</a></li>\n<li><a href=\"https://limkydev.tistory.com/55\">[Java] Thread Pool(스레드 풀)</a></li>\n<li><a href=\"https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&#x26;blogId=2feelus&#x26;logNo=220728222140\">Java Thread Pool (자바 쓰레드 풀)</a></li>\n</ul>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"프로세스 내에서 스레드의 생성 및 수거가 빈번하게 발생한다면 메모리 할당에 소모되는 비용이 많이 들지 않을까? 이에 대한 해답으로 스레드 풀에 대해 알아보고 Java 에서 어떻게 사용하면 되는지 알아보자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"스레드 풀(Thread Pool)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"스레드 제어 문제를 해결할 방법으로 스레드 풀을 사용한다. 스레드 풀은 매번 생성 및 수거 요청이 올 때 스레드를 생성하고 수거하는 것이 아닌, 스레드 사용자가 설정해둔 개수만큼 미리 생성해두는 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"스레드(Thread)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"어떤 프로그램 내에서 실행되는 흐름의 단위"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"특히 프로세스 내에서 실행되는 흐름의 단위"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"풀(Pool)"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"필요할 때마다 개체를 할당하고 파괴하는 대신, 사용 준비된 상태로 초기화된 개체 집합"}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"스레드는 동일한 메모리 영역에서 생성 및 관리가 이루어지지만, 생성하거나 수거할 때 커널 오브젝트를 동반하는 리소스이므로 생성 비용이 크게 발생한다. 스레드를 제어할 수 없는 상태에서 스레드를 무차별적으로 생성하면 리소스가 빠르게 소진되는 상황이 발생할 수 있다. 그러면 어떻게 하면 효율적으로 스레드를 제어할 수 있을까?\n스레드 풀의 동작 방식은 간단하게 보면 다음과 같다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"병렬 작업의 형태로 동시 코드를 작성한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"실행을 위해 스레드 풀의 인스턴스에 제출한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"제출한 인스턴스에서 실행하기 위해 재사용되는 여러 스레드를 제어한다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"스레드 풀을 사용하면 비용적인 측면이나 컨텍스트 스위치가 발생하는 상황에서 딜레이를 줄일 수 있다는 장점이 있다. 그렇다면 단점은 어떤 것이 있을까?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"단점은 스레드 풀에 너무 많은 양의 스레드를 만들어둔다면 메모리 낭비가 심해질 수 있다는 점이다. 그 때문에 얼만큼의 스레드가 필요할지 예측하고 할당해서 사용하는 것이 스레드 풀을 현명하게 사용하는 것이라고 할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Java 에서 스레드 풀 사용하기"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ExecutorService"}]},{"type":"text","value":" 인터페이스의 구현 객체를 정적 팩토리 메서드로 제공하는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Executors"}]},{"type":"text","value":" 클래스의 세 가지 메소드 중 하나를 이용하여 스레드 풀을 쉽게 생성할 수 있다. 자세한 메서드 사용법은 "},{"type":"element","tagName":"a","properties":{"href":"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html"},"children":[{"type":"text","value":"이곳"}]},{"type":"text","value":"에서 알 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ThreadPoolExecutor"}]},{"type":"text","value":" 에서 사용되는 파라미터로는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"corePoolSize(생성할 개수), maximumPoolSize(생성할 최대 개수), keepAliveTime(유지 시간)"}]},{"type":"text","value":" 이 있다. 스레드 풀에서 스레드를 생성할 때 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"corePoolSize"}]},{"type":"text","value":" 의 파라미터만큼 코어 스레드를 생성한다. 그리고 새로운 작업이 들어올 때 모든 코어 스레드가 사용 중이고 내부 큐가 가득 차면 스레드 풀의 최대 크기가 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"maximumPoolSize"}]},{"type":"text","value":" 만큼 커질 수 있다. 만약 현재 스레드 풀이 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"corePoolSize"}]},{"type":"text","value":" 보다 많은 스레드를 가지고 있다면, 초과한 스레드에 대해서 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"keepAliveTime"}]},{"type":"text","value":" 파라미터값보다 오랫동안 할 일이 없으면 제거된다. 이것은 자원의 낭비를 감소 시켜 효율적으로 스레드 풀을 관리할 수 있게 된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"스레드 풀에 작업요청을 하는 방식은 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"execute( )"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"submit( )"}]},{"type":"text","value":" 방식이 있다. "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"execute"}]},{"type":"text","value":" 방식은 작업 처리 중에 예외가 발생하면 해당 "},{"type":"element","tagName":"b","properties":{},"children":[{"type":"text","value":"스레드가 종료"}]},{"type":"text","value":"되고 스레드 풀에서 제거한 뒤, 새로운 스레드를 생성하여 다른 작업을 처리한다. 또한 "},{"type":"element","tagName":"b","properties":{},"children":[{"type":"text","value":"처리결과를 반환하지 않는다."}]},{"type":"text","value":" 반대로 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"submit"}]},{"type":"text","value":" 은 작업 처리 중에 예외가 발생하더라도 "},{"type":"element","tagName":"b","properties":{},"children":[{"type":"text","value":"스레드가 종료되지 않고"}]},{"type":"text","value":" 다음 작업에 사용된다. 또한 "},{"type":"element","tagName":"b","properties":{},"children":[{"type":"text","value":"처리 결과를 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Future<?>"}]},{"type":"text","value":" 로 반환"}]},{"type":"text","value":"한다. 따라서 스레드 풀을 사용할 때 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"submit"}]},{"type":"text","value":" 을 사용하는 점이 더 바람직하다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"테스트 클래스를 하나 생성하여 테스트를 진행한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"우선 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"MyCounter"}]},{"type":"text","value":" 클래스를 하나 만든다. 해당 클래스는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"increment"}]},{"type":"text","value":" 메서드를 통해 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"count"}]},{"type":"text","value":" 를 증가시킨 후 1초의 대기시간을 갖는다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MyCounter"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"int"}]},{"type":"text","value":" count"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"increment"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"try"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"int"}]},{"type":"text","value":" temp "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" count"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n            count "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" temp "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"+"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Thread"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sleep"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1000"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"catch"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"InterruptedException"}]},{"type":"text","value":" e"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n            e"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"printStackTrace"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"int"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getCount"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" count"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"첫 번째 방법은 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Executors.newFixedThreadPool(int nThreads)"}]},{"type":"text","value":" 에 대해 알아본다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"파라미터로 제공되는 n 개 만큼 스레드 풀을 생성한다. 보통 일정량의 업무가 발생할 때 사용한다. 다음 예시는 18개의 스레드가 필요한 Task 를 제공하고 5개의 스레드 풀로 처리하는 과정을 확인해 보는 테스트다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@DisplayName"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"FixedThreadPool 을 생성한다.\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Test"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"testCounterWithConcurrencyFixed"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"throws"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"InterruptedException"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"int"}]},{"type":"text","value":" numberOfThreads "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"18"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ExecutorService"}]},{"type":"text","value":" service "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Executors"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"newFixedThreadPool"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"5"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CountDownLatch"}]},{"type":"text","value":" latch "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CountDownLatch"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"numberOfThreads"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MyCounter"}]},{"type":"text","value":" counter "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MyCounter"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"iterateThread"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"numberOfThreads"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" service"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" latch"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" counter"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n        "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assertThat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ThreadPoolExecutor"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" service"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getPoolSize"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"isEqualTo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"5"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"iterateThread"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"int"}]},{"type":"text","value":" numberOfThreads"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ExecutorService"}]},{"type":"text","value":" service"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CountDownLatch"}]},{"type":"text","value":" latch"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MyCounter"}]},{"type":"text","value":" counter"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"throws"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"InterruptedException"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"for"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"int"}]},{"type":"text","value":" i "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" i "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"<"}]},{"type":"text","value":" numberOfThreads"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" i"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"++"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n            service"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"submit"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"->"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n                counter"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"increment"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n                latch"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"countDown"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n                "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"throw"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"IllegalArgumentException"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n            "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n        latch"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"await"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/49058669/133976949-a4dd1594-0b04-4013-86c5-d2f8fb6c688a.png","alt":"image"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"실행 결과를 살펴보면 한 스레드에서 작업을 처리하는 데 1초가 걸리도록 설정이 되어있다. 그 때문에 5개의 작업을 3번, 3개의 작업을 1번 하게 되면서 총 작업 시간은 (3+1)초 + 로직 실행 시간(300ms)이 된다. 따라서 스레드 풀에 생성된 "},{"type":"element","tagName":"b","properties":{},"children":[{"type":"text","value":"스레드 개수만큼 작업을 처리"}]},{"type":"text","value":"하는 모습을 확인할 수 있다. 또한, 스레드 풀의 크기가 5개로 유지되는 모습을 확인할 수 있다. 해당 작업에서 Count 가 여러 스레드에서 동시에 호출되는데 이 경우 비동기로 처리되기 때문에 실제 Count 의 결과("},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"counter.getCount()"}]},{"type":"text","value":")는 100보다 작은 값이 반환되며 실행할 때마다 랜덤한 결과를 반환하는 모습을 확인할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"두 번째 방법은 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Executors.newCachedThreadPool()"}]},{"type":"text","value":" 에 대해 알아본다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"초기 스레드 개수가 0개로 설정되며 스레드 개수보다 많은 양의 작업의 요청되면 "},{"type":"element","tagName":"b","properties":{},"children":[{"type":"text","value":"새로운 스레드를 생성하여 작업을 처리"}]},{"type":"text","value":"한다. 작업이 끝난 스레드가 60초 이상 새로운 작업요청이 없으면 스레드를 종료하고 스레드 풀에서 제거된다. 다음 예시는 18개의 스레드가 필요한 Task 를 제공하고 5개의 스레드 풀로 처리하는 과정을 확인해 보는 테스트다. 위에 생성해둔 코드에 이어서 작성해서 테스트를 진행하면 된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"text","value":"    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@DisplayName"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"CachedThreadPool 을 생성한다.\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Test"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"testCounterWithConcurrencyCached"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"throws"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"InterruptedException"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"int"}]},{"type":"text","value":" numberOfThreads "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"18"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ExecutorService"}]},{"type":"text","value":" service "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Executors"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"newCachedThreadPool"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CountDownLatch"}]},{"type":"text","value":" latch "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"CountDownLatch"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"numberOfThreads"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MyCounter"}]},{"type":"text","value":" counter "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MyCounter"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"iterateThread"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"numberOfThreads"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" service"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" latch"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" counter"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n        "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assertThat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"counter"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getCount"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"isEqualTo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"numberOfThreads"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assertThat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ThreadPoolExecutor"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" service"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getPoolSize"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"isEqualTo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"18"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Thread"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"sleep"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"60000"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 60초 후 생성된 스레드가 제거되는지 확인한다."}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"assertThat"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ThreadPoolExecutor"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" service"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getPoolSize"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"isEqualTo"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"0"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/49058669/133979857-aea7e9c2-050c-433c-b445-f83b32d45b4e.png","alt":"image"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"세 번째 방법은 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Executors.newScheduledThreadPool(int corePoolSize)"}]},{"type":"text","value":" 에 대해 알아본다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"스레드를 "},{"type":"element","tagName":"b","properties":{},"children":[{"type":"text","value":"일정시간이 흐르고 난 뒤 실행"}]},{"type":"text","value":"시키도록 하는 스케줄링 스레드 기능이다. 해당 기능을 테스트해 보기 위해서는 테스트 코드가 아닌 메인에서 실행해봐야 한다. 따라서 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Sample"}]},{"type":"text","value":" 클래스를 만들고 실습을 해본다. corePoolSize 는 생성할 corePool 의 크기를 지정해주는 부분인데 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Executors.newScheduledThreadPool(0)"}]},{"type":"text","value":" 을 하더라도 실행에는 문제가 없어 보인다. 다만 JDK 8 버전 이하에서 발견된 "},{"type":"element","tagName":"a","properties":{"href":"https://bugs.openjdk.java.net/browse/JDK-8129861"},"children":[{"type":"text","value":"버그"}]},{"type":"text","value":"로 단일 코어 가상 머신에서 CPU 를 100% 사용하는 버그가 있기 때문에 파라미터로 1 이상으로 설정한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Sample"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"static"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"main"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"["}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"]"}]},{"type":"text","value":" args"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ScheduledExecutorService"}]},{"type":"text","value":" service "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Executors"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"newScheduledThreadPool"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"1"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n        "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"System"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"out"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"println"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"첫 번째 작업이 실행됩니다.\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        service"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"schedule"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"->"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"System"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"out"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"println"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"두 번째 작업이 실행됩니다.\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"5"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"TimeUnit"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"SECONDS"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"System"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"out"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"println"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"세 번째 작업이 실행됩니다.\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n        service"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"shutdown"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/49058669/133980017-e1cc4860-0fc2-4e88-872c-6853887db442.png","alt":"image"},"children":[]},{"type":"text","value":"\n스케줄에서 설정한 5초가 흐른 후 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"두 번째 작업이 실행됩니다."}]},{"type":"text","value":" 가 실행되는 모습을 확인할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"결론"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"자바에서 사용하게 될 스레드 풀에 대해 간단하게 알아봤다. 얼마만큼의 스레드가 주기적으로 소모될지, 스레드를 추가로 생성할지, 작업 후 반환 값을 받을지에 대한 분석을 토대로 상황에 적합한 Thread 및 ThreadPool 을 적용한다면 멀티 코어 프로그래밍에 큰 도움이 된다고 생각한다. 다만, 적절하지 않게 사용할 경우 오히려 사용하지 않은 것보다 못할 수 있기 때문에 주의해야 한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"참고"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html"},"children":[{"type":"text","value":"Class Executor Oracle Docs"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.baeldung.com/thread-pool-java-and-guava"},"children":[{"type":"text","value":"Introduction to Thread Pools in Java"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://limkydev.tistory.com/55"},"children":[{"type":"text","value":"[Java] Thread Pool(스레드 풀)"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=2feelus&logNo=220728222140"},"children":[{"type":"text","value":"Java Thread Pool (자바 쓰레드 풀)"}]}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"excerpt":"프로세스 내에서 스레드의 생성 및 수거가 빈번하게 발생한다면 메모리 할당에 소모되는 비용이 많이 들지 않을까? 이에 대한 해답으로 스레드 풀에 대해 알아보고 Java 에서 어떻게 사용하면 되는지 알아보자. 스레드 풀(Thread Pool…","timeToRead":5,"frontmatter":{"title":"🧶 Java 에서 스레드 풀(Thread Pool) 을 사용해 보자","userDate":"17 September 2021","date":"2021-09-17T12:00:00.000Z","tags":["java","thread","thread-pool"],"excerpt":null,"image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAUGBwn/xAAWAQEBAQAAAAAAAAAAAAAAAAAFAwT/2gAMAwEAAhADEAAAAewc/taMY9EUZsv/AP/EABgQAAMBAQAAAAAAAAAAAAAAAAIDBQQG/9oACAEBAAEFAh7KTQUnq5TS5O+vpJZzsGVZZkkMeVPj5f/EACARAAIBAwQDAAAAAAAAAAAAAAERAgADMRITIUIEMmH/2gAIAQMBAT8BmPJ4dy3qXKhNexXcdUMZdWhc24bkgZoajFon5iv/xAAgEQACAQMEAwAAAAAAAAAAAAABAgMREiEABBMjIkGB/9oACAECAQE/AZo9/VazwXWm+kcgB7HK20kFOuxTVT5AtkY1tklWCITsrzBRyMhNpb2VwuPg1//EACQQAAIBAwMEAwEAAAAAAAAAAAECAwQREgAFEyEiMUEUI1Fx/9oACAEBAAY/At6SOskozslYlLWTMrw8b8zxEK+L5rnGRkFF8l7fesYt+klkszLFyteXBWkKqOEZHFT7HjR3GlecxfKmp/vXifKJY79uTdO/zfzfVQ1NR01O1VKktS0EKRNUSZMc5mjCmR7sxya5ux/dMrJdWBVgS3UMLEefYOjSbZSpR03M0vDEXw5HVMm6sepxF/5r/8QAGxABAQADAQEBAAAAAAAAAAAAAREAITFRQXH/2gAIAQEAAT8hEQFpNeg6JID6wHGEO2YR4E5incFYrEspLeU6LSApHnHZDuLc2NqwMsuUo7ygf3Nf7tIebY9U8Z//2gAMAwEAAgADAAAAEOcP/8QAGREBAQEBAQEAAAAAAAAAAAAAAREhQQBR/9oACAEDAQE/ELhGVAWsQup5KR8QgdoMtaEGMoc+Z//EABgRAQEBAQEAAAAAAAAAAAAAAAERITFB/9oACAECAQE/EFTw0UtAOUhPcAnfCMnSBSoytzDz/8QAGBABAQADAAAAAAAAAAAAAAAAAREAITH/2gAIAQEAAT8QDecApGcCCYogwKTuln1FxWSP/CylExFQak4AcKUG+wFVqKStnqgOz64WYojEY5nayjvNwVCBVf/Z","aspectRatio":1.7919075144508672,"src":"/static/5e0d03ab92f2468c93dc9beaff36e518/26852/thread-pool.jpg","srcSet":"/static/5e0d03ab92f2468c93dc9beaff36e518/0079a/thread-pool.jpg 930w,\n/static/5e0d03ab92f2468c93dc9beaff36e518/26852/thread-pool.jpg 1024w","sizes":"(max-width: 1024px) 100vw, 1024px"}}},"author":[{"id":"3기_와일더","bio":"우아한테크코스 3기 와일더(강규한)입니다 :)","avatar":{"children":[{"__typename":"ImageSharp","fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAkHBgj/xAAXAQADAQAAAAAAAAAAAAAAAAACBAUD/9oADAMBAAIQAxAAAAHQZ31FjFidVnjMjYslxA1D0QTX/wD/xAAdEAACAwACAwAAAAAAAAAAAAADBQQGBwECCBMU/9oACAEBAAEFAvIqv1QvfT9PW6FzBpSAq4wQ2lWxB0Zw6ay0wKP0ijQ16dZNeyi/NJ//xAAiEQABAwMEAwEAAAAAAAAAAAABAhESAyIxAAQhQQVxsvD/2gAIAQMBAT8BmpVFVyQldSRpNc6EiKllsXqjczzMQ/NPceECES2VcqiJd3MHYmtyHxjjoY0cH0dfvnX/xAAkEQACAQIFBAMAAAAAAAAAAAABAhEDIQAEEiIxBRMyQWFxsf/aAAgBAgEBPwGiipURYYuiFBV1bd5kqgtfaJtPiAzenpdW1tGcy4GoxJUGJtI7VjHPz7OEuaU3un6MHk/eP//EACUQAAICAgIBBAIDAAAAAAAAAAIDAQQFERITAAYUISIjQRUWMf/aAAgBAQAGPwKh6zv5CxVymJUmm3Gqr+5DPo7DZUofLU+zbBG0XWuRLCowuxfaK9+kRTgm4P8ArOPKlZ53E2rdwGMQwuJCEAsFApnQLOUixxctB9fMc7A5b1dhcc+jXeuvjsotQvlwdnu7Ynd3N9okIWygFBLFfVQx5kctnKysjiEWJs4mvbj8bauK7HHZZPwZBccEt1vfUpP2gd7q234Mq1YX2YpZBVcq6ppOM3VqbNaF8DLGuCzYkrJRwQJ+2SA+JT6fpZO9iEtauo0cN/IgCx1+ELUoPkK/0MGUL3x+NcYr1lrDprr6lAQCUQERAcdTGpiRjiUa0Y7gomJ15iqlqlXdTKyuTqGoCqsCuNhiksRMdZVwmNQnjwgNhEcJmPLNeopFKsh7lIq01DWrJWthCIKSritYxEf4MRH78//EABoQAQEBAQADAAAAAAAAAAAAAAERIQAxQVH/2gAIAQEAAT8h0f7TeaPWjEF8GL1WWTsBnpcDgoqMIlhHQbLYt4enAUivka4ub+eZhUcxrh0TB6JO4rMEekAv6hL4l66i24w2F4q3M21BUY7FRiMgF55Yqr//2gAMAwEAAgADAAAAEFTvvv/EABkRAQEBAQEBAAAAAAAAAAAAAAERIUEAYf/aAAgBAwEBPxC8C/MkTFWFCgih8AjtRloYCgaRK6RhDHhnE58zxknzz//EABoRAQEBAAMBAAAAAAAAAAAAAAERIQAxQXH/2gAIAQIBAT8QpwNMaVK1KsEoJw53sIqUUdCKyD0QRCqXbrt73fu8SotVKvaqqr6rq+vP/8QAGBABAQEBAQAAAAAAAAAAAAAAAREAIRD/2gAIAQEAAT8Qr7C3diGqY+ZUdS3IJjcCleKQ2779zkgyL9vjVlHokukjZ4Llh9izKMFkNEfoiqpJxcT103aIE2qkN5xxa+7+0nMGqkqU6CBIPxsXUZz/2Q==","aspectRatio":1,"src":"/static/243ab1ad810883935010beb8afcda2ef/2f1b1/wilder.jpg","srcSet":"/static/243ab1ad810883935010beb8afcda2ef/b3d27/wilder.jpg 40w,\n/static/243ab1ad810883935010beb8afcda2ef/5a735/wilder.jpg 80w,\n/static/243ab1ad810883935010beb8afcda2ef/6e81a/wilder.jpg 120w,\n/static/243ab1ad810883935010beb8afcda2ef/2f1b1/wilder.jpg 800w,\n/static/243ab1ad810883935010beb8afcda2ef/c4b07/wilder.jpg 1440w","sizes":"(max-width: 800px) 100vw, 800px"}}]}}],"source":"https://www.baeldung.com/thread-pool-java-and-guava"}},"relatedPosts":{"totalCount":18,"edges":[{"node":{"id":"86f4fd49-1704-5142-b0fd-71e15d85e906","timeToRead":9,"excerpt":"…","frontmatter":{"title":"🔒 Java 로 동기화를 해보자!","date":"2021-10-23T12:00:00.000Z"},"fields":{"slug":"/post/2021-10-23-java-synchronize/"}}},{"node":{"id":"48ff17ea-5d69-5400-80ae-09ad5950994b","timeToRead":4,"excerpt":"우선 당신에게 질문을 던져본다. 객체지향 프로그래밍과 함수형 프로그래밍은 상호 배제 관계에 있다고 생각하는가? 객체지향과 함수형 프로그래밍 Java…","frontmatter":{"title":"Java 8 에서 왜 함수형 프로그래밍이 도입되었을까?","date":"2021-09-30T12:00:00.000Z"},"fields":{"slug":"/post/2021-09-30-java8-functional-programming/"}}},{"node":{"id":"69ba625b-1182-581e-9165-f0f538687b48","timeToRead":5,"excerpt":"프로세스 내에서 스레드의 생성 및 수거가 빈번하게 발생한다면 메모리 할당에 소모되는 비용이 많이 들지 않을까? 이에 대한 해답으로 스레드 풀에 대해 알아보고 Java 에서 어떻게 사용하면 되는지 알아보자. 스레드 풀(Thread Pool…","frontmatter":{"title":"🧶 Java 에서 스레드 풀(Thread Pool) 을 사용해 보자","date":"2021-09-17T12:00:00.000Z"},"fields":{"slug":"/post/2021-09-18-java-thread-pool/"}}},{"node":{"id":"a2f91f62-ffca-5a3a-a7c4-184002a6de72","timeToRead":3,"excerpt":"이 글은 java 초심자들에게 추천합니다. 우리가 사용하는 java…","frontmatter":{"title":"java에서 객체를 생성하는 다양한 방법","date":"2021-05-17T12:00:00.000Z"},"fields":{"slug":"/post/2021-05-17-constructor/"}}},{"node":{"id":"7d38323c-1845-57dd-8ea8-f6614e07668f","timeToRead":2,"excerpt":"@ExceptionHandler @ExceptionHandler 는 @Controller , @RestController 가 적용된 Bean 에서 발생하는 예외를 잡아서 하나의 메서드에서 처리해주는 기능이다. @ExceptionHandler…","frontmatter":{"title":"ExceptionHandler 와 ControllerAdvice","date":"2021-05-10T12:00:00.000Z"},"fields":{"slug":"/post/2021-05-10-controller_advice_exception_handler/"}}}]}},"pageContext":{"slug":"/post/2021-09-18-java-thread-pool/","prev":{"excerpt":"Ubuntu , Fedora , Manjaro , Centos … AWS 인스턴스 설정에서 만나는, 운영체제에 대한 것들은 도대체 무엇일까? \n이번 글은 배포 시에 마주치는 리눅스 배포판들과 리눅스의 특징들에 대해 다룬 글, “리눅스 배포판이란?” 입니다.","timeToRead":5,"frontmatter":{"title":"리눅스 배포판이란?","tags":["linux"],"date":"2021-09-13T12:00:00.000Z","draft":false,"excerpt":null,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.8295454545454546,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABrUlEQVQoz31STUtCQRT1P7Xqd4QELlwVhO0qihaC0aYWQUIQEWVtDKRFH4sI7QPC6GVZFCZpmZapL8iP9GlvnHmn9+aZzTPrwsCde+eee86da0MX0zSNn29bXdtALBbnPmPMkus0G7ojWopczh4sLsxyv9kk7aZ/AoqMuN9iYthN7Amv6Si8Xi8eHl/aLEVQsd6maUwgxoQHhkdwtOUB0y9+3yz2d3w8TyntIKGPoTUKzpBV3sGUigBmAtN6AYVQL4K7KzhYd6DxHGi9oRZ2Fsk0n0Z5ZgDlOReobEoyujFmsmSUoFYtQVFqbQCmNzTON1hFjSJ7FkHzUwck95coTjlQdNtBktfQOn4b/9y5CsIQ8C8hOO+GnJFNyZ8XB1Bvw22wUqWGnFz8mY8wL5UR3JQTiH+kUCZVHpNOk3hNbety1N9ro9RVDE0uY9jjx+lVymTBTImGJaoZ2KVxDEansZ07/r02vDuj+qyaPJDMvMExugrnyBI29yKtX/0BvNOZ9UsT6Dsbw2Y2xGNEr7X8sjifeoMgfJHEiXTHgTr3zJB5+HaOkCwho+TNvRTyX/tqPeeUMVdvAAAAAElFTkSuQmCC","sizes":"(max-width: 483px) 100vw, 483px","src":"/static/715b91aab894cf4240578d9b4ec613b8/b9fcf/linux-distribution.png","srcSet":"/static/715b91aab894cf4240578d9b4ec613b8/b9fcf/linux-distribution.png 483w"}}},"author":[{"id":"3기_와이비","bio":"우아한테크코스 3기 와이비(허영범)입니다 :)","avatar":{"children":[{"fluid":{"aspectRatio":1,"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAYICQIF/8QAFgEBAQEAAAAAAAAAAAAAAAAABQYE/9oADAMBAAIQAxAAAAHKj3eImS3polLGtWqZkNVWfFmD/8QAHBAAAgIDAQEAAAAAAAAAAAAAAwUCBAEGEwcU/9oACAEBAAEFAjXCdYdwy8sWxta5lCVk/Njjjyg8g6dUx8ZkiRQwnQqgq0//xAAjEQABAwQBBAMAAAAAAAAAAAABAgMRABIhIkEEFTNRQkPR/9oACAEDAQE/AT0LTclbYkq1N4sNp3GJuBxBBCSMi4EGmGUBlrVI0GPUx+060127xN/R8E8lM8cyZ9yaUBJxya//xAAkEQEAAQMDAgcAAAAAAAAAAAABAgMREgAhMRMyFBUiI0Rhcf/aAAgBAgEBPwHx9eaRhWxCJkdNJxysx7rYp6sooo2Eilmc6jOSzZOTdZbrqjVq+bx9yp8g75cBsc8Fi34apb06a8sIK/eJr//EACgQAAIBAwMDAwUBAAAAAAAAAAECAwQREgUTIQAiQRQjMTIzQlJhUf/aAAgBAQAGPwKZO0bLOpt2/bfavYef2PySbnz1tVmdITEJo80PuRSx7sEi2uWSbt2yO1rg5Lzaonbuz1ap5t+lNRJ+X9U9apS0E0TRR1uoP6qcSxwhYZpHqFYRxSuJIFEz44Xmihd4Ve6g7cpcVDRxWYlhjAyxz0pjuM7Sw2cXxCoyJiGD2pZJrK9XW6jV/wCBg9W6BhfwRFx4sOtQNOdvPV6ipOPHvFK1A/FuVDvhf4LE+eq2bUNOpa+X0+me5WR7zd2Styx+SFHd9X95PVPTU0a09PAhjhhhAWONA7HFV8Dk9f/EABoQAQACAwEAAAAAAAAAAAAAAAERIQAxQWH/2gAIAQEAAT8h8KtACzQS0KJSa2Qey+nTNaCZgA8BuoxLr11qqiY44KAgrQcHwrLaKD0Fd2CMYSaEzoNdETdlUENAKMmqdJTqLTfh7ZSw/wCgd8UJ30HQE6zlHjCYGr3P/9oADAMBAAIAAwAAABAf14D/xAAZEQEBAQEBAQAAAAAAAAAAAAABEUEAIfD/2gAIAQMBAT8QCVNAXyEUKnbFQBwFqAAAQRcB8vHKAxUBpndAFgG14BgAAAAAUAMA8DO//8QAGhEBAQEBAQEBAAAAAAAAAAAAAREhADFhkf/aAAgBAgEBPxAS9EMAaaQ6NEHDqqlSgFWlaG+v5yBWLJT0/QIPBQ0IlRUhqpFV1V1XV3v/xAAYEAEBAQEBAAAAAAAAAAAAAAABEQAhMf/aAAgBAQABPxAbC0R2fXMQVmEbuCWQsiX1FjV7wGztY2yBTy2gLrq7HVG1USZ455KUw6lB4MIHIi654Sk1FGKySi53xXj1DuvyWJIrCnXA4rh5pkxGoLidAMM//9k=","sizes":"(max-width: 460px) 100vw, 460px","src":"/static/bfb773c24f06294935406a14cb053e4e/f86e8/whybe.jpg","srcSet":"/static/bfb773c24f06294935406a14cb053e4e/fd013/whybe.jpg 200w,\n/static/bfb773c24f06294935406a14cb053e4e/25252/whybe.jpg 400w,\n/static/bfb773c24f06294935406a14cb053e4e/f86e8/whybe.jpg 460w"}}]}}]},"fields":{"layout":"post","slug":"/post/2021-09-13-linux-distribution/"}},"next":{"excerpt":"1. Index란? Index는 DB 분야에 있어서 테이블에 대한 동작의 속도를 높여주는 자료 구조를 일컫는다. Index는 테이블 내…","timeToRead":6,"frontmatter":{"title":"DB Index 입문","tags":["database"],"date":"2021-09-18T12:00:00.000Z","draft":false,"excerpt":null,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.6317016317016317,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABhUlEQVQoz2VSCY7DIAzs/5/YrrTRNlzmDARytekOodu9LISMzdgzhtP9sMeXbdsmuLicLyXnVxD+EEKK6e3yhuyYUhwibp5CCETEOW/3UkpKSs6Yc+4F1sYoRdilUlrX3TqXSzkppbquO5/PL7DWWkr5ExystUoN1nqt3ZFOzs0Awwd+WZZ2L8YIFtePD9Bpkfu+R8ZGxiYpR8ZHzuP1uhBtOVfasH3fn51jbCpaZ8TXdSWthVTaGkWExYV40vaHfYNTssaQUqiII5BINcLRu2AMfEeEAc7/wTEmzkXf95BzO2xeltKzRYiNCPsiZWFs13oHGB0wDmhGk/oq3mchILIQzfM8TRPiFkqEcFRHZTBMzr0xEzQjNwxD171jbAEe54tzRZu786UUdEZFKDRgHoLzHgtFhhiRPbWp1I9yu90feyY9czH17KYIZPATUB1KMuOzVJmLImTq+1XrOu3HbxvTWF8Zn8SYV9BbW2kfL4ylnrTLXzAYbIc1ws3g18hXYj128P0ERRqrCoKM/vsAAAAASUVORK5CYII=","sizes":"(max-width: 700px) 100vw, 700px","src":"/static/3fefe92795945a21d1a62168feabd14b/05b00/db-index.png","srcSet":"/static/3fefe92795945a21d1a62168feabd14b/05b00/db-index.png 700w"}}},"author":[{"id":"3기_케빈","bio":"우아한테크코스 3기 케빈(박진홍)입니다 :)","avatar":{"children":[{"fluid":{"aspectRatio":1,"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAkFBwj/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAwEC/9oADAMBAAIQAxAAAAHldPpjVfl3ospiTfp8OhiNv//EAB4QAAEEAQUAAAAAAAAAAAAAAAYCAwQFJQABBxI1/9oACAEBAAEFApEfKCg3YU1c5HT2fcy5NAQSwlboiaf9XnczvwOnHLideDf/xAAdEQEBAAEEAwAAAAAAAAAAAAABAgASITFBEXHw/9oACAEDAQE/AYjXcypA0FXySKeaQ3QN0N3rNDhy/dY8vvP/xAAhEQEAAAUDBQAAAAAAAAAAAAABAAIRIfADUXESMUGRsf/aAAgBAgEBPwGfU6JWajNQqB3XwX3bVYNTPWZZDOSNuD5H/8QAKhAAAgIABAUBCQAAAAAAAAAAAgMBBAAFERIGEyExMrQUI0VRYWV1oaT/2gAIAQEABj8CtD9xYP8AVI98DGc3LhWUzcAq7c1G9QWibBMS2TNAe/EPI4dKw1n5zt8P1GLPT4ofrNcWuG2TC15qLPaDON8QqvZrtgdkSMFzWRAHBajs1jYW7oFUNwhWUmuuB7ctKgWGm7cXiMR1mZ+uLP5Vnq8ZHn/DdldW+7iFuXv51dVpD6bKtywSGKeJdOdWUwSCQYJROh6TOOHc6vmJXs1yTLb9sljy1lYs1xY2QXE6AMlPQY7Y/8QAHBABAQADAQEBAQAAAAAAAAAAAREAITFBYXGh/9oACAEBAAE/IdVgzVm0i6TbtIhskyBNHJoIgZOOasUPjDaX1OP6XVP7lrkfpwnSoSPBkAzcEICGIdrDa7hOXQ94Ke/Pck5i7eGQy3ihZUCtoWQQFCDRn//aAAwDAQACAAMAAAAQkOD8/8QAHREBAQEAAgIDAAAAAAAAAAAAAREhADFRcYGhsf/aAAgBAwEBPxC5psHTEUSAwgWCmpTGap0mwz49+daSZDJkqvXnn3H68//EAB4RAQACAQQDAAAAAAAAAAAAAAERIQAxQVGBYZHw/9oACAECAQE/ELWipAIIWAMUgCZUDBQeQffTzx1hkCCVSCVBTVbYafCmf//EABsQAQEBAQADAQAAAAAAAAAAAAERIQAxQVFh/9oACAEBAAE/ECApXAhCVAKIJIBBuHTeCCIVPfUaVCHGNXw0p8QibW1/bkxTOSYGxJ4SPAI80KriOqUpwE9Z4+VRh5WkQcmzVRCPoQmg9HEGLqtMfOMwBuam7P1G7Goh3//Z","sizes":"(max-width: 535px) 100vw, 535px","src":"/static/ca96a9821f9436be6d625379dfb61c32/f66a1/kevin.jpg","srcSet":"/static/ca96a9821f9436be6d625379dfb61c32/fd013/kevin.jpg 200w,\n/static/ca96a9821f9436be6d625379dfb61c32/25252/kevin.jpg 400w,\n/static/ca96a9821f9436be6d625379dfb61c32/f66a1/kevin.jpg 535w"}}]}}]},"fields":{"layout":"post","slug":"/post/2021-09-18-db-index/"}},"primaryTag":"java"}},"staticQueryHashes":["2130001345","4041952199"]}