{"componentChunkName":"component---src-templates-post-tsx","path":"/post/2021-10-23-flyway/","result":{"data":{"logo":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAwUlEQVQY003Qvw7BUBTH8YYgLCKExWw1IczEwAtIJCa1GJuyCalI/EmERUgHi5cxeI8uTTt1aHp9r9wmhk/OOfee/HJzNd/3Dc/zutS24zgZIUQpiqIt9YY+vUb9+eur6Kh5GN9LGkEn2DBd1y1zmGfxjjf9AFm1XEQCBe6aVBMVLJHiLBcHTiHwQS0MQ/mSOlYsjPDCAjOMccUFR3Z0NdvYISkDW9jAQi8IAhnYgAyZ4wELEzUfcFZfYmCPJ9ZIfwG9owW1fLgCkwAAAABJRU5ErkJggg==","width":400,"height":88,"src":"/static/0b18bd94a62a12fdc81ea720c28722f6/3891b/tecoble.png","srcSet":"/static/0b18bd94a62a12fdc81ea720c28722f6/3891b/tecoble.png 1x"}}},"markdownRemark":{"html":"<p>깃-들다 프로젝트를 진행하며 DB 형상관리를 위해 Flyway를 도입했다.\n여기서 <code class=\"language-text\">DB 형상관리</code>와 <code class=\"language-text\">Flyway</code>가 무엇일까?\n이번 글에서 한번 알아보자.<br/></p>\n<!-- end -->\n<br/>\n<h1>Flyway?</h1>\n<p>Flyway 공식 문서에서는 Flyway를 다음과 같이 소개한다.<br/></p>\n<blockquote>\n<p>Flyway is an open-source database migration tool.</p>\n</blockquote>\n<p>Flyway는 오픈소스 DB 마이그레이션 도구로, DB 형상관리를 위한 도구이다.<br/></p>\n<p>개발을 하며 한번 쯤은 형상관리 도구를 사용해본 경험이 있을 거다.\n대표적으로 Git이 있다. 이는 소스코드 형상관리 도구이다.\n결국 Flyway는 Git처럼 형상관리 도구인데, DB 형상관리를 할 때 쓰는 도구이다.<br/></p>\n<br/>\n<h1>사용 이유</h1>\n<p>운영 환경에서는 <code class=\"language-text\">spring.jpa.hibernate.ddl-auto</code> 옵션을 create 또는 update로 할 수 없다.\n그렇다면 DB 스키마에 변경이 생겼을 때, 직접 DB 서버에 접속해서 일일이 명령어를 쳐서 수정해야 한다.\n하지만, 이렇게 하면 휴먼 에러가 발생할 가능성이 커진다. 오타를 낼 수도 있고, 실수로 명령어를 하나 빼먹을 수도 있다.\n이때 Flyway와 같은 DB 형상관리 도구를 활용하면, 쉽고 안전하게 변경사항을 반영할 수 있다.\n또, 스키마 버전 관리가 되기 때문에 어떤 변경사항이 있었는지 한눈에 볼 수 있다는 장점도 있다.<br/></p>\n<br/>\n<h1>컨벤션</h1>\n<p>Flyway를 사용할 때, 스크립트의 위치와 네이밍을 조심해야 한다.\n이들에 대한 컨벤션을 꼭 따라야 한다.<br/></p>\n<br/>\n<h2>위치</h2>\n<p>기본 위치는 <code class=\"language-text\">main/resources/db/migration</code>이다.\n즉 resources 패키지에 <code class=\"language-text\">db/migration</code> 패키지를 만들고, 이 경로에 스크립트 파일을 추가하면 된다.<br/></p>\n<p>물론 커스텀 설정도 할 수 있다.\napplication.yml에서 <code class=\"language-text\">spring.flyway.locations</code> 옵션의 값을 <code class=\"language-text\">classpath:db/migration/{다른_경로}</code>와 같이 변경하면 된다.<br/></p>\n<br/>\n<h2>네이밍</h2>\n<p>Flyway 스크립트의 네이밍은 다음과 같은 규칙을 가진다.<br/></p>\n<p align=\"center\">\n    <img src=\"https://user-images.githubusercontent.com/50176238/138549513-27e9a8a4-15e3-46ac-8c49-86cd35fae24a.png\">\n</p>\n<blockquote>\n<p>이미지 출처: <a href=\"https://flywaydb.org/documentation/concepts/migrations#naming-1\">Flyway Documentation - Naming</a></p>\n</blockquote>\n<br/>\n<h3>Prefix</h3>\n<p>V(Versioned), U(Undo), R(Repeatable)의 3가지 종류가 있다.\nV는 현재 버전을 새로운 버전으로 업데이트하는 경우,\nU는 현재 버전을 이전 버전으로 되돌리는 경우,\nR은 버전에 관계 없이 매번 실행하는 경우에 사용한다.<br/></p>\n<h3>Version</h3>\n<p>V와 U는 버전을 명시해야 하고, R은 버전을 명시하지 않는다.\nR은 앞서 말했듯이 버전에 관련 없이 매번 실행되는 스크립트이기 때문이다.<br/></p>\n<p>새로 스크립트를 작성한다면, 스크립트의 버전을 이전보다 꼭 높게 적어야 한다.\n예를 들어, 이전에 <code class=\"language-text\">1.0</code>였다면 이후에는 <code class=\"language-text\">2.0</code>과 같이 더 높은 숫자를 써야 한다.\n이전보다 낮은 숫자를 쓰면, Flyway가 이를 무시하고 적용하지 않는다.<br/></p>\n<p>버전은 단순히 <code class=\"language-text\">1</code>, <code class=\"language-text\">2</code>처럼 적을 수도 있고, <code class=\"language-text\">20211023</code>처럼 날짜로 명시할 수도 있다.<br/></p>\n<h3>Separator</h3>\n<p>무조건 <code class=\"language-text\">__(언더바 2개)</code>로 작성해야 한다.<br/></p>\n<h3>Description</h3>\n<p>스크립트 내용에 맞게 자유롭게 적으면 된다.\n단어 구분은 <code class=\"language-text\">_(언더바 1개)</code>로 한다.<br/></p>\n<br/>\n<h1>적용 방법</h1>\n<h2>설정 파일</h2>\n<h3>build.gradle</h3>\n<p>먼저, Flyway 의존성을 추가한다.<br/></p>\n<div class=\"gatsby-highlight\" data-language=\"groovy\"><pre class=\"language-groovy\"><code class=\"language-groovy\">dependencies <span class=\"token punctuation\">{</span>\n\timplementation <span class=\"token string\">'org.springframework.boot:spring-boot-starter-data-jpa'</span>\n\timplementation <span class=\"token string\">'org.springframework.boot:spring-boot-starter-web'</span>\n    <span class=\"token comment\">// 이 부분을 추가한다.</span>\n\timplementation <span class=\"token string\">'org.flywaydb:flyway-core:6.4.2'</span>\n\n\truntimeOnly <span class=\"token string\">'com.h2database:h2'</span>\n\n\ttestImplementation <span class=\"token string\">'org.springframework.boot:spring-boot-starter-test'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<h3>application.yml</h3>\n<p>그리고 Flyway와 관련한 옵션을 추가한다.<br/></p>\n<p><code class=\"language-text\">spring.flyway.enabled</code>는 기본 설정값이 true지만, 직관적으로 명시하기 위해 적어줬다.<br/>\n<code class=\"language-text\">spring.flyway.baseline-on-migration</code>은 <code class=\"language-text\">변경 이력 테이블(버전 관리를 도와줌)</code>을 생성하기 위해 작성했다.\n변경 이력 테이블은 원래 자동으로 생성되나, 자동으로 생성되지 않는 경우도 있어 이를 대비하기 위해 넣어줬다.\nSpring Boot 2 이상을 사용하는 경우 추가하면 된다.<br/></p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">spring</span><span class=\"token punctuation\">:</span>\n  <span class=\"token comment\"># datasource는 각자에 맞게 작성한다.</span>\n  <span class=\"token key atrule\">datasource</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> jdbc<span class=\"token punctuation\">:</span>h2<span class=\"token punctuation\">:</span>tcp<span class=\"token punctuation\">:</span>//localhost/~/test;MODE=MySQL;DB_CLOSE_DELAY=<span class=\"token punctuation\">-</span>1;DB_CLOSE_ON_EXIT=FALSE\n    <span class=\"token key atrule\">username</span><span class=\"token punctuation\">:</span> sa\n    <span class=\"token key atrule\">password</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">jpa</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">show-sql</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token key atrule\">properties</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">hibernate</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">dialects</span><span class=\"token punctuation\">:</span> org.hibernate.dialect.MySQL57Dialect\n        <span class=\"token key atrule\">format_sql</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token key atrule\">generate-ddl</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token key atrule\">hibernate</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">ddl-auto</span><span class=\"token punctuation\">:</span> validate\n  <span class=\"token comment\"># 이 부분을 추가한다.</span>\n  <span class=\"token key atrule\">flyway</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token key atrule\">baseline-on-migrate</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></code></pre></div>\n<br/>\n<h2>V1 도입</h2>\n<h3>소스코드</h3>\n<p>간단하게 Member 엔티티를 구성했다.\n필드(컬럼)으로 id, name이 있고 id는 auto_increment 설정이 돼있다.<br/></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// Member.java</span>\n<span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Member</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Id</span> <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span>IDENTITY<span class=\"token punctuation\">)</span>\n    <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br/>\n<h3>스크립트</h3>\n<p>Flyway 스크립트는 다음과 같이 작성했다.<br/></p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- V1__init.sql</span>\n<span class=\"token keyword\">drop</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">if</span> <span class=\"token keyword\">exists</span> member<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> member <span class=\"token punctuation\">(</span>\n  id <span class=\"token keyword\">bigint</span> <span class=\"token keyword\">auto_increment</span><span class=\"token punctuation\">,</span>\n  name <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token keyword\">primary</span> <span class=\"token keyword\">key</span> <span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<h3>결과</h3>\n<p>애플리케이션을 실행하고, h2에 접속하여 결과를 확인했다.<br/></p>\n<p>예상대로 Member 테이블이 생성됐다.\n한편, <code class=\"language-text\">flyway_schema_history</code> 테이블도 생성됐다.\n바로 이 테이블이 앞에서 말한 <code class=\"language-text\">변경 이력 테이블</code>이다.\nDB 스키마의 변경사항을 이곳에 기록한다.<br/></p>\n<p align=\"center\">\n    <img style=\"width: 340px; height: 100px\" src=\"https://user-images.githubusercontent.com/50176238/138552599-1cbdb51e-3e4e-49a7-9dcf-042aa984a1b2.png\">\n</p>\n<br/>\n<p>해당 테이블의 내용을 보고 싶다면, 아래 명령어를 통해 확인할 수 있다.<br/></p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"flyway_schema_history\"</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<p>이렇게 결과가 나타난다.\n앞에서 작성한 V1 스크립트가 잘 기록됐다.<br/></p>\n<p><img src=\"https://user-images.githubusercontent.com/50176238/138552652-7b487729-527f-4236-8ade-76f2f7f0bc79.png\" alt=\"flyway_schema_history_v1\"></p>\n<br/>\n<h2>V2 도입</h2>\n<h3>소스코드</h3>\n<p>이번에는 Member 엔티티에 company 필드(컬럼)을 추가했다.<br/></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// Member.java</span>\n<span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Member</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Id</span> <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span>IDENTITY<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> company<span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<h3>스크립트</h3>\n<p>이어서 Flyway 스크립트를 다음과 같이 작성했다.<br/></p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- V2__add_company.sql</span>\n<span class=\"token keyword\">alter</span> <span class=\"token keyword\">table</span> member <span class=\"token keyword\">add</span> <span class=\"token keyword\">column</span> company <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br/>\n<h3>결과</h3>\n<p>애플리케이션을 다시 실행하고, 결과를 확인했다.<br/></p>\n<p>Member 테이블에 변경사항이 잘 반영됐고, 변경 이력 테이블에서 버전 관리가 되고 있다.<br/>\nMember 테이블의 1행 데이터는 V1에서 삽입했고, 2행 데이터는 V2에서 삽입했다.\n따라서 1행 데이터의 company 필드값은 null이고, 2행 데이터의 company 필드값은 null이 아닌 것을 확인할 수 있다.<br/></p>\n<p><img src=\"https://user-images.githubusercontent.com/50176238/138553829-324bbf6e-2383-4571-bab9-e8c6d0f21988.png\" alt=\"flyway_schema_history_v2\"></p>\n<br/>\n<h1>주의할 점</h1>\n<p>Flyway는 DB 형상관리를 편리하게 해주는 장점이 있지만, 조심할 점이 있다.<br/></p>\n<p>DB 스키마에 변경사항이 생겼을 때(e.g. 엔티티에 필드가 추가/삭제되는 경우), 이를 Flyway에게 알려주는 스크립트를 잊지 말고 작성해야 한다.\n이를 깜빡하면, 애플리케이션이 실행되지 않는 불상사가 발생한다.\n그러므로 꼭꼭 스크립트를 작성하자.\n그리고 이를 통해 DB 형상관리를 조금 더 우아하게 해보자.<br/></p>\n<br/>\n<h1>References</h1>\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=pxDlj5jA9z4&#x26;t=634s&#x26;ab_channel=%EC%9A%B0%EC%95%84%ED%95%9CTech\">[10분 테코톡] 🐶 코기의 Flyway</a></li>\n<li><a href=\"https://flywaydb.org/documentation/\">Flyway Documentation</a></li>\n<li><a href=\"https://github.com/da-nyee/flyway-learning-test\">Flyway 학습 테스트</a></li>\n</ul>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"깃-들다 프로젝트를 진행하며 DB 형상관리를 위해 Flyway를 도입했다.\n여기서 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"DB 형상관리"}]},{"type":"text","value":"와 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Flyway"}]},{"type":"text","value":"가 무엇일까?\n이번 글에서 한번 알아보자."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"comment","value":" end "},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"Flyway?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Flyway 공식 문서에서는 Flyway를 다음과 같이 소개한다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Flyway is an open-source database migration tool."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Flyway는 오픈소스 DB 마이그레이션 도구로, DB 형상관리를 위한 도구이다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"개발을 하며 한번 쯤은 형상관리 도구를 사용해본 경험이 있을 거다.\n대표적으로 Git이 있다. 이는 소스코드 형상관리 도구이다.\n결국 Flyway는 Git처럼 형상관리 도구인데, DB 형상관리를 할 때 쓰는 도구이다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"사용 이유"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"운영 환경에서는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"spring.jpa.hibernate.ddl-auto"}]},{"type":"text","value":" 옵션을 create 또는 update로 할 수 없다.\n그렇다면 DB 스키마에 변경이 생겼을 때, 직접 DB 서버에 접속해서 일일이 명령어를 쳐서 수정해야 한다.\n하지만, 이렇게 하면 휴먼 에러가 발생할 가능성이 커진다. 오타를 낼 수도 있고, 실수로 명령어를 하나 빼먹을 수도 있다.\n이때 Flyway와 같은 DB 형상관리 도구를 활용하면, 쉽고 안전하게 변경사항을 반영할 수 있다.\n또, 스키마 버전 관리가 되기 때문에 어떤 변경사항이 있었는지 한눈에 볼 수 있다는 장점도 있다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"컨벤션"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Flyway를 사용할 때, 스크립트의 위치와 네이밍을 조심해야 한다.\n이들에 대한 컨벤션을 꼭 따라야 한다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"위치"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"기본 위치는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"main/resources/db/migration"}]},{"type":"text","value":"이다.\n즉 resources 패키지에 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"db/migration"}]},{"type":"text","value":" 패키지를 만들고, 이 경로에 스크립트 파일을 추가하면 된다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"물론 커스텀 설정도 할 수 있다.\napplication.yml에서 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"spring.flyway.locations"}]},{"type":"text","value":" 옵션의 값을 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"classpath:db/migration/{다른_경로}"}]},{"type":"text","value":"와 같이 변경하면 된다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"네이밍"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Flyway 스크립트의 네이밍은 다음과 같은 규칙을 가진다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{"align":"center"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/50176238/138549513-27e9a8a4-15e3-46ac-8c49-86cd35fae24a.png"},"children":[]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이미지 출처: "},{"type":"element","tagName":"a","properties":{"href":"https://flywaydb.org/documentation/concepts/migrations#naming-1"},"children":[{"type":"text","value":"Flyway Documentation - Naming"}]}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Prefix"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"V(Versioned), U(Undo), R(Repeatable)의 3가지 종류가 있다.\nV는 현재 버전을 새로운 버전으로 업데이트하는 경우,\nU는 현재 버전을 이전 버전으로 되돌리는 경우,\nR은 버전에 관계 없이 매번 실행하는 경우에 사용한다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Version"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"V와 U는 버전을 명시해야 하고, R은 버전을 명시하지 않는다.\nR은 앞서 말했듯이 버전에 관련 없이 매번 실행되는 스크립트이기 때문이다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"새로 스크립트를 작성한다면, 스크립트의 버전을 이전보다 꼭 높게 적어야 한다.\n예를 들어, 이전에 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"1.0"}]},{"type":"text","value":"였다면 이후에는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"2.0"}]},{"type":"text","value":"과 같이 더 높은 숫자를 써야 한다.\n이전보다 낮은 숫자를 쓰면, Flyway가 이를 무시하고 적용하지 않는다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"버전은 단순히 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"1"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"2"}]},{"type":"text","value":"처럼 적을 수도 있고, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"20211023"}]},{"type":"text","value":"처럼 날짜로 명시할 수도 있다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Separator"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"무조건 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"__(언더바 2개)"}]},{"type":"text","value":"로 작성해야 한다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Description"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"스크립트 내용에 맞게 자유롭게 적으면 된다.\n단어 구분은 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"_(언더바 1개)"}]},{"type":"text","value":"로 한다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"적용 방법"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"설정 파일"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"build.gradle"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"먼저, Flyway 의존성을 추가한다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"groovy"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-groovy"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-groovy"]},"children":[{"type":"text","value":"dependencies "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n\timplementation "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'org.springframework.boot:spring-boot-starter-data-jpa'"}]},{"type":"text","value":"\n\timplementation "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'org.springframework.boot:spring-boot-starter-web'"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// 이 부분을 추가한다."}]},{"type":"text","value":"\n\timplementation "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'org.flywaydb:flyway-core:6.4.2'"}]},{"type":"text","value":"\n\n\truntimeOnly "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'com.h2database:h2'"}]},{"type":"text","value":"\n\n\ttestImplementation "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"'org.springframework.boot:spring-boot-starter-test'"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"application.yml"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그리고 Flyway와 관련한 옵션을 추가한다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"spring.flyway.enabled"}]},{"type":"text","value":"는 기본 설정값이 true지만, 직관적으로 명시하기 위해 적어줬다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"spring.flyway.baseline-on-migration"}]},{"type":"text","value":"은 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"변경 이력 테이블(버전 관리를 도와줌)"}]},{"type":"text","value":"을 생성하기 위해 작성했다.\n변경 이력 테이블은 원래 자동으로 생성되나, 자동으로 생성되지 않는 경우도 있어 이를 대비하기 위해 넣어줬다.\nSpring Boot 2 이상을 사용하는 경우 추가하면 된다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"yml"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-yml"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-yml"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"spring"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# datasource는 각자에 맞게 작성한다."}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"datasource"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"url"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" jdbc"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"h2"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"tcp"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"//localhost/~/test;MODE=MySQL;DB_CLOSE_DELAY="},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"-"}]},{"type":"text","value":"1;DB_CLOSE_ON_EXIT=FALSE\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"username"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" sa\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"password"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"jpa"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"show-sql"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean","important"]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"properties"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"hibernate"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n        "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"dialects"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" org.hibernate.dialect.MySQL57Dialect\n        "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"format_sql"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean","important"]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"generate-ddl"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean","important"]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"hibernate"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"ddl-auto"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" validate\n  "},{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"# 이 부분을 추가한다."}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"flyway"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"enabled"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean","important"]},"children":[{"type":"text","value":"true"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","key","atrule"]},"children":[{"type":"text","value":"baseline-on-migrate"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":":"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","boolean","important"]},"children":[{"type":"text","value":"true"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"V1 도입"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"소스코드"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"간단하게 Member 엔티티를 구성했다.\n필드(컬럼)으로 id, name이 있고 id는 auto_increment 설정이 돼있다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// Member.java"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Entity"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Member"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Id"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@GeneratedValue"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"strategy "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"GenerationType"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"IDENTITY"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Long"}]},{"type":"text","value":" id"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" name"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"스크립트"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Flyway 스크립트는 다음과 같이 작성했다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- V1__init.sql"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"drop"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"table"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"if"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"exists"}]},{"type":"text","value":" member"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"create"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"table"}]},{"type":"text","value":" member "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"\n  id "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"bigint"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"auto_increment"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n  name "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"varchar"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"255"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"primary"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"key"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"결과"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"애플리케이션을 실행하고, h2에 접속하여 결과를 확인했다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"예상대로 Member 테이블이 생성됐다.\n한편, "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"flyway_schema_history"}]},{"type":"text","value":" 테이블도 생성됐다.\n바로 이 테이블이 앞에서 말한 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"변경 이력 테이블"}]},{"type":"text","value":"이다.\nDB 스키마의 변경사항을 이곳에 기록한다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{"align":"center"},"children":[{"type":"text","value":"\n    "},{"type":"element","tagName":"img","properties":{"style":"width: 340px; height: 100px","src":"https://user-images.githubusercontent.com/50176238/138552599-1cbdb51e-3e4e-49a7-9dcf-042aa984a1b2.png"},"children":[]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"해당 테이블의 내용을 보고 싶다면, 아래 명령어를 통해 확인할 수 있다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"select"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"*"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"from"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"flyway_schema_history\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이렇게 결과가 나타난다.\n앞에서 작성한 V1 스크립트가 잘 기록됐다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/50176238/138552652-7b487729-527f-4236-8ade-76f2f7f0bc79.png","alt":"flyway_schema_history_v1"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"V2 도입"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"소스코드"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이번에는 Member 엔티티에 company 필드(컬럼)을 추가했다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"// Member.java"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Entity"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"class"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Member"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Id"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@GeneratedValue"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"strategy "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"GenerationType"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"text","value":"IDENTITY"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Long"}]},{"type":"text","value":" id"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" name"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"private"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" company"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"스크립트"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이어서 Flyway 스크립트를 다음과 같이 작성했다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"sql"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-sql"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","comment"]},"children":[{"type":"text","value":"-- V2__add_company.sql"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"alter"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"table"}]},{"type":"text","value":" member "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"add"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"column"}]},{"type":"text","value":" company "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"varchar"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","number"]},"children":[{"type":"text","value":"255"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"결과"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"애플리케이션을 다시 실행하고, 결과를 확인했다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Member 테이블에 변경사항이 잘 반영됐고, 변경 이력 테이블에서 버전 관리가 되고 있다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\nMember 테이블의 1행 데이터는 V1에서 삽입했고, 2행 데이터는 V2에서 삽입했다.\n따라서 1행 데이터의 company 필드값은 null이고, 2행 데이터의 company 필드값은 null이 아닌 것을 확인할 수 있다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"https://user-images.githubusercontent.com/50176238/138553829-324bbf6e-2383-4571-bab9-e8c6d0f21988.png","alt":"flyway_schema_history_v2"},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"주의할 점"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Flyway는 DB 형상관리를 편리하게 해주는 장점이 있지만, 조심할 점이 있다."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"DB 스키마에 변경사항이 생겼을 때(e.g. 엔티티에 필드가 추가/삭제되는 경우), 이를 Flyway에게 알려주는 스크립트를 잊지 말고 작성해야 한다.\n이를 깜빡하면, 애플리케이션이 실행되지 않는 불상사가 발생한다.\n그러므로 꼭꼭 스크립트를 작성하자.\n그리고 이를 통해 DB 형상관리를 조금 더 우아하게 해보자."},{"type":"element","tagName":"br","properties":{},"children":[]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h1","properties":{},"children":[{"type":"text","value":"References"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.youtube.com/watch?v=pxDlj5jA9z4&t=634s&ab_channel=%EC%9A%B0%EC%95%84%ED%95%9CTech"},"children":[{"type":"text","value":"[10분 테코톡] 🐶 코기의 Flyway"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://flywaydb.org/documentation/"},"children":[{"type":"text","value":"Flyway Documentation"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://github.com/da-nyee/flyway-learning-test"},"children":[{"type":"text","value":"Flyway 학습 테스트"}]}]},{"type":"text","value":"\n"}]}],"data":{"quirksMode":false}},"excerpt":"깃-들다 프로젝트를 진행하며 DB 형상관리를 위해 Flyway를 도입했다.\n여기서 와 가 무엇일까?\n이번 글에서 한번 알아보자.","timeToRead":4,"frontmatter":{"title":"Flyway","userDate":"23 October 2021","date":"2021-10-23T12:00:00.000Z","tags":["database","flyway"],"excerpt":null,"image":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAjUlEQVQY06WPPQuDMBiE8/9/iXOnroku3UwDLWKNDh2sDWhM6aAxVxEd6kcpeMv7wj0cdwQbcs4N11qLpmmH3xiz8Ocia0ETrJSCEAK3JAHnZzDGIGW64P4O1FqjrCpQShH4rG9YI88fP1uSzbkjfIru8I4BDn4IkRX7Jnedg3698Sxr8EuEayy/mLXQD6ThhXSmiolZAAAAAElFTkSuQmCC","aspectRatio":3.675889328063241,"src":"/static/215fd9f718c56baebf114d3ccd493ad3/23aaf/flyway.png","srcSet":"/static/215fd9f718c56baebf114d3ccd493ad3/3a443/flyway.png 930w,\n/static/215fd9f718c56baebf114d3ccd493ad3/23aaf/flyway.png 1852w","sizes":"(max-width: 1852px) 100vw, 1852px"}}},"author":[{"id":"3기_다니","bio":"우아한테크코스 3기 다니(이다은)입니다 :)","avatar":{"children":[{"__typename":"ImageSharp","fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAYHCAX/xAAYAQACAwAAAAAAAAAAAAAAAAADBQQGCP/aAAwDAQACEAMQAAABzdK5rXmabBWSOmhNDVaAUdIQ13//xAAaEAACAwEBAAAAAAAAAAAAAAADBAECBQYA/9oACAEBAAEFAhEVdC6sOysPBr7n+Xh+Ovxr4umfRsImQwcjuj0ekTzRJkv/xAAlEQACAQMDAgcAAAAAAAAAAAABAgMEERIAEyEFcRQxMkJRYWL/2gAIAQMBAT8BkqISYoN7eq5XQnGOVokkIGEpAaKIwxMwLR33vecXbIyHGRga9lORuoo5nAPFwGBYHuGPfUQHja/j09Puv5O9FyPg9tRO5RSWYm3mSfrX/8QAIxEAAgIABQQDAAAAAAAAAAAAAQIDEQAEBRIhFCJBcRMxQv/aAAgBAgEBPwGCWLMTgZaX48vCzN3vvYoUVGjFuyo7w9OUkjOz8VIiyIvQq/d0Ucm6jvfvZvrkvsG73Q8cYhiiOj6VcaGtRjq0U1UWdArjigqj0APGJXdZHCswAPADEAegMf/EACUQAAICAgICAQQDAAAAAAAAAAECAwQREhMhAAUUIiMxcUJRUv/aAAgBAQAGPwK4nxZ7L+xDmR7NlY4O8gms6PyJG2urZdTJGzjYBjhZxWSrWarZvWn9csUFZLCyRwcd6VJZLU1q3EokMfHr8ZMhtgfCKjy8WT26a7MOtl1jfKMAupfD/wChnssa8kNCKk6RFLQezDiyiomFRpn2iDM6SHXKNsYtk18jqSXI/YLJUp2IpIFTVZzyzGu65x9hdcPqz6PHtxsxHmjCQEAdCNuv3qhUfpesY8sffmQj1bWto5GjPNEYtGOpAbHIw7B6x5Xru0TJBbt2U2Qs24mWPU5YjRo/pYYyR/LPmdY1+hc4jTsnvJ2DHPf9/gDz/8QAGxABAQADAQEBAAAAAAAAAAAAAREAITFBcYH/2gAIAQEAAT8hKfEE73delMkcGf5DZboljiAPsAUSztUQ5oxgL4j5NX3TDNoYjAIDpP2m2Zt/srD1OJ1plIF6DTKQBCrzbDB+QrTpn2hc4QOTb2KaFy1oLZjh4gnr/9oADAMBAAIAAwAAABCsHzz/xAAZEQEBAAMBAAAAAAAAAAAAAAABEQAhcTH/2gAIAQMBAT8QMd7KEdLeDQR2ETjQhKBaKkHyIKMJCECEodZWw3eIZAVJW7qqr3P/xAAYEQEBAQEBAAAAAAAAAAAAAAABESEAMf/aAAgBAgEBPxAdOQD89ElgoLi2MkABPAGBJ4ARwFORn2NhqkqhKSDYAYr0GAkEABCAAQ7/xAAXEAEBAQEAAAAAAAAAAAAAAAABEQAh/9oACAEBAAE/EOUCuAJOl5pCKRAnsLoTyzAcFCAU91ZI3UVvHNeRaZFYRa7TA5ZJiSoQa04oYBJEACIMwN5F7ib1niAhkARWJP7rD4YIwu0ZOpxlHVbj1gAUOP/Z","aspectRatio":1,"src":"/static/007d7f099331bf55b217ef476036172f/2f1b1/danyee.jpg","srcSet":"/static/007d7f099331bf55b217ef476036172f/b3d27/danyee.jpg 40w,\n/static/007d7f099331bf55b217ef476036172f/5a735/danyee.jpg 80w,\n/static/007d7f099331bf55b217ef476036172f/6e81a/danyee.jpg 120w,\n/static/007d7f099331bf55b217ef476036172f/2f1b1/danyee.jpg 800w,\n/static/007d7f099331bf55b217ef476036172f/1920d/danyee.jpg 1080w","sizes":"(max-width: 800px) 100vw, 800px"}}]}}],"source":null}},"relatedPosts":{"totalCount":7,"edges":[{"node":{"id":"33478fc3-2999-5338-8ca7-497832d2954a","timeToRead":4,"excerpt":"깃-들다 프로젝트를 진행하며 DB 형상관리를 위해 Flyway를 도입했다.\n여기서 와 가 무엇일까?\n이번 글에서 한번 알아보자.","frontmatter":{"title":"Flyway","date":"2021-10-23T12:00:00.000Z"},"fields":{"slug":"/post/2021-10-23-flyway/"}}},{"node":{"id":"6d283692-6783-57c5-a73b-dccd9435ebea","timeToRead":12,"excerpt":"실습 Repository에서 코드를 확인할 수 있습니다. 1. Elasticsearch Elasticsearch는 Apache Lucene 기반의 Java 오픈소스 분산형 RESTful…","frontmatter":{"title":"Spring Data Elasticsearch 설정 및 검색 기능 구현","date":"2021-10-19T12:00:00.000Z"},"fields":{"slug":"/post/2021-10-19-elasticsearch/"}}},{"node":{"id":"58b722a1-349e-5463-a0d6-3b3804a688af","timeToRead":6,"excerpt":"조회 성능 개선 미션을 진행하며 를 알게 됐다.\n처음 보는 단어여서 이게 어떤 인덱스일까 궁금했고, 바로 찾아보고 이해했다.\n그러면서 한번 내용을 글로 정리하면 좋을 것 같다는 생각을 했다.\n그래서 이번 기회에 학습 테스트를 하며 해당 개념을 잡고가려 한다.","frontmatter":{"title":"커버링 인덱스","date":"2021-10-12T12:00:00.000Z"},"fields":{"slug":"/post/2021-10-12-covering-index/"}}},{"node":{"id":"c475fd02-f176-579c-95fe-6239eb80f8e1","timeToRead":6,"excerpt":"1. Index란? Index는 DB 분야에 있어서 테이블에 대한 동작의 속도를 높여주는 자료 구조를 일컫는다. Index는 테이블 내…","frontmatter":{"title":"DB Index 입문","date":"2021-09-18T12:00:00.000Z"},"fields":{"slug":"/post/2021-09-18-db-index/"}}},{"node":{"id":"de6fb05f-22a5-560a-b18f-ff6386474e65","timeToRead":3,"excerpt":"…","frontmatter":{"title":"Replication과 Clustering","date":"2021-09-18T12:00:00.000Z"},"fields":{"slug":"/post/2021-09-18-replication_clustering/"}}}]}},"pageContext":{"slug":"/post/2021-10-23-flyway/","prev":{"excerpt":"React Testing Library(이하 RTL)는 구현 기반의 테스트 도구인 Enzyme의 대안으로 자리 잡은 테스트 도구입니다. 따라서 RTL…","timeToRead":7,"frontmatter":{"title":"초심자를 위한 React Testing Library","tags":["react-testing-library"],"date":"2021-10-22T12:00:00.000Z","draft":false,"excerpt":null,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.7857142857142858,"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFBwn/xAAVAQEBAAAAAAAAAAAAAAAAAAADBf/aAAwDAQACEAMQAAAB57JzVQ0rxCGm/wD/xAAcEAACAQUBAAAAAAAAAAAAAAAEBQMBAgYQERL/2gAIAQEAAQUCGx6GdMsTBmhMhowzfV3OU1//xAAfEQACAgIBBQAAAAAAAAAAAAADBAECBRETEBIhIzH/2gAIAQMBAT8ByDirY8dRbHhSsmlVVggpmbPGgpCS2fxHunk7N/eOg6b0OOn/xAAfEQACAQIHAAAAAAAAAAAAAAABAgMQEhETIkFDYnL/2gAIAQIBAT8BijdDKWlaTMkvUNxi1VsXrpx9FjvT/8QAIhAAAwACAQQCAwAAAAAAAAAAAQIDBBIRABMhMQUjEFGR/9oACAEBAAY/An+QObjrbgMiHJiuo1s2jxP29w9tdE8UqDR4qyy+wZNaZa17jprLJ+FnNxsyyKjPzMa6EaMK8o6+ZspVW6tjRetJy7fD2ERQlozo3IxrXj4ZiF0q3KgE6sSo12bU+15OpP7K+uvQ/n4//8QAHBABAQACAgMAAAAAAAAAAAAAAREAITFBEFGx/9oACAEBAAE/IdwVt5505VcKNM61E2hkNwnIuMtIOYkA/YdwQ2SYRIHFFp0pTrKbUfaH6eP/2gAMAwEAAgADAAAAELzP/8QAFhEBAQEAAAAAAAAAAAAAAAAAAREA/9oACAEDAQE/EKlGwquA1uWrSXf/xAAYEQEAAwEAAAAAAAAAAAAAAAABEBExgf/aAAgBAgEBPxAHQpRTgrwY9Rx//8QAGhABAQEBAQEBAAAAAAAAAAAAAREhAFFBkf/aAAgBAQABPxCDqNdL3yGKeM49xFLzjpTVRVx7ClSKNJJfjoOoI0QDGKsNHKqYRRJ4qKTI5M4AIAB8AD8M119dd7//2Q==","sizes":"(max-width: 300px) 100vw, 300px","src":"/static/440824f617ce629da8ad75ab811a23b2/88b18/rtl.jpg","srcSet":"/static/440824f617ce629da8ad75ab811a23b2/88b18/rtl.jpg 300w"}}},"author":[{"id":"3기_카일","bio":"우아한테크코스 3기 카일(임광열)입니다 :)","avatar":{"children":[{"fluid":{"aspectRatio":0.7490636704119851,"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAbABQDASIAAhEBAxEB/8QAGQAAAwEBAQAAAAAAAAAAAAAAAAUICQYK/8QAFwEAAwEAAAAAAAAAAAAAAAAAAwQGBf/aAAwDAQACEAMQAAAB2EyP1ImpPVrg4wMj56WzqhCy1vCQBUf/xAAdEAACAwACAwAAAAAAAAAAAAAFBgIDBAEHERIi/9oACAEBAAEFAimzgfgofe2MhKWmHliPBQOOmOFhZ7rI+7WzG3Q8OSG+qxFKEzq1138t5sntzluqLJyAf//EACURAAICAQIEBwAAAAAAAAAAAAECBBEDEiEABRMiBhQjJDEy8P/aAAgBAwEBPwHlaQcyzvMvTYI/UAFduoGthbBmaglgKTtZscBVofP6uOSeH40+E8yTnk2ZDYWXHkAZj9uq2R1cvkfKQW1bAAt6jEARG9th1FmIQKWaizaO3Ux2tjVk0LO9Dj//xAAhEQACAgIBBAMAAAAAAAAAAAABEQIDBCESAAUiUSMxcf/aAAgBAgEBPwHOsurljCkD5reO3tcX6CTMi2AyFvrnIFa67n3S7GyYY9VdXlWJiU4lAsDiokKMYfS2TrxA3MOROtqS9cgCvzfX/8QAKxAAAgIBAwIFAgcAAAAAAAAAAQIDBAUREhMAIQYUIjEyFSMmUWFxgZHx/9oACAEBAAY/Art9kaRaNO3cMSfOQVYJJzGnv6n2bR2Omvt1D4jvzK1S3k8eX8HgVpII8RkIPMiOJtnmIbkFUiVQtg2d41njbXiHv/nTWc5k6WNrESDdbmWMzDQB1gi7zWGAYapAkjjUduqNrH5GCTFnS7GkUkTwXHgijVPKFX1ll4Yw7AAtHHyFx6Oj36lsXjYs2ZuUQV41Z9gjXekdaGMehY4gV2ovwXc24hm61q13q2ayw3hGuRiq2avmObhnC86cE7cDezLMN8avoX29UrOT1+rVXs4zK7wFc38dYkrSs4X08jqiPJt7cjMesZIPnHh/EUyH8pBj7CBu/Y+kkaHVf06+zKq+ar47nJgruX+4zAbpImKgNI7KFKhWYldD1lCW1/FOcP8ALyxSN/buzfuev//EABsQAQEAAwEBAQAAAAAAAAAAAAERACExQWGR/9oACAEBAAE/IfHimj0CAbCINSKILuCngYDoGFgZzTy6a5daZ37gR2Rwk1HLbiPcGbA9sr8R7x22fpv6uHdEA7QnWBCq4kyQgZuYI7smIEv9Y1JP4dToXZidFjEaWFRk8H1vF5CRT6oN1xclx7Sa2dJ57D6zWf/aAAwDAQACAAMAAAAQeN5N/8QAGhEBAQADAQEAAAAAAAAAAAAAAREAITFRcf/aAAgBAwEBPxB73ECQFqAFK9MAlJuD9tXp3Tzz3LBYIAUwYQ1IwGorfCG0AKe0PQh//8QAGxEBAQADAAMAAAAAAAAAAAAAAREAITFRgfD/2gAIAQIBAT8QTrhJqsSdDQACFi5RjOh4+9c1tA1QoSUWYhCgCxxAQEgoCCKwaBWGqwc//8QAGxABAQADAQEBAAAAAAAAAAAAAREAITFBELH/2gAIAQEAAT8QSl0qM0aZ7tXfIx+isLdiZxthle2aIshFBGpRCYeRhrNQ0NpiIgVg1gXDJHhTJJ9VbOrXvqr+7xUWlVpNBgZBEPAy1RgziMvYZfTbDEqKNjmhEJGEmUoOLlV5OxDB21x5UmHDKuAU6yjfiuiID//Z","sizes":"(max-width: 800px) 100vw, 800px","src":"/static/360bed096e3511555856e1aec316ffb5/2f1b1/kyle_2.jpg","srcSet":"/static/360bed096e3511555856e1aec316ffb5/fd013/kyle_2.jpg 200w,\n/static/360bed096e3511555856e1aec316ffb5/25252/kyle_2.jpg 400w,\n/static/360bed096e3511555856e1aec316ffb5/2f1b1/kyle_2.jpg 800w,\n/static/360bed096e3511555856e1aec316ffb5/b1cc5/kyle_2.jpg 960w"}}]}}]},"fields":{"layout":"post","slug":"/post/2021-10-22-react-testing-library/"}},"next":{"excerpt":"…","timeToRead":9,"frontmatter":{"title":"🔒 Java 로 동기화를 해보자!","tags":["java","synchronized","monitor"],"date":"2021-10-23T12:00:00.000Z","draft":false,"excerpt":null,"image":{"childImageSharp":{"fluid":{"aspectRatio":1.7850287907869482,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACOklEQVQoz22T20sUYRjG51/oJuqy6y66iKDoqhLCQgk1CirqRojwvsyiAr0QSpFIwW7SMpHwooskg9rCDqYdtotYNXV3W3MOOzsH9zDjzuHX7GlcqReeeb/vnW+e7z08I0iShCiKKIqM5xbBd/F9j5J5vo8TLF0fnBI8n8AF733qrbYveaEaKj+zFmQ23CqZVz3uYmdEsDeqH1XihmkQT6xibpjbSIXawtOiGB+vYLxvJ/97qhybkTyaInB6BprfQsdc6SLQNtOkLYWsk0Wx5GCvbmVYy97NzKO/O48eOUMu8RxTURmYSyP0mwi9yQAiu8byZcJ1K0H/wjWuz14M/FVkez2saosw/QF1+gTpqQayv8ZIraV5Nh3hSMs5Gs82czjAyY5O3KAjkp1iYm2Q4cVuJv48QLGlsB0hoadHKcxdoTDbjp16QWwpyZPxpxzfv49TRw/RcGAvbW2taFqWFW2BoeXb3Jm/zODyrYBQ/JewlKH2qhHt5THyK+PEV1OMvPnC7gvd7LnUw46WTg52PSqXLFkpHif7uR+7wWiy7/8ZuuosZqQV43UT+fgkKz9j3P2sIjwMJjfsIgz57JysSEi0kozG+xiIdjGSuBf2cHvJ5iJmtBfjWw+2/AlTN/kq23R+h5tR6PoBA7HKWbOokQkmm/NyqMHEzaJer0M/1Fa96YZOztQr+vMs5MQSOVXEcYrhRF1v6yeo0yFhur7nlFG6xLZtCpaFmc1TsDcRZYWMbgSETkhQj1rsLxjEEThRFlZVAAAAAElFTkSuQmCC","sizes":"(max-width: 2058px) 100vw, 2058px","src":"/static/ff6bf378623f4cbfe190196dcffdc476/1255e/java-monitor.png","srcSet":"/static/ff6bf378623f4cbfe190196dcffdc476/3a443/java-monitor.png 930w,\n/static/ff6bf378623f4cbfe190196dcffdc476/4d929/java-monitor.png 1860w,\n/static/ff6bf378623f4cbfe190196dcffdc476/1255e/java-monitor.png 2058w"}}},"author":[{"id":"3기_와일더","bio":"우아한테크코스 3기 와일더(강규한)입니다 :)","avatar":{"children":[{"fluid":{"aspectRatio":1,"base64":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAkHBgj/xAAXAQADAQAAAAAAAAAAAAAAAAACBAUD/9oADAMBAAIQAxAAAAHQZ31FjFidVnjMjYslxA1D0QTX/wD/xAAdEAACAwACAwAAAAAAAAAAAAADBQQGBwECCBMU/9oACAEBAAEFAvIqv1QvfT9PW6FzBpSAq4wQ2lWxB0Zw6ay0wKP0ijQ16dZNeyi/NJ//xAAiEQABAwMEAwEAAAAAAAAAAAABAhESAyIxAAQhQQVxsvD/2gAIAQMBAT8BmpVFVyQldSRpNc6EiKllsXqjczzMQ/NPceECES2VcqiJd3MHYmtyHxjjoY0cH0dfvnX/xAAkEQACAQIFBAMAAAAAAAAAAAABAhEDIQAEEiIxBRMyQWFxsf/aAAgBAgEBPwGiipURYYuiFBV1bd5kqgtfaJtPiAzenpdW1tGcy4GoxJUGJtI7VjHPz7OEuaU3un6MHk/eP//EACUQAAICAgIBBAIDAAAAAAAAAAIDAQQFERITAAYUISIjQRUWMf/aAAgBAQAGPwKh6zv5CxVymJUmm3Gqr+5DPo7DZUofLU+zbBG0XWuRLCowuxfaK9+kRTgm4P8ArOPKlZ53E2rdwGMQwuJCEAsFApnQLOUixxctB9fMc7A5b1dhcc+jXeuvjsotQvlwdnu7Ynd3N9okIWygFBLFfVQx5kctnKysjiEWJs4mvbj8bauK7HHZZPwZBccEt1vfUpP2gd7q234Mq1YX2YpZBVcq6ppOM3VqbNaF8DLGuCzYkrJRwQJ+2SA+JT6fpZO9iEtauo0cN/IgCx1+ELUoPkK/0MGUL3x+NcYr1lrDprr6lAQCUQERAcdTGpiRjiUa0Y7gomJ15iqlqlXdTKyuTqGoCqsCuNhiksRMdZVwmNQnjwgNhEcJmPLNeopFKsh7lIq01DWrJWthCIKSritYxEf4MRH78//EABoQAQEBAQADAAAAAAAAAAAAAAERIQAxQVH/2gAIAQEAAT8h0f7TeaPWjEF8GL1WWTsBnpcDgoqMIlhHQbLYt4enAUivka4ub+eZhUcxrh0TB6JO4rMEekAv6hL4l66i24w2F4q3M21BUY7FRiMgF55Yqr//2gAMAwEAAgADAAAAEFTvvv/EABkRAQEBAQEBAAAAAAAAAAAAAAERIUEAYf/aAAgBAwEBPxC8C/MkTFWFCgih8AjtRloYCgaRK6RhDHhnE58zxknzz//EABoRAQEBAAMBAAAAAAAAAAAAAAERIQAxQXH/2gAIAQIBAT8QpwNMaVK1KsEoJw53sIqUUdCKyD0QRCqXbrt73fu8SotVKvaqqr6rq+vP/8QAGBABAQEBAQAAAAAAAAAAAAAAAREAIRD/2gAIAQEAAT8Qr7C3diGqY+ZUdS3IJjcCleKQ2779zkgyL9vjVlHokukjZ4Llh9izKMFkNEfoiqpJxcT103aIE2qkN5xxa+7+0nMGqkqU6CBIPxsXUZz/2Q==","sizes":"(max-width: 800px) 100vw, 800px","src":"/static/243ab1ad810883935010beb8afcda2ef/2f1b1/wilder.jpg","srcSet":"/static/243ab1ad810883935010beb8afcda2ef/fd013/wilder.jpg 200w,\n/static/243ab1ad810883935010beb8afcda2ef/25252/wilder.jpg 400w,\n/static/243ab1ad810883935010beb8afcda2ef/2f1b1/wilder.jpg 800w,\n/static/243ab1ad810883935010beb8afcda2ef/0ff54/wilder.jpg 1200w,\n/static/243ab1ad810883935010beb8afcda2ef/c4b07/wilder.jpg 1440w"}}]}}]},"fields":{"layout":"post","slug":"/post/2021-10-23-java-synchronize/"}},"primaryTag":"database"}},"staticQueryHashes":["2130001345","4041952199"]}