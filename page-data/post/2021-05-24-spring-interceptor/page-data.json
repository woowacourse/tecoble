{"componentChunkName":"component---src-templates-post-tsx","path":"/post/2021-05-24-spring-interceptor/","result":{"data":{"logo":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#080808","images":{"fallback":{"src":"/static/0b18bd94a62a12fdc81ea720c28722f6/a9770/tecoble.png","srcSet":"/static/0b18bd94a62a12fdc81ea720c28722f6/a9770/tecoble.png 400w","sizes":"400px"},"sources":[{"srcSet":"/static/0b18bd94a62a12fdc81ea720c28722f6/65935/tecoble.webp 400w","type":"image/webp","sizes":"400px"}]},"width":500,"height":110}}},"markdownRemark":{"html":"<p>이번 글에서는 ArgumentResolver와 Interceptor를 사용할 때 spring이 요청을 처리하는 순서를 알아보고자 한다.<br>\n그 전에 ArgumentResolver는 무엇인지, Interceptor는 무엇인지 알아보도록 하자.</p>\n<hr>\n<h2>Spring ArgumentResolver</h2>\n<p>어떠한 요청이 컨트롤러에 들어왔을 때, 요청에 들어온 값으로부터 원하는 객체를 만들어내는 일을 <code class=\"language-text\">ArgumentResolver</code>이 간접적으로 해줄 수 있다.</p>\n<p>예를 들어, 어떤 사용자가 로그인 되어 있다고 가정하자.<br>\n사용자가 자신의 정보를 조회하거나 수정하는 것과 같은 민감한 요청을 하는 경우, 우리는 이 사용자가 올바른 사용자인지 확인을 해야 한다.<br>\n뿐만 아니라, 사용자가 가진 토큰이 유효한 토큰인지 검증을 거친 후에 토큰에 저장된 id를 꺼내 <code class=\"language-text\">LoginMember</code>라는 객체로 만들어내는 과정이 필요하다.<br>\n<code class=\"language-text\">ArgumentResolver</code>를 사용하지 않을 때는 다음과 같이 구현할 수 있을 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/me\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MemberResponse</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">getMemberOfMine</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">String</span> token <span class=\"token operator\">=</span> <span class=\"token class-name\">AuthorizationExtractor</span><span class=\"token punctuation\">.</span><span class=\"token function\">extract</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>jwtTokenProvider<span class=\"token punctuation\">.</span><span class=\"token function\">isValidToken</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">InvalidTokenException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token class-name\">String</span> id <span class=\"token operator\">=</span> jwtTokenProvider<span class=\"token punctuation\">.</span><span class=\"token function\">getPayLoad</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">LoginMember</span> loginMember <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LoginMember</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Long</span><span class=\"token punctuation\">.</span><span class=\"token function\">parseLong</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token class-name\">MemberResponse</span> memberResponse <span class=\"token operator\">=</span> memberService<span class=\"token punctuation\">.</span><span class=\"token function\">findMember</span><span class=\"token punctuation\">(</span>loginMember<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span>memberResponse<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>하지만 위와 같이 검증과 관련된 코드가 Controller에 존재할 때는 사용자 검증이 필요한 모든 메서드에 같은 코드가 중복될 뿐만 아니라 Controller에서 수행하는 책임이 증가한다는 문제가 존재한다.<br>\n뿐만 아니라 이 경우에 MemberController가 MemberService뿐만 아니라 JwtTokenProvider에도 의존해야 하기도 한다.<br>\n이러한 문제를 ArgumentResolver의 사용을 통해 해결할 수 있다.</p>\n<hr>\n<h3>ArgumentResolver의 사용</h3>\n<p>ArgumentResolver는 <code class=\"language-text\">HandlerMethodArgumentResolver</code>를 구현함으로써 시작된다.<br>\nSpring에서 설명하는 HandlerMethodArgumentResolver는 다음과 같다.</p>\n<blockquote>\n<p>Strategy interface for resolving method parameters into argument values in the context of a given.</p>\n</blockquote>\n<p>Spring에서는 ArgumentResolver를 하나의 <code class=\"language-text\">전략 인터페이스</code>로 설명하고 있다.<br>\n인터페이스는 아래 두 메서드를 구현하도록 명시하고 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">boolean</span> <span class=\"token function\">supportsParameter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MethodParameter</span> parameter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Nullable</span>\n<span class=\"token class-name\">Object</span> <span class=\"token function\">resolveArgument</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MethodParameter</span> parameter<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@Nullable</span> <span class=\"token class-name\">ModelAndViewContainer</span> mavContainer<span class=\"token punctuation\">,</span> <span class=\"token class-name\">NativeWebRequest</span> webRequest<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@Nullable</span> <span class=\"token class-name\">WebDataBinderFactory</span> binderFactory<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>간단히 설명하자면 우리는 원하는 ArgumentResolver가 실행되길 원하는 Parameter의 앞에 특정 어노테이션을 생성해 붙인다.<br>\n<code class=\"language-text\">supportsParameter</code>는 요청받은 메서드의 인자에 원하는 어노테이션이 붙어있는지 확인하고 원하는 어노테이션을 포함하고 있으면 true를 반환한다.<br>\n<code class=\"language-text\">resolveArgument</code>는 <code class=\"language-text\">supportsParameter</code>에서 true를 받은 경우, 즉, 특정 어노테이션이 붙어있는 어느 메서드가 있는 경우 parameter가 원하는 형태로 정보를 바인딩하여 반환하는 메서드이다.</p>\n<p>이렇게 <a href=\"https://www.baeldung.com/spring-mvc-custom-data-binder\">ArgumentResolver</a>를 사용했을 때 Controller의 구현은 아래와 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">  <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/me\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">MemberResponse</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">findMemberOfMine</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@AuthenticationPrincipal</span> <span class=\"token class-name\">LoginMember</span> loginMember<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token class-name\">MemberResponse</span> memberResponse <span class=\"token operator\">=</span> memberService<span class=\"token punctuation\">.</span><span class=\"token function\">findMember</span><span class=\"token punctuation\">(</span>loginMember<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">body</span><span class=\"token punctuation\">(</span>memberResponse<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>이렇게 함으로써 검증의 책임을 Controller가 직접적으로 가지지 않도록 할 수 있다.<br>\n게다가 어노테이션만 붙여주면 유효한 토큰을 사용하는 것이 검증된 사용자가 필요한 정보(id)를 가지고 필요한 객체로 나오므로 편리하고 간단한 구현을 할 수 있다.</p>\n<hr>\n<h2>Spring Interceptor</h2>\n<p>우리가 블로그를 운영하고 있다고 가정해보자.\n블로그에 글을 작성할 수 있는 사람은 한정되어 있다.\n글에 댓글을 달 수 있는 사람 또한 로그인 된 회원만 작성할 수 있다.</p>\n<p>이 경우는 위처럼 객체를 반환할 필요가 없다.<br>\n인가된 회원인 경우에 행위를 실행시켜주면 되고, 아니라면 하고자 하는 행위를 못하도록 하면 된다.<br>\nInterceptor를 사용하지 않을 때의 Controller 구현은 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">  <span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/blog\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Void</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">postBlog</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token class-name\">String</span> accessToken <span class=\"token operator\">=</span> <span class=\"token class-name\">AuthorizationExtractor</span><span class=\"token punctuation\">.</span><span class=\"token function\">extract</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>jwtTokenProvider<span class=\"token punctuation\">.</span><span class=\"token function\">validateToken</span><span class=\"token punctuation\">(</span>accessToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">noContent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">badRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>하지만 이는 ArgumentResolver 때와 같은 문제를 갖는다.<br>\n이 또한 <code class=\"language-text\">Spring HandlerInterceptor</code>를 이용해 해결할 수 있다.</p>\n<hr>\n<h3>Spring Interceptor의 사용</h3>\n<blockquote>\n<p>Intercept the execution of a handler.</p>\n</blockquote>\n<p>Handler의 실행을 가로챈다.<br>\nSpring 공식 문서에서 정의하고 있는 HandlerInterceptor이다.<br>\n우리는 Interceptor를 <code class=\"language-text\">HandlerInterceptor</code> 인터페이스를 구현하여 사용할 수 있다.<br>\n인터페이스는 <code class=\"language-text\">preHandle</code>, <code class=\"language-text\">postHandle</code>, <code class=\"language-text\">afterCompletion</code>을 구현하도록 명시되어 있다.<br>\npreHandle은 조건에 맞는지 boolean을 반환해 true면 실행하고 false면 실행하지 않도록 한다.<br>\npostHandle과 afterCompletion은 실행 후에 추가적으로 공통된 처리를 하고 싶을 때 사용한다.</p>\n<p>Interceptor는 적용하고자 하는 url를 직접 추가해줌으로써 구현된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">  <span class=\"token annotation punctuation\">@Override</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">addInterceptors</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">InterceptorRegistry</span> registry<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      registry<span class=\"token punctuation\">.</span><span class=\"token function\">addInterceptor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">LoginInterceptor</span><span class=\"token punctuation\">(</span>jwtTokenProvider<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">addPathPatterns</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/blog\"</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">excludePathPatterns</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/login/token\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>이처럼 특정 url을 추가할 수도, 제외할 수도 있다.<br>\n이렇게 <a href=\"https://www.baeldung.com/spring-mvc-handlerinterceptor\">Interceptor</a>를 설정해주고 나면 컨트롤러는 다음과 같이 간단해진다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">  <span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/blog\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Void</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">postBlog</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token punctuation\">.</span><span class=\"token function\">noContent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>만일 사용자가 올바른 유저인지, 관리자인지, 작성자인지에 따라 요청을 실행할 수 있는지가 결정된다면, Interceptor에 메서드를 추가해 검증을 거쳐야만 요청을 실행하도록 처리할 수 있다.<br>\n어떠한 요청을 실행한 후에 공통된 처리가 필요한 경우에도 postHandle, afterCompletion과 같은 메서드를 적용해 인터셉터를 사용할 수 있다.<br>\n인터셉터를 사용하면 코드의 중복도 제거할 수 있고, Controller에 직접적으로 책임을 주지 않을 수도 있다.</p>\n<hr>\n<h2>Spring의 요청 처리 과정</h2>\n<p>그렇다면 이러한 ArgumentResolver와 Interceptor를 Spring이 어떠한 방식으로 처리하는 걸까?\n간단한 그림으로 spring의 처리 방식을 표현해보았다.<br>\n<img src=\"src/content/images/2021-05-24-spring-flow.png\" alt=\"spring_flow\">\n간단한 spring의 동작 방식은 다음과 같다.</p>\n<ol>\n<li>요청이 들어온다.</li>\n<li>filter가 작동한다. 이와 관련한 부분은 <a href=\"https://spring.io/guides/topicals/spring-security-architecture/\">spring-security</a>에서 자세히 확인할 수 있다.</li>\n<li>DispatcherServlet에 전달된다. DispatcherServlet이란, Spring의 핵심 객체로, Client의 요청을 받고 응답을 주기까지의 모든 역할을 담당한다.</li>\n<li>DispatcherServlet은 HandlerMapping을 통해 요청을 처리할 Controller를 찾는다.<br>\n<em>이 때, Controller를 찾고 Interceptor가 확인할 url과 일치하면 Interceptor의 preHandle이 실행된다.</em></li>\n<li>DispatcherServlet은 Controller를 실행해줄 HandlerAdapter를 찾는다.<br>\n<em>이 때, Adapter를 찾고 handle을 실행하기 위해 필요한 파라미터를 생성하기 위해 Resolver는 실행된다.</em></li>\n<li>HandlerAdapter는 Controller를 실행한다.<br>\n<em>이 때, Interceptor의 postHandle이 실행된다.</em></li>\n<li>DispatcherServlet은 실행한 결과를 ViewResolver에게 전달한다.</li>\n<li>ViewResolver는 View에 전달한다.<br>\n<em>이 때, Interceptor의 afterCompletion 실행된다.</em></li>\n<li>DispatcherServletdms View로부터 받은 정보를 Client에 전달한다.</li>\n<li>응답을 반환한다.</li>\n</ol>\n<hr>\n<h2>마치며</h2>\n<p>ArgumentResolver와 Interceptor는 Spring Framework가 제공해주는 편리한 기능이다.<br>\nController와 같은 객체에 과한 책임을 주기보다는 Interceptor, Resolver와 같은 제 3자의 개입으로 중복되는 로직을 처리해보는 것은 어떨까?</p>","htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이번 글에서는 ArgumentResolver와 Interceptor를 사용할 때 spring이 요청을 처리하는 순서를 알아보고자 한다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n그 전에 ArgumentResolver는 무엇인지, Interceptor는 무엇인지 알아보도록 하자."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Spring ArgumentResolver"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"어떠한 요청이 컨트롤러에 들어왔을 때, 요청에 들어온 값으로부터 원하는 객체를 만들어내는 일을 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ArgumentResolver"}]},{"type":"text","value":"이 간접적으로 해줄 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"예를 들어, 어떤 사용자가 로그인 되어 있다고 가정하자."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n사용자가 자신의 정보를 조회하거나 수정하는 것과 같은 민감한 요청을 하는 경우, 우리는 이 사용자가 올바른 사용자인지 확인을 해야 한다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n뿐만 아니라, 사용자가 가진 토큰이 유효한 토큰인지 검증을 거친 후에 토큰에 저장된 id를 꺼내 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"LoginMember"}]},{"type":"text","value":"라는 객체로 만들어내는 과정이 필요하다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ArgumentResolver"}]},{"type":"text","value":"를 사용하지 않을 때는 다음과 같이 구현할 수 있을 것이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@GetMapping"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/me\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ResponseEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","generics"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MemberResponse"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getMemberOfMine"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"HttpServletRequest"}]},{"type":"text","value":" request"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" token "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"AuthorizationExtractor"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"extract"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"request"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"if"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"!"}]},{"type":"text","value":"jwtTokenProvider"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"isValidToken"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"token"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"throw"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"InvalidTokenException"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" id "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" jwtTokenProvider"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getPayLoad"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"token"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"LoginMember"}]},{"type":"text","value":" loginMember "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"LoginMember"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Long"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"parseLong"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"id"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n  "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MemberResponse"}]},{"type":"text","value":" memberResponse "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" memberService"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findMember"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"loginMember"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getId"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ResponseEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"ok"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"body"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"memberResponse"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"하지만 위와 같이 검증과 관련된 코드가 Controller에 존재할 때는 사용자 검증이 필요한 모든 메서드에 같은 코드가 중복될 뿐만 아니라 Controller에서 수행하는 책임이 증가한다는 문제가 존재한다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n뿐만 아니라 이 경우에 MemberController가 MemberService뿐만 아니라 JwtTokenProvider에도 의존해야 하기도 한다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n이러한 문제를 ArgumentResolver의 사용을 통해 해결할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"ArgumentResolver의 사용"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ArgumentResolver는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"HandlerMethodArgumentResolver"}]},{"type":"text","value":"를 구현함으로써 시작된다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\nSpring에서 설명하는 HandlerMethodArgumentResolver는 다음과 같다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Strategy interface for resolving method parameters into argument values in the context of a given."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Spring에서는 ArgumentResolver를 하나의 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"전략 인터페이스"}]},{"type":"text","value":"로 설명하고 있다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n인터페이스는 아래 두 메서드를 구현하도록 명시하고 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"boolean"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"supportsParameter"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MethodParameter"}]},{"type":"text","value":" parameter"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n\n"},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Nullable"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Object"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"resolveArgument"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MethodParameter"}]},{"type":"text","value":" parameter"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Nullable"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ModelAndViewContainer"}]},{"type":"text","value":" mavContainer"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"NativeWebRequest"}]},{"type":"text","value":" webRequest"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":","}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Nullable"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"WebDataBinderFactory"}]},{"type":"text","value":" binderFactory"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"throws"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Exception"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"간단히 설명하자면 우리는 원하는 ArgumentResolver가 실행되길 원하는 Parameter의 앞에 특정 어노테이션을 생성해 붙인다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"supportsParameter"}]},{"type":"text","value":"는 요청받은 메서드의 인자에 원하는 어노테이션이 붙어있는지 확인하고 원하는 어노테이션을 포함하고 있으면 true를 반환한다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"resolveArgument"}]},{"type":"text","value":"는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"supportsParameter"}]},{"type":"text","value":"에서 true를 받은 경우, 즉, 특정 어노테이션이 붙어있는 어느 메서드가 있는 경우 parameter가 원하는 형태로 정보를 바인딩하여 반환하는 메서드이다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이렇게 "},{"type":"element","tagName":"a","properties":{"href":"https://www.baeldung.com/spring-mvc-custom-data-binder"},"children":[{"type":"text","value":"ArgumentResolver"}]},{"type":"text","value":"를 사용했을 때 Controller의 구현은 아래와 같다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@GetMapping"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/me\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ResponseEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","generics"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MemberResponse"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findMemberOfMine"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@AuthenticationPrincipal"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"LoginMember"}]},{"type":"text","value":" loginMember"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"MemberResponse"}]},{"type":"text","value":" memberResponse "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" memberService"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"findMember"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"loginMember"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"getId"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ResponseEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"ok"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"body"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"memberResponse"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이렇게 함으로써 검증의 책임을 Controller가 직접적으로 가지지 않도록 할 수 있다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n게다가 어노테이션만 붙여주면 유효한 토큰을 사용하는 것이 검증된 사용자가 필요한 정보(id)를 가지고 필요한 객체로 나오므로 편리하고 간단한 구현을 할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Spring Interceptor"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"우리가 블로그를 운영하고 있다고 가정해보자.\n블로그에 글을 작성할 수 있는 사람은 한정되어 있다.\n글에 댓글을 달 수 있는 사람 또한 로그인 된 회원만 작성할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이 경우는 위처럼 객체를 반환할 필요가 없다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n인가된 회원인 경우에 행위를 실행시켜주면 되고, 아니라면 하고자 하는 행위를 못하도록 하면 된다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\nInterceptor를 사용하지 않을 때의 Controller 구현은 다음과 같다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@PostMapping"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/blog\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ResponseEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","generics"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Void"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"postBlog"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"HttpServletRequest"}]},{"type":"text","value":" request"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"String"}]},{"type":"text","value":" accessToken "},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"AuthorizationExtractor"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"extract"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"request"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"if"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"jwtTokenProvider"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"validateToken"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"accessToken"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n          "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ResponseEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"noContent"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"build"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"\n      "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ResponseEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"badRequest"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"build"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"하지만 이는 ArgumentResolver 때와 같은 문제를 갖는다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n이 또한 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"Spring HandlerInterceptor"}]},{"type":"text","value":"를 이용해 해결할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{},"children":[{"type":"text","value":"Spring Interceptor의 사용"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Intercept the execution of a handler."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Handler의 실행을 가로챈다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\nSpring 공식 문서에서 정의하고 있는 HandlerInterceptor이다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n우리는 Interceptor를 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"HandlerInterceptor"}]},{"type":"text","value":" 인터페이스를 구현하여 사용할 수 있다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n인터페이스는 "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"preHandle"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"postHandle"}]},{"type":"text","value":", "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"afterCompletion"}]},{"type":"text","value":"을 구현하도록 명시되어 있다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\npreHandle은 조건에 맞는지 boolean을 반환해 true면 실행하고 false면 실행하지 않도록 한다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\npostHandle과 afterCompletion은 실행 후에 추가적으로 공통된 처리를 하고 싶을 때 사용한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Interceptor는 적용하고자 하는 url를 직접 추가해줌으로써 구현된다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@Override"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"void"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"addInterceptors"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"InterceptorRegistry"}]},{"type":"text","value":" registry"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n      registry"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"addInterceptor"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"new"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"LoginInterceptor"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"text","value":"jwtTokenProvider"},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n          "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"addPathPatterns"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/blog\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n          "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"excludePathPatterns"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/login/token\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"이처럼 특정 url을 추가할 수도, 제외할 수도 있다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n이렇게 "},{"type":"element","tagName":"a","properties":{"href":"https://www.baeldung.com/spring-mvc-handlerinterceptor"},"children":[{"type":"text","value":"Interceptor"}]},{"type":"text","value":"를 설정해주고 나면 컨트롤러는 다음과 같이 간단해진다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"java"},"children":[{"type":"element","tagName":"pre","properties":{"className":["language-java"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-java"]},"children":[{"type":"text","value":"  "},{"type":"element","tagName":"span","properties":{"className":["token","annotation","punctuation"]},"children":[{"type":"text","value":"@PostMapping"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","string"]},"children":[{"type":"text","value":"\"/blog\""}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"public"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ResponseEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","generics"]},"children":[{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"<"}]},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"Void"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":">"}]}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"postBlog"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"{"}]},{"type":"text","value":"\n    "},{"type":"element","tagName":"span","properties":{"className":["token","keyword"]},"children":[{"type":"text","value":"return"}]},{"type":"text","value":" "},{"type":"element","tagName":"span","properties":{"className":["token","class-name"]},"children":[{"type":"text","value":"ResponseEntity"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"noContent"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"."}]},{"type":"element","tagName":"span","properties":{"className":["token","function"]},"children":[{"type":"text","value":"build"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"("}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":")"}]},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":";"}]},{"type":"text","value":"\n  "},{"type":"element","tagName":"span","properties":{"className":["token","punctuation"]},"children":[{"type":"text","value":"}"}]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"만일 사용자가 올바른 유저인지, 관리자인지, 작성자인지에 따라 요청을 실행할 수 있는지가 결정된다면, Interceptor에 메서드를 추가해 검증을 거쳐야만 요청을 실행하도록 처리할 수 있다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n어떠한 요청을 실행한 후에 공통된 처리가 필요한 경우에도 postHandle, afterCompletion과 같은 메서드를 적용해 인터셉터를 사용할 수 있다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n인터셉터를 사용하면 코드의 중복도 제거할 수 있고, Controller에 직접적으로 책임을 주지 않을 수도 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"Spring의 요청 처리 과정"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"그렇다면 이러한 ArgumentResolver와 Interceptor를 Spring이 어떠한 방식으로 처리하는 걸까?\n간단한 그림으로 spring의 처리 방식을 표현해보았다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"img","properties":{"src":"src/content/images/2021-05-24-spring-flow.png","alt":"spring_flow"},"children":[]},{"type":"text","value":"\n간단한 spring의 동작 방식은 다음과 같다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"요청이 들어온다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"filter가 작동한다. 이와 관련한 부분은 "},{"type":"element","tagName":"a","properties":{"href":"https://spring.io/guides/topicals/spring-security-architecture/"},"children":[{"type":"text","value":"spring-security"}]},{"type":"text","value":"에서 자세히 확인할 수 있다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"DispatcherServlet에 전달된다. DispatcherServlet이란, Spring의 핵심 객체로, Client의 요청을 받고 응답을 주기까지의 모든 역할을 담당한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"DispatcherServlet은 HandlerMapping을 통해 요청을 처리할 Controller를 찾는다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"이 때, Controller를 찾고 Interceptor가 확인할 url과 일치하면 Interceptor의 preHandle이 실행된다."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"DispatcherServlet은 Controller를 실행해줄 HandlerAdapter를 찾는다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"이 때, Adapter를 찾고 handle을 실행하기 위해 필요한 파라미터를 생성하기 위해 Resolver는 실행된다."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"HandlerAdapter는 Controller를 실행한다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"이 때, Interceptor의 postHandle이 실행된다."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"DispatcherServlet은 실행한 결과를 ViewResolver에게 전달한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"ViewResolver는 View에 전달한다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"이 때, Interceptor의 afterCompletion 실행된다."}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"DispatcherServletdms View로부터 받은 정보를 Client에 전달한다."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"응답을 반환한다."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"hr","properties":{},"children":[]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{},"children":[{"type":"text","value":"마치며"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"ArgumentResolver와 Interceptor는 Spring Framework가 제공해주는 편리한 기능이다."},{"type":"element","tagName":"br","properties":{},"children":[]},{"type":"text","value":"\nController와 같은 객체에 과한 책임을 주기보다는 Interceptor, Resolver와 같은 제 3자의 개입으로 중복되는 로직을 처리해보는 것은 어떨까?"}]}],"data":{"quirksMode":false}},"excerpt":"이번 글에서는 ArgumentResolver와 Interceptor를 사용할 때 spring이 요청을 처리하는 순서를 알아보고자 한다. 그 전에 ArgumentResolver는 무엇인지, Interceptor는 무엇인지 알아보도록 하자. Spring…","timeToRead":3,"frontmatter":{"title":"Spring ArgumentResolver와 Interceptor","userDate":"22 May 2021","date":"2021-05-22T12:00:00.000Z","tags":["spring"],"excerpt":null,"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA00lEQVR42qVRSwsBURSe325taWFhYUVSamIWyiPFVV6ZPKKMjGkQybgxw32c6xolasjjLE7nO4++c76jiD9MeQQgBAcGwH8Zfmvwchj8muNt1GG0t0LiugJnQKU/MfdEXRlQTgAgkPmazQwi8U6ov0IuwTUz27Dy1ZlanqZLRkrCll2wnPGd6WlteSoyc6N108aGRw8lI50bxepzrbustO0iMrWkHp7thrfOAOYjwYVJYrLVZUz4+XDeM2C3MuN0gY07/FawD9T2XwUv5IafXxXAfAHa6EQHCf70GQAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/f11e41fcb46e962e898e8816ba02d5f5/a6312/spring.png","srcSet":"/static/f11e41fcb46e962e898e8816ba02d5f5/e7dcc/spring.png 750w,\n/static/f11e41fcb46e962e898e8816ba02d5f5/50eb2/spring.png 1080w,\n/static/f11e41fcb46e962e898e8816ba02d5f5/a6312/spring.png 1200w","sizes":"100vw"},"sources":[{"srcSet":"/static/f11e41fcb46e962e898e8816ba02d5f5/06049/spring.avif 750w,\n/static/f11e41fcb46e962e898e8816ba02d5f5/0f115/spring.avif 1080w,\n/static/f11e41fcb46e962e898e8816ba02d5f5/5b80a/spring.avif 1200w","type":"image/avif","sizes":"100vw"},{"srcSet":"/static/f11e41fcb46e962e898e8816ba02d5f5/ee7ce/spring.webp 750w,\n/static/f11e41fcb46e962e898e8816ba02d5f5/819dc/spring.webp 1080w,\n/static/f11e41fcb46e962e898e8816ba02d5f5/f9756/spring.webp 1200w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.5}}},"author":[{"name":"3기_샐리","bio":"우아한테크코스 3기 샐리(조연우)입니다 :)","avatar":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","backgroundColor":"#080808","images":{"fallback":{"src":"/static/ba249e85aac189b0502152a59cb4a8cf/a8b52/sally.png","srcSet":"/static/ba249e85aac189b0502152a59cb4a8cf/f31ef/sally.png 40w,\n/static/ba249e85aac189b0502152a59cb4a8cf/1f8a1/sally.png 80w,\n/static/ba249e85aac189b0502152a59cb4a8cf/a8b52/sally.png 120w","sizes":"100vw"},"sources":[{"srcSet":"/static/ba249e85aac189b0502152a59cb4a8cf/e73fe/sally.webp 40w,\n/static/ba249e85aac189b0502152a59cb4a8cf/61ca6/sally.webp 80w,\n/static/ba249e85aac189b0502152a59cb4a8cf/507b0/sally.webp 120w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":1}}}}],"source":null}},"relatedPosts":{"totalCount":32,"edges":[{"node":{"id":"8a459858-1bca-5b40-bb2f-c8450cc8b5d6","timeToRead":5,"excerpt":"…","frontmatter":{"title":"@Configuration은 어떻게 빈을 등록하고, 싱글톤으로 관리할까?","date":"2023-06-28T12:00:00.000Z"},"fields":{"slug":"/post/2023-05-22-configuration/"}}},{"node":{"id":"9e041370-5677-52ea-ac38-aa071cd5cdd6","timeToRead":4,"excerpt":"콘솔 애플리케이션을 구현할 때, 우리는 예외를 핸들링하기 위해 try / catch…","frontmatter":{"title":"ExceptionHandler와 ControllerAdvice를 알아보자","date":"2023-05-21T12:00:00.000Z"},"fields":{"slug":"/post/2023-05-03-ExceptionHandler-ControllerAdvice/"}}},{"node":{"id":"68a8791f-9973-50b4-8c17-9a2edbe75c58","timeToRead":7,"excerpt":"상황 스모디 프로젝트를 하면서 랭킹 기능을 도입하기로 했습니다. 랭킹 기능은 유저가 활동을 했을 때, 활동에 따라 랭킹 점수를 부여해야 합니다. 저희 서비스는 챌린지에 도전하고 매일 챌린지에 해당하는 활동을 인증하여 총…","frontmatter":{"title":"스프링 이벤트 적용기","date":"2022-11-14T13:10:00.000Z"},"fields":{"slug":"/post/2022-11-14-spring-event/"}}},{"node":{"id":"895ac54c-c1c3-508d-b88a-7542dc458eb2","timeToRead":7,"excerpt":"…","frontmatter":{"title":"Spring에서 Server-Sent-Events 구현하기","date":"2022-10-11T12:00:00.000Z"},"fields":{"slug":"/post/2022-10-11-server-sent-events/"}}},{"node":{"id":"c209a85e-6260-50e5-b817-48f63e9796b4","timeToRead":5,"excerpt":"이 글은 웹 소켓으로 만든 채팅방을 어떻게 테스트할지 고민하는 독자를 위해 작성되었다. 웹 소켓은 어떻게 테스트하면 좋을까? Babble…","frontmatter":{"title":"웹 소켓에 대해 알아보자! - 테스트 편","date":"2021-11-10T12:00:00.000Z"},"fields":{"slug":"/post/2021-11-10-web-socket-test/"}}}]}},"pageContext":{"slug":"/post/2021-05-24-spring-interceptor/","prev":{"excerpt":"이번 글에서는 “HTML…","timeToRead":3,"frontmatter":{"title":"HTML <form> 잘 쓰는 법.","tags":["html","form"],"date":"2021-05-22T12:00:00.000Z","draft":false,"excerpt":null,"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAADEElEQVR42i2TWVPbWBCFNUAwYFuysSVZsizLmxYvkjHe4g1v7FAkGUiYhCmYYl5SqZr///bNxeShq+/Dra9O9zkt/XW+oFN3if2xTTqp4FZq6FkVs2Bx3tG5+3zL07d/uZ08UnCOsZttcnICRZaRE0lkObl5J+JxDvYOkB5WU1a9I+I7MZSDJIEXYGk5TFXlLIjx/O2W19efPF7fc3f+wqFTJV6rUyhVaTRCNM0QoAQH+6L29pFuuj4XnYD0fpxELE7dF58Nk5ym8bGs8fXTBYuTBVHVp7da4c/WFBfXlCYrztZXBA2HKDII6jrFooG09DQWbg5DSRPb2qURNLGtAnkBNFSL01aWp+sBi88/8B9/sb68J5ouMIZznOmafsmja5fpF9JEDQ9pWlNZ+znswwzb0hYtMYZTLGJq6maX9YpGp1kj6o7oHXUxg5B9v41eqLBr2GRklXQ8RUaRN7uUhqUMK0+nor4D3apLqexQyRVpHPUpLnuUTzyGY4t+06Yb5vki3rORx2RQZjotU65axBPCmEQCqWNnWLoafi67AZadMp7rouctfL/BethlfFRm+XCDd/9E9/sr99+/cnc95fJqScnRUIUYRVE2rkv1fJpZJUPTzPJB2sYyLeFeU7iXxbIdmoUiNTeDP3LwQ0eozDMf+9hhn6jdo1L1NtFJpQQw+QY0FSZOiiifZVcAc1mNsBWS1TUs0aedFqPIpD9x6X95YPr0zODHM9X+iHq9jpnPk0qnBDD1DpwHNksvR6+ob4CZVJowam8UGmqWlmUzL4csOhPmwzW1jyOOP45RUzLpzCFZkdf0G1D5rfCfsznP6zHX3Rb7WzvIB3GazRY5Q0fXVUa2zkXTYXZxSm0wQhNuh/U2gYjXeDbHE4fwPvJvhT/vrvjvzxv+Xp8gx/bY+7ArgCGmmUMXeTQci5Z7iO/lBbBIfVZj2PeZdl1eLo/xxCEkhbtvCt+69Hp5yq+7S16EUk1YvyNJRGEbxzI5dAOOjxrcNir4opcmDczBMdpggNcV7vdELsVVpWRlU3I8wf99A3gF1AFEXQAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/348a6c1ea3a4fa8b6990e3e3bf4e8490/20435/sample2.png","srcSet":"/static/348a6c1ea3a4fa8b6990e3e3bf4e8490/ea847/sample2.png 750w,\n/static/348a6c1ea3a4fa8b6990e3e3bf4e8490/4a806/sample2.png 1080w,\n/static/348a6c1ea3a4fa8b6990e3e3bf4e8490/e2aad/sample2.png 1366w,\n/static/348a6c1ea3a4fa8b6990e3e3bf4e8490/20435/sample2.png 1920w","sizes":"100vw"},"sources":[{"srcSet":"/static/348a6c1ea3a4fa8b6990e3e3bf4e8490/57584/sample2.webp 750w,\n/static/348a6c1ea3a4fa8b6990e3e3bf4e8490/984df/sample2.webp 1080w,\n/static/348a6c1ea3a4fa8b6990e3e3bf4e8490/4a276/sample2.webp 1366w,\n/static/348a6c1ea3a4fa8b6990e3e3bf4e8490/9c00f/sample2.webp 1920w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.6666666666666666}}},"author":[{"name":"3기_심바","bio":"우아한테크코스 3기 심바(임선빈)입니다 :)","avatar":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFUUlEQVR42g2U2W9bZRrGPapGcFGJkeYCEBJcVGguGGlY2lJK18SJneMlXs/xcrzGzrETO2kcZ7cT7MRJE2d16jpJ28Rpuo1ppmQKoymIGRUVVWIrLYJRO6O56ogLNPwJ/PguPr137/e8z6Zr7WmjOdFKa9LA4Hyc4nqMkXkvkWE3oZxMMufGn7XR+Z6HZEElmPegj7bhG5KRRy24hyws7MyR3YySqjjRNXW2YkvZCZacjK4F6F8JEl5y4Zy04JqwYh5rQxo34i6bUEpmXFPtyGMWspciDDXCZBo+Eosa2nyA0U0NnTKgkF4Kkqy6xS9e0nUv2Q9DlP4RI3PLT9+HAXKfRen+SKXnAx+Ruoy27mbshpfMZQ/RHReOKSuBWTeeogPd7F4/g9thkhtepv4ep/C3CH27QZYfpqk+6ab8724mH0QI3pbpu6Oi3fTQd1ll+9MxCrc1bOcsjNwMMHU7QN9qBzrtkkzmeohgVSWzFya6raCf0ONp2Fn5TwrtnsL0kw5iHztxXHOj7UaIXfXS0+hEu6QKOsz0bsvU7sZZ2cujcxTbSewEcC3aOdJ9isCOwswnfroFBebdKI3H53n6/z0aT2/x6d1eqlUjgboQatFBqOzEe1a8BRtTHwTpu6gIhHUfsbofb83FQfUoLjFnGmbu5V/h+38O8vTLbX55NMFPDyr8tGumXHiTyKyDbiFc7moAU9FIrOZl4orgf82NzlQ0o+/RC/gKlpKN1JaXxLKZNe05Hs/t5375ZX5+/yBPP7Jyb8eAL9tMcMiKtuwUC1R8RQn/nEPwpxIvCVGskyZaE02oRQtaSaar5sZ+1kS0JrFa+SPfbx7gh9Xj/PeCiY3LVt7wnyQ55+SMENEt7NQllg2WQmSqHXhnbOjUBSvWYQPpTZneDQX3io3IhgNVnD62JfNd9SXuzB7gi/OHWG54SW75WP0kRvFmJ+ZhCa3oYmDBiz1vR8pb0IVXZTrE7f1XfPS8HyD5F8GnMHHXlsJfrx7jfxdf5NuNP/Dj9qvs/lmYu2Zj4kaQtDhxYC1Jb0XBVTBjHbHRPGFAl171EtsQdqjJSNMStrKZ9lwrypSPy8uv813tBb7eOsK/qvu5svQab6b0AkkztmkTyQsBOkQQ2sYlDD1GEpWkUHnGJTIYIlIWtlGOIYlcH+06SXHNz+PGYR6t7uebi6/z1fxvedhoZrmeZPHjTtIbfuSzdgylNvQjLRgyRuLlEDopZcSfCxMpedByCmNiHg8fp3e0hW8qz/PF/D6+Wn6ez2ef4f70s+xdP0Vd2Mk9bSWcl1AnJSIXnMgCUNNAEzpDUo+xX8LVZyc6F2Z6PU0wa2KuGmS3dpQH5X18efY3XBn/PZXU77hWb8IhyuF0poncRT+ZFQddFR9DlQCWESGKO2ejeyFIcERGnxQpmFOJippaF+0xW9DzZPttfr76KrcW3yKVOU1++BSevAmnQDh2LYRl3IQv52KwGGFgsVO0TVYmezPE7F4vk5tx2gtG5CGJdNaB1f8uPs9bLGZOkkm8wzvOd2nvEAiHW2hJnKB/y0V81k5iSiE1rDA8ERRJCbZjW2rnzLkoK9eypDZ9nLsxyJ3bE1yoprA4T3Gi5TBW6RCxZDvmrAF7SiRqxknunJWsMLhnXGF02oMaNQofllVcFQv+STfxxQDR837G17sYKfjIFsI0W49zSDqML9BCvMvCsdAJ1LyfznWFEZFfbUomfcZOeEDEMSOiN1BPCz8pOHr12KcNBM7bUEUlDa10E5/00OQ8wZ+kI/g7JPSek1gSelxFK6d7T+MsW5i/1MlSRSMmNPD1S/wKDVmdWdn6rpUAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/36779828571f640b6d735eed473d09d9/ccc41/simba.png","srcSet":"/static/36779828571f640b6d735eed473d09d9/ccc41/simba.png 512w","sizes":"100vw"},"sources":[{"srcSet":"/static/36779828571f640b6d735eed473d09d9/d689f/simba.webp 512w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":1}}}}]},"fields":{"layout":"post","slug":"/post/2021-05-22-html-form-tag/"}},"next":{"excerpt":"Servlet 서블릿(Servlet…","timeToRead":2,"frontmatter":{"title":"Servlet 과 ServletContainer","tags":["http"],"date":"2021-05-23T12:00:00.000Z","draft":false,"excerpt":null,"image":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABjklEQVR42qWT20sbURCH8/+/CdI+qNAXRQX74AWDYl6Ugmku2njJNmaTLJXcN9mYGMzuzNeJ67UE1DrL7lnOnPnmNzOcBO80HfftI2+eS7yBsQfErxG5h+jngbFJfgUp7jzkkM8Bm/0hTa/ETS1HJxgyGt/FXP0g8DHgut1jP+NQqDTp9G/+Hzi120lIqd7j8PSK9EXlXu3HejhN+yK13o3wGx4NP6DeDegFAfpvCe9S+NB4HTSQozk0v4xmlmw4tg7br5NPz74Y1GvgyIdh95k76jK52CKsnxF6x4TFJDoZx05TP2viiSfp/Ws0u25jddBOBezVbhVaZWtmAI0i6qRi36CF5jZszwHfsz13hkKJkPN9tO4ghV3kdBtJfUGrWSv7G5peQw7mkZNN8yeR7HfUO0HSqxZzOQMYhWjQIkotEiUtsJwhOlq20m6JdueQzCbR3lfzL5iimgG3rYI/Bi0guZ0ZQOuN/j5GXMvq5tGKreVsrNz+tema2l92Y36g7RraqqKlNOrmkKufT8C/guLqYdHEraAAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/c8b5acb4c96abec5d4c1922f35e5b8f0/dcf3d/servlet.png","srcSet":"/static/c8b5acb4c96abec5d4c1922f35e5b8f0/dcf3d/servlet.png 648w","sizes":"100vw"},"sources":[{"srcSet":"/static/c8b5acb4c96abec5d4c1922f35e5b8f0/53915/servlet.webp 648w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.6728395061728395}}},"author":[{"name":"3기_영이","bio":"우아한테크코스 3기 영이(최준영)입니다 :)","avatar":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAgFBgn/xAAXAQADAQAAAAAAAAAAAAAAAAACBAUG/9oADAMBAAIQAxAAAAFLHRrsdMJ0jOw06H//xAAaEAADAQADAAAAAAAAAAAAAAADBAUGAQIH/9oACAEBAAEFAl2neWYGpw5W5Tnm7k0sTNdnWpk62KlhpZ2f/8QAIREAAgEDAwUAAAAAAAAAAAAAAQIDBBESBSExABMyYaH/2gAIAQMBAT8BOkVcGUAaIpUPZY/IARju5gsBxfA2a2RFwcdn0vUlYqtKkijYODHZhb3Op+Djr//EACARAAIBAwUBAQAAAAAAAAAAAAECAwUSIQAEERNhMTL/2gAIAQIBAT8B2k1PubdCSZBAiuFMYsDSS9ZBtZnZ2/S/OFznUVRozorNUuosOTG0M3K+G2Nl9wTg6//EACYQAAICAQQBAgcAAAAAAAAAAAIDAQQRBRIUIRMAIgYjMjRBQlH/2gAIAQEABj8C2ARSitEiFpld71XK5eJh1/eEeYJjG5DPb9IY/la/rmmFesrpceuttVZoC4cEu5ZZ5ZWEBifLLLH7ERKXJYOKLdQT8L1jisCq6m8dxDUVkE/cyxqxnBSK5Yzqd+8pOZ9LsBpDI2wcsYOp6iPjZkeOtVbkcaUY3wSiVIx7IjqPQ6cmxxo0RxqaLKC2y2w0mT8yYkQcPXZTu3Yjoe90lFGkGBgZ44Wa4FPc7pWF4A34mImYAc4j89+v/8QAGBABAQEBAQAAAAAAAAAAAAAAAREAITH/2gAIAQEAAT8hAQLEstl+rF5AdP34z3qSuWNf9hf0G8IFaxuChS2UQfD0PzPwdznLPYAJikIdExwrDESd1DOCwhX/2gAMAwEAAgADAAAAEAz/AP/EABgRAQEBAQEAAAAAAAAAAAAAAAERITEA/9oACAEDAQE/EKvrVODxKsRPiPsMMioBEJAZrazl/8QAGBEBAQEBAQAAAAAAAAAAAAAAAREhADH/2gAIAQIBAT8QSRZqgJEa2J2cHaXcGdS+mRAKBas//8QAFhABAQEAAAAAAAAAAAAAAAAAAQAR/9oACAEBAAE/EDv1Odeg2EIuCXvUOY8EoOqE1Li0RTG/5mwvwN3k/nKiFGsYGeM3chsF4W657+WEKt3Nk3//2Q=="},"images":{"fallback":{"src":"/static/56bc06af6518041e013d3ccfaedc1e8e/93fdb/younge.jpg","srcSet":"/static/56bc06af6518041e013d3ccfaedc1e8e/6c918/younge.jpg 750w,\n/static/56bc06af6518041e013d3ccfaedc1e8e/93fdb/younge.jpg 960w","sizes":"100vw"},"sources":[{"srcSet":"/static/56bc06af6518041e013d3ccfaedc1e8e/66907/younge.webp 750w,\n/static/56bc06af6518041e013d3ccfaedc1e8e/55375/younge.webp 960w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.75}}}}]},"fields":{"layout":"post","slug":"/post/2021-05-23-servlet-servletcontainer/"}},"primaryTag":"spring"}},"staticQueryHashes":["2337738035"],"slicesMap":{}}